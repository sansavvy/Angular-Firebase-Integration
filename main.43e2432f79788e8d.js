"use strict";(self.webpackChunkForm_validation=self.webpackChunkForm_validation||[]).push([[179],{6304:(Et,Me,O)=>{O.d(Me,{Dh:()=>Le,GT:()=>ve,cc:()=>Oe,hO:()=>We,on:()=>U,pX:()=>oe,xv:()=>fe});var f=O(5879),te=O(120),L=O(2793);Et=O.hmd(Et);const J=["ngOnDestroy"],oe=(Ue,bt,wt,ue={})=>new Proxy(Ue,{get:(Ae,se)=>wt.runOutsideAngular(()=>{var xe;if(Ue[se])return!(null===(xe=ue?.spy)||void 0===xe)&&xe.get&&ue.spy.get(se,Ue[se]),Ue[se];if(J.indexOf(se)>-1)return()=>{};const He=bt.toPromise().then(de=>{const Q=de&&de[se];return"function"==typeof Q?Q.bind(de):Q&&Q.then?Q.then(Qe=>wt.run(()=>Qe)):wt.run(()=>Q)});return new Proxy(()=>{},{get:(de,Q)=>He[Q],apply:(de,Q,Qe)=>He.then(Dt=>{var pn;const Rn=Dt&&Dt(...Qe);return!(null===(pn=ue?.spy)||void 0===pn)&&pn.apply&&ue.spy.apply(se,Qe,Rn),Rn})})})}),ve=(Ue,bt)=>{bt.forEach(wt=>{Object.getOwnPropertyNames(wt.prototype||wt).forEach(ue=>{Object.defineProperty(Ue.prototype,ue,Object.getOwnPropertyDescriptor(wt.prototype||wt,ue))})})};class Ee{constructor(bt){return bt}}const Le=new f.OlP("angularfire2.app.options"),fe=new f.OlP("angularfire2.app.name");function U(Ue,bt,wt){const Ae="object"==typeof wt&&wt||{};Ae.name=Ae.name||"string"==typeof wt&&wt||"[DEFAULT]";const xe=te.Z.apps.filter(He=>He&&He.name===Ae.name)[0]||bt.runOutsideAngular(()=>te.Z.initializeApp(Ue,Ae));try{JSON.stringify(Ue)!==JSON.stringify(xe.options)&&G("error",`${xe.name} Firebase App already initialized with different options${Et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ee(xe)}const G=(Ue,...bt)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Ue](...bt)},re={provide:Ee,useFactory:U,deps:[Le,f.R0b,[new f.FiY,fe]]};let We=(()=>{class Ue{constructor(wt){te.Z.registerVersion("angularfire",L.q4.full,"core"),te.Z.registerVersion("angularfire",L.q4.full,"app-compat"),te.Z.registerVersion("angular",f.q4F.full,wt.toString())}static initializeApp(wt,ue){return{ngModule:Ue,providers:[{provide:Le,useValue:wt},{provide:fe,useValue:ue}]}}}return Ue.\u0275fac=function(wt){return new(wt||Ue)(f.LFG(f.Lbi))},Ue.\u0275mod=f.oAB({type:Ue}),Ue.\u0275inj=f.cJS({providers:[re]}),Ue})();function Oe(Ue,bt,wt,ue,Ae){const[,se,xe]=globalThis.\u0275AngularfireInstanceCache.find(He=>He[0]===Ue)||[];if(se)return function et(Ue,bt){try{return Ue.toString()===bt.toString()}catch{return Ue===bt}}(Ae,xe)||(tt("error",`${bt} was already initialized on the ${wt} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),tt("warn",{is:Ae,was:xe})),se;{const He=ue();return globalThis.\u0275AngularfireInstanceCache.push([Ue,He,Ae]),He}}const Ve=!!Et.hot,tt=(Ue,...bt)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Ue](...bt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(Et,Me,O)=>{O.d(Me,{q4:()=>ns,iC:()=>Im,HU:()=>Jd,vb:()=>Oa,JM:()=>Tu});var f=O(5879),te=O(4097),L=O(5861),J=O(4303),oe=O(9058),ve=O(4537),Ee=O(7879);const Le=(b,A)=>A.some(R=>b instanceof R);let fe,U;const We=new WeakMap,Oe=new WeakMap,et=new WeakMap,Ve=new WeakMap,tt=new WeakMap;let wt={get(b,A,R){if(b instanceof IDBTransaction){if("done"===A)return Oe.get(b);if("objectStoreNames"===A)return b.objectStoreNames||et.get(b);if("store"===A)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return xe(b[A])},set:(b,A,R)=>(b[A]=R,!0),has:(b,A)=>b instanceof IDBTransaction&&("done"===A||"store"===A)||A in b};function se(b){return"function"==typeof b?function Ae(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function re(){return U||(U=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(b)?function(...A){return b.apply(He(this),A),xe(We.get(this))}:function(...A){return xe(b.apply(He(this),A))}:function(A,...R){const F=b.call(He(this),A,...R);return et.set(F,A.sort?A.sort():[A]),xe(F)}}(b):(b instanceof IDBTransaction&&function bt(b){if(Oe.has(b))return;const A=new Promise((R,F)=>{const H=()=>{b.removeEventListener("complete",X),b.removeEventListener("error",pe),b.removeEventListener("abort",pe)},X=()=>{R(),H()},pe=()=>{F(b.error||new DOMException("AbortError","AbortError")),H()};b.addEventListener("complete",X),b.addEventListener("error",pe),b.addEventListener("abort",pe)});Oe.set(b,A)}(b),Le(b,function G(){return fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(b,wt):b)}function xe(b){if(b instanceof IDBRequest)return function Ue(b){const A=new Promise((R,F)=>{const H=()=>{b.removeEventListener("success",X),b.removeEventListener("error",pe)},X=()=>{R(xe(b.result)),H()},pe=()=>{F(b.error),H()};b.addEventListener("success",X),b.addEventListener("error",pe)});return A.then(R=>{R instanceof IDBCursor&&We.set(R,b)}).catch(()=>{}),tt.set(A,b),A}(b);if(Ve.has(b))return Ve.get(b);const A=se(b);return A!==b&&(Ve.set(b,A),tt.set(A,b)),A}const He=b=>tt.get(b),Qe=["get","getKey","getAll","getAllKeys","count"],Dt=["put","add","delete","clear"],pn=new Map;function Rn(b,A){if(!(b instanceof IDBDatabase)||A in b||"string"!=typeof A)return;if(pn.get(A))return pn.get(A);const R=A.replace(/FromIndex$/,""),F=A!==R,H=Dt.includes(R);if(!(R in(F?IDBIndex:IDBObjectStore).prototype)||!H&&!Qe.includes(R))return;const X=function(){var pe=(0,L.Z)(function*(nt,...Ze){const yt=this.transaction(nt,H?"readwrite":"readonly");let Ht=yt.store;return F&&(Ht=Ht.index(Ze.shift())),(yield Promise.all([Ht[R](...Ze),H&&yt.done]))[0]});return function(Ze){return pe.apply(this,arguments)}}();return pn.set(A,X),X}!function ue(b){wt=b(wt)}(b=>({...b,get:(A,R,F)=>Rn(A,R)||b.get(A,R,F),has:(A,R)=>!!Rn(A,R)||b.has(A,R)}));const Pn="@firebase/installations",Zn="0.6.4",Gn=1e4,Dr=`w:${Zn}`,ce="FIS_v2",ye="https://firebaseinstallations.googleapis.com/v1",Ie=36e5,it=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Je(b){return b instanceof oe.ZR&&b.code.includes("request-failed")}function Qn({projectId:b}){return`${ye}/projects/${b}/installations`}function Rt(b){return{token:b.token,requestStatus:2,expiresIn:Yr(b.expiresIn),creationTime:Date.now()}}function cn(b,A){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,L.Z)(function*(b,A){const F=(yield A.json()).error;return it.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Mn({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function ir(b){return yn.apply(this,arguments)}function yn(){return(yn=(0,L.Z)(function*(b){const A=yield b();return A.status>=500&&A.status<600?b():A})).apply(this,arguments)}function Yr(b){return Number(b.replace("s","000"))}function sr(){return(sr=(0,L.Z)(function*({appConfig:b,heartbeatServiceProvider:A},{fid:R}){const F=Qn(b),H=Mn(b),X=A.getImmediate({optional:!0});if(X){const yt=yield X.getHeartbeatsHeader();yt&&H.append("x-firebase-client",yt)}const nt={method:"POST",headers:H,body:JSON.stringify({fid:R,authVersion:ce,appId:b.appId,sdkVersion:Dr})},Ze=yield ir(()=>fetch(F,nt));if(Ze.ok){const yt=yield Ze.json();return{fid:yt.fid||R,registrationStatus:2,refreshToken:yt.refreshToken,authToken:Rt(yt.authToken)}}throw yield cn("Create Installation",Ze)})).apply(this,arguments)}function Fi(b){return new Promise(A=>{setTimeout(A,b)})}const ha=/^[cdef][\w-]{21}$/,Mt="";function Ut(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const R=function qt(b){return function po(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return ha.test(R)?R:Mt}catch{return Mt}}function An(b){return`${b.appName}!${b.appId}`}const Un=new Map;function lr(b,A){const R=An(b);go(R,A),function ln(b,A){const R=function dn(){return!Xr&&"BroadcastChannel"in self&&(Xr=new BroadcastChannel("[Firebase] FID Change"),Xr.onmessage=b=>{go(b.data.key,b.data.fid)}),Xr}();R&&R.postMessage({key:b,fid:A}),function Xi(){0===Un.size&&Xr&&(Xr.close(),Xr=null)}()}(R,A)}function go(b,A){const R=Un.get(b);if(R)for(const F of R)F(A)}let Xr=null;const mo="firebase-installations-database",$o=1,Jr="firebase-installations-store";let Ks=null;function Ce(){return Ks||(Ks=function de(b,A,{blocked:R,upgrade:F,blocking:H,terminated:X}={}){const pe=indexedDB.open(b,A),nt=xe(pe);return F&&pe.addEventListener("upgradeneeded",Ze=>{F(xe(pe.result),Ze.oldVersion,Ze.newVersion,xe(pe.transaction))}),R&&pe.addEventListener("blocked",()=>R()),nt.then(Ze=>{X&&Ze.addEventListener("close",()=>X()),H&&Ze.addEventListener("versionchange",()=>H())}).catch(()=>{}),nt}(mo,$o,{upgrade:(b,A)=>{0===A&&b.createObjectStore(Jr)}})),Ks}function W(b,A){return we.apply(this,arguments)}function we(){return(we=(0,L.Z)(function*(b,A){const R=An(b),H=(yield Ce()).transaction(Jr,"readwrite"),X=H.objectStore(Jr),pe=yield X.get(R);return yield X.put(A,R),yield H.done,(!pe||pe.fid!==A.fid)&&lr(b,A.fid),A})).apply(this,arguments)}function Xe(b){return st.apply(this,arguments)}function st(){return(st=(0,L.Z)(function*(b){const A=An(b),F=(yield Ce()).transaction(Jr,"readwrite");yield F.objectStore(Jr).delete(A),yield F.done})).apply(this,arguments)}function At(b,A){return mn.apply(this,arguments)}function mn(){return(mn=(0,L.Z)(function*(b,A){const R=An(b),H=(yield Ce()).transaction(Jr,"readwrite"),X=H.objectStore(Jr),pe=yield X.get(R),nt=A(pe);return void 0===nt?yield X.delete(R):yield X.put(nt,R),yield H.done,nt&&(!pe||pe.fid!==nt.fid)&&lr(b,nt.fid),nt})).apply(this,arguments)}function $(b){return j.apply(this,arguments)}function j(){return j=(0,L.Z)(function*(b){let A;const R=yield At(b.appConfig,F=>{const H=function Y(b){return Wt(b||{fid:Ut(),registrationStatus:0})}(F),X=function Pe(b,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(it.create("app-offline"))};const R={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},F=function he(b,A){return dt.apply(this,arguments)}(b,R);return{installationEntry:R,registrationPromise:F}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:zt(b)}:{installationEntry:A}}(b,H);return A=X.registrationPromise,X.installationEntry});return R.fid===Mt?{installationEntry:yield A}:{installationEntry:R,registrationPromise:A}}),j.apply(this,arguments)}function dt(){return dt=(0,L.Z)(function*(b,A){try{const R=yield function Yi(b,A){return sr.apply(this,arguments)}(b,A);return W(b.appConfig,R)}catch(R){throw Je(R)&&409===R.customData.serverCode?yield Xe(b.appConfig):yield W(b.appConfig,{fid:A.fid,registrationStatus:0}),R}}),dt.apply(this,arguments)}function zt(b){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,L.Z)(function*(b){let A=yield ei(b.appConfig);for(;1===A.registrationStatus;)yield Fi(100),A=yield ei(b.appConfig);if(0===A.registrationStatus){const{installationEntry:R,registrationPromise:F}=yield $(b);return F||R}return A})).apply(this,arguments)}function ei(b){return At(b,A=>{if(!A)throw it.create("installation-not-found");return Wt(A)})}function Wt(b){return function dr(b){return 1===b.registrationStatus&&b.registrationTime+Gn<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function jr(){return(jr=(0,L.Z)(function*({appConfig:b,heartbeatServiceProvider:A},R){const F=function Ho(b,{fid:A}){return`${Qn(b)}/${A}/authTokens:generate`}(b,R),H=function Fn(b,{refreshToken:A}){const R=Mn(b);return R.append("Authorization",function Oi(b){return`${ce} ${b}`}(A)),R}(b,R),X=A.getImmediate({optional:!0});if(X){const yt=yield X.getHeartbeatsHeader();yt&&H.append("x-firebase-client",yt)}const nt={method:"POST",headers:H,body:JSON.stringify({installation:{sdkVersion:Dr,appId:b.appId}})},Ze=yield ir(()=>fetch(F,nt));if(Ze.ok)return Rt(yield Ze.json());throw yield cn("Generate Auth Token",Ze)})).apply(this,arguments)}function tu(b){return Id.apply(this,arguments)}function Id(){return Id=(0,L.Z)(function*(b,A=!1){let R;const F=yield At(b.appConfig,X=>{if(!qo(X))throw it.create("not-registered");const pe=X.authToken;if(!A&&function nu(b){return 2===b.requestStatus&&!function Yu(b){const A=Date.now();return A<b.creationTime||b.creationTime+b.expiresIn<A+Ie}(b)}(pe))return X;if(1===pe.requestStatus)return R=function Zs(b,A){return Go.apply(this,arguments)}(b,A),X;{if(!navigator.onLine)throw it.create("app-offline");const nt=function Cf(b){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:A})}(X);return R=function Rs(b,A){return rn.apply(this,arguments)}(b,nt),nt}});return R?yield R:F.authToken}),Id.apply(this,arguments)}function Go(){return(Go=(0,L.Z)(function*(b,A){let R=yield xs(b.appConfig);for(;1===R.authToken.requestStatus;)yield Fi(100),R=yield xs(b.appConfig);const F=R.authToken;return 0===F.requestStatus?tu(b,A):F})).apply(this,arguments)}function xs(b){return At(b,A=>{if(!qo(A))throw it.create("not-registered");return function Qs(b){return 1===b.requestStatus&&b.requestTime+Gn<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function rn(){return rn=(0,L.Z)(function*(b,A){try{const R=yield function hn(b,A){return jr.apply(this,arguments)}(b,A),F=Object.assign(Object.assign({},A),{authToken:R});return yield W(b.appConfig,F),R}catch(R){if(!Je(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const F=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield W(b.appConfig,F)}else yield Xe(b.appConfig);throw R}}),rn.apply(this,arguments)}function qo(b){return void 0!==b&&2===b.registrationStatus}function ru(){return(ru=(0,L.Z)(function*(b){const A=b,{installationEntry:R,registrationPromise:F}=yield $(A);return F?F.catch(console.error):tu(A).catch(console.error),R.fid})).apply(this,arguments)}function iu(){return iu=(0,L.Z)(function*(b,A=!1){const R=b;return yield function wd(b){return ds.apply(this,arguments)}(R),(yield tu(R,A)).token}),iu.apply(this,arguments)}function ds(){return(ds=(0,L.Z)(function*(b){const{registrationPromise:A}=yield $(b);A&&(yield A)})).apply(this,arguments)}function su(b){return it.create("missing-app-config-values",{valueName:b})}const bd="installations",By=b=>{const A=b.getProvider("app").getImmediate(),R=function Li(b){if(!b||!b.options)throw su("App Configuration");if(!b.name)throw su("App Name");const A=["projectId","apiKey","appId"];for(const R of A)if(!b.options[R])throw su(R);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(A);return{app:A,appConfig:R,heartbeatServiceProvider:(0,J.qX)(A,"heartbeat"),_delete:()=>Promise.resolve()}},ga=b=>{const A=b.getProvider("app").getImmediate(),R=(0,J.qX)(A,bd).getImmediate();return{getId:()=>function fa(b){return ru.apply(this,arguments)}(R),getToken:H=>function Ed(b){return iu.apply(this,arguments)}(R,H)}};(function em(){(0,J.Xd)(new ve.wA(bd,By,"PUBLIC")),(0,J.Xd)(new ve.wA("installations-internal",ga,"PRIVATE"))})(),(0,J.KN)(Pn,Zn),(0,J.KN)(Pn,Zn,"esm2017");const Ju="@firebase/remote-config",ti=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ot{constructor(A,R,F,H){this.client=A,this.storage=R,this.storageCache=F,this.logger=H}isCachedDataFresh(A,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-R,H=F<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${H}.`),H}fetch(A){var R=this;return(0,L.Z)(function*(){const[F,H]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(H&&R.isCachedDataFresh(A.cacheMaxAgeMillis,F))return H;A.eTag=H&&H.eTag;const X=yield R.client.fetch(A),pe=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&pe.push(R.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(pe),X})()}}function Bn(b=navigator){return b.languages&&b.languages[0]||b.language}class pi{constructor(A,R,F,H,X,pe){this.firebaseInstallations=A,this.sdkVersion=R,this.namespace=F,this.projectId=H,this.apiKey=X,this.appId=pe}fetch(A){var R=this;return(0,L.Z)(function*(){const[F,H]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,nt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},Ze={sdk_version:R.sdkVersion,app_instance_id:F,app_instance_id_token:H,app_id:R.appId,language_code:Bn()},yt={method:"POST",headers:nt,body:JSON.stringify(Ze)},Ht=fetch(pe,yt),$t=new Promise((Ti,to)=>{A.signal.addEventListener(()=>{const eh=new Error("The operation was aborted.");eh.name="AbortError",to(eh)})});let wi;try{yield Promise.race([Ht,$t]),wi=yield Ht}catch(Ti){let to="fetch-client-network";throw"AbortError"===Ti?.name&&(to="fetch-timeout"),ti.create(to,{originalErrorMessage:Ti?.message})}let _n=wi.status;const Ns=wi.headers.get("ETag")||void 0;let ia,sa;if(200===wi.status){let Ti;try{Ti=yield wi.json()}catch(to){throw ti.create("fetch-client-parse",{originalErrorMessage:to?.message})}ia=Ti.entries,sa=Ti.state}if("INSTANCE_STATE_UNSPECIFIED"===sa?_n=500:"NO_CHANGE"===sa?_n=304:("NO_TEMPLATE"===sa||"EMPTY_CONFIG"===sa)&&(ia={}),304!==_n&&200!==_n)throw ti.create("fetch-status",{httpStatus:_n});return{status:_n,eTag:Ns,config:ia}})()}}class nc{constructor(A,R){this.client=A,this.storage=R}fetch(A){var R=this;return(0,L.Z)(function*(){const F=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(A,F)})()}attemptFetch(A,{throttleEndTimeMillis:R,backoffCount:F}){var H=this;return(0,L.Z)(function*(){yield function ma(b,A){return new Promise((R,F)=>{const H=Math.max(A-Date.now(),0),X=setTimeout(R,H);b.addEventListener(()=>{clearTimeout(X),F(ti.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,R);try{const X=yield H.client.fetch(A);return yield H.storage.deleteThrottleMetadata(),X}catch(X){if(!function $r(b){if(!(b instanceof oe.ZR&&b.customData))return!1;const A=Number(b.customData.httpStatus);return 429===A||500===A||503===A||504===A}(X))throw X;const pe={throttleEndTimeMillis:Date.now()+(0,oe.$s)(F),backoffCount:F+1};return yield H.storage.setThrottleMetadata(pe),H.attemptFetch(A,pe)}})()}}class au{constructor(A,R,F,H,X){this.app=A,this._client=R,this._storageCache=F,this._storage=H,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Vt(b,A){const R=b.target.error||void 0;return ti.create(A,{originalErrorMessage:R&&R?.message})}const Hr="app_namespace_store";class Sd{constructor(A,R,F,H=function jn(){return new Promise((b,A)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=F=>{A(Vt(F,"storage-open"))},R.onsuccess=F=>{b(F.target.result)},R.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Hr,{keyPath:"compositeKey"})}}catch(R){A(ti.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=A,this.appName=R,this.namespace=F,this.openDbPromise=H}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var R=this;return(0,L.Z)(function*(){const F=yield R.openDbPromise;return new Promise((H,X)=>{const nt=F.transaction([Hr],"readonly").objectStore(Hr),Ze=R.createCompositeKey(A);try{const yt=nt.get(Ze);yt.onerror=Ht=>{X(Vt(Ht,"storage-get"))},yt.onsuccess=Ht=>{const $t=Ht.target.result;H($t?$t.value:void 0)}}catch(yt){X(ti.create("storage-get",{originalErrorMessage:yt?.message}))}})})()}set(A,R){var F=this;return(0,L.Z)(function*(){const H=yield F.openDbPromise;return new Promise((X,pe)=>{const Ze=H.transaction([Hr],"readwrite").objectStore(Hr),yt=F.createCompositeKey(A);try{const Ht=Ze.put({compositeKey:yt,value:R});Ht.onerror=$t=>{pe(Vt($t,"storage-set"))},Ht.onsuccess=()=>{X()}}catch(Ht){pe(ti.create("storage-set",{originalErrorMessage:Ht?.message}))}})})()}delete(A){var R=this;return(0,L.Z)(function*(){const F=yield R.openDbPromise;return new Promise((H,X)=>{const nt=F.transaction([Hr],"readwrite").objectStore(Hr),Ze=R.createCompositeKey(A);try{const yt=nt.delete(Ze);yt.onerror=Ht=>{X(Vt(Ht,"storage-delete"))},yt.onsuccess=()=>{H()}}catch(yt){X(ti.create("storage-delete",{originalErrorMessage:yt?.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class _a{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,L.Z)(function*(){const R=A.storage.getLastFetchStatus(),F=A.storage.getLastSuccessfulFetchTimestampMillis(),H=A.storage.getActiveConfig(),X=yield R;X&&(A.lastFetchStatus=X);const pe=yield F;pe&&(A.lastSuccessfulFetchTimestampMillis=pe);const nt=yield H;nt&&(A.activeConfig=nt)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function Ko(){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,L.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function Ar(){(0,J.Xd)(new ve.wA("remote-config",function b(A,{instanceIdentifier:R}){const F=A.getProvider("app").getImmediate(),H=A.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ti.create("registration-window");if(!(0,oe.hl)())throw ti.create("indexed-db-unavailable");const{projectId:X,apiKey:pe,appId:nt}=F.options;if(!X)throw ti.create("registration-project-id");if(!pe)throw ti.create("registration-api-key");if(!nt)throw ti.create("registration-app-id");const Ze=new Sd(nt,F.name,R=R||"firebase"),yt=new _a(Ze),Ht=new Ee.Yd(Ju);Ht.logLevel=Ee.in.ERROR;const $t=new pi(H,J.Jn,R,X,pe,nt),wi=new nc($t,Ze),_n=new Ot(wi,Ze,yt,Ht),Ns=new au(F,_n,yt,Ze,Ht);return function hi(b){const A=(0,oe.m9)(b);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Ns),Ns},"PUBLIC").setMultipleInstances(!0)),(0,J.KN)(Ju,"0.4.4"),(0,J.KN)(Ju,"0.4.4","esm2017")}();const Wc=(b,A)=>A.some(R=>b instanceof R);let ya,Zt;const Kc=new WeakMap,Sr=new WeakMap,va=new WeakMap,xr=new WeakMap,Zo=new WeakMap;let Rr={get(b,A,R){if(b instanceof IDBTransaction){if("done"===A)return Sr.get(b);if("objectStoreNames"===A)return b.objectStoreNames||va.get(b);if("store"===A)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return es(b[A])},set:(b,A,R)=>(b[A]=R,!0),has:(b,A)=>b instanceof IDBTransaction&&("done"===A||"store"===A)||A in b};function Ia(b){return"function"==typeof b?function Zc(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function uu(){return Zt||(Zt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(b)?function(...A){return b.apply(Vi(this),A),es(Kc.get(this))}:function(...A){return es(b.apply(Vi(this),A))}:function(A,...R){const F=b.call(Vi(this),A,...R);return va.set(F,A.sort?A.sort():[A]),es(F)}}(b):(b instanceof IDBTransaction&&function rm(b){if(Sr.has(b))return;const A=new Promise((R,F)=>{const H=()=>{b.removeEventListener("complete",X),b.removeEventListener("error",pe),b.removeEventListener("abort",pe)},X=()=>{R(),H()},pe=()=>{F(b.error||new DOMException("AbortError","AbortError")),H()};b.addEventListener("complete",X),b.addEventListener("error",pe),b.addEventListener("abort",pe)});Sr.set(b,A)}(b),Wc(b,function jy(){return ya||(ya=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(b,Rr):b)}function es(b){if(b instanceof IDBRequest)return function Gr(b){const A=new Promise((R,F)=>{const H=()=>{b.removeEventListener("success",X),b.removeEventListener("error",pe)},X=()=>{R(es(b.result)),H()},pe=()=>{F(b.error),H()};b.addEventListener("success",X),b.addEventListener("error",pe)});return A.then(R=>{R instanceof IDBCursor&&Kc.set(R,b)}).catch(()=>{}),Zo.set(A,b),A}(b);if(xr.has(b))return xr.get(b);const A=Ia(b);return A!==b&&(xr.set(b,A),Zo.set(A,b)),A}const Vi=b=>Zo.get(b);function cu(b,A,{blocked:R,upgrade:F,blocking:H,terminated:X}={}){const pe=indexedDB.open(b,A),nt=es(pe);return F&&pe.addEventListener("upgradeneeded",Ze=>{F(es(pe.result),Ze.oldVersion,Ze.newVersion,es(pe.transaction))}),R&&pe.addEventListener("blocked",()=>R()),nt.then(Ze=>{X&&Ze.addEventListener("close",()=>X()),H&&Ze.addEventListener("versionchange",()=>H())}).catch(()=>{}),nt}function lu(b,{blocked:A}={}){const R=indexedDB.deleteDatabase(b);return A&&R.addEventListener("blocked",()=>A()),es(R).then(()=>{})}const xd=["get","getKey","getAll","getAllKeys","count"],$y=["put","add","delete","clear"],Qc=new Map;function Rd(b,A){if(!(b instanceof IDBDatabase)||A in b||"string"!=typeof A)return;if(Qc.get(A))return Qc.get(A);const R=A.replace(/FromIndex$/,""),F=A!==R,H=$y.includes(R);if(!(R in(F?IDBIndex:IDBObjectStore).prototype)||!H&&!xd.includes(R))return;const X=function(){var pe=(0,L.Z)(function*(nt,...Ze){const yt=this.transaction(nt,H?"readwrite":"readonly");let Ht=yt.store;return F&&(Ht=Ht.index(Ze.shift())),(yield Promise.all([Ht[R](...Ze),H&&yt.done]))[0]});return function(Ze){return pe.apply(this,arguments)}}();return Qc.set(A,X),X}!function gi(b){Rr=b(Rr)}(b=>({...b,get:(A,R,F)=>Rd(A,R)||b.get(A,R,F),has:(A,R)=>!!Rd(A,R)||b.has(A,R)}));const Rf="/firebase-messaging-sw.js",Pd="/firebase-cloud-messaging-push-scope",Pf="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Hy="https://fcmregistrations.googleapis.com/v1",$n="google.c.a.c_id",Gy="google.c.a.c_l",im="google.c.a.ts";var Mf=function(b){return b.PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",b}(Mf||{});function Eo(b){const A=new Uint8Array(b);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Md(b){const R=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(R),H=new Uint8Array(F.length);for(let X=0;X<F.length;++X)H[X]=F.charCodeAt(X);return H}const du="fcm_token_details_db",Nd=5,rc="fcm_token_object_Store";function ic(){return ic=(0,L.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(du))return null;let A=null;return(yield cu(du,Nd,{upgrade:(F=(0,L.Z)(function*(H,X,pe,nt){var Ze;if(X<2||!H.objectStoreNames.contains(rc))return;const yt=nt.objectStore(rc),Ht=yield yt.index("fcmSenderId").get(b);if(yield yt.clear(),Ht)if(2===X){const $t=Ht;if(!$t.auth||!$t.p256dh||!$t.endpoint)return;A={token:$t.fcmToken,createTime:null!==(Ze=$t.createTime)&&void 0!==Ze?Ze:Date.now(),subscriptionOptions:{auth:$t.auth,p256dh:$t.p256dh,endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:"string"==typeof $t.vapidKey?$t.vapidKey:Eo($t.vapidKey)}}}else if(3===X){const $t=Ht;A={token:$t.fcmToken,createTime:$t.createTime,subscriptionOptions:{auth:Eo($t.auth),p256dh:Eo($t.p256dh),endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:Eo($t.vapidKey)}}}else if(4===X){const $t=Ht;A={token:$t.fcmToken,createTime:$t.createTime,subscriptionOptions:{auth:Eo($t.auth),p256dh:Eo($t.p256dh),endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:Eo($t.vapidKey)}}}}),function(X,pe,nt,Ze){return F.apply(this,arguments)})})).close(),yield lu(du),yield lu("fcm_vapid_details_db"),yield lu("undefined"),function Ea(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:A}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}(A)?A:null;var F}),ic.apply(this,arguments)}const Yc="firebase-messaging-database",Nf=1,mi="firebase-messaging-store";let Xc=null;function Jc(){return Xc||(Xc=cu(Yc,Nf,{upgrade:(b,A)=>{0===A&&b.createObjectStore(mi)}})),Xc}function kd(b){return hu.apply(this,arguments)}function hu(){return hu=(0,L.Z)(function*(b){const A=ar(b),F=yield(yield Jc()).transaction(mi).objectStore(mi).get(A);if(F)return F;{const H=yield function _0(b){return ic.apply(this,arguments)}(b.appConfig.senderId);if(H)return yield om(b,H),H}}),hu.apply(this,arguments)}function om(b,A){return el.apply(this,arguments)}function el(){return(el=(0,L.Z)(function*(b,A){const R=ar(b),H=(yield Jc()).transaction(mi,"readwrite");return yield H.objectStore(mi).put(A,R),yield H.done,A})).apply(this,arguments)}function wa(){return(wa=(0,L.Z)(function*(b){const A=ar(b),F=(yield Jc()).transaction(mi,"readwrite");yield F.objectStore(mi).delete(A),yield F.done})).apply(this,arguments)}function ar({appConfig:b}){return b.appId}const _i=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function tl(b,A){return nl.apply(this,arguments)}function nl(){return(nl=(0,L.Z)(function*(b,A){const R=yield Od(b),F=um(A),H={method:"POST",headers:R,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(fu(b.appConfig),H)).json()}catch(pe){throw _i.create("token-subscribe-failed",{errorInfo:pe?.toString()})}if(X.error)throw _i.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw _i.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function kf(){return(kf=(0,L.Z)(function*(b,A){const R=yield Od(b),F=um(A.subscriptionOptions),H={method:"PATCH",headers:R,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${fu(b.appConfig)}/${A.token}`,H)).json()}catch(pe){throw _i.create("token-update-failed",{errorInfo:pe?.toString()})}if(X.error)throw _i.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw _i.create("token-update-no-token");return X.token})).apply(this,arguments)}function Of(b,A){return rl.apply(this,arguments)}function rl(){return(rl=(0,L.Z)(function*(b,A){const F={method:"DELETE",headers:yield Od(b)};try{const X=yield(yield fetch(`${fu(b.appConfig)}/${A}`,F)).json();if(X.error)throw _i.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(H){throw _i.create("token-unsubscribe-failed",{errorInfo:H?.toString()})}})).apply(this,arguments)}function fu({projectId:b}){return`${Hy}/projects/${b}/registrations`}function Od(b){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,L.Z)(function*({appConfig:b,installations:A}){const R=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function um({p256dh:b,auth:A,endpoint:R,vapidKey:F}){const H={web:{endpoint:R,auth:A,p256dh:b}};return F!==Pf&&(H.web.applicationPubKey=F),H}const cm=6048e5;function il(){return il=(0,L.Z)(function*(b){const A=yield function oc(b,A){return Fd.apply(this,arguments)}(b.swRegistration,b.vapidKey),R={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:A.endpoint,auth:Eo(A.getKey("auth")),p256dh:Eo(A.getKey("p256dh"))},F=yield kd(b.firebaseDependencies);if(F){if(function Uf(b,A){return A.vapidKey===b.vapidKey&&A.endpoint===b.endpoint&&A.auth===b.auth&&A.p256dh===b.p256dh}(F.subscriptionOptions,R))return Date.now()>=F.createTime+cm?function lm(b,A){return pu.apply(this,arguments)}(b,{token:F.token,createTime:Date.now(),subscriptionOptions:R}):F.token;try{yield Of(b.firebaseDependencies,F.token)}catch(H){console.warn(H)}return Vf(b.firebaseDependencies,R)}return Vf(b.firebaseDependencies,R)}),il.apply(this,arguments)}function Lf(){return Lf=(0,L.Z)(function*(b){const A=yield kd(b.firebaseDependencies);A&&(yield Of(b.firebaseDependencies,A.token),yield function Ys(b){return wa.apply(this,arguments)}(b.firebaseDependencies));const R=yield b.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()}),Lf.apply(this,arguments)}function pu(){return pu=(0,L.Z)(function*(b,A){try{const R=yield function sc(b,A){return kf.apply(this,arguments)}(b.firebaseDependencies,A),F=Object.assign(Object.assign({},A),{token:R,createTime:Date.now()});return yield om(b.firebaseDependencies,F),R}catch(R){throw yield function Ff(b){return Lf.apply(this,arguments)}(b),R}}),pu.apply(this,arguments)}function Vf(b,A){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,L.Z)(function*(b,A){const F={token:yield tl(b,A),createTime:Date.now(),subscriptionOptions:A};return yield om(b,F),F.token})).apply(this,arguments)}function Fd(){return(Fd=(0,L.Z)(function*(b,A){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Md(A)})})).apply(this,arguments)}function sl(b){const A={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function ba(b,A){if(!A.notification)return;b.notification={};const R=A.notification.title;R&&(b.notification.title=R);const F=A.notification.body;F&&(b.notification.body=F);const H=A.notification.image;H&&(b.notification.image=H);const X=A.notification.icon;X&&(b.notification.icon=X)}(A,b),function dm(b,A){A.data&&(b.data=A.data)}(A,b),function ps(b,A){var R,F,H,X,pe;if(!(A.fcmOptions||null!==(R=A.notification)&&void 0!==R&&R.click_action))return;b.fcmOptions={};const nt=null!==(H=null===(F=A.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==H?H:null===(X=A.notification)||void 0===X?void 0:X.click_action;nt&&(b.fcmOptions.link=nt);const Ze=null===(pe=A.fcmOptions)||void 0===pe?void 0:pe.analytics_label;Ze&&(b.fcmOptions.analyticsLabel=Ze)}(A,b),A}function Ld(b,A){const R=[];for(let F=0;F<b.length;F++)R.push(b.charAt(F)),F<A.length&&R.push(A.charAt(F));return R.join("")}function ol(b){return _i.create("missing-app-config-values",{valueName:b})}Ld("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ld("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class al{constructor(A,R,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const H=function Nn(b){if(!b||!b.options)throw ol("App Configuration Object");if(!b.name)throw ol("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:R}=b;for(const F of A)if(!R[F])throw ol(F);return{appName:b.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:H,installations:R,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ul(){return(ul=(0,L.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Rf,{scope:Pd}),b.swRegistration.update().catch(()=>{})}catch(A){throw _i.create("failed-service-worker-registration",{browserErrorMessage:A?.message})}})).apply(this,arguments)}function gs(){return(gs=(0,L.Z)(function*(b,A){if(!A&&!b.swRegistration&&(yield function yi(b){return ul.apply(this,arguments)}(b)),A||!b.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw _i.create("invalid-sw-registration");b.swRegistration=A}})).apply(this,arguments)}function gu(){return(gu=(0,L.Z)(function*(b,A){A?b.vapidKey=A:b.vapidKey||(b.vapidKey=Pf)})).apply(this,arguments)}function Vd(){return Vd=(0,L.Z)(function*(b,A){if(!navigator)throw _i.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw _i.create("permission-blocked");return yield function ur(b,A){return gu.apply(this,arguments)}(b,A?.vapidKey),yield function Bf(b,A){return gs.apply(this,arguments)}(b,A?.serviceWorkerRegistration),function y0(b){return il.apply(this,arguments)}(b)}),Vd.apply(this,arguments)}function Ud(){return(Ud=(0,L.Z)(function*(b,A,R){const F=function fm(b){switch(b){case Mf.NOTIFICATION_CLICKED:return"notification_open";case Mf.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(A);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:R[$n],message_name:R[Gy],message_time:R[im],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ca(){return Ca=(0,L.Z)(function*(b,A){const R=A.data;if(!R.isFirebaseMessaging)return;b.onMessageHandler&&R.messageType===Mf.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(sl(R)):b.onMessageHandler.next(sl(R)));const F=R.data;(function hm(b){return"object"==typeof b&&!!b&&$n in b})(F)&&"1"===F["google.c.a.e"]&&(yield function Yo(b,A,R){return Ud.apply(this,arguments)}(b,R.messageType,F))}),Ca.apply(this,arguments)}const mu="@firebase/messaging",Lt=b=>{const A=new al(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function $f(b,A){return Ca.apply(this,arguments)}(A,R)),A},Hf=b=>{const A=b.getProvider("messaging").getImmediate();return{getToken:F=>function jf(b,A){return Vd.apply(this,arguments)}(A,F)}};function Gf(){return ac.apply(this,arguments)}function ac(){return(ac=(0,L.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function pm(){(0,J.Xd)(new ve.wA("messaging",Lt,"PUBLIC")),(0,J.Xd)(new ve.wA("messaging-internal",Hf,"PRIVATE")),(0,J.KN)(mu,"0.12.4"),(0,J.KN)(mu,"0.12.4","esm2017")}();const Te="analytics",fn="firebase_id",ll="origin",qf=6e4,mr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",uc="https://www.googletagmanager.com/gtag/js",Xn=new Ee.Yd("@firebase/analytics"),Pr=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Sa(b){if(!b.startsWith(uc)){const A=Pr.create("invalid-gtag-resource",{gtagURL:b});return Xn.warn(A.message),""}return b}function dl(b){return Promise.all(b.map(A=>A.catch(R=>R)))}function yu(){return(yu=(0,L.Z)(function*(b,A,R,F,H,X){const pe=F[H];try{if(pe)yield A[pe];else{const Ze=(yield dl(R)).find(yt=>yt.measurementId===H);Ze&&(yield A[Ze.appId])}}catch(nt){Xn.error(nt)}b("config",H,X)})).apply(this,arguments)}function Mr(){return(Mr=(0,L.Z)(function*(b,A,R,F,H){try{let X=[];if(H&&H.send_to){let pe=H.send_to;Array.isArray(pe)||(pe=[pe]);const nt=yield dl(R);for(const Ze of pe){const yt=nt.find($t=>$t.measurementId===Ze),Ht=yt&&A[yt.appId];if(!Ht){X=[];break}X.push(Ht)}}0===X.length&&(X=Object.values(A)),yield Promise.all(X),b("event",F,H||{})}catch(X){Xn.error(X)}})).apply(this,arguments)}const zf=30,Wf=new class xa{constructor(A={},R=1e3){this.throttleMetadata=A,this.intervalMillis=R}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,R){this.throttleMetadata[A]=R}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function zd(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Wd(){return(Wd=(0,L.Z)(function*(b){var A;const{appId:R,apiKey:F}=b,H={method:"GET",headers:zd(F)},X=mr.replace("{app-id}",R),pe=yield fetch(X,H);if(200!==pe.status&&304!==pe.status){let nt="";try{const Ze=yield pe.json();null!==(A=Ze.error)&&void 0!==A&&A.message&&(nt=Ze.error.message)}catch{}throw Pr.create("config-fetch-failed",{httpStatus:pe.status,responseMessage:nt})}return pe.json()})).apply(this,arguments)}function vu(){return(vu=(0,L.Z)(function*(b,A=Wf,R){const{appId:F,apiKey:H,measurementId:X}=b.options;if(!F)throw Pr.create("no-app-id");if(!H){if(X)return{measurementId:X,appId:F};throw Pr.create("no-api-key")}const pe=A.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},nt=new ym;return setTimeout((0,L.Z)(function*(){nt.abort()}),void 0!==R?R:qf),Zf({appId:F,apiKey:H,measurementId:X},pe,nt,A)})).apply(this,arguments)}function Zf(b,A,R){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,L.Z)(function*(b,{throttleEndTimeMillis:A,backoffCount:R},F,H=Wf){var X;const{appId:pe,measurementId:nt}=b;try{yield function _m(b,A){return new Promise((R,F)=>{const H=Math.max(A-Date.now(),0),X=setTimeout(R,H);b.addEventListener(()=>{clearTimeout(X),F(Pr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(F,A)}catch(Ze){if(nt)return Xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${Ze?.message}]`),{appId:pe,measurementId:nt};throw Ze}try{const Ze=yield function zy(b){return Wd.apply(this,arguments)}(b);return H.deleteThrottleMetadata(pe),Ze}catch(Ze){const yt=Ze;if(!function hl(b){if(!(b instanceof oe.ZR&&b.customData))return!1;const A=Number(b.customData.httpStatus);return 429===A||500===A||503===A||504===A}(yt)){if(H.deleteThrottleMetadata(pe),nt)return Xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${yt?.message}]`),{appId:pe,measurementId:nt};throw Ze}const Ht=503===Number(null===(X=yt?.customData)||void 0===X?void 0:X.httpStatus)?(0,oe.$s)(R,H.intervalMillis,zf):(0,oe.$s)(R,H.intervalMillis),$t={throttleEndTimeMillis:Date.now()+Ht,backoffCount:R+1};return H.setThrottleMetadata(pe,$t),Xn.debug(`Calling attemptFetch again in ${Ht} millis`),Zf(b,$t,F,H)}}),Kd.apply(this,arguments)}class ym{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let fl,ni;function Xo(){return(Xo=(0,L.Z)(function*(b,A,R,F,H){if(H&&H.global)b("event",R,F);else{const X=yield A;b("event",R,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function pl(){return(pl=(0,L.Z)(function*(){if(!(0,oe.hl)())return Xn.warn(Pr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(b){return Xn.warn(Pr.create("indexeddb-unavailable",{errorInfo:b?.toString()}).message),!1}return!0})).apply(this,arguments)}function Pa(){return Pa=(0,L.Z)(function*(b,A,R,F,H,X,pe){var nt;const Ze=function Kf(b){return vu.apply(this,arguments)}(b);Ze.then(_n=>{R[_n.measurementId]=_n.appId,b.options.measurementId&&_n.measurementId!==b.options.measurementId&&Xn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${_n.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_n=>Xn.error(_n)),A.push(Ze);const yt=function lc(){return pl.apply(this,arguments)}().then(_n=>{if(_n)return F.getId()}),[Ht,$t]=yield Promise.all([Ze,yt]);(function qd(b){const A=window.document.getElementsByTagName("script");for(const R of Object.values(A))if(R.src&&R.src.includes(uc)&&R.src.includes(b))return R;return null})(X)||function cc(b,A){const R=function $d(b,A){let R;return window.trustedTypes&&(R=window.trustedTypes.createPolicy(b,A)),R}("firebase-js-sdk-policy",{createScriptURL:Sa}),F=document.createElement("script"),H=`${uc}?l=${b}&id=${A}`;F.src=R?R?.createScriptURL(H):H,F.async=!0,document.head.appendChild(F)}(X,Ht.measurementId),ni&&(H("consent","default",ni),function Ra(b){ni=b}(void 0)),H("js",new Date);const wi=null!==(nt=pe?.config)&&void 0!==nt?nt:{};return wi[ll]="firebase",wi.update=!0,null!=$t&&(wi[fn]=$t),H("config",Ht.measurementId,wi),fl&&(H("set",fl),function ea(b){fl=b}(void 0)),Ht.measurementId}),Pa.apply(this,arguments)}class Ii{constructor(A){this.app=A}_delete(){return delete St[this.app.options.appId],Promise.resolve()}}let St={},Yf=[];const vm={};let gl,er,Ma="dataLayer",Xf=!1;function ta(b,A,R){!function Yd(){const b=[];if((0,oe.ru)()&&b.push("This is a browser extension environment."),(0,oe.zI)()||b.push("Cookies are not available."),b.length>0){const A=b.map((F,H)=>`(${H+1}) ${F}`).join(" "),R=Pr.create("invalid-analytics-context",{errorInfo:A});Xn.warn(R.message)}}();const F=b.options.appId;if(!F)throw Pr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Pr.create("no-api-key");Xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=St[F])throw Pr.create("already-exists",{id:F});if(!Xf){!function Ui(b){let A=[];Array.isArray(window[b])?A=window[b]:window[b]=A}(Ma);const{wrappedGtag:X,gtagCore:pe}=function Gd(b,A,R,F,H){let X=function(...pe){window[F].push(arguments)};return window[H]&&"function"==typeof window[H]&&(X=window[H]),window[H]=function Hd(b,A,R,F){function X(){return X=(0,L.Z)(function*(pe,...nt){try{if("event"===pe){const[Ze,yt]=nt;yield function wo(b,A,R,F,H){return Mr.apply(this,arguments)}(b,A,R,Ze,yt)}else if("config"===pe){const[Ze,yt]=nt;yield function Ms(b,A,R,F,H,X){return yu.apply(this,arguments)}(b,A,R,F,Ze,yt)}else if("consent"===pe){const[Ze]=nt;b("consent","update",Ze)}else if("get"===pe){const[Ze,yt,Ht]=nt;b("get",Ze,yt,Ht)}else if("set"===pe){const[Ze]=nt;b("set",Ze)}else b(pe,...nt)}catch(Ze){Xn.error(Ze)}}),X.apply(this,arguments)}return function H(pe){return X.apply(this,arguments)}}(X,b,A,R),{gtagCore:X,wrappedGtag:window[H]}}(St,Yf,vm,Ma,"gtag");er=X,gl=pe,Xf=!0}return St[F]=function dc(b,A,R,F,H,X,pe){return Pa.apply(this,arguments)}(b,Yf,vm,A,gl,Ma,R),new Ii(b)}function To(){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,L.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const ka="@firebase/analytics";!function Nr(){(0,J.Xd)(new ve.wA(Te,(A,{options:R})=>ta(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,J.Xd)(new ve.wA("analytics-internal",function b(A){try{const R=A.getProvider(Te).getImmediate();return{logEvent:(F,H,X)=>function qr(b,A,R,F){b=(0,oe.m9)(b),function Bi(b,A,R,F,H){return Xo.apply(this,arguments)}(er,St[b.app.options.appId],A,R,F).catch(H=>Xn.error(H))}(R,F,H,X)}}catch(R){throw Pr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,J.KN)(ka,"0.10.0"),(0,J.KN)(ka,"0.10.0","esm2017")}();var Co=O(1954),ts=O(2631);const yl=new class kr extends ts.v{}(class gc extends Co.o{constructor(A,R){super(A,R),this.scheduler=A,this.work=R}schedule(A,R=0){return R>0?super.schedule(A,R):(this.delay=R,this.state=A,this.scheduler.flush(this),this)}execute(A,R){return R>0||this.closed?super.execute(A,R):this._execute(A,R)}requestAsyncId(A,R,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(A,R,F):(A.flush(this),0)}});var Do=O(6321),na=O(9397),Ao=O(5137),fr=O(3093);const ns=new f.GfV("7.6.1"),Il="__angularfire_symbol__analyticsIsSupportedValue",tr="__angularfire_symbol__analyticsIsSupported",mc="__angularfire_symbol__remoteConfigIsSupportedValue",_c="__angularfire_symbol__remoteConfigIsSupported",wu="__angularfire_symbol__messagingIsSupportedValue",ra="__angularfire_symbol__messagingIsSupported";function Tu(b,A,R){if(A){if(1===A.length)return A[0];const X=A.filter(pe=>pe.app===R);if(1===X.length)return X[0]}return R.container.getProvider(b).getImmediate({optional:!0})}globalThis[tr]||(globalThis[tr]=To().then(b=>globalThis[Il]=b).catch(()=>globalThis[Il]=!1)),globalThis[ra]||(globalThis[ra]=Gf().then(b=>globalThis[wu]=b).catch(()=>globalThis[wu]=!1)),globalThis[_c]||(globalThis[_c]=Ko().then(b=>globalThis[mc]=b).catch(()=>globalThis[mc]=!1));const Oa=(b,A)=>{const R=A?[A]:(0,te.C6)(),F=[];return R.forEach(H=>{H.container.getProvider(b).instances.forEach(pe=>{F.includes(pe)||F.push(pe)})}),F};function Js(){}class Fa{constructor(A,R=yl){this.zone=A,this.delegate=R}now(){return this.delegate.now()}schedule(A,R,F){const H=this.zone;return this.delegate.schedule(function(pe){H.runGuarded(()=>{A.apply(this,[pe])})},R,F)}}class xo{constructor(A){this.zone=A,this.task=null}call(A,R){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Js,{},Js,Js)),R.pipe((0,na.b)({next:F,complete:F,error:F})).subscribe(A).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Jd=(()=>{class b{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Fa(Zone.current)),this.insideAngular=R.run(()=>new Fa(Zone.current,Do.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(R){return new(R||b)(f.LFG(f.R0b))},b.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function La(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Im(b){return La(),function Va(b){return function(R){return(R=R.lift(new xo(b.ngZone))).pipe((0,Ao.R)(b.outsideAngular),(0,fr.Q)(b.insideAngular))}}(La())(b)}},9058:(Et,Me,O)=>{O.d(Me,{$s:()=>Xe,BH:()=>se,G6:()=>Dr,L:()=>fe,LL:()=>Fe,P0:()=>wt,Pz:()=>Ae,Sg:()=>xe,UG:()=>Q,US:()=>ve,ZB:()=>re,ZR:()=>Re,aH:()=>ue,b$:()=>pn,eu:()=>ye,hl:()=>ce,jU:()=>Qe,m9:()=>mn,ne:()=>An,pd:()=>Ut,r3:()=>yn,ru:()=>Dt,tV:()=>U,uI:()=>de,vZ:()=>sr,w1:()=>Pn,xO:()=>ha,xb:()=>Oi,z$:()=>He,zI:()=>Ie,zd:()=>Mt});const J=function($){const j=[];let Y=0;for(let Pe=0;Pe<$.length;Pe++){let he=$.charCodeAt(Pe);he<128?j[Y++]=he:he<2048?(j[Y++]=he>>6|192,j[Y++]=63&he|128):55296==(64512&he)&&Pe+1<$.length&&56320==(64512&$.charCodeAt(Pe+1))?(he=65536+((1023&he)<<10)+(1023&$.charCodeAt(++Pe)),j[Y++]=he>>18|240,j[Y++]=he>>12&63|128,j[Y++]=he>>6&63|128,j[Y++]=63&he|128):(j[Y++]=he>>12|224,j[Y++]=he>>6&63|128,j[Y++]=63&he|128)}return j},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,j){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,Pe=[];for(let he=0;he<$.length;he+=3){const dt=$[he],zt=he+1<$.length,Bt=zt?$[he+1]:0,ei=he+2<$.length,Wt=ei?$[he+2]:0;let jr=(15&Bt)<<2|Wt>>6,Ho=63&Wt;ei||(Ho=64,zt||(jr=64)),Pe.push(Y[dt>>2],Y[(3&dt)<<4|Bt>>4],Y[jr],Y[Ho])}return Pe.join("")},encodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa($):this.encodeByteArray(J($),j)},decodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?atob($):function($){const j=[];let Y=0,Pe=0;for(;Y<$.length;){const he=$[Y++];if(he<128)j[Pe++]=String.fromCharCode(he);else if(he>191&&he<224){const dt=$[Y++];j[Pe++]=String.fromCharCode((31&he)<<6|63&dt)}else if(he>239&&he<365){const ei=((7&he)<<18|(63&$[Y++])<<12|(63&$[Y++])<<6|63&$[Y++])-65536;j[Pe++]=String.fromCharCode(55296+(ei>>10)),j[Pe++]=String.fromCharCode(56320+(1023&ei))}else{const dt=$[Y++],zt=$[Y++];j[Pe++]=String.fromCharCode((15&he)<<12|(63&dt)<<6|63&zt)}}return j.join("")}(this.decodeStringToByteArray($,j))},decodeStringToByteArray($,j){this.init_();const Y=j?this.charToByteMapWebSafe_:this.charToByteMap_,Pe=[];for(let he=0;he<$.length;){const dt=Y[$.charAt(he++)],Bt=he<$.length?Y[$.charAt(he)]:0;++he;const Wt=he<$.length?Y[$.charAt(he)]:64;++he;const hn=he<$.length?Y[$.charAt(he)]:64;if(++he,null==dt||null==Bt||null==Wt||null==hn)throw new Ee;Pe.push(dt<<2|Bt>>4),64!==Wt&&(Pe.push(Bt<<4&240|Wt>>2),64!==hn&&Pe.push(Wt<<6&192|hn))}return Pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fe=function($){return function($){const j=J($);return ve.encodeByteArray(j,!0)}($).replace(/\./g,"")},U=function($){try{return ve.decodeString($,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function re($,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return j}for(const Y in j)!j.hasOwnProperty(Y)||!We(Y)||($[Y]=re($[Y],j[Y]));return $}function We($){return"__proto__"!==$}const Ue=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=$&&U($[1]);return j&&JSON.parse(j)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},wt=$=>{const j=($=>{var j,Y;return null===(Y=null===(j=Ue())||void 0===j?void 0:j.emulatorHosts)||void 0===Y?void 0:Y[$]})($);if(!j)return;const Y=j.lastIndexOf(":");if(Y<=0||Y+1===j.length)throw new Error(`Invalid host ${j} with no separate hostname and port!`);const Pe=parseInt(j.substring(Y+1),10);return"["===j[0]?[j.substring(1,Y-1),Pe]:[j.substring(0,Y),Pe]},ue=()=>{var $;return null===($=Ue())||void 0===$?void 0:$.config},Ae=$=>{var j;return null===(j=Ue())||void 0===j?void 0:j[`_${$}`]};class se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,Y)=>{this.resolve=j,this.reject=Y})}wrapCallback(j){return(Y,Pe)=>{Y?this.reject(Y):this.resolve(Pe),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(Y):j(Y,Pe))}}}function xe($,j){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Pe=j||"demo-project",he=$.iat||0,dt=$.sub||$.user_id;if(!dt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const zt=Object.assign({iss:`https://securetoken.google.com/${Pe}`,aud:Pe,iat:he,exp:he+3600,auth_time:he,sub:dt,user_id:dt,firebase:{sign_in_provider:"custom",identities:{}}},$);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(zt)),""].join(".")}function He(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function Q(){var $;const j=null===($=Ue())||void 0===$?void 0:$.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Qe(){return"object"==typeof self&&self.self===self}function Dt(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function pn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Pn(){const $=He();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Dr(){return!Q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ce(){try{return"object"==typeof indexedDB}catch{return!1}}function ye(){return new Promise(($,j)=>{try{let Y=!0;const Pe="validate-browser-context-for-indexeddb-analytics-module",he=self.indexedDB.open(Pe);he.onsuccess=()=>{he.result.close(),Y||self.indexedDB.deleteDatabase(Pe),$(!0)},he.onupgradeneeded=()=>{Y=!1},he.onerror=()=>{var dt;j((null===(dt=he.error)||void 0===dt?void 0:dt.message)||"")}}catch(Y){j(Y)}})}function Ie(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Re extends Error{constructor(j,Y,Pe){super(Y),this.code=j,this.customData=Pe,this.name="FirebaseError",Object.setPrototypeOf(this,Re.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fe.prototype.create)}}class Fe{constructor(j,Y,Pe){this.service=j,this.serviceName=Y,this.errors=Pe}create(j,...Y){const Pe=Y[0]||{},he=`${this.service}/${j}`,dt=this.errors[j],zt=dt?function it($,j){return $.replace(Je,(Y,Pe)=>{const he=j[Pe];return null!=he?String(he):`<${Pe}?>`})}(dt,Pe):"Error";return new Re(he,`${this.serviceName}: ${zt} (${he}).`,Pe)}}const Je=/\{\$([^}]+)}/g;function yn($,j){return Object.prototype.hasOwnProperty.call($,j)}function Oi($){for(const j in $)if(Object.prototype.hasOwnProperty.call($,j))return!1;return!0}function sr($,j){if($===j)return!0;const Y=Object.keys($),Pe=Object.keys(j);for(const he of Y){if(!Pe.includes(he))return!1;const dt=$[he],zt=j[he];if(Fi(dt)&&Fi(zt)){if(!sr(dt,zt))return!1}else if(dt!==zt)return!1}for(const he of Pe)if(!Y.includes(he))return!1;return!0}function Fi($){return null!==$&&"object"==typeof $}function ha($){const j=[];for(const[Y,Pe]of Object.entries($))Array.isArray(Pe)?Pe.forEach(he=>{j.push(encodeURIComponent(Y)+"="+encodeURIComponent(he))}):j.push(encodeURIComponent(Y)+"="+encodeURIComponent(Pe));return j.length?"&"+j.join("&"):""}function Mt($){const j={};return $.replace(/^\?/,"").split("&").forEach(Pe=>{if(Pe){const[he,dt]=Pe.split("=");j[decodeURIComponent(he)]=decodeURIComponent(dt)}}),j}function Ut($){const j=$.indexOf("?");if(!j)return"";const Y=$.indexOf("#",j);return $.substring(j,Y>0?Y:void 0)}function An($,j){const Y=new Un($,j);return Y.subscribe.bind(Y)}class Un{constructor(j,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{j(this)}).catch(Pe=>{this.error(Pe)})}next(j){this.forEachObserver(Y=>{Y.next(j)})}error(j){this.forEachObserver(Y=>{Y.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,Y,Pe){let he;if(void 0===j&&void 0===Y&&void 0===Pe)throw new Error("Missing Observer.");he=function gn($,j){if("object"!=typeof $||null===$)return!1;for(const Y of j)if(Y in $&&"function"==typeof $[Y])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:Y,complete:Pe},void 0===he.next&&(he.next=Yn),void 0===he.error&&(he.error=Yn),void 0===he.complete&&(he.complete=Yn);const dt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?he.error(this.finalError):he.complete()}catch{}}),this.observers.push(he),dt}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,j)}sendOne(j,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{Y(this.observers[j])}catch(Pe){typeof console<"u"&&console.error&&console.error(Pe)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yn(){}const Ks=1e3,Ce=2,W=144e5,we=.5;function Xe($,j=Ks,Y=Ce){const Pe=j*Math.pow(Y,$),he=Math.round(we*Pe*(Math.random()-.5)*2);return Math.min(W,Pe+he)}function mn($){return $&&$._delegate?$._delegate:$}},6622:(Et,Me,O)=>{var f=O(5879);let te=null;function L(){return te}class oe{}const ve=new f.OlP("DocumentToken");let Ee=(()=>{var n;class e{historyGo(r){throw new Error("Not implemented")}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(fe)},providedIn:"platform"}),e})();const Le=new f.OlP("Location Initialized");let fe=(()=>{var n;class e extends Ee{constructor(){super(),this._doc=(0,f.f3M)(ve),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(r){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),e})();function U(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function re(n){return n&&"?"!==n[0]?"?"+n:n}let We=(()=>{var n;class e{historyGo(r){throw new Error("Not implemented")}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(et)},providedIn:"root"}),e})();const Oe=new f.OlP("appBaseHref");let et=(()=>{var n;class e extends We{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return U(this._baseHref,r)}path(r=!1){const i=this._platformLocation.pathname+re(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,u){const d=this.prepareExternalUrl(s+re(u));this._platformLocation.pushState(r,i,d)}replaceState(r,i,s,u){const d=this.prepareExternalUrl(s+re(u));this._platformLocation.replaceState(r,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(Ee),f.LFG(Oe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),Ve=(()=>{var n;class e extends We{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){const i=U(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,u){let d=this.prepareExternalUrl(s+re(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(r,i,d)}replaceState(r,i,s,u){let d=this.prepareExternalUrl(s+re(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(Ee),f.LFG(Oe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})(),tt=(()=>{var n;class e{constructor(r){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;const i=this._locationStrategy.getBaseHref();this._basePath=function ue(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(wt(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+re(i))}normalize(r){return e.stripTrailingSlash(function bt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,wt(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+re(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+re(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}}return(n=e).normalizeQueryParams=re,n.joinWithSlash=U,n.stripTrailingSlash=G,n.\u0275fac=function(r){return new(r||n)(f.LFG(We))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ue(){return new tt((0,f.LFG)(We))}()},providedIn:"root"}),e})();function wt(n){return n.replace(/\/index.html$/,"")}function fa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const ru=/\s+/,Ed=[];let iu=(()=>{var n;class e{constructor(r,i,s,u){this._iterableDiffers=r,this._keyValueDiffers=i,this._ngEl=s,this._renderer=u,this.initialClasses=Ed,this.stateMap=new Map}set klass(r){this.initialClasses=null!=r?r.trim().split(ru):Ed}set ngClass(r){this.rawClass="string"==typeof r?r.trim().split(ru):r}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(const i of r)this._updateState(i,!0);else if(null!=r)for(const i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){const s=this.stateMap.get(r);void 0!==s?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const r of this.stateMap){const i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){(r=r.trim()).length>0&&r.split(ru).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),e})();class pa{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xu=(()=>{var n;class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;!this._differ&&r&&(this._differ=this._differs.find(r).create(this.ngForTrackBy))}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const i=this._viewContainer;r.forEachOperation((s,u,d)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new pa(s.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)i.remove(null===u?void 0:u);else if(null!==u){const p=i.get(u);i.move(p,d),Td(p,s)}});for(let s=0,u=i.length;s<u;s++){const p=i.get(s).context;p.index=s,p.count=u,p.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{Td(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(r,i){return!0}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function Td(n,e){n.context.$implicit=e.item}let zo=(()=>{var n;class e{constructor(r,i){this._viewContainer=r,this._context=new Uy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Jg("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Jg("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class Uy{constructor(){this.$implicit=null,this.ngIf=null}}function Jg(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Ln=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),e})();function yo(n){return"server"===n}let Ar=(()=>{var n;class e{}return(n=e).\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new vo((0,f.LFG)(ve),window)}),e})();class vo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Io(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Ji{}class Uf extends oe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class sl extends Uf{static makeCurrent(){!function J(n){te||(te=n)}(new sl)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function dm(){return ba=ba||document.querySelector("base"),ba?ba.getAttribute("href"):null}();return null==t?null:function hm(n){ps=ps||document.createElement("a"),ps.setAttribute("href",n);const e=ps.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ba=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fa(document.cookie,e)}}let ps,ba=null,Nn=(()=>{var n;class e{build(){return new XMLHttpRequest}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();const ol=new f.OlP("EventManagerPlugins");let al=(()=>{var n;class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(u=>u.supports(r)),!i)throw new f.vHH(5101,!1);return this._eventNameToPlugin.set(r,i),i}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(ol),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();class yi{constructor(e){this._doc=e}}const ul="ng-app-id";let Bf=(()=>{var n;class e{constructor(r,i,s,u={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yo(u),this.resetHostNodes()}addStyles(r){for(const i of r)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(r){for(const i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){const i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){const r=this.doc.head?.querySelectorAll(`style[${ul}="${this.appId}"]`);if(r?.length){const i=new Map;return r.forEach(s=>{null!=s.textContent&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){const s=this.styleRef;if(s.has(r)){const u=s.get(r);return u.usage+=i,u.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){const s=this.styleNodesInDOM,u=s?.get(i);if(u?.parentNode===r)return s.delete(i),u.removeAttribute(ul),u;{const d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=i,this.platformIsServer&&d.setAttribute(ul,this.appId),d}}addStyleToHost(r,i){const s=this.getStyleElement(r,i);r.appendChild(s);const u=this.styleRef,d=u.get(i)?.elements;d?d.push(s):u.set(i,{elements:[s],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(ve),f.LFG(f.AFp),f.LFG(f.Ojb,8),f.LFG(f.Lbi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();const gs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ur=/%COMP%/g,Ud=new f.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ca(n,e){return e.map(t=>t.replace(ur,n))}let mu=(()=>{var n;class e{constructor(r,i,s,u,d,p,y,E=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=u,this.doc=d,this.platformId=p,this.ngZone=y,this.nonce=E,this.rendererByCompId=new Map,this.platformIsServer=yo(p),this.defaultRenderer=new cl(r,d,y,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===f.ifc.ShadowDom&&(i={...i,encapsulation:f.ifc.Emulated});const s=this.getOrCreateRenderer(r,i);return s instanceof gm?s.applyToHost(r):s instanceof ac&&s.applyStyles(),s}getOrCreateRenderer(r,i){const s=this.rendererByCompId;let u=s.get(i.id);if(!u){const d=this.doc,p=this.ngZone,y=this.eventManager,E=this.sharedStylesHost,D=this.removeStylesOnCompDestroy,P=this.platformIsServer;switch(i.encapsulation){case f.ifc.Emulated:u=new gm(y,E,i,this.appId,D,d,p,P);break;case f.ifc.ShadowDom:return new Gf(y,E,r,i,d,p,this.nonce,P);default:u=new ac(y,E,i,D,d,p,P)}s.set(i.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(al),f.LFG(Bf),f.LFG(f.AFp),f.LFG(Ud),f.LFG(ve),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(f.Ojb))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();class cl{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(gs[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(pm(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(pm(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new f.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=gs[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=gs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=L().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function pm(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Gf extends cl{constructor(e,t,r,i,s,u,d,p){super(e,s,u,p),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const y=Ca(i.id,i.styles);for(const E of y){const D=document.createElement("style");d&&D.setAttribute("nonce",d),D.textContent=E,this.shadowRoot.appendChild(D)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ac extends cl{constructor(e,t,r,i,s,u,d,p){super(e,s,u,d),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=p?Ca(p,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class gm extends ac{constructor(e,t,r,i,s,u,d,p){const y=i+"-"+r.id;super(e,t,r,s,u,d,p,y),this.contentAttr=function fm(n){return"_ngcontent-%COMP%".replace(ur,n)}(y),this.hostAttr=function $f(n){return"_nghost-%COMP%".replace(ur,n)}(y)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Da=(()=>{var n;class e extends yi{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(ve))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();const _u=["alt","control","meta","shift"],Aa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qy={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Bd=(()=>{var n;class e extends yi{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,i,s){const u=e.parseEventName(i),d=e.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(r,u.domEventName,d))}static parseEventName(r){const i=r.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const u=e._normalizeKey(i.pop());let d="",p=i.indexOf("code");if(p>-1&&(i.splice(p,1),d="code."),_u.forEach(E=>{const D=i.indexOf(E);D>-1&&(i.splice(D,1),d+=E+".")}),d+=u,0!=i.length||0===u.length)return null;const y={};return y.domEventName=s,y.fullKey=d,y}static matchEventFullKeyCode(r,i){let s=Aa[r.key]||r.key,u="";return i.indexOf("code.")>-1&&(s=r.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),_u.forEach(d=>{d!==s&&(0,qy[d])(r)&&(u+=d+".")}),u+=s,u===i)}static eventCallback(r,i,s){return u=>{e.matchEventFullKeyCode(u,r)&&s.runGuarded(()=>i(u))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(ve))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();const Xn=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function ll(){sl.makeCurrent()},multi:!0},{provide:ve,useFactory:function mr(){return(0,f.RDi)(document),document},deps:[]}]),Ps=new f.OlP(""),Pr=[{provide:f.rWj,useClass:class Ld{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new f.vHH(5103,!1);return s},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const d=function(p){u=u||p,s--,0==s&&r(u)};i.forEach(p=>{p.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Sa=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function qf(){return new f.qLn},deps:[]},{provide:ol,useClass:Da,multi:!0,deps:[ve,f.R0b,f.Lbi]},{provide:ol,useClass:Bd,multi:!0,deps:[ve]},mu,Bf,al,{provide:f.FYo,useExisting:mu},{provide:Ji,useClass:Nn,deps:[]},[]];let dl=(()=>{var n;class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:f.AFp,useValue:r.appId}]}}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(Ps,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Sa,...Pr],imports:[Ln,f.hGG]}),e})(),yu=(()=>{var n;class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(ve))},n.\u0275prov=f.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function Ms(){return new yu((0,f.LFG)(ve))}(),i},providedIn:"root"}),e})();typeof window<"u"&&window;var vi=O(5592),Iu=O(4674),vn=O(2459),xt=O(2096),ni=O(5619);const{isArray:Ra}=Array,{getPrototypeOf:ea,prototype:lc,keys:pl}=Object;function dc(n){if(1===n.length){const e=n[0];if(Ra(e))return{args:e,keys:null};if(function Pa(n){return n&&"object"==typeof n&&ea(n)===lc}(e)){const t=pl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ii=O(2737),St=O(7398);const{isArray:Yf}=Array;function Ma(n){return(0,St.U)(e=>function vm(n,e){return Yf(e)?n(...e):n(e)}(n,e))}var Na=O(4564);function gl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var er=O(8251),Xf=O(7103);function Qd(...n){const e=(0,Na.yG)(n),t=(0,Na.jO)(n),{args:r,keys:i}=dc(n);if(0===r.length)return(0,vn.D)([],e);const s=new vi.y(function Yd(n,e,t=Ii.y){return r=>{ta(e,()=>{const{length:i}=n,s=new Array(i);let u=i,d=i;for(let p=0;p<i;p++)ta(e,()=>{const y=(0,vn.D)(n[p],e);let E=!1;y.subscribe((0,er.x)(r,D=>{s[p]=D,E||(E=!0,d--),d||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>gl(i,u):Ii.y));return t?s.pipe(Ma(t)):s}function ta(n,e,t){n?(0,Xf.f)(t,n,e):e()}const Xs=(0,O(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var To=O(7537);function hc(...n){return function Eu(){return(0,To.J)(1)}()((0,vn.D)(n,(0,Na.yG)(n)))}var ml=O(4829);function fc(n){return new vi.y(e=>{(0,ml.Xf)(n()).subscribe(e)})}var Jf=O(8407);function Ei(n,e){const t=(0,Iu.m)(n)?n:()=>n,r=i=>i.error(t());return new vi.y(e?i=>e.schedule(r,0,i):r)}var bo=O(6232),pc=O(7394),qr=O(9360);function _l(){return(0,qr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,er.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ka extends vi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,qr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,er.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pc.w0.EMPTY)}return e}refCount(){return _l()(this)}}var ms=O(8645),Nr=O(4664);function Co(n){return n<=0?()=>bo.E:(0,qr.e)((e,t)=>{let r=0;e.subscribe((0,er.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function gc(...n){const e=(0,Na.yG)(n);return(0,qr.e)((t,r)=>{(e?hc(n,t,e):hc(n,t)).subscribe(r)})}function ts(n,e){return(0,qr.e)((t,r)=>{let i=0;t.subscribe((0,er.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var kr=O(1631);function yl(n){return(0,qr.e)((e,t)=>{let r=!1;e.subscribe((0,er.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function vl(n=Do){return(0,qr.e)((e,t)=>{let r=!1;e.subscribe((0,er.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Do(){return new Xs}function na(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ts((i,s)=>n(i,s,r)):Ii.y,Co(1),t?yl(e):vl(()=>new Xs))}function Ao(n,e){return(0,Iu.m)(e)?(0,kr.z)(n,e,1):(0,kr.z)(n,1)}var fr=O(9397);function ns(n){return(0,qr.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,er.x)(t,void 0,void 0,u=>{s=(0,ml.Xf)(n(u,ns(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function tr(n,e){return(0,qr.e)(function Il(n,e,t,r,i){return(s,u)=>{let d=t,p=e,y=0;s.subscribe((0,er.x)(u,E=>{const D=y++;p=d?n(p,E,D):(d=!0,E),r&&u.next(p)},i&&(()=>{d&&u.next(p),u.complete()})))}}(n,e,arguments.length>=2,!0))}function mc(n){return n<=0?()=>bo.E:(0,qr.e)((e,t)=>{let r=[];e.subscribe((0,er.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ra(n){return(0,qr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var El=O(2420);const jt="primary",So=Symbol("RouteTitle");class Tu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Oa(n){return new Tu(n)}function Js(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],d=n[s];if(u.startsWith(":"))i[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function xo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Jd(n[i],e[i]))return!1;return!0}function Jd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function La(n){return n.length>0?n[n.length-1]:null}function eo(n){return function Jo(n){return!!n&&(n instanceof vi.y||(0,Iu.m)(n.lift)&&(0,Iu.m)(n.subscribe))}(n)?n:(0,f.QGY)(n)?(0,vn.D)(Promise.resolve(n)):(0,xt.of)(n)}const bu={exact:function Va(n,e,t){if(!pe(n.segments,e.segments)||!A(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Va(n.children[r],e.children[r],t))return!1;return!0},subset:wm},Qy={exact:function Im(n,e){return xo(n,e)},subset:function Em(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Jd(n[t],e[t]))},ignored:()=>!0};function Yy(n,e,t){return bu[t.paths](n.root,e.root,t.matrixParams)&&Qy[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function wm(n,e,t){return b(n,e,e.segments,t)}function b(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!pe(i,t)||e.hasChildren()||!A(i,t,r))}if(n.segments.length===t.length){if(!pe(n.segments,t)||!A(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!wm(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(pe(n.segments,i)&&A(n.segments,i,r)&&n.children[jt])&&b(n.children[jt],e,s,r)}}function A(n,e,t){return e.every((r,i)=>Qy[t](n[i].parameters,r.parameters))}class R{constructor(e=new F([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oa(this.queryParams)),this._queryParamMap}toString(){return Ht.serialize(this)}}class F{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $t(this)}}class H{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Oa(this.parameters)),this._parameterMap}toString(){return eh(this)}}function pe(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ze=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new yt},providedIn:"root"}),e})();class yt{parse(e){const t=new w0(e);return new R(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${wi(e.root,!0)}`,r=function I0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ns(t)}=${Ns(i)}`).join("&"):`${Ns(t)}=${Ns(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ia(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ht=new yt;function $t(n){return n.segments.map(e=>eh(e)).join("/")}function wi(n,e){if(!n.hasChildren())return $t(n);if(e){const t=n.children[jt]?wi(n.children[jt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==jt&&r.push(`${i}:${wi(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function nt(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===jt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==jt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===jt?[wi(n.children[jt],!1)]:[`${i}:${wi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jt]?`${$t(n)}/${t[0]}`:`${$t(n)}/(${t.join("//")})`}}function _n(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ns(n){return _n(n).replace(/%3B/gi,";")}function sa(n){return _n(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ti(n){return decodeURIComponent(n)}function to(n){return Ti(n.replace(/\+/g,"%20"))}function eh(n){return`${sa(n.path)}${function Tm(n){return Object.keys(n).map(e=>`;${sa(e)}=${sa(n[e])}`).join("")}(n.parameters)}`}const vD=/^[^\/()?;#]+/;function th(n){const e=n.match(vD);return e?e[0]:""}const ep=/^[^\/()?;=#]+/,Xy=/^[^=?&#]+/,E0=/^[^&#]+/;class w0{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new F([],{}):new F([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[jt]=new F(e,t)),r}parseSegment(){const e=th(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new H(Ti(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function yc(n){const e=n.match(ep);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=th(this.remaining);i&&(r=i,this.capture(r))}e[Ti(t)]=Ti(r)}parseQueryParam(e){const t=function nh(n){const e=n.match(Xy);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function tp(n){const e=n.match(E0);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=to(t),s=to(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=th(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=jt);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[jt]:new F([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function bm(n){return n.segments.length>0?new F([],{[jt]:n}):n}function np(n){const e={};for(const r of Object.keys(n.children)){const s=np(n.children[r]);if(r===jt&&0===s.segments.length&&s.hasChildren())for(const[u,d]of Object.entries(s.children))e[u]=d;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function rh(n){if(1===n.numberOfChildren&&n.children[jt]){const e=n.children[jt];return new F(n.segments.concat(e.segments),e.children)}return n}(new F(n.segments,e))}function Cu(n){return n instanceof R}function Du(n){let e;const i=bm(function t(s){const u={};for(const p of s.children){const y=t(p);u[p.outlet]=y}const d=new F(s.url,u);return s===n&&(e=d),d}(n.root));return e??i}function vc(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return Jy(i,i,i,t,r);const s=function ED(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ev(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Object.entries(s.outlets).forEach(([p,y])=>{d[p]="string"==typeof y?y.split("/"):y}),[...i,{outlets:d}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,s]},[]);return new ev(t,e,r)}(e);if(s.toRoot())return Jy(i,i,new F([],{}),t,r);const u=function T0(n,e,t){if(n.isAbsolute)return new wl(e,!0,0);if(!t)return new wl(e,!1,NaN);if(null===t.parent)return new wl(t,!0,0);const r=Au(n.commands[0])?0:1;return function b0(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new wl(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),d=u.processChildren?sh(u.segmentGroup,u.index,s.commands):Cm(u.segmentGroup,u.index,s.commands);return Jy(i,u.segmentGroup,d,t,r)}function Au(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ic(n){return"object"==typeof n&&null!=n&&n.outlets}function Jy(n,e,t,r,i){let u,s={};r&&Object.entries(r).forEach(([p,y])=>{s[p]=Array.isArray(y)?y.map(E=>`${E}`):`${y}`}),u=n===e?t:ih(n,e,t);const d=bm(np(u));return new R(d,s,i)}function ih(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:ih(s,e,t)}),new F(n.segments,r)}class ev{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Au(r[0]))throw new f.vHH(4003,!1);const i=r.find(Ic);if(i&&i!==La(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Cm(n,e,t){if(n||(n=new F([],{})),0===n.segments.length&&n.hasChildren())return sh(n,e,t);const r=function tv(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],d=t[r];if(Ic(d))break;const p=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!rp(p,y,u))return s;r+=2}else{if(!rp(p,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new F(n.segments.slice(0,r.pathIndex),{});return s.children[jt]=new F(n.segments.slice(r.pathIndex),n.children),sh(s,0,i)}return r.match&&0===i.length?new F(n.segments,{}):r.match&&!n.hasChildren()?nv(n,e,t):r.match?sh(n,0,i):nv(n,e,t)}function sh(n,e,t){if(0===t.length)return new F(n.segments,{});{const r=function Tl(n){return Ic(n[0])?n[0].outlets:{[jt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==jt)&&n.children[jt]&&1===n.numberOfChildren&&0===n.children[jt].segments.length){const s=sh(n.children[jt],e,t);return new F(n.segments,s.children)}return Object.entries(r).forEach(([s,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(i[s]=Cm(n.children[s],e,u))}),Object.entries(n.children).forEach(([s,u])=>{void 0===r[s]&&(i[s]=u)}),new F(n.segments,i)}}function nv(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Ic(s)){const p=rv(s.outlets);return new F(r,p)}if(0===i&&Au(t[0])){r.push(new H(n.segments[e].path,iv(t[0]))),i++;continue}const u=Ic(s)?s.outlets[jt]:`${s}`,d=i<t.length-1?t[i+1]:null;u&&d&&Au(d)?(r.push(new H(u,iv(d))),i+=2):(r.push(new H(u,{})),i++)}return new F(r,{})}function rv(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=nv(new F([],{}),0,r))}),e}function iv(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function rp(n,e,t){return n==t.path&&xo(e,t.parameters)}const oh="imperative";class no{constructor(e,t){this.id=e,this.url=t}}class ah extends no{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ua extends no{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ec extends no{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class uh extends no{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class bl extends no{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class C0 extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wD extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TD extends no{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sv extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ip extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sp{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ov{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class av{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cl{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dl{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dm{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Am{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Al{}class Sl{constructor(e){this.url=e}}class uv{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new wc,this.attachRef=null}}let wc=(()=>{var n;class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){const s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){const i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new uv,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();class op{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ch(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ch(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=lh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return lh(e,this._root).map(t=>t.value)}}function ch(n,e){if(n===e.value)return e;for(const t of e.children){const r=ch(n,t);if(r)return r}return null}function lh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=lh(n,t);if(r.length)return r.unshift(e),r}return[]}class Ro{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function xl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class _s extends op{constructor(e,t){super(e),this.snapshot=t,ri(this,e)}toString(){return this.snapshot.toString()}}function Tc(n,e){const t=function cv(n,e){const u=new hh([],{},{},"",{},jt,e,null,{});return new fh("",new Ro(u,[]))}(0,e),r=new ni.X([new H("",{})]),i=new ni.X({}),s=new ni.X({}),u=new ni.X({}),d=new ni.X(""),p=new Rl(r,i,u,d,s,jt,e,t.root);return p.snapshot=t.root,new _s(new Ro(p,[]),t)}class Rl{constructor(e,t,r,i,s,u,d,p){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=u,this.component=d,this._futureSnapshot=p,this.title=this.dataSubject?.pipe((0,St.U)(y=>y[So]))??(0,xt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(e=>Oa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(e=>Oa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bi(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function dh(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class hh{get title(){return this.data?.[So]}constructor(e,t,r,i,s,u,d,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=d,this.routeConfig=p,this._resolve=y}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Oa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fh extends op{constructor(e,t){super(t),this.url=e,ri(this,t)}toString(){return ks(this._root)}}function ri(n,e){e.value._routerState=n,e.children.forEach(t=>ri(n,t))}function ks(n){const e=n.children.length>0?` { ${n.children.map(ks).join(", ")} } `:"";return`${n.value}${e}`}function ph(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),xo(e.params,t.params)||n.paramsSubject.next(t.params),function Fa(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),xo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ap(n,e){const t=xo(n.params,e.params)&&function X(n,e){return pe(n,e)&&n.every((t,r)=>xo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ap(n.parent,e.parent))}let xm=(()=>{var n;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=jt,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(wc),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb),this.inputBinder=(0,f.f3M)(gh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){const{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,!1);this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new f.vHH(4013,!1);this._activatedRoute=r;const s=this.location,d=r.snapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,y=new lv(r,p,s.injector);this.activated=s.createComponent(d,{index:s.length,injector:y,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),e})();class lv{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Rl?this.route:e===wc?this.childContexts:this.parent.get(e,t)}}const gh=new f.OlP("");let ji=(()=>{var n;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){const{activatedRoute:i}=r,s=Qd([i.queryParams,i.params,i.data]).pipe((0,Nr.w)(([u,d,p],y)=>(p={...u,...d,...p},0===y?(0,xt.of)(p):Promise.resolve(p)))).subscribe(u=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(r);const d=(0,f.qFp)(i.component);if(d)for(const{templateName:p}of d.inputs)r.activatedComponentRef.setInput(p,u[p]);else this.unsubscribeFromRouteData(r)});this.outletDataSubscriptions.set(r,s)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();function Su(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function D0(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Su(n,r,i);return Su(n,r)})}(n,e,t);return new Ro(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(d=>Su(n,d)),u}}const r=function Ba(n){return new Rl(new ni.X(n.url),new ni.X(n.params),new ni.X(n.queryParams),new ni.X(n.fragment),new ni.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Su(n,s));return new Ro(r,i)}}const ja="ngNavigationCancelingError";function mh(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Cu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Pm(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Pm(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ja]=!0,r.cancellationCode=e,t&&(r.url=t),r}function up(n){return n&&n[ja]}let dv=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(r,i){1&r&&f._UZ(0,"router-outlet")},dependencies:[xm],encapsulation:2}),e})();function q(n){const e=n.children&&n.children.map(q),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==jt&&(t.component=dv),t}function ee(n){return n.outlet||jt}function Ye(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Hn{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ph(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=xl(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=xl(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=xl(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=xl(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Dm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Cl(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(ph(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),ph(d.route.value),this.activateChildRoutes(e,null,u.children)}else{const d=Ye(i.snapshot);u.attachRef=null,u.route=i,u.injector=d,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class ys{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $a{constructor(e,t){this.component=e,this.route=t}}function fv(n,e,t){const r=n._root;return bc(r,e?e._root:null,t,[r.value])}function Ha(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function bc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=xl(e);return n.children.forEach(u=>{(function Ga(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const p=function Nm(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!pe(n.url,e.url);case"pathParamsOrQueryParamsChange":return!pe(n.url,e.url)||!xo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ap(n,e)||!xo(n.queryParams,e.queryParams);default:return!ap(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new ys(r)):(s.data=u.data,s._resolvedData=u._resolvedData),bc(n,e,s.component?d?d.children:null:t,r,i),p&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new $a(d.outlet.component,u))}else u&&Cc(e,d,i),i.canActivateChecks.push(new ys(r)),bc(n,null,s.component?d?d.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),Object.entries(s).forEach(([u,d])=>Cc(d,t.getContext(u),i)),i}function Cc(n,e,t){const r=xl(n),i=n.value;Object.entries(r).forEach(([s,u])=>{Cc(u,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new $a(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Dc(n){return"function"==typeof n}function Om(n){return n instanceof Xs||"EmptyError"===n?.name}const Pl=Symbol("INITIAL_VALUE");function yh(){return(0,Nr.w)(n=>Qd(n.map(e=>e.pipe(Co(1),gc(Pl)))).pipe((0,St.U)(e=>{for(const t of e)if(!0!==t){if(t===Pl)return Pl;if(!1===t||t instanceof R)return t}return!0}),ts(e=>e!==Pl),Co(1)))}function RD(n){return(0,Jf.z)((0,fr.b)(e=>{if(Cu(e))throw mh(0,e)}),(0,St.U)(e=>!0===e))}class Lm{constructor(e){this.segmentGroup=e||null}}class Vm{constructor(e){this.urlTree=e}}function Ml(n){return Ei(new Lm(n))}function vh(n){return Ei(new Vm(n))}class GV{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new f.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,xt.of)(r);if(i.numberOfChildren>1||!i.children[jt])return Ei(new f.vHH(4e3,!1));i=i.children[jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new R(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const d=s.substring(1);r[i]=t[d]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return Object.entries(t.children).forEach(([d,p])=>{u[d]=this.createSegmentGroup(e,p,r,i)}),new F(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const M0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function N0(n,e,t,r,i){const s=k0(n,e,t);return s.matched?(r=function hv(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function PD(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,xt.of)(!0);const s=i.map(u=>{const d=Ha(u,n);return eo(function CD(n){return n&&Dc(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))});return(0,xt.of)(s).pipe(yh(),RD())}(r,e,t).pipe((0,St.U)(u=>!0===u?s:{...M0}))):(0,xt.of)(s)}function k0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...M0}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Js)(t,n,e);if(!i)return{...M0};const s={};Object.entries(i.posParams??{}).forEach(([d,p])=>{s[d]=p.path});const u=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function Ih(n,e,t,r){return t.length>0&&function MD(n,e,t){return t.some(r=>Um(n,e,r)&&ee(r)!==jt)}(n,t,r)?{segmentGroup:new F(e,O0(r,new F(t,n.children))),slicedSegments:[]}:0===t.length&&function ND(n,e,t){return t.some(r=>Um(n,e,r))}(n,t,r)?{segmentGroup:new F(n.segments,mv(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new F(n.segments,n.children),slicedSegments:t}}function mv(n,e,t,r,i){const s={};for(const u of r)if(Um(n,t,u)&&!i[ee(u)]){const d=new F([],{});s[ee(u)]=d}return{...i,...s}}function O0(n,e){const t={};t[jt]=e;for(const r of n)if(""===r.path&&ee(r)!==jt){const i=new F([],{});t[ee(r)]=i}return t}function Um(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class aP{constructor(e,t,r,i,s,u,d){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=u,this.urlSerializer=d,this.allowRedirects=!0,this.applyRedirects=new GV(this.urlSerializer,this.urlTree)}noMatchError(e){return new f.vHH(4002,!1)}recognize(){const e=Ih(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,jt).pipe(ns(t=>{if(t instanceof Vm)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Lm?this.noMatchError(t):t}),(0,St.U)(t=>{const r=new hh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},jt,this.rootComponentType,null,{}),i=new Ro(r,t),s=new fh("",i),u=function ID(n,e,t=null,r=null){return vc(Du(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(s._root),{state:s,tree:u}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,jt).pipe(ns(r=>{throw r instanceof Lm?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=bi(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,vn.D)(i).pipe(Ao(s=>{const u=r.children[s],d=function Ge(n,e){const t=n.filter(r=>ee(r)===e);return t.push(...n.filter(r=>ee(r)!==e)),t}(t,s);return this.processSegmentGroup(e,d,u,s)}),tr((s,u)=>(s.push(...u),s)),yl(null),function _c(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ts((i,s)=>n(i,s,r)):Ii.y,mc(1),t?yl(e):vl(()=>new Xs))}(),(0,kr.z)(s=>{if(null===s)return Ml(r);const u=Ac(s);return function uP(n){n.sort((e,t)=>e.value.outlet===jt?-1:t.value.outlet===jt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),(0,xt.of)(u)}))}processSegment(e,t,r,i,s,u){return(0,vn.D)(t).pipe(Ao(d=>this.processSegmentAgainstRoute(d._injector??e,t,d,r,i,s,u).pipe(ns(p=>{if(p instanceof Lm)return(0,xt.of)(null);throw p}))),na(d=>!!d),ns(d=>{if(Om(d))return function sP(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?(0,xt.of)([]):Ml(r);throw d}))}processSegmentAgainstRoute(e,t,r,i,s,u,d){return function kD(n,e,t,r){return!!(ee(n)===r||r!==jt&&Um(e,t,n))&&("**"===n.path||k0(e,n,t).matched)}(r,i,s,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,u,d):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,u):Ml(i):Ml(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?vh(s):this.applyRedirects.lineralizeSegments(r,s).pipe((0,kr.z)(u=>{const d=new F(u,{});return this.processSegment(e,t,d,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:d,consumedSegments:p,remainingSegments:y,positionalParamSegments:E}=k0(t,i,s);if(!d)return Ml(t);const D=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,E);return i.redirectTo.startsWith("/")?vh(D):this.applyRedirects.lineralizeSegments(i,D).pipe((0,kr.z)(P=>this.processSegment(e,r,t,P.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,u){let d;if("**"===r.path){const p=i.length>0?La(i).parameters:{},y=new hh(i,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OD(r),ee(r),r.component??r._loadedComponent??null,r,lP(r));d=(0,xt.of)({snapshot:y,consumedSegments:[],remainingSegments:[]}),t.children={}}else d=N0(t,r,i,e).pipe((0,St.U)(({matched:p,consumedSegments:y,remainingSegments:E,parameters:D})=>p?{snapshot:new hh(y,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OD(r),ee(r),r.component??r._loadedComponent??null,r,lP(r)),consumedSegments:y,remainingSegments:E}:null));return d.pipe((0,Nr.w)(p=>null===p?Ml(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Nr.w)(({routes:y})=>{const E=r._loadedInjector??e,{snapshot:D,consumedSegments:P,remainingSegments:k}=p,{segmentGroup:B,slicedSegments:Z}=Ih(t,P,k,y);if(0===Z.length&&B.hasChildren())return this.processChildren(E,y,B).pipe((0,St.U)(me=>null===me?null:[new Ro(D,me)]));if(0===y.length&&0===Z.length)return(0,xt.of)([new Ro(D,[])]);const z=ee(r)===s;return this.processSegment(E,y,B,Z,z?jt:s,!0).pipe((0,St.U)(me=>[new Ro(D,me)]))}))))}getChildConfig(e,t,r){return t.children?(0,xt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,xt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function nP(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,xt.of)(!0);const s=i.map(u=>{const d=Ha(u,n);return eo(function cp(n){return n&&Dc(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))});return(0,xt.of)(s).pipe(yh(),RD())}(e,t,r).pipe((0,kr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,fr.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function iP(n){return Ei(Pm(!1,3))}())):(0,xt.of)({routes:[],injector:e})}}function cP(n){const e=n.value.routeConfig;return e&&""===e.path}function Ac(n){const e=[],t=new Set;for(const r of n){if(!cP(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Ac(r.children);e.push(new Ro(r.value,i))}return e.filter(r=>!t.has(r))}function OD(n){return n.data||{}}function lP(n){return n.resolve||{}}function LD(n){return"string"==typeof n.title||null===n.title}function F0(n){return(0,Nr.w)(e=>{const t=n(e);return t?(0,vn.D)(t).pipe((0,St.U)(()=>e)):(0,xt.of)(e)})}const lp=new f.OlP("ROUTES");let Bm=(()=>{var n;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return(0,xt.of)(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=eo(r.loadComponent()).pipe((0,St.U)(dp),(0,fr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=u}),ra(()=>{this.componentLoaders.delete(r)})),s=new ka(i,()=>new ms.x).pipe(_l());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,xt.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const u=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,St.U)(p=>{this.onLoadEndListener&&this.onLoadEndListener(i);let y,E;return Array.isArray(p)?E=p:(y=p.create(r).injector,E=y.get(lp,[],f.XFs.Self|f.XFs.Optional).flat()),{routes:E.map(q),injector:y}}),ra(()=>{this.childrenLoaders.delete(i)})),d=new ka(u,()=>new ms.x).pipe(_l());return this.childrenLoaders.set(i,d),d}loadModuleFactoryOrRoutes(r){return eo(r()).pipe((0,St.U)(dp),(0,kr.z)(i=>i instanceof f.YKP||Array.isArray(i)?(0,xt.of)(i):(0,vn.D)(this.compiler.compileModuleAsync(i))))}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function dp(n){return function Sc(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let jm=(()=>{var n;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ms.x,this.transitionAbortSubject=new ms.x,this.configLoader=(0,f.f3M)(Bm),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(Ze),this.rootContexts=(0,f.f3M)(wc),this.inputBindingEnabled=null!==(0,f.f3M)(gh,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,xt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new ov(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new sp(s))}complete(){this.transitions?.complete()}handleNavigationRequest(r){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...r,id:i})}setupNavigations(r,i,s){return this.transitions=new ni.X({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:r.urlHandlingStrategy.extract(i),urlAfterRedirects:r.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:oh,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ts(u=>0!==u.id),(0,St.U)(u=>({...u,extractedUrl:r.urlHandlingStrategy.extract(u.rawUrl)})),(0,Nr.w)(u=>{this.currentTransition=u;let d=!1,p=!1;return(0,xt.of)(u).pipe((0,fr.b)(y=>{this.currentNavigation={id:y.id,initialUrl:y.rawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Nr.w)(y=>{const E=y.currentBrowserUrl.toString(),D=!r.navigated||y.extractedUrl.toString()!==E||E!==y.currentUrlTree.toString();if(!D&&"reload"!==(y.extras.onSameUrlNavigation??r.onSameUrlNavigation)){const k="";return this.events.next(new uh(y.id,this.urlSerializer.serialize(y.rawUrl),k,0)),y.resolve(null),bo.E}if(r.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return(0,xt.of)(y).pipe((0,Nr.w)(k=>{const B=this.transitions?.getValue();return this.events.next(new ah(k.id,this.urlSerializer.serialize(k.extractedUrl),k.source,k.restoredState)),B!==this.transitions?.getValue()?bo.E:Promise.resolve(k)}),function qV(n,e,t,r,i,s){return(0,kr.z)(u=>function oP(n,e,t,r,i,s,u="emptyOnly"){return new aP(n,e,t,r,i,u,s).recognize()}(n,e,t,r,u.extractedUrl,i,s).pipe((0,St.U)(({state:d,tree:p})=>({...u,targetSnapshot:d,urlAfterRedirects:p}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,r.paramsInheritanceStrategy),(0,fr.b)(k=>{u.targetSnapshot=k.targetSnapshot,u.urlAfterRedirects=k.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:k.urlAfterRedirects};const B=new C0(k.id,this.urlSerializer.serialize(k.extractedUrl),this.urlSerializer.serialize(k.urlAfterRedirects),k.targetSnapshot);this.events.next(B)}));if(D&&r.urlHandlingStrategy.shouldProcessUrl(y.currentRawUrl)){const{id:k,extractedUrl:B,source:Z,restoredState:z,extras:me}=y,Ne=new ah(k,this.urlSerializer.serialize(B),Z,z);this.events.next(Ne);const Se=Tc(0,this.rootComponentType).snapshot;return this.currentTransition=u={...y,targetSnapshot:Se,urlAfterRedirects:B,extras:{...me,skipLocationChange:!1,replaceUrl:!1}},(0,xt.of)(u)}{const k="";return this.events.next(new uh(y.id,this.urlSerializer.serialize(y.extractedUrl),k,1)),y.resolve(null),bo.E}}),(0,fr.b)(y=>{const E=new wD(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(E)}),(0,St.U)(y=>(this.currentTransition=u={...y,guards:fv(y.targetSnapshot,y.currentSnapshot,this.rootContexts)},u)),function R0(n,e){return(0,kr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?(0,xt.of)({...t,guardsResult:!0}):function gv(n,e,t,r){return(0,vn.D)(n).pipe((0,kr.z)(i=>function tP(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,xt.of)(!0);const u=s.map(d=>{const p=Ye(e)??i,y=Ha(d,p);return eo(function bD(n){return n&&Dc(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):p.runInContext(()=>y(n,e,t,r))).pipe(na())});return(0,xt.of)(u).pipe(yh())}(i.component,i.route,t,e,r)),na(i=>!0!==i,!0))}(u,r,i,n).pipe((0,kr.z)(d=>d&&function x0(n){return"boolean"==typeof n}(d)?function SD(n,e,t,r){return(0,vn.D)(e).pipe(Ao(i=>hc(function Fm(n,e){return null!==n&&e&&e(new av(n)),(0,xt.of)(!0)}(i.route.parent,r),function P0(n,e){return null!==n&&e&&e(new Dl(n)),(0,xt.of)(!0)}(i.route,r),function xD(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function Mm(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>fc(()=>{const d=u.guards.map(p=>{const y=Ye(u.node)??t,E=Ha(p,y);return eo(function pv(n){return n&&Dc(n.canActivateChild)}(E)?E.canActivateChild(r,n):y.runInContext(()=>E(r,n))).pipe(na())});return(0,xt.of)(d).pipe(yh())}));return(0,xt.of)(s).pipe(yh())}(n,i.path,t),function eP(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,xt.of)(!0);const i=r.map(s=>fc(()=>{const u=Ye(e)??t,d=Ha(s,u);return eo(function km(n){return n&&Dc(n.canActivate)}(d)?d.canActivate(e,n):u.runInContext(()=>d(e,n))).pipe(na())}));return(0,xt.of)(i).pipe(yh())}(n,i.route,t))),na(i=>!0!==i,!0))}(r,s,n,e):(0,xt.of)(d)),(0,St.U)(d=>({...t,guardsResult:d})))})}(this.environmentInjector,y=>this.events.next(y)),(0,fr.b)(y=>{if(u.guardsResult=y.guardsResult,Cu(y.guardsResult))throw mh(0,y.guardsResult);const E=new TD(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.events.next(E)}),ts(y=>!!y.guardsResult||(this.cancelNavigationTransition(y,"",3),!1)),F0(y=>{if(y.guards.canActivateChecks.length)return(0,xt.of)(y).pipe((0,fr.b)(E=>{const D=new sv(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(D)}),(0,Nr.w)(E=>{let D=!1;return(0,xt.of)(E).pipe(function zV(n,e){return(0,kr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,xt.of)(t);let s=0;return(0,vn.D)(i).pipe(Ao(u=>function WV(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!LD(i)&&(s[So]=i.title),function KV(n,e,t,r){const i=function FD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,xt.of)({});const s={};return(0,vn.D)(i).pipe((0,kr.z)(u=>function dP(n,e,t,r){const i=Ye(e)??r,s=Ha(n,i);return eo(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[u],e,t,r).pipe(na(),(0,fr.b)(d=>{s[u]=d}))),mc(1),function wu(n){return(0,St.U)(()=>n)}(s),ns(u=>Om(u)?bo.E:Ei(u)))}(s,n,e,r).pipe((0,St.U)(u=>(n._resolvedData=u,n.data=bi(n,t).resolve,i&&LD(i)&&(n.data[So]=i.title),null)))}(u.route,r,n,e)),(0,fr.b)(()=>s++),mc(1),(0,kr.z)(u=>s===i.length?(0,xt.of)(t):bo.E))})}(r.paramsInheritanceStrategy,this.environmentInjector),(0,fr.b)({next:()=>D=!0,complete:()=>{D||this.cancelNavigationTransition(E,"",2)}}))}),(0,fr.b)(E=>{const D=new ip(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(D)}))}),F0(y=>{const E=D=>{const P=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&P.push(this.configLoader.loadComponent(D.routeConfig).pipe((0,fr.b)(k=>{D.component=k}),(0,St.U)(()=>{})));for(const k of D.children)P.push(...E(k));return P};return Qd(E(y.targetSnapshot.root)).pipe(yl(),Co(1))}),F0(()=>this.afterPreactivation()),(0,St.U)(y=>{const E=function Rm(n,e,t){const r=Su(n,e._root,t?t._root:void 0);return new _s(r,e)}(r.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return this.currentTransition=u={...y,targetRouterState:E},u}),(0,fr.b)(()=>{this.events.next(new Al)}),((n,e,t,r)=>(0,St.U)(i=>(new Hn(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,r.routeReuseStrategy,y=>this.events.next(y),this.inputBindingEnabled),Co(1),(0,fr.b)({next:y=>{d=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ua(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects))),r.titleStrategy?.updateTitle(y.targetRouterState.snapshot),y.resolve(!0)},complete:()=>{d=!0}}),function Xd(n){return(0,qr.e)((e,t)=>{(0,ml.Xf)(n).subscribe((0,er.x)(t,()=>t.complete(),El.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe((0,fr.b)(y=>{throw y}))),ra(()=>{d||p||this.cancelNavigationTransition(u,"",1),this.currentNavigation?.id===u.id&&(this.currentNavigation=null)}),ns(y=>{if(p=!0,up(y))this.events.next(new Ec(u.id,this.urlSerializer.serialize(u.extractedUrl),y.message,y.cancellationCode)),function _h(n){return up(n)&&Cu(n.url)}(y)?this.events.next(new Sl(y.url)):u.resolve(!1);else{this.events.next(new bl(u.id,this.urlSerializer.serialize(u.extractedUrl),y,u.targetSnapshot??void 0));try{u.resolve(r.errorHandler(y))}catch(E){u.reject(E)}}return bo.E}))}))}cancelNavigationTransition(r,i,s){const u=new Ec(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(u),r.resolve(!1)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function L0(n){return n!==oh}let V0=(()=>{var n;class e{buildTitle(r){let i,s=r.root;for(;void 0!==s;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(u=>u.outlet===jt);return i}getResolvedTitleForRoute(r){return r.data[So]}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(ZV)},providedIn:"root"}),e})(),ZV=(()=>{var n;class e extends V0{constructor(r){super(),this.title=r}updateTitle(r){const i=this.buildTitle(r);void 0!==i&&this.title.setTitle(i)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(yu))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),QV=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(U0)},providedIn:"root"}),e})();class YV{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let U0=(()=>{var n;class e extends YV{}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=f.n5z(n)))(i||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const hp=new f.OlP("",{providedIn:"root",factory:()=>({})});let XV=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(JV)},providedIn:"root"}),e})(),JV=(()=>{var n;class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();var fp=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(fp||{});function VD(n,e){n.events.pipe(ts(t=>t instanceof Ua||t instanceof Ec||t instanceof bl||t instanceof uh),(0,St.U)(t=>t instanceof Ua||t instanceof uh?fp.COMPLETE:t instanceof Ec&&(0===t.code||1===t.code)?fp.REDIRECTING:fp.FAILED),ts(t=>t!==fp.REDIRECTING),Co(1)).subscribe(()=>{e()})}function hP(n){throw n}function fP(n,e,t){return e.parse("/")}const pP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},UD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let zr=(()=>{var n;class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this._events=new ms.x,this.options=(0,f.f3M)(hp,{optional:!0})||{},this.pendingTasks=(0,f.f3M)(f.HDt),this.errorHandler=this.options.errorHandler||hP,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||fP,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(XV),this.routeReuseStrategy=(0,f.f3M)(QV),this.titleStrategy=(0,f.f3M)(V0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,f.f3M)(lp,{optional:!0})?.flat()??[],this.navigationTransitions=(0,f.f3M)(jm),this.urlSerializer=(0,f.f3M)(Ze),this.location=(0,f.f3M)(tt),this.componentInputBindingEnabled=!!(0,f.f3M)(gh,{optional:!0}),this.eventsSubscription=new pc.w0,this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new R,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Tc(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(r=>{this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const r=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:s}=this.navigationTransitions;if(null===s)return void(yv(i)&&this._events.next(i));if(i instanceof ah)L0(s.source)&&(this.browserUrlTree=s.extractedUrl);else if(i instanceof uh)this.rawUrlTree=s.rawUrl;else if(i instanceof C0){if("eager"===this.urlUpdateStrategy){if(!s.extras.skipLocationChange){const u=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl);this.setBrowserUrl(u,s)}this.browserUrlTree=s.urlAfterRedirects}}else if(i instanceof Al)this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects);else if(i instanceof Ec)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(s);else if(i instanceof Sl){const u=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),d={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||L0(s.source)};this.scheduleNavigation(u,oh,null,d,{resolve:s.resolve,reject:s.reject,promise:s.promise})}i instanceof bl&&this.restoreHistory(s,!0),i instanceof Ua&&(this.navigated=!0),yv(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const r=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),oh,r)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const i="popstate"===r.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(r.url,i,r.state)},0)}))}navigateToSyncWithBrowser(r,i,s){const u={replaceUrl:!0},d=s?.navigationId?s:null;if(s){const y={...s};delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(u.state=y)}const p=this.parseUrl(r);this.scheduleNavigation(p,i,d,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(q),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){const{relativeTo:s,queryParams:u,fragment:d,queryParamsHandling:p,preserveFragment:y}=i,E=y?this.currentUrlTree.fragment:d;let P,D=null;switch(p){case"merge":D={...this.currentUrlTree.queryParams,...u};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=u||null}null!==D&&(D=this.removeEmptyProps(D));try{P=Du(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof r[0]||!r[0].startsWith("/"))&&(r=[]),P=this.currentUrlTree.root}return vc(P,r,D,E??null)}navigateByUrl(r,i={skipLocationChange:!1}){const s=Cu(r)?r:this.parseUrl(r),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,oh,null,i)}navigate(r,i={skipLocationChange:!1}){return function gP(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new f.vHH(4008,!1)}(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let i;try{i=this.urlSerializer.parse(r)}catch(s){i=this.malformedUriErrorHandler(s,this.urlSerializer,r)}return i}isActive(r,i){let s;if(s=!0===i?{...pP}:!1===i?{...UD}:i,Cu(r))return Yy(this.currentUrlTree,r,s);const u=this.parseUrl(r);return Yy(this.currentUrlTree,u,s)}removeEmptyProps(r){return Object.keys(r).reduce((i,s)=>{const u=r[s];return null!=u&&(i[s]=u),i},{})}scheduleNavigation(r,i,s,u,d){if(this.disposed)return Promise.resolve(!1);let p,y,E;d?(p=d.resolve,y=d.reject,E=d.promise):E=new Promise((P,k)=>{p=P,y=k});const D=this.pendingTasks.add();return VD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(D))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:r,extras:u,resolve:p,reject:y,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(P=>Promise.reject(P))}setBrowserUrl(r,i){const s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){const d={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(s,"",d)}else{const u={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(s,"",u)}}restoreHistory(r,i=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function yv(n){return!(n instanceof Al||n instanceof Sl)}class BD{}let yP=(()=>{var n;class e{constructor(r,i,s,u,d){this.router=r,this.injector=s,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(ts(r=>r instanceof Ua),Ao(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){const s=[];for(const u of i){u.providers&&!u._injector&&(u._injector=(0,f.MMx)(u.providers,r,`Route: ${u.path}`));const d=u._injector??r,p=u._loadedInjector??d;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(d,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(p,u.children??u._loadedRoutes))}return(0,vn.D)(s).pipe((0,To.J)())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;s=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(r,i):(0,xt.of)(null);const u=s.pipe((0,kr.z)(d=>null===d?(0,xt.of)(void 0):(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,this.processRoutes(d.injector??r,d.routes))));if(i.loadComponent&&!i._loadedComponent){const d=this.loader.loadComponent(i);return(0,vn.D)([u,d]).pipe((0,To.J)())}return u})}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(zr),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(BD),f.LFG(Bm))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const j0=new f.OlP("");let $D=(()=>{var n;class e{constructor(r,i,s,u,d={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=u,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ah?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Ua?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof uh&&0===r.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Am&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Am(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return(n=e).\u0275fac=function(r){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();function Nl(n,e){return{\u0275kind:n,\u0275providers:e}}function H0(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(zr),i=n.get(G0);1===n.get($m)&&r.initialNavigation(),n.get(z0,null,f.XFs.Optional)?.setUpPreloading(),n.get(j0,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const G0=new f.OlP("",{factory:()=>new ms.x}),$m=new f.OlP("",{providedIn:"root",factory:()=>1}),z0=new f.OlP("");function Ev(n){return Nl(0,[{provide:z0,useExisting:yP},{provide:BD,useExisting:n}])}const K0=new f.OlP("ROUTER_FORROOT_GUARD"),Eh=[tt,{provide:Ze,useClass:yt},zr,wc,{provide:Rl,useFactory:function $0(n){return n.routerState.root},deps:[zr]},Bm,[]];function wP(){return new f.PXZ("Router",zr)}let kl=(()=>{var n;class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[Eh,[],{provide:lp,multi:!0,useValue:r},{provide:K0,useFactory:Tv,deps:[[zr,new f.FiY,new f.tp0]]},{provide:hp,useValue:i||{}},i?.useHash?{provide:We,useClass:Ve}:{provide:We,useClass:et},{provide:j0,useFactory:()=>{const n=(0,f.f3M)(Ar),e=(0,f.f3M)(f.R0b),t=(0,f.f3M)(hp),r=(0,f.f3M)(jm),i=(0,f.f3M)(Ze);return t.scrollOffset&&n.setOffset(t.scrollOffset),new $D(i,r,n,e,t)}},i?.preloadingStrategy?Ev(i.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:wP},i?.initialNavigation?xu(i):[],i?.bindToComponentInputs?Nl(8,[ji,{provide:gh,useExisting:ji}]).\u0275providers:[],[{provide:Hm,useFactory:H0},{provide:f.tb,multi:!0,useExisting:Hm}]]}}static forChild(r){return{ngModule:e,providers:[{provide:lp,multi:!0,useValue:r}]}}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(K0,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),e})();function Tv(n){return"guarded"}function xu(n){return["disabled"===n.initialNavigation?Nl(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(zr);return()=>{e.setUpLocationChangeListener()}}},{provide:$m,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Nl(2,[{provide:$m,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(Le,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(zr),s=e.get(G0);VD(i,()=>{r(!0)}),e.get(jm).afterPreactivation=()=>(r(!0),s.closed?(0,xt.of)(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const Hm=new f.OlP("");let bv=(()=>{var n;class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),e})(),Ol=(()=>{var n;class e extends bv{}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=f.n5z(n)))(i||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),e})();const Ru=new f.OlP("NgValueAccessor"),a2={provide:Ru,useExisting:(0,f.Gpc)(()=>qm),multi:!0},DP=new f.OlP("CompositionEventMode");let qm=(()=>{var n;class e extends bv{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function u2(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(r){this.setProperty("value",r??"")}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(DP,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&f.NdJ("input",function(u){return i._handleInput(u.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(u){return i._compositionEnd(u.target.value)})},features:[f._Bn([a2]),f.qOj]}),e})();function wh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function AP(n){return null!=n&&"number"==typeof n.length}const Ci=new f.OlP("NgValidators"),Fl=new f.OlP("NgAsyncValidators"),Y0=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Os{static min(e){return function Th(n){return e=>{if(wh(e.value)||wh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Dv(n){return e=>{if(wh(e.value)||wh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Av(n){return wh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function gp(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function zm(n){return wh(n.value)||Y0.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function mp(n){return e=>wh(e.value)||!AP(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function X0(n){return e=>AP(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Sv(n){if(!n)return bh;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(wh(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return KD(e)}static composeAsync(e){return J0(e)}}function bh(n){return null}function SP(n){return null!=n}function xv(n){return(0,f.QGY)(n)?(0,vn.D)(n):n}function _p(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function qD(n,e){return e.map(t=>t(n))}function WD(n){return n.map(e=>function zD(n){return!n.validate}(e)?e:t=>e.validate(t))}function KD(n){if(!n)return null;const e=n.filter(SP);return 0==e.length?null:function(t){return _p(qD(t,e))}}function Wm(n){return null!=n?KD(WD(n)):null}function J0(n){if(!n)return null;const e=n.filter(SP);return 0==e.length?null:function(t){return function CP(...n){const e=(0,Na.jO)(n),{args:t,keys:r}=dc(n),i=new vi.y(s=>{const{length:u}=t;if(!u)return void s.complete();const d=new Array(u);let p=u,y=u;for(let E=0;E<u;E++){let D=!1;(0,ml.Xf)(t[E]).subscribe((0,er.x)(s,P=>{D||(D=!0,y--),d[E]=P},()=>p--,void 0,()=>{(!p||!D)&&(y||s.next(r?gl(r,d):d),s.complete())}))}});return e?i.pipe(Ma(e)):i}(qD(t,e).map(xv)).pipe((0,St.U)(_p))}}function ew(n){return null!=n?J0(WD(n)):null}function ZD(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function xP(n){return n._rawValidators}function QD(n){return n._rawAsyncValidators}function yp(n){return n?Array.isArray(n)?n:[n]:[]}function vp(n,e){return Array.isArray(n)?n.includes(e):n===e}function YD(n,e){const t=yp(e);return yp(n).forEach(i=>{vp(t,i)||t.push(i)}),t}function tw(n,e){return yp(e).filter(t=>!vp(n,t))}class Rv{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Wm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ew(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class $i extends Rv{get formDirective(){return null}get path(){return null}}class Ll extends Rv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class nw{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let XD=(()=>{var n;class e extends nw{constructor(r){super(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(Ll,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&f.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[f.qOj]}),e})(),JD=(()=>{var n;class e extends nw{constructor(r){super(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36($i,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&f.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[f.qOj]}),e})();const wp="VALID",Nv="INVALID",Dh="PENDING",Km="DISABLED";function rw(n){return(ro(n)?n.validators:n)||null}function kv(n,e){return(ro(e)?e.asyncValidators:n)||null}function ro(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Ov(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")}function nA(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,"")})}class iw{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===wp}get invalid(){return this.status===Nv}get pending(){return this.status==Dh}get disabled(){return this.status===Km}get enabled(){return this.status!==Km}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(YD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(YD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tw(e,this._rawAsyncValidators))}hasValidator(e){return vp(this._rawValidators,e)}hasAsyncValidator(e){return vp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Dh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Km,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=wp,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wp||this.status===Dh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Km:wp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Dh,this._hasOwnPendingAsyncValidator=!0;const t=xv(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Km:this.errors?Nv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dh)?Dh:this._anyControlsHaveStatus(Nv)?Nv:wp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ro(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function m2(n){return Array.isArray(n)?Wm(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function tA(n){return Array.isArray(n)?ew(n):n||null}(this._rawAsyncValidators)}}class Zm extends iw{constructor(e,t,r){super(rw(t),kv(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){nA(this,0,e),Object.keys(e).forEach(r=>{Ov(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Ah extends Zm{}const oa=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Qm}),Qm="always";function Fv(n,e){return[...e.path,n]}function Tp(n,e,t=Qm){iA(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Dp(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&sw(n,e)})}(n,e),function sA(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Lv(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&sw(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function rA(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function bp(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Cp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ul(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function iA(n,e){const t=xP(n);null!==e.validator?n.setValidators(ZD(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=QD(n);null!==e.asyncValidator?n.setAsyncValidators(ZD(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Ul(e._rawValidators,i),Ul(e._rawAsyncValidators,i)}function Cp(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=xP(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=QD(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return Ul(e._rawValidators,r),Ul(e._rawAsyncValidators,r),t}function sw(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function aA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Uv(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===qm?t=s:function I2(n){return Object.getPrototypeOf(n.constructor)===Ol}(s)?r=s:i=s}),i||r||t||null}function aw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Yt(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Sp=class extends iw{constructor(e=null,t,r){super(rw(t),kv(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ro(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Yt(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){aw(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){aw(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Yt(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},dw={provide:Ll,useExisting:(0,f.Gpc)(()=>Jm)},$v=(()=>Promise.resolve())();let Jm=(()=>{var n;class e extends Ll{constructor(r,i,s,u,d,p){super(),this._changeDetectorRef=d,this.callSetDisabledState=p,this.control=new Sp,this._registered=!1,this.name="",this.update=new f.vpe,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Uv(0,u)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){const i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),aA(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Tp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){$v.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){const i=r.isDisabled.currentValue,s=0!==i&&(0,f.VuI)(i);$v.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?Fv(r,this._parent):[r]}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36($i,9),f.Y36(Ci,10),f.Y36(Fl,10),f.Y36(Ru,10),f.Y36(f.sBO,8),f.Y36(oa,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([dw]),f.qOj,f.TTD]}),e})(),hw=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),pw=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),e})();const Hv=new f.OlP("NgModelWithFormControlWarning"),GP={provide:$i,useExisting:(0,f.Gpc)(()=>vs)};let vs=(()=>{var n;class e extends $i{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Cp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){const i=this.form.get(r.path);return Tp(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){bp(r.control||null,r,!1),function E2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,function ow(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(r),"dialog"===r?.target?.method}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{const i=r.control,s=this.form.get(r.path);i!==s&&(bp(i||null,r),(n=>n instanceof Sp)(s)&&(Tp(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){const i=this.form.get(r.path);(function oA(n,e){iA(n,e)})(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){const i=this.form.get(r.path);i&&function LP(n,e){return Cp(n,e)}(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){iA(this.form,this),this._oldForm&&Cp(this._oldForm,this)}_checkFormPresent(){}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(Ci,10),f.Y36(Fl,10),f.Y36(oa,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&f.NdJ("submit",function(u){return i.onSubmit(u)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([GP]),f.qOj,f.TTD]}),e})();const zP={provide:Ll,useExisting:(0,f.Gpc)(()=>_w)};let _w=(()=>{var n;class e extends Ll{set isDisabled(r){}constructor(r,i,s,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.name=null,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Uv(0,u)}ngOnChanges(r){this._added||this._setUpControl(),aA(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return Fv(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return(n=e)._ngModelWarningSentOnce=!1,n.\u0275fac=function(r){return new(r||n)(f.Y36($i,13),f.Y36(Ci,10),f.Y36(Fl,10),f.Y36(Ru,10),f.Y36(Hv,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([zP]),f.qOj,f.TTD]}),e})(),Rp=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[pw]}),e})();class n_ extends iw{constructor(e,t,r){super(rw(t),kv(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){nA(this,0,e),e.forEach((r,i)=>{Ov(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function xw(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let IA=(()=>{var n;class e{constructor(){this.useNonNullable=!1}get nonNullable(){const r=new e;return r.useNonNullable=!0,r}group(r,i=null){const s=this._reduceControls(r);let u={};return xw(i)?u=i:null!==i&&(u.validators=i.validator,u.asyncValidators=i.asyncValidator),new Zm(s,u)}record(r,i=null){const s=this._reduceControls(r);return new Ah(s,i)}control(r,i,s){let u={};return this.useNonNullable?(xw(i)?u=i:(u.validators=i,u.asyncValidators=s),new Sp(r,{...u,nonNullable:!0})):new Sp(r,i,s)}array(r,i,s){const u=r.map(d=>this._createControl(d));return new n_(u,i,s)}_reduceControls(r){const i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){return r instanceof Sp||r instanceof iw?r:Array.isArray(r)?this.control(r[0],r.length>1?r[1]:null,r.length>2?r[2]:null):this.control(r)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),Rw=(()=>{var n;class e{static withConfig(r){return{ngModule:e,providers:[{provide:oa,useValue:r.callSetDisabledState??Qm}]}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Rp]}),e})(),r_=(()=>{var n;class e{static withConfig(r){return{ngModule:e,providers:[{provide:Hv,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:oa,useValue:r.callSetDisabledState??Qm}]}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Rp]}),e})();var ht,ie=O(5861),Hi=O(4303),Sh=O(4537),rs=O(7879),on=O(9058),i_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qa={},Pw=Pw||{},Xt=i_||self;function zv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function s_(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Mw="closure_uid_"+(1e9*Math.random()>>>0),EA=0;function Nw(n,e,t){return n.call.apply(n.bind,arguments)}function nM(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Di(n,e,t){return(Di=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Nw:nM).apply(null,arguments)}function Wv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Gi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function jl(){this.s=this.s,this.o=this.o}jl.prototype.s=!1,jl.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function tM(n){Object.prototype.hasOwnProperty.call(n,Mw)&&n[Mw]||(n[Mw]=++EA)}(this)},jl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wA=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function kw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function TA(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(zv(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let u=0;u<s;u++)n[i+u]=r[u]}else n.push(r)}}function is(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}is.prototype.h=function(){this.defaultPrevented=!0};var bA=function(){if(!Xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Xt.addEventListener("test",()=>{},e),Xt.removeEventListener("test",()=>{},e)}catch{}return n}();function o_(n){return/^[\s\xa0]*$/.test(n)}function Ow(){var n=Xt.navigator;return n&&(n=n.userAgent)?n:""}function za(n){return-1!=Ow().indexOf(n)}function Kv(n){return Kv[" "](n),n}Kv[" "]=function(){};var qi,n,Zv=za("Opera"),Pp=za("Trident")||za("MSIE"),CA=za("Edge"),a_=CA||Pp,DA=za("Gecko")&&!(-1!=Ow().toLowerCase().indexOf("webkit")&&!za("Edge"))&&!(za("Trident")||za("MSIE"))&&!za("Edge"),Nu=-1!=Ow().toLowerCase().indexOf("webkit")&&!za("Edge");function Mp(){var n=Xt.document;return n?n.documentMode:void 0}e:{var xc="",Np=(n=Ow(),DA?/rv:([^\);]+)(\)|;)/.exec(n):CA?/Edge\/([\d\.]+)/.exec(n):Pp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Nu?/WebKit\/(\S+)/.exec(n):Zv?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Np&&(xc=Np?Np[1]:""),Pp){var io=Mp();if(null!=io&&io>parseFloat(xc)){qi=String(io);break e}}qi=xc}var kp=Xt.document&&Pp&&(Mp()||parseInt(qi,10))||void 0;function ku(n,e){if(is.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(DA){e:{try{Kv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Op[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ku.$.h.call(this)}}Gi(ku,is);var Op={2:"touch",3:"pen",4:"mouse"};ku.prototype.h=function(){ku.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ou="closure_listenable_"+(1e6*Math.random()|0),Fp=0;function Lp(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++Fp,this.fa=this.ia=!1}function Rc(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function $l(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Fw(n){const e={};for(const t in n)e[t]=n[t];return e}const Lw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vw(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<Lw.length;s++)t=Lw[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function c_(n){this.src=n,this.g={},this.h=0}function Qv(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=wA(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Rc(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Yv(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}c_.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=Yv(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new Lp(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var Xv="closure_lm_"+(1e6*Math.random()|0),Jv={};function eI(n,e,t,r,i){if(r&&r.once)return iM(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)eI(n,e[s],t,r,i);return null}return t=jw(t),n&&n[Ou]?n.O(e,t,s_(r)?!!r.capture:!!r,i):SA(n,e,t,!1,r,i)}function SA(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=s_(i)?!!i.capture:!!i,d=RA(n);if(d||(n[Xv]=d=new c_(n)),(t=d.add(e,t,r,u,s)).proxy)return t;if(r=function M2(){const e=oM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)bA||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(sM(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function iM(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)iM(n,e[s],t,r,i);return null}return t=jw(t),n&&n[Ou]?n.P(e,t,s_(r)?!!r.capture:!!r,i):SA(n,e,t,!0,r,i)}function xA(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)xA(n,e[s],t,r,i);else r=s_(r)?!!r.capture:!!r,t=jw(t),n&&n[Ou]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Yv(s=n.g[e],t,r,i))&&(Rc(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=RA(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Yv(e,t,r,i)),(t=-1<n?e[n]:null)&&Uw(t))}function Uw(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Ou])Qv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(sM(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=RA(e))?(Qv(t,n),0==t.h&&(t.src=null,e[Xv]=null)):Rc(n)}}}function sM(n){return n in Jv?Jv[n]:Jv[n]="on"+n}function oM(n,e){if(n.fa)n=!0;else{e=new ku(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Uw(n),n=t.call(r,e)}return n}function RA(n){return(n=n[Xv])instanceof c_?n:null}var Bw="__closure_events_fn_"+(1e9*Math.random()>>>0);function jw(n){return"function"==typeof n?n:(n[Bw]||(n[Bw]=function(e){return n.handleEvent(e)}),n[Bw])}function zi(){jl.call(this),this.i=new c_(this),this.S=this,this.J=null}function Ai(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new is(e,n);else if(e instanceof is)e.target=e.target||n;else{var i=e;Vw(e=new is(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=Hl(u,r,!0,e)&&i}if(i=Hl(u=e.g=n,r,!0,e)&&i,i=Hl(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Hl(u=e.g=t[s],r,!1,e)&&i}function Hl(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.fa&&u.capture==t){var d=u.listener,p=u.la||u.src;u.ia&&Qv(n.i,u),i=!1!==d.call(p,r)&&i}}return i&&!r.defaultPrevented}Gi(zi,jl),zi.prototype[Ou]=!0,zi.prototype.removeEventListener=function(n,e,t,r){xA(this,n,e,t,r)},zi.prototype.N=function(){if(zi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Rc(t[r]);delete n.g[e],n.h--}}this.J=null},zi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},zi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var l_=Xt.JSON.stringify;function PA(){var n=Hw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $w=new class tI{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new aM,n=>n.reset());class aM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function h_(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function uM(n){Xt.setTimeout(()=>{throw n},0)}let f_,p_=!1,Hw=new class d_{constructor(){this.h=this.g=null}add(e,t){const r=$w.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},nI=()=>{const n=Xt.Promise.resolve(void 0);f_=()=>{n.then(rI)}};var rI=()=>{for(var n;n=PA();){try{n.h.call(n.g)}catch(t){uM(t)}var e=$w;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}p_=!1};function Rh(n,e){zi.call(this),this.h=n||1,this.g=e||Xt,this.j=Di(this.qb,this),this.l=Date.now()}function MA(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Gw(n,e,t){if("function"==typeof n)t&&(n=Di(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Di(n.handleEvent,n)}return 2147483647<Number(e)?-1:Xt.setTimeout(n,e||0)}function NA(n){n.g=Gw(()=>{n.g=null,n.i&&(n.i=!1,NA(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Gi(Rh,zi),(ht=Rh.prototype).ga=!1,ht.T=null,ht.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ai(this,"tick"),this.ga&&(MA(this),this.start()))}},ht.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ht.N=function(){Rh.$.N.call(this),MA(this),delete this.g};class qw extends jl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:NA(this)}N(){super.N(),this.g&&(Xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function g_(n){jl.call(this),this.h=n,this.g={}}Gi(g_,jl);var zw=[];function kA(n,e,t,r){Array.isArray(t)||(t&&(zw[0]=t.toString()),t=zw);for(var i=0;i<t.length;i++){var s=eI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function OA(n){$l(n.g,function(e,t){this.g.hasOwnProperty(t)&&Uw(e)},n),n.g={}}function m_(){this.g=!0}function Vp(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function lM(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return l_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}g_.prototype.N=function(){g_.$.N.call(this),OA(this)},g_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},m_.prototype.Ea=function(){this.g=!1},m_.prototype.info=function(){};var Ph={},iI=null;function Up(){return iI=iI||new zi}function VA(n){is.call(this,Ph.Ta,n)}function Gl(n){const e=Up();Ai(e,new VA(e))}function __(n,e){is.call(this,Ph.STAT_EVENT,n),this.stat=e}function ss(n){const e=Up();Ai(e,new __(e,n))}function Ww(n,e){is.call(this,Ph.Ua,n),this.size=e}function y_(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Xt.setTimeout(function(){n()},e)}Ph.Ta="serverreachability",Gi(VA,is),Ph.STAT_EVENT="statevent",Gi(__,is),Ph.Ua="timingevent",Gi(Ww,is);var sI={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},UA={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Bp(){}function Kw(){}Bp.prototype.h=null;var oI,jp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Zw(){is.call(this,"d")}function Qw(){is.call(this,"c")}function $p(){}function Hp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new g_(this),this.P=BA,this.V=new Rh(n=a_?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new aI}function aI(){this.i=null,this.g="",this.h=!1}Gi(Zw,is),Gi(Qw,is),Gi($p,Bp),$p.prototype.g=function(){return new XMLHttpRequest},$p.prototype.i=function(){return{}},oI=new $p;var BA=45e3,Yw={},I_={};function uI(n,e,t){n.L=1,n.v=zp(Is(e)),n.s=t,n.S=!0,Xw(n,null)}function Xw(n,e){n.G=Date.now(),E_(n),n.A=Is(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),rT(t.i,"t",r),n.C=0,t=n.l.J,n.h=new aI,n.g=aS(n.l,t?e:null,!n.s),0<n.O&&(n.M=new qw(Di(n.Pa,n,n.g),n.O)),kA(n.U,n.g,"readystatechange",n.nb),e=n.I?Fw(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Gl(),function FA(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",d=s.split("&"),p=0;p<d.length;p++){var y=d[p].split("=");if(1<y.length){var E=y[0];y=y[1];var D=E.split("_");u=2<=D.length&&"type"==D[1]?u+(E+"=")+y+"&":u+(E+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Jw(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function jA(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=dM(n,t),i==I_){4==e&&(n.o=4,ss(14),r=!1),Vp(n.j,n.m,null,"[Incomplete Response]");break}if(i==Yw){n.o=4,ss(15),Vp(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Vp(n.j,n.m,i,null),cI(n,i)}Jw(n)&&i!=I_&&i!=Yw&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ss(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),yT(e),e.M=!0,ss(11))):(Vp(n.j,n.m,t,"[Invalid Chunked Response]"),ql(n),qp(n))}function dM(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?I_:(t=Number(e.substring(t,r)),isNaN(t)?Yw:(r+=1)+t>e.length?I_:(e=e.slice(r,r+t),n.C=r+t,e))}function E_(n){n.Y=Date.now()+n.P,eT(n,n.P)}function eT(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=y_(Di(n.lb,n),e)}function Gp(n){n.B&&(Xt.clearTimeout(n.B),n.B=null)}function qp(n){0==n.l.H||n.J||rS(n.l,n)}function ql(n){Gp(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,MA(n.V),OA(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function cI(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||sT(t.i,n)))if(!n.K&&sT(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;_I(t),R_(t)}_T(t),ss(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=y_(Di(t.ib,t),6e3));if(1>=iT(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else kh(t,11)}else if((n.K||t.g==n)&&_I(t),!o_(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const E=y[3];null!=E&&(t.ra=E,t.l.info("VER="+t.ra));const D=y[4];null!=D&&(t.Ga=D,t.l.info("SVER="+t.Ga));const P=y[5];null!=P&&"number"==typeof P&&0<P&&(t.L=r=1.5*P,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const k=n.g;if(k){const B=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var s=r.i;s.g||-1==B.indexOf("spdy")&&-1==B.indexOf("quic")&&-1==B.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(fI(s,s.h),s.h=null))}if(r.F){const Z=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;Z&&(r.Da=Z,Sn(r.I,r.F,Z))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=oS(r,r.J?r.pa:null,r.Y),u.K){_M(r.i,u);var d=u,p=r.L;p&&d.setTimeout(p),d.B&&(Gp(d),E_(d)),r.g=u}else mT(r);0<t.j.length&&P_(t)}else"stop"!=y[0]&&"close"!=y[0]||kh(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?kh(t,7):x_(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}Gl()}catch{}}function tT(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zv(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function HA(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(zv(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function $A(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(zv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(ht=Hp.prototype).setTimeout=function(n){this.P=n},ht.nb=function(n){n=n.target;const e=this.M;e&&3==Vu(n)?e.l():this.Pa(n)},ht.Pa=function(n){try{if(n==this.g)e:{const E=Vu(this.g);var e=this.g.Ia();if(this.g.da(),!(3>E)&&(3!=E||a_||this.g&&(this.h.h||this.g.ja()||lT(this.g)))){this.J||4!=E||7==e||Gl(),Gp(this);var t=this.g.da();this.ca=t;t:if(Jw(this)){var r=lT(this.g);n="";var i=r.length,s=4==Vu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ql(this),qp(this);var u="";break t}this.h.i=new Xt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function LA(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.W,E,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!o_(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,ss(12),ql(this),qp(this);break e}Vp(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cI(this,t)}this.S?(jA(this,E,u),a_&&this.i&&3==E&&(kA(this.U,this.V,"tick",this.mb),this.V.start())):(Vp(this.j,this.m,u,null),cI(this,u)),4==E&&ql(this),this.i&&!this.J&&(4==E?rS(this.l,this):(this.i=!1,E_(this)))}else(function eS(n){const e={};n=(n.g&&2<=Vu(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(o_(n[r]))continue;var t=h_(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function AA(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,ss(12)):(this.o=0,ss(13)),ql(this),qp(this)}}}catch{}},ht.mb=function(){if(this.g){var n=Vu(this.g),e=this.g.ja();this.C<e.length&&(Gp(this),jA(this,n,e),this.i&&4!=n&&E_(this))}},ht.cancel=function(){this.J=!0,ql(this)},ht.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function cM(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Gl(),ss(17)),ql(this),this.o=2,qp(this)):eT(this,this.Y-n)};var nT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fu(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Fu){this.h=n.h,lI(this,n.j),this.s=n.s,this.g=n.g,dI(this,n.m),this.l=n.l;var e=n.i,t=new _r;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),hI(this,t),this.o=n.o}else n&&(e=String(n).match(nT))?(this.h=!1,lI(this,e[1]||"",!0),this.s=w_(e[2]||""),this.g=w_(e[3]||"",!0),dI(this,e[4]),this.l=w_(e[5]||"",!0),hI(this,e[6]||"",!0),this.o=w_(e[7]||"")):(this.h=!1,this.i=new _r(null,this.h))}function Is(n){return new Fu(n)}function lI(n,e,t){n.j=t?w_(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function dI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function hI(n,e,t){e instanceof _r?(n.i=e,function KA(n,e){e&&!n.j&&(Pc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(zA(this,r),rT(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Mh(e,qA)),n.i=new _r(e,n.h))}function Sn(n,e,t){n.i.set(e,t)}function zp(n){return Sn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function w_(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Mh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,N2),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function N2(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Fu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Mh(e,hM,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Mh(e,hM,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Mh(t,"/"==t.charAt(0)?pM:fM,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Mh(t,gM)),n.join("")};var hM=/[#\/\?@]/g,fM=/[#\?:]/g,pM=/[#\?]/g,qA=/[#\?@]/g,gM=/#/g;function _r(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Pc(n){n.g||(n.g=new Map,n.h=0,n.i&&function GA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zA(n,e){Pc(n),e=Wp(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function WA(n,e){return Pc(n),e=Wp(n,e),n.g.has(e)}function rT(n,e,t){zA(n,e),0<t.length&&(n.i=null,n.g.set(Wp(n,e),kw(t)),n.h+=t.length)}function Wp(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Nh(n){this.l=n||mM,n=Xt.PerformanceNavigationTiming?0<(n=Xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Xt.g&&Xt.g.Ka&&Xt.g.Ka()&&Xt.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ht=_r.prototype).add=function(n,e){Pc(this),this.i=null,n=Wp(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ht.forEach=function(n,e){Pc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ht.ta=function(){Pc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},ht.Z=function(n){Pc(this);let e=[];if("string"==typeof n)WA(this,n)&&(e=e.concat(this.g.get(Wp(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ht.set=function(n,e){return Pc(this),this.i=null,WA(this,n=Wp(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ht.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ht.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=s;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var mM=10;function QA(n){return!!n.h||!!n.g&&n.g.size>=n.j}function iT(n){return n.h?1:n.g?n.g.size:0}function sT(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function fI(n,e){n.g?n.g.add(e):n.h=e}function _M(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function oT(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return kw(n.i)}Nh.prototype.cancel=function(){if(this.i=oT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var aT=class{stringify(n){return Xt.JSON.stringify(n,void 0)}parse(n){return Xt.JSON.parse(n,void 0)}};function Lu(){this.g=new aT}function yM(n,e,t){const r=t||"";try{tT(n,function(i,s){let u=i;s_(i)&&(u=l_(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Po(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Fs(n){this.l=n.ec||null,this.j=n.ob||!1}function so(n,e){zi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=pI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gi(Fs,Bp),Fs.prototype.g=function(){return new so(this.l,this.j)},Fs.prototype.i=function(n){return function(){return n}}({}),Gi(so,zi);var pI=0;function uT(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function T_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,b_(n)}function b_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ht=so.prototype).open=function(n,e){if(this.readyState!=pI)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,b_(this)},ht.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Xt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ht.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,T_(this)),this.readyState=pI},ht.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,b_(this)),this.g&&(this.readyState=3,b_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Xt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uT(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ht.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?T_(this):b_(this),3==this.readyState&&uT(this)}},ht.Za=function(n){this.g&&(this.response=this.responseText=n,T_(this))},ht.Ya=function(n){this.g&&(this.response=n,T_(this))},ht.ka=function(){this.g&&T_(this)},ht.setRequestHeader=function(n,e){this.v.append(n,e)},ht.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ht.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(so.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var IM=Xt.JSON.parse;function Or(n){zi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=gI,this.L=this.M=!1}Gi(Or,zi);var gI="",C_=/^https?$/i,EM=["POST","PUT"];function XA(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,JA(n),D_(n)}function JA(n){n.F||(n.F=!0,Ai(n,"complete"),Ai(n,"error"))}function cT(n){if(n.h&&typeof Pw<"u"&&(!n.C[1]||4!=Vu(n)||2!=n.da()))if(n.v&&4==Vu(n))Gw(n.La,0,n);else if(Ai(n,"readystatechange"),4==Vu(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(nT)[1]||null;!i&&Xt.self&&Xt.self.location&&(i=Xt.self.location.protocol.slice(0,-1)),r=!C_.test(i?i.toLowerCase():"")}t=r}if(t)Ai(n,"complete"),Ai(n,"success");else{n.m=6;try{var s=2<Vu(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",JA(n)}}finally{D_(n)}}}function D_(n,e){if(n.g){A_(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ai(n,"ready");try{t.onreadystatechange=r}catch{}}}function A_(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Xt.clearTimeout(n.A),n.A=null)}function Vu(n){return n.g?n.g.readyState:0}function lT(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case gI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function dT(n){let e="";return $l(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function hT(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=dT(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Sn(n,e,t))}function S_(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function mI(n){this.Ga=0,this.j=[],this.l=new m_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=S_("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=S_("baseRetryDelayMs",5e3,n),this.hb=S_("retryDelaySeedMs",1e4,n),this.eb=S_("forwardChannelMaxRetries",2,n),this.xa=S_("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Nh(n&&n.concurrentRequestLimit),this.Ja=new Lu,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function x_(n){if(fT(n),3==n.H){var e=n.W++,t=Is(n.I);if(Sn(t,"SID",n.K),Sn(t,"RID",e),Sn(t,"TYPE","terminate"),Kp(n,t),(e=new Hp(n,n.l,e)).L=2,e.v=zp(Is(t)),t=!1,Xt.navigator&&Xt.navigator.sendBeacon)try{t=Xt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=aS(e.l,null),e.g.ha(e.v)),e.G=Date.now(),E_(e)}sS(n)}function R_(n){n.g&&(yT(n),n.g.cancel(),n.g=null)}function fT(n){R_(n),n.u&&(Xt.clearTimeout(n.u),n.u=null),_I(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Xt.clearTimeout(n.m),n.m=null)}function P_(n){if(!QA(n.i)&&!n.m){n.m=!0;var e=n.Na;f_||nI(),p_||(f_(),p_=!0),Hw.add(e,n),n.C=0}}function pT(n,e){var t;t=e?e.m:n.W++;const r=Is(n.I);Sn(r,"SID",n.K),Sn(r,"RID",t),Sn(r,"AID",n.V),Kp(n,r),n.o&&n.s&&hT(r,n.o,n.s),t=new Hp(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=gT(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),fI(n.i,t),uI(t,r,e)}function Kp(n,e){n.na&&$l(n.na,function(t,r){Sn(e,r,t)}),n.h&&tT({},function(t,r){Sn(e,r,t)})}function gT(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Di(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].g,u.push("ofs="+s)):s=0:u.push("ofs="+s);let d=!0;for(let p=0;p<t;p++){let y=i[p].g;const E=i[p].map;if(y-=s,0>y)s=Math.max(0,i[p].g-100),d=!1;else try{yM(E,u,"req"+y+"_")}catch{r&&r(E)}}if(d){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function mT(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;f_||nI(),p_||(f_(),p_=!0),Hw.add(e,n),n.A=0}}function _T(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=y_(Di(n.Ma,n),iS(n,n.A)),n.A++,0))}function yT(n){null!=n.B&&(Xt.clearTimeout(n.B),n.B=null)}function nS(n){n.g=new Hp(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Is(n.wa);Sn(e,"RID","rpc"),Sn(e,"SID",n.K),Sn(e,"AID",n.V),Sn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Sn(e,"TO",n.qa),Sn(e,"TYPE","xmlhttp"),Kp(n,e),n.o&&n.s&&hT(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=zp(Is(e)),t.s=null,t.S=!0,Xw(t,n)}function _I(n){null!=n.v&&(Xt.clearTimeout(n.v),n.v=null)}function rS(n,e){var t=null;if(n.g==e){_I(n),yT(n),n.g=null;var r=2}else{if(!sT(n.i,e))return;t=e.F,_M(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Ai(r=Up(),new Ww(r,t)),P_(n)}else mT(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function tS(n,e){return!(iT(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=y_(Di(n.Na,n,e),iS(n,n.C)),n.C++,0)))}(n,e)||2==r&&_T(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:kh(n,5);break;case 4:kh(n,10);break;case 3:kh(n,6);break;default:kh(n,2)}}function iS(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function kh(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Di(n.pb,n);t||(t=new Fu("//www.google.com/images/cleardot.gif"),Xt.location&&"http"==Xt.location.protocol||lI(t,"https"),zp(t)),function vM(n,e){const t=new m_;if(Xt.Image){const r=new Image;r.onload=Wv(Po,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Wv(Po,t,r,"TestLoadImage: error",!1,e),r.onabort=Wv(Po,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Wv(Po,t,r,"TestLoadImage: timeout",!1,e),Xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ss(2);n.H=0,n.h&&n.h.za(e),sS(n),fT(n)}function sS(n){if(n.H=0,n.ma=[],n.h){const e=oT(n.i);(0!=e.length||0!=n.j.length)&&(TA(n.ma,e),TA(n.ma,n.j),n.i.i.length=0,kw(n.j),n.j.length=0),n.h.ya()}}function oS(n,e,t){var r=t instanceof Fu?Is(t):new Fu(t);if(""!=r.g)e&&(r.g=e+"."+r.g),dI(r,r.m);else{var i=Xt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Fu(null);r&&lI(s,r),e&&(s.g=e),i&&dI(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&Sn(r,t,e),Sn(r,"VER",n.ra),Kp(n,r),r}function aS(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Or(t&&n.Ha&&!n.va?new Fs({ob:!0}):n.va)).Oa(n.J),e}function uS(){}function yI(){if(Pp&&!(10<=Number(kp)))throw Error("Environmental error: no available transport.")}function Mo(n,e){zi.call(this),this.g=new mI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!o_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!o_(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Zp(this)}function cS(n){Zw.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function lS(){Qw.call(this),this.status=1}function Zp(n){this.g=n}function Wa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function vI(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],u=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;u=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(u<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((s=(e=t+((u=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=s+((u=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function On(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(ht=Or.prototype).Oa=function(n){this.M=n},ht.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():oI.g(),this.C=function v_(n){return n.h||(n.h=n.i())}(this.u?this.u:oI),this.g.onreadystatechange=Di(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void XA(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Xt.FormData&&n instanceof Xt.FormData,!(0<=wA(EM,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,u]of t)this.g.setRequestHeader(s,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{A_(this),0<this.B&&((this.L=function YA(n){return Pp&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Di(this.ua,this)):this.A=Gw(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){XA(this,s)}},ht.ua=function(){typeof Pw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ai(this,"timeout"),this.abort(8))},ht.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ai(this,"complete"),Ai(this,"abort"),D_(this))},ht.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),D_(this,!0)),Or.$.N.call(this)},ht.La=function(){this.s||(this.G||this.v||this.l?cT(this):this.kb())},ht.kb=function(){cT(this)},ht.isActive=function(){return!!this.g},ht.da=function(){try{return 2<Vu(this)?this.g.status:-1}catch{return-1}},ht.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ht.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),IM(e)}},ht.Ia=function(){return this.m},ht.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ht=mI.prototype).ra=8,ht.H=1,ht.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Hp(this,this.l,n);let s=this.s;if(this.U&&(s?(s=Fw(s),Vw(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=gT(this,i,e),Sn(t=Is(this.I),"RID",n),Sn(t,"CVER",22),this.F&&Sn(t,"X-HTTP-Session-Id",this.F),Kp(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(dT(s)))+"&"+e:this.o&&hT(t,this.o,s)),fI(this.i,i),this.bb&&Sn(t,"TYPE","init"),this.P?(Sn(t,"$req",e),Sn(t,"SID","null"),i.aa=!0,uI(i,t,null)):uI(i,t,e),this.H=2}}else 3==this.H&&(n?pT(this,n):0==this.j.length||QA(this.i)||pT(this))},ht.Ma=function(){if(this.u=null,nS(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=y_(Di(this.jb,this),n)}},ht.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ss(10),R_(this),nS(this))},ht.ib=function(){null!=this.v&&(this.v=null,R_(this),_T(this),ss(19))},ht.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ss(2)):(this.l.info("Failed to ping google.com"),ss(1))},ht.isActive=function(){return!!this.h&&this.h.isActive(this)},(ht=uS.prototype).Ba=function(){},ht.Aa=function(){},ht.za=function(){},ht.ya=function(){},ht.isActive=function(){return!0},ht.Va=function(){},yI.prototype.g=function(n,e){return new Mo(n,e)},Gi(Mo,zi),Mo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ss(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=oS(n,null,n.Y),P_(n)},Mo.prototype.close=function(){x_(this.g)},Mo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=l_(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&P_(e)},Mo.prototype.N=function(){this.g.h=null,delete this.j,x_(this.g),delete this.g,Mo.$.N.call(this)},Gi(cS,Zw),Gi(lS,Qw),Gi(Zp,uS),Zp.prototype.Ba=function(){Ai(this.g,"a")},Zp.prototype.Aa=function(n){Ai(this.g,new cS(n))},Zp.prototype.za=function(n){Ai(this.g,new lS)},Zp.prototype.ya=function(){Ai(this.g,"b")},Gi(Wa,function wM(){this.blockSize=-1}),Wa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Wa.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)vI(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){vI(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){vI(this,r),i=0;break}}this.h=i,this.i+=e},Wa.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var dS={};function II(n){return-128<=n&&128>n?function P2(n,e){var t=dS;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new On([0|e],0>e?-1:0)}):new On([0|n],0>n?-1:0)}function Ka(n){if(isNaN(n)||!isFinite(n))return Oh;if(0>n)return os(Ka(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=EI;return new On(e,0)}var EI=4294967296,Oh=II(0),wI=II(1),IT=II(16777216);function Uu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Wi(n){return-1==n.h}function os(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new On(t,~n.h).add(wI)}function TI(n,e){return n.add(os(e))}function Mc(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function bI(n,e){this.g=n,this.h=e}function Qp(n,e){if(Uu(e))throw Error("division by zero");if(Uu(n))return new bI(Oh,Oh);if(Wi(n))return e=Qp(os(n),e),new bI(os(e.g),os(e.h));if(Wi(e))return e=Qp(n,os(e)),new bI(os(e.g),e.h);if(30<n.g.length){if(Wi(n)||Wi(e))throw Error("slowDivide_ only works with positive integers.");for(var t=wI,r=e;0>=r.X(n);)t=TM(t),r=TM(r);var i=Fh(t,1),s=Fh(r,1);for(r=Fh(r,2),t=Fh(t,2);!Uu(r);){var u=s.add(r);0>=u.X(n)&&(i=i.add(t),s=u),r=Fh(r,1),t=Fh(t,1)}return e=TI(n,i.R(e)),new bI(i,e)}for(i=Oh;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(s=Ka(t)).R(e);Wi(u)||0<u.X(n);)u=(s=Ka(t-=r)).R(e);Uu(s)&&(s=wI),i=i.add(s),n=TI(n,u)}return new bI(i,n)}function TM(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new On(t,n.h)}function Fh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new On(i,n.h)}(ht=On.prototype).ea=function(){if(Wi(this))return-os(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:EI+r)*e,e*=EI}return n},ht.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Uu(this))return"0";if(Wi(this))return"-"+os(this).toString(n);for(var e=Ka(Math.pow(n,6)),t=this,r="";;){var i=Qp(t,e).g,s=((0<(t=TI(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Uu(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ht.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ht.X=function(n){return Wi(n=TI(this,n))?-1:Uu(n)?0:1},ht.abs=function(){return Wi(this)?os(this):this},ht.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),u=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(s&=65535)}return new On(t,-2147483648&t[t.length-1]?-1:0)},ht.R=function(n){if(Uu(this)||Uu(n))return Oh;if(Wi(this))return Wi(n)?os(this).R(os(n)):os(os(this).R(n));if(Wi(n))return os(this.R(os(n)));if(0>this.X(IT)&&0>n.X(IT))return Ka(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,u=65535&this.D(r),d=n.D(i)>>>16,p=65535&n.D(i);t[2*r+2*i]+=u*p,Mc(t,2*r+2*i),t[2*r+2*i+1]+=s*p,Mc(t,2*r+2*i+1),t[2*r+2*i+1]+=u*d,Mc(t,2*r+2*i+1),t[2*r+2*i+2]+=s*d,Mc(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new On(t,0)},ht.gb=function(n){return Qp(this,n).h},ht.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new On(t,this.h&n.h)},ht.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new On(t,this.h|n.h)},ht.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new On(t,this.h^n.h)},yI.prototype.createWebChannel=yI.prototype.g,Mo.prototype.send=Mo.prototype.u,Mo.prototype.open=Mo.prototype.m,Mo.prototype.close=Mo.prototype.close,sI.NO_ERROR=0,sI.TIMEOUT=8,sI.HTTP_ERROR=6,UA.COMPLETE="complete",Kw.EventType=jp,jp.OPEN="a",jp.CLOSE="b",jp.ERROR="c",jp.MESSAGE="d",zi.prototype.listen=zi.prototype.O,Or.prototype.listenOnce=Or.prototype.P,Or.prototype.getLastError=Or.prototype.Sa,Or.prototype.getLastErrorCode=Or.prototype.Ia,Or.prototype.getStatus=Or.prototype.da,Or.prototype.getResponseJson=Or.prototype.Wa,Or.prototype.getResponseText=Or.prototype.ja,Or.prototype.send=Or.prototype.ha,Or.prototype.setWithCredentials=Or.prototype.Oa,Wa.prototype.digest=Wa.prototype.l,Wa.prototype.reset=Wa.prototype.reset,Wa.prototype.update=Wa.prototype.j,On.prototype.add=On.prototype.add,On.prototype.multiply=On.prototype.R,On.prototype.modulo=On.prototype.gb,On.prototype.compare=On.prototype.X,On.prototype.toNumber=On.prototype.ea,On.prototype.toString=On.prototype.toString,On.prototype.getBits=On.prototype.D,On.fromNumber=Ka,On.fromString=function vT(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return os(vT(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ka(Math.pow(e,8)),r=Oh,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+s),e);8>s?(s=Ka(Math.pow(e,s)),r=r.R(s).add(Ka(u))):r=(r=r.R(t)).add(Ka(u))}return r};var hS=qa.createWebChannelTransport=function(){return new yI},k2=qa.getStatEventTarget=function(){return Up()},zl=qa.ErrorCode=sI,bM=qa.EventType=UA,CM=qa.Event=Ph,fS=qa.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},CI=(qa.FetchXmlHttpFactory=Fs,qa.WebChannel=Kw),DI=qa.XhrIo=Or,AI=qa.Md5=Wa,Si=qa.Integer=On;const DM="@firebase/firestore";class xi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xi.UNAUTHENTICATED=new xi(null),xi.GOOGLE_CREDENTIALS=new xi("google-credentials-uid"),xi.FIRST_PARTY=new xi("first-party-uid"),xi.MOCK_USER=new xi("mock-user");let Lh="10.4.0";const Wl=new rs.Yd("@firebase/firestore");function Vh(){return Wl.logLevel}function qe(n,...e){if(Wl.logLevel<=rs.in.DEBUG){const t=e.map(ET);Wl.debug(`Firestore (${Lh}): ${n}`,...t)}}function Fr(n,...e){if(Wl.logLevel<=rs.in.ERROR){const t=e.map(ET);Wl.error(`Firestore (${Lh}): ${n}`,...t)}}function No(n,...e){if(Wl.logLevel<=rs.in.WARN){const t=e.map(ET);Wl.warn(`Firestore (${Lh}): ${n}`,...t)}}function ET(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function vt(n="Unexpected state"){const e=`FIRESTORE (${Lh}) INTERNAL ASSERTION FAILED: `+n;throw Fr(e),new Error(e)}function Ct(n,e){n||vt()}function ut(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $e extends on.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xi.UNAUTHENTICATED))}shutdown(){}}class SM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class N_{constructor(e){this.t=e,this.currentUser=xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ii,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=u;e.enqueueRetryable((0,ie.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ii)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new wT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new xi(e)}}class k_{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=xi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xM{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new k_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(xi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.R;return this.R=s.token,qe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.R=t.token,new gS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function mS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class TT{static V(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=mS(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Qt(n,e){return n<e?-1:n>e?1:0}function Uh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class yr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $e(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $e(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $e(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $e(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yr.fromMillis(Date.now())}static fromDate(e){return yr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new yr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new yr(0,0))}static max(){return new Nt(new yr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class SI{constructor(e,t,r){void 0===t?t=0:t>e.length&&vt(),void 0===r?r=e.length-t:r>e.length-t&&vt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===SI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof SI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bn extends SI{construct(e,t,r){return new bn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new $e(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new bn(t)}static emptyPath(){return new bn([])}}const F2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vr extends SI{construct(e,t,r){return new vr(e,t,r)}static isValidIdentifier(e){return F2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new $e(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new $e(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new $e(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(s(),i++)}if(s(),u)throw new $e(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vr(t)}static emptyPath(){return new vr([])}}class ot{constructor(e){this.path=e}static fromPath(e){return new ot(bn.fromString(e))}static fromName(e){return new ot(bn.fromString(e).popFirst(5))}static empty(){return new ot(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new bn(e.slice()))}}function NM(n){return new ko(n.readTime,n.key,-1)}class ko{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ko(Nt.min(),ot.empty(),-1)}static max(){return new ko(Nt.max(),ot.empty(),-1)}}function xI(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ot.comparator(n.documentKey,e.documentKey),0!==t?t:Qt(n.largestBatchId,e.largestBatchId))}const vS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function aa(n){return CT.apply(this,arguments)}function CT(){return CT=(0,ie.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==vS)throw n;qe("LocalStore","Unexpectedly lost primary lease")}),CT.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let i=0,s=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++s,u&&s===i&&t()},p=>r(p))}),u=!0,s===i&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(i=>i?ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,i)=>{const s=e.length,u=new Array(s);let d=0;for(let p=0;p<s;p++){const y=p;t(e[y]).next(E=>{u[y]=E,++d,d===s&&r(u)},E=>i(E))}})}static doWhile(e,t){return new ae((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function Zl(n){return"IndexedDbTransactionError"===n.name}let Oo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}return n.ae=-1,n})();function $h(n){return null==n}function F_(n){return 0===n&&1/n==-1/0}function WM(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ju(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}class nr{constructor(e,t){this.comparator=e,this.root=t||Zi.EMPTY}insert(e,t){return new nr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zi.BLACK,null,null))}remove(e){return new nr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new L_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new L_(this.root,e,this.comparator,!1)}getReverseIterator(){return new L_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new L_(this.root,e,this.comparator,!0)}}class L_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Zi.RED,this.left=i??Zi.EMPTY,this.right=s??Zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Zi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Zi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}}Zi.EMPTY=null,Zi.RED=!0,Zi.BLACK=!1,Zi.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Zi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rr{constructor(e){this.comparator=e,this.data=new nr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kT(this.data.getIterator())}getIteratorFrom(e){return new kT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rr(this.comparator);return t.data=e,t}}class kT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ls{constructor(e){this.fields=e,e.sort(vr.comparator)}static empty(){return new Ls([])}unionWith(e){let t=new rr(vr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class OT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class si{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new OT("Invalid base64 string: "+s):s}}(e);return new si(t)}static fromUint8Array(e){const t=function(i){let s="";for(let u=0;u<i.length;++u)s+=String.fromCharCode(i[u]);return s}(e);return new si(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}si.EMPTY_BYTE_STRING=new si("");const ZM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yl(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=ZM.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lr(n.seconds),nanos:Lr(n.nanos)}}function Lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Nc(n){return"string"==typeof n?si.fromBase64String(n):si.fromUint8Array(n)}function V_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function FT(n){const e=n.mapValue.fields.__previous_value__;return V_(e)?FT(e):e}function eg(n){const e=Yl(n.mapValue.fields.__local_write_time__.timestampValue);return new yr(e.seconds,e.nanos)}class QM{constructor(e,t,r,i,s,u,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}class Gh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Gh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Gh&&e.projectId===this.projectId&&e.database===this.database}}const qh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?V_(n)?4:BT(n)?9007199254740991:10:vt()}function $u(n,e){if(n===e)return!0;const t=Xl(n);if(t!==Xl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return eg(n).isEqual(eg(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const u=Yl(i.timestampValue),d=Yl(s.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Nc(n.bytesValue).isEqual(Nc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Lr(i.geoPointValue.latitude)===Lr(s.geoPointValue.latitude)&&Lr(i.geoPointValue.longitude)===Lr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Lr(i.integerValue)===Lr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const u=Lr(i.doubleValue),d=Lr(s.doubleValue);return u===d?F_(u)===F_(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Uh(n.arrayValue.values||[],e.arrayValue.values||[],$u);case 10:return function(i,s){const u=i.mapValue.fields||{},d=s.mapValue.fields||{};if(WM(u)!==WM(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===d[p]||!$u(u[p],d[p])))return!1;return!0}(n,e);default:return vt()}var s}function tg(n,e){return void 0!==(n.values||[]).find(t=>$u(t,e))}function Jl(n,e){if(n===e)return 0;const t=Xl(n),r=Xl(e);if(t!==r)return Qt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const d=Lr(s.integerValue||s.doubleValue),p=Lr(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return xS(n.timestampValue,e.timestampValue);case 4:return xS(eg(n),eg(e));case 5:return Qt(n.stringValue,e.stringValue);case 6:return function(s,u){const d=Nc(s),p=Nc(u);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const d=s.split("/"),p=u.split("/");for(let y=0;y<d.length&&y<p.length;y++){const E=Qt(d[y],p[y]);if(0!==E)return E}return Qt(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const d=Qt(Lr(s.latitude),Lr(u.latitude));return 0!==d?d:Qt(Lr(s.longitude),Lr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const d=s.values||[],p=u.values||[];for(let y=0;y<d.length&&y<p.length;++y){const E=Jl(d[y],p[y]);if(E)return E}return Qt(d.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===qh.mapValue&&u===qh.mapValue)return 0;if(s===qh.mapValue)return 1;if(u===qh.mapValue)return-1;const d=s.fields||{},p=Object.keys(d),y=u.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let D=0;D<p.length&&D<E.length;++D){const P=Qt(p[D],E[D]);if(0!==P)return P;const k=Jl(d[p[D]],y[E[D]]);if(0!==k)return k}return Qt(p.length,E.length)}(n.mapValue,e.mapValue);default:throw vt()}}function xS(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Qt(n,e);const t=Yl(n),r=Yl(e),i=Qt(t.seconds,r.seconds);return 0!==i?i:Qt(t.nanos,r.nanos)}function ng(n){return LT(n)}function LT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Yl(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Nc(n.bytesValue).toBase64():"referenceValue"in n?ot.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=LT(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const u of r)s?s=!1:i+=",",i+=`${u}:${LT(t.fields[u])}`;return i+"}"}(n.mapValue):vt()}function VT(n){return!!n&&"integerValue"in n}function U_(n){return!!n&&"arrayValue"in n}function rg(n){return!!n&&"nullValue"in n}function UT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function B_(n){return!!n&&"mapValue"in n}function ig(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ju(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ig(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ig(n.arrayValue.values[t]);return e}return Object.assign({},n)}function BT(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class ws{constructor(e){this.value=e}static empty(){return new ws({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!B_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ig(t)}setAll(e){let t=vr.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=ig(u):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());B_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $u(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];B_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ju(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ws(ig(this.value))}}class cr{constructor(e,t,r,i,s,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=u,this.documentState=d}static newInvalidDocument(e){return new cr(e,0,Nt.min(),Nt.min(),Nt.min(),ws.empty(),0)}static newFoundDocument(e,t,r,i){return new cr(e,1,t,Nt.min(),r,i,0)}static newNoDocument(e,t){return new cr(e,2,t,Nt.min(),Nt.min(),ws.empty(),0)}static newUnknownDocument(e,t){return new cr(e,3,t,Nt.min(),Nt.min(),ws.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Nt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ws.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ws.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ed{constructor(e,t){this.position=e,this.inclusive=t}}function NS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?ot.comparator(ot.fromName(u.referenceValue),t.key):Jl(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function kS(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$u(n.position[t],e.position[t]))return!1;return!0}class Hu{constructor(e,t="asc"){this.field=e,this.dir=t}}function JM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class LI{}class Jt extends LI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new eN(e,t,r):"array-contains"===t?new $S(e,r):"in"===t?new j_(e,r):"not-in"===t?new tN(e,r):"array-contains-any"===t?new nN(e,r):new Jt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new VI(e,r):new BS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Jl(t,this.value)):null!==t&&Xl(this.value)===Xl(t)&&this.matchesComparison(Jl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Vn extends LI{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Vn(e,t)}matches(e){return td(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(t=>t.isInequality());return null!==e?e.field:null}le(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function td(n){return"and"===n.op}function OS(n){return function FS(n){for(const e of n.filters)if(e instanceof Vn)return!1;return!0}(n)&&td(n)}function LS(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+ng(n.value);if(OS(n))return n.filters.map(e=>LS(e)).join(",");{const e=n.filters.map(t=>LS(t)).join(",");return`${n.op}(${e})`}}function sg(n,e){return n instanceof Jt?(r=n,(i=e)instanceof Jt&&r.op===i.op&&r.field.isEqual(i.field)&&$u(r.value,i.value)):n instanceof Vn?function(r,i){return i instanceof Vn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,u,d)=>s&&sg(u,i.filters[d]),!0)}(n,e):void vt();var r,i}function US(n){return n instanceof Jt?`${(t=n).field.canonicalString()} ${t.op} ${ng(t.value)}`:n instanceof Vn?function(t){return t.op.toString()+" {"+t.getFilters().map(US).join(" ,")+"}"}(n):"Filter";var t}class eN extends Jt{constructor(e,t,r){super(e,t,r),this.key=ot.fromName(r.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.matchesComparison(t)}}class VI extends Jt{constructor(e,t){super(e,"in",t),this.keys=jS(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class BS extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=jS(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function jS(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ot.fromName(r.referenceValue))}class $S extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return U_(t)&&tg(t.arrayValue,this.value)}}class j_ extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tg(this.value.arrayValue,t)}}class tN extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(tg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!tg(this.value.arrayValue,t)}}class nN extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!U_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tg(this.value.arrayValue,r))}}class HS{constructor(e,t=null,r=[],i=[],s=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=d,this.he=null}}function $T(n,e=null,t=[],r=[],i=null,s=null,u=null){return new HS(n,e,t,r,i,s,u)}function Wh(n){const e=ut(n);if(null===e.he){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>LS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),$h(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ng(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ng(r)).join(",")),e.he=t}return e.he}function og(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!JM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sg(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kS(n.startAt,e.startAt)&&kS(n.endAt,e.endAt)}function Kh(n){return ot.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Gu{constructor(e,t=null,r=[],i=[],s=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=d,this.endAt=p,this.Pe=null,this.Ie=null,this.de=null}}function Zh(n){return new Gu(n)}function qS(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ag(n){const e=ut(n);if(null===e.Pe){e.Pe=[];const t=function $_(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),r=function jI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e.Pe.push(new Hu(t)),e.Pe.push(new Hu(vr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Hu(vr.keyField(),s))}}}return e.Pe}function as(n){const e=ut(n);return e.Ie||(e.Ie=function $I(n,e){if("F"===n.limitType)return $T(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Hu(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new ed(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ed(n.startAt.position,n.startAt.inclusive):null;return $T(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,ag(n))),e.Ie}function ug(n,e,t){return new Gu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qh(n,e){return og(as(n),as(e))&&n.limitType===e.limitType}function zS(n){return`${Wh(as(n))}|lt:${n.limitType}`}function cg(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>US(i)).join(", ")}]`),$h(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(u=i).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ng(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ng(i)).join(",")),`Target(${r})`}(as(n))}; limitType=${n.limitType})`}function H_(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ot.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of ag(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(u,d,p){const y=NS(u,d,p);return u.inclusive?y<=0:y<0}(r.startAt,ag(r),i)||r.endAt&&!function(u,d,p){const y=NS(u,d,p);return u.inclusive?y>=0:y>0}(r.endAt,ag(r),i)));var r,i}function qT(n){return(e,t)=>{let r=!1;for(const i of ag(n)){const s=zT(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function zT(n,e,t){const r=n.field.isKeyField()?ot.comparator(e.key,t.key):function(s,u,d){const p=u.data.field(s),y=d.data.field(s);return null!==p&&null!==y?Jl(p,y):vt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return vt()}}class qu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ju(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return function kI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(this.inner)}size(){return this.innerSize}}const rN=new nr(ot.comparator);function Vs(){return rN}const WT=new nr(ot.comparator);function G_(...n){let e=WT;for(const t of n)e=e.insert(t.key,t);return e}function KT(n){let e=WT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Za(){return lg()}function KS(){return lg()}function lg(){return new qu(n=>n.toString(),(n,e)=>n.isEqual(e))}new nr(ot.comparator);const Us=new rr(ot.comparator);function Kt(...n){let e=Us;for(const t of n)e=e.add(t);return e}const sN=new rr(Qt);class dg{constructor(){this._=void 0}}function L2(n,e,t){return n instanceof zu?function(i,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&V_(s)&&(s=FT(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Yh?GI(n,e):n instanceof Xh?YT(n,e):function(i,s){const u=function uN(n,e){return n instanceof hg?VT(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}(i,s),d=ZS(u)+ZS(i.Te);return VT(u)&&VT(i.Te)?function aN(n){return{integerValue:""+n}}(d):function oN(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:F_(e)?"-0":e}}(i.serializer,d)}(n,e)}function V2(n,e,t){return n instanceof Yh?GI(n,e):n instanceof Xh?YT(n,e):t}class zu extends dg{}class Yh extends dg{constructor(e){super(),this.elements=e}}function GI(n,e){const t=QS(e);for(const r of n.elements)t.some(i=>$u(i,r))||t.push(r);return{arrayValue:{values:t}}}class Xh extends dg{constructor(e){super(),this.elements=e}}function YT(n,e){let t=QS(e);for(const r of n.elements)t=t.filter(i=>!$u(i,r));return{arrayValue:{values:t}}}class hg extends dg{constructor(e,t){super(),this.serializer=e,this.Te=t}}function ZS(n){return Lr(n.integerValue||n.doubleValue)}function QS(n){return U_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class XS{}function XT(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new mg(n.key,zn.none()):new ef(n.key,n.data,zn.none());{const t=n.data,r=ws.empty();let i=new rr(vr.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new Qa(n.key,r,new Ls(i.toArray()),zn.none())}}function lN(n,e,t){n instanceof ef?function(i,s,u){const d=i.value.clone(),p=ex(i.fieldTransforms,s,u.transformResults);d.setAll(p),s.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Qa?function(i,s,u){if(!fg(i.precondition,s))return void s.convertToUnknownDocument(u.version);const d=ex(i.fieldTransforms,s,u.transformResults),p=s.data;p.setAll(dN(i)),p.setAll(d),s.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function pg(n,e,t,r){return n instanceof ef?function(s,u,d,p){if(!fg(s.precondition,u))return d;const y=s.value.clone(),E=hN(s.fieldTransforms,p,u);return y.setAll(E),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof Qa?function(s,u,d,p){if(!fg(s.precondition,u))return d;const y=hN(s.fieldTransforms,p,u),E=u.data;return E.setAll(dN(s)),E.setAll(y),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),null===d?null:d.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(D=>D.field))}(n,e,t,r):(d=t,fg(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function JS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Uh(r,i,(s,u)=>function YS(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Yh&&i instanceof Yh||r instanceof Xh&&i instanceof Xh?Uh(r.elements,i.elements,$u):r instanceof hg&&i instanceof hg?$u(r.Te,i.Te):r instanceof zu&&i instanceof zu);var r,i}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class ef extends XS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qa extends XS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function dN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ex(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,d=e.data.field(s.field);r.set(s.field,V2(u,d,t[i]))}return r}function hN(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,L2(s,u,e))}return r}class mg extends XS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eb{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&lN(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=KS();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let d=this.applyToLocalView(u,s.mutatedFields);d=t.has(i.key)?null:d;const p=XT(u,d);null!==p&&r.set(i.key,p),u.isValidDocument()||u.convertToNoDocument(Nt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kt())}isEqual(e){return this.batchId===e.batchId&&Uh(this.mutations,e.mutations,(t,r)=>JS(t,r))&&Uh(this.baseMutations,e.baseMutations,(t,r)=>JS(t,r))}}class zI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class tx{constructor(e,t){this.count=e,this.unchangedNames=t}}var Wr,In;function tb(n){if(void 0===n)return Fr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Wr.OK:return ge.OK;case Wr.CANCELLED:return ge.CANCELLED;case Wr.UNKNOWN:return ge.UNKNOWN;case Wr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Wr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Wr.INTERNAL:return ge.INTERNAL;case Wr.UNAVAILABLE:return ge.UNAVAILABLE;case Wr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Wr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Wr.NOT_FOUND:return ge.NOT_FOUND;case Wr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Wr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Wr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Wr.ABORTED:return ge.ABORTED;case Wr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Wr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Wr.DATA_LOSS:return ge.DATA_LOSS;default:return vt()}}(In=Wr||(Wr={}))[In.OK=0]="OK",In[In.CANCELLED=1]="CANCELLED",In[In.UNKNOWN=2]="UNKNOWN",In[In.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",In[In.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",In[In.NOT_FOUND=5]="NOT_FOUND",In[In.ALREADY_EXISTS=6]="ALREADY_EXISTS",In[In.PERMISSION_DENIED=7]="PERMISSION_DENIED",In[In.UNAUTHENTICATED=16]="UNAUTHENTICATED",In[In.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",In[In.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",In[In.ABORTED=10]="ABORTED",In[In.OUT_OF_RANGE=11]="OUT_OF_RANGE",In[In.UNIMPLEMENTED=12]="UNIMPLEMENTED",In[In.INTERNAL=13]="INTERNAL",In[In.UNAVAILABLE=14]="UNAVAILABLE",In[In.DATA_LOSS=15]="DATA_LOSS";const rx=new Si([4294967295,4294967295],0);function rb(n){const e=function nb(){return new TextEncoder}().encode(n),t=new AI;return t.update(e),new Uint8Array(t.digest())}function ib(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Si([t,r],0),new Si([i,s],0)]}class sb{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new q_(`Invalid padding: ${t}`);if(r<0)throw new q_(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new q_(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new q_(`Invalid padding when bitmap length is 0: ${t}`);this.Ae=8*e.length-t,this.Re=Si.fromNumber(this.Ae)}Ve(e,t,r){let i=e.add(t.multiply(Si.fromNumber(r)));return 1===i.compare(rx)&&(i=new Si([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ae)return!1;const t=rb(e),[r,i]=ib(t);for(let s=0;s<this.hashCount;s++){const u=this.Ve(r,i,s);if(!this.me(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),u=new sb(s,i,t);return r.forEach(d=>u.insert(d)),u}insert(e){if(0===this.Ae)return;const t=rb(e),[r,i]=ib(t);for(let s=0;s<this.hashCount;s++){const u=this.Ve(r,i,s);this.fe(u)}}fe(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class q_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class KI{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,_g.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new KI(Nt.min(),i,new nr(Qt),Vs(),Kt())}}class _g{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new _g(r,t,Kt(),Kt(),Kt())}}class ob{constructor(e,t,r,i){this.ge=e,this.removedTargetIds=t,this.key=r,this.pe=i}}class pN{constructor(e,t){this.targetId=e,this.ye=t}}class gN{constructor(e,t,r=si.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class mN{constructor(){this.we=0,this.Se=yN(),this.be=si.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return 0!==this.we}get Fe(){return this.Ce}Me(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}xe(){let e=Kt(),t=Kt(),r=Kt();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:vt()}}),new _g(this.be,this.De,e,t,r)}Oe(){this.Ce=!1,this.Se=yN()}Ne(e,t){this.Ce=!0,this.Se=this.Se.insert(e,t)}Be(e){this.Ce=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class U2{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Vs(),this.Ue=_N(),this.We=new nr(Qt)}Ge(e){for(const t of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(t,e.pe):this.je(t,e.key,e.pe);for(const t of e.removedTargetIds)this.je(t,e.key,e.pe)}He(e){this.forEachTarget(e,t=>{const r=this.Je(t);switch(e.state){case 0:this.Ye(t)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||this.removeTarget(t);break;case 3:this.Ye(t)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(t)&&(this.Ze(t),r.Me(e.resumeToken));break;default:vt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ke.forEach((r,i)=>{this.Ye(i)&&t(i)})}Xe(e){const t=e.targetId,r=e.ye.count,i=this.et(t);if(i){const s=i.target;if(Kh(s))if(0===r){const u=new ot(s.path);this.je(t,u,cr.newNoDocument(u,Nt.min()))}else Ct(1===r);else{const u=this.tt(t);if(u!==r){const d=this.nt(e),p=d?this.rt(d,e,u):1;0!==p&&(this.Ze(t),this.We=this.We.insert(t,2===p?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}nt(e){const t=e.ye.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let u,d;try{u=Nc(r).toUint8Array()}catch(p){if(p instanceof OT)return No("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new sb(u,i,s)}catch(p){return No(p instanceof q_?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return 0===d.Ae?null:d}rt(e,t,r){return t.ye.count===r-this.ot(e,t.targetId)?0:2}ot(e,t){const r=this.Qe.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const u=this.Qe.st(),d=`projects/${u.projectId}/databases/${u.database}/documents/${s.path.canonicalString()}`;e.mightContain(d)||(this.je(t,s,null),i++)}),i}_t(e){const t=new Map;this.Ke.forEach((s,u)=>{const d=this.et(u);if(d){if(s.current&&Kh(d.target)){const p=new ot(d.target.path);null!==this.$e.get(p)||this.ut(u,p)||this.je(u,p,cr.newNoDocument(p,e))}s.Fe&&(t.set(u,s.xe()),s.Oe())}});let r=Kt();this.Ue.forEach((s,u)=>{let d=!0;u.forEachWhile(p=>{const y=this.et(p);return!y||"TargetPurposeLimboResolution"===y.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.$e.forEach((s,u)=>u.setReadTime(e));const i=new KI(e,t,this.We,this.$e,r);return this.$e=Vs(),this.Ue=_N(),this.We=new nr(Qt),i}ze(e,t){if(!this.Ye(e))return;const r=this.ut(e,t.key)?2:0;this.Je(e).Ne(t.key,r),this.$e=this.$e.insert(t.key,t),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}je(e,t,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,t)?i.Ne(t,1):i.Be(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),r&&(this.$e=this.$e.insert(t,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const t=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let t=this.Ke.get(e);return t||(t=new mN,this.Ke.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new rr(Qt),this.Ue=this.Ue.insert(e,t)),t}Ye(e){const t=null!==this.et(e);return t||qe("WatchChangeAggregator","Detected inactive target",e),t}et(e){const t=this.Ke.get(e);return t&&t.ve?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new mN),this.Qe.getRemoteKeysForTarget(e).forEach(t=>{this.je(e,t,null)})}ut(e,t){return this.Qe.getRemoteKeysForTarget(e).has(t)}}function _N(){return new nr(ot.comparator)}function yN(){return new nr(ot.comparator)}const B2={asc:"ASCENDING",desc:"DESCENDING"},j2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ix={and:"AND",or:"OR"};class ab{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ZI(n,e){return n.useProto3Json||$h(e)?e:{value:e}}function oi(n){return Ct(!!n),Nt.fromTimestamp(function(t){const r=Yl(t);return new yr(r.seconds,r.nanos)}(n))}function ox(n){const e=bn.fromString(n);return Ct(YI(e)),e}function Wu(n,e){const t=ox(e);if(t.get(1)!==n.databaseId.projectId)throw new $e(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $e(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ot(ux(t))}function ub(n,e){return function sx(n,e){return(r=n,new bn(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}(n.databaseId,e)}function QI(n){return new bn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ux(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function cx(n,e){return{documents:[ub(n,e.path)]}}function Z_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ub(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ub(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0!==p.length)return hx(Vn.create(p,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:nd((D=y).field),direction:bN(D.dir)};var D})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=ZI(n,e.limit);return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),t;var p}function lx(n){let e=function ax(n){const e=ox(n);return 4===e.length?bn.emptyPath():ux(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let s=[];t.where&&(s=function(D){const P=dx(D);return P instanceof Vn&&OS(P)?P.getFilters():[P]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(P=>{return new Hu(Eg((B=P).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction));var B}));let d=null;t.limit&&(d=function(D){let P;return P="object"==typeof D?D.value:D,$h(P)?null:P}(t.limit));let p=null;var D;t.startAt&&(p=new ed((D=t.startAt).values||[],!!D.before));let y=null;return t.endAt&&(y=function(D){return new ed(D.values||[],!D.before)}(t.endAt)),function BI(n,e,t,r,i,s,u,d){return new Gu(n,e,t,r,i,s,u,d)}(e,i,u,s,d,"F",p,y)}function dx(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Eg(t.unaryFilter.field);return Jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Eg(t.unaryFilter.field);return Jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Eg(t.unaryFilter.field);return Jt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Eg(t.unaryFilter.field);return Jt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(n):void 0!==n.fieldFilter?Jt.create(Eg((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Vn.create(t.compositeFilter.filters.map(r=>dx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return vt()}}(t.compositeFilter.op))}(n):vt();var t}function bN(n){return B2[n]}function CN(n){return j2[n]}function DN(n){return ix[n]}function nd(n){return{fieldPath:n.canonicalString()}}function Eg(n){return vr.fromServerFormat(n.fieldPath)}function hx(n){return n instanceof Jt?function(t){if("=="===t.op){if(UT(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NAN"}};if(rg(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(UT(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NOT_NAN"}};if(rg(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nd(t.field),op:CN(t.op),value:t.value}}}(n):n instanceof Vn?function(t){const r=t.getFilters().map(i=>hx(i));return 1===r.length?r[0]:{compositeFilter:{op:DN(t.op),filters:r}}}(n):vt()}function YI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class kc{constructor(e,t,r,i,s=Nt.min(),u=Nt.min(),d=si.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new kc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new kc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class px{constructor(e){this.ht=e}}function hb(n){const e=lx({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ug(e,e.limit,"L"):e}class id{constructor(){}dt(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.At(t,5);else if("booleanValue"in e)this.At(t,10),t.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(t,15),t.Rt(Lr(e.integerValue));else if("doubleValue"in e){const r=Lr(e.doubleValue);isNaN(r)?this.At(t,13):(this.At(t,15),F_(r)?t.Rt(0):t.Rt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.At(t,20),"string"==typeof r?t.Vt(r):(t.Vt(`${r.seconds||""}`),t.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,t),this.gt(t);else if("bytesValue"in e)this.At(t,30),t.yt(Nc(e.bytesValue)),this.gt(t);else if("referenceValue"in e)this.wt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.At(t,45),t.Rt(r.latitude||0),t.Rt(r.longitude||0)}else"mapValue"in e?BT(e)?this.At(t,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,t),this.gt(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.gt(t)):vt()}ft(e,t){this.At(t,25),this.Dt(e,t)}Dt(e,t){t.Vt(e)}St(e,t){const r=e.fields||{};this.At(t,55);for(const i of Object.keys(r))this.ft(i,t),this.Tt(r[i],t)}bt(e,t){const r=e.values||[];this.At(t,50);for(const i of r)this.Tt(i,t)}wt(e,t){this.At(t,37),ot.fromName(e).path.forEach(r=>{this.At(t,60),this.Dt(r,t)})}At(e,t){e.Rt(t)}gt(e){e.Rt(2)}}id.Ct=new id;class wx{constructor(){this.an=new wb}addToCollectionParentIndex(e,t){return this.an.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.an.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(ko.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(ko.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class wb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new rr(bn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rr(bn.comparator)).toArray()}}new Uint8Array(0);class Kr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Kr(e,Kr.DEFAULT_COLLECTION_PERCENTILE,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Kr.DEFAULT_COLLECTION_PERCENTILE=10,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kr.DEFAULT=new Kr(41943040,Kr.DEFAULT_COLLECTION_PERCENTILE,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kr.DISABLED=new Kr(-1,0,0);class sf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Bn(){return new sf(0)}static Ln(){return new sf(-1)}}class q2{constructor(){this.changes=new qu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class sE{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&pg(r.mutation,i,Ls.empty(),yr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Kt()){const i=Za();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=G_();return s.forEach((d,p)=>{u=u.insert(d,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Za();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,i){let s=Vs();const u=lg(),d=lg();return t.forEach((p,y)=>{const E=r.get(y.key);i.has(y.key)&&(void 0===E||E.mutation instanceof Qa)?s=s.insert(y.key,y):void 0!==E?(u.set(y.key,E.mutation.getFieldMask()),pg(E.mutation,y,E.mutation.getFieldMask(),yr.now())):u.set(y.key,Ls.empty())}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((y,E)=>u.set(y,E)),t.forEach((y,E)=>{var D;return d.set(y,new xb(E,null!==(D=u.get(y))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(e,t){const r=lg();let i=new nr((u,d)=>u-d),s=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let E=r.get(p)||Ls.empty();E=d.applyToLocalView(y,E),r.set(p,E);const D=(i.get(d.batchId)||Kt()).add(p);i=i.insert(d.batchId,D)})}).next(()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,E=p.value,D=KS();E.forEach(P=>{if(!s.has(P)){const k=XT(t.get(P),r.get(P));null!==k&&D.set(P,k),s=s.add(P)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,D))}return ae.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return ot.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function GT(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var u}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ae.resolve(Za());let d=-1,p=s;return u.next(y=>ae.forEach(y,(E,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),s.get(E)?ae.resolve():this.remoteDocumentCache.getEntry(e,E).next(P=>{p=p.insert(E,P)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,p,y,Kt())).next(E=>({batchId:d,changes:KT(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ot(t)).next(r=>{let i=G_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let u=G_();return this.indexManager.getCollectionParents(e,s).next(d=>ae.forEach(d,p=>{const y=(D=t,P=p.child(s),new Gu(P,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,P;return this.getDocumentsMatchingCollectionQuery(e,y,r,i).next(E=>{E.forEach((D,P)=>{u=u.insert(D,P)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(u=>{s.forEach((p,y)=>{const E=y.getKey();null===u.get(E)&&(u=u.insert(E,cr.newInvalidDocument(E)))});let d=G_();return u.forEach((p,y)=>{const E=s.get(p);void 0!==E&&pg(E.mutation,y,Ls.empty(),yr.now()),H_(t,y)&&(d=d.insert(p,y))}),d})}}class kN{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,t){return ae.resolve(this.lr.get(t))}saveBundleMetadata(e,t){return this.lr.set(t.id,{id:(i=t).id,version:i.version,createTime:oi(i.createTime)}),ae.resolve();var i}getNamedQuery(e,t){return ae.resolve(this.hr.get(t))}saveNamedQuery(e,t){return this.hr.set(t.name,{name:(i=t).name,query:hb(i.bundledQuery),readTime:oi(i.readTime)}),ae.resolve();var i}}class Rb{constructor(){this.overlays=new nr(ot.comparator),this.Pr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Za();return ae.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.It(e,t,s)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Pr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=Za(),s=t.length+1,u=new ot(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new nr((y,E)=>y-E);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let E=s.get(y.largestBatchId);null===E&&(E=Za(),s=s.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const d=Za(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>d.set(y,E)),!(d.size()>=i)););return ae.resolve(d)}It(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new zI(t,r));let s=this.Pr.get(t);void 0===s&&(s=Kt(),this.Pr.set(t,s)),this.Pr.set(t,s.add(r.key))}}class ry{constructor(){this.Ir=new rr(Zr.dr),this.Tr=new rr(Zr.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(e,t){const r=new Zr(e,t);this.Ir=this.Ir.add(r),this.Tr=this.Tr.add(r)}Ar(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Rr(new Zr(e,t))}Vr(e,t){e.forEach(r=>this.removeReference(r,t))}mr(e){const t=new ot(new bn([])),r=new Zr(t,e),i=new Zr(t,e+1),s=[];return this.Tr.forEachInRange([r,i],u=>{this.Rr(u),s.push(u.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}pr(e){const t=new ot(new bn([])),r=new Zr(t,e),i=new Zr(t,e+1);let s=Kt();return this.Tr.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new Zr(e,0),r=this.Ir.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Zr{constructor(e,t){this.key=e,this.yr=t}static dr(e,t){return ot.comparator(e.key,t.key)||Qt(e.yr,t.yr)}static Er(e,t){return Qt(e.yr,t.yr)||ot.comparator(e.key,t.key)}}class W2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.wr=1,this.Sr=new rr(Zr.dr)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.wr;this.wr++;const u=new eb(s,t,r,i);this.mutationQueue.push(u);for(const d of i)this.Sr=this.Sr.add(new Zr(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ae.resolve(u)}lookupMutationBatch(e,t){return ae.resolve(this.br(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Dr(t+1),s=i<0?0:i;return ae.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Zr(t,0),i=new Zr(t,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([r,i],u=>{const d=this.br(u.yr);s.push(d)}),ae.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rr(Qt);return t.forEach(i=>{const s=new Zr(i,0),u=new Zr(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,u],d=>{r=r.add(d.yr)})}),ae.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ot.isDocumentKey(s)||(s=s.child(""));const u=new Zr(new ot(s),0);let d=new rr(Qt);return this.Sr.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(p.yr)),!0)},u),ae.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach(r=>{const i=this.br(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Sr;return ae.forEach(t.mutations,i=>{const s=new Zr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,t){const r=new Zr(t,0),i=this.Sr.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ae.resolve()}vr(e,t){return this.Dr(e)}Dr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}br(e){const t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class K2{constructor(e){this.Fr=e,this.docs=new nr(ot.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Fr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():cr.newInvalidDocument(t))}getEntries(e,t){let r=Vs();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():cr.newInvalidDocument(i))}),ae.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Vs();const u=t.path,d=new ot(u.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||xI(NM(E),r)<=0||(i.has(E.key)||H_(t,E))&&(s=s.insert(E.key,E.mutableCopy()))}return ae.resolve(s)}getAllFromCollectionGroup(e,t,r,i){vt()}Mr(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Z2(this)}getSize(e){return ae.resolve(this.size)}}class Z2 extends q2{constructor(e){super(),this.ur=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.ur.getEntry(e,t)}getAllFromCache(e,t){return this.ur.getEntries(e,t)}}class Ax{constructor(e){this.persistence=e,this.Or=new qu(t=>Wh(t),og),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.Nr=0,this.Br=new ry,this.targetCount=0,this.Lr=sf.Bn()}forEachTarget(e,t){return this.Or.forEach((r,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Nr&&(this.Nr=t),ae.resolve()}Qn(e){this.Or.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new sf(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,t){return this.Qn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Qn(t),ae.resolve()}removeTargetData(e,t){return this.Or.delete(t.target),this.Br.mr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Or.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Or.delete(u),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),ae.waitFor(s).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Or.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Ar(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.Br.Vr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),ae.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.mr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.pr(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.Br.containsKey(t))}}class Pb{constructor(e,t){this.kr={},this.overlays={},this.qr=new Oo(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=e(this),this.Kr=new Ax(this),this.indexManager=new wx,this.remoteDocumentCache=new K2(r=>this.referenceDelegate.$r(r)),this.serializer=new px(t),this.Ur=new kN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.kr[e.toKey()];return r||(r=new W2(t,this.referenceDelegate),this.kr[e.toKey()]=r),r}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(e,t,r){qe("MemoryPersistence","Starting transaction:",e);const i=new ON(this.qr.next());return this.referenceDelegate.Wr(),r(i).next(s=>this.referenceDelegate.Gr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zr(e,t){return ae.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,t)))}}class ON extends kM{constructor(e){super(),this.currentSequenceNumber=e}}class oE{constructor(e){this.persistence=e,this.jr=new ry,this.Hr=null}static Jr(e){return new oE(e)}get Yr(){if(this.Hr)return this.Hr;throw vt()}addReference(e,t,r){return this.jr.addReference(r,t),this.Yr.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.jr.removeReference(r,t),this.Yr.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Yr.add(t.toString()),ae.resolve()}removeTarget(e,t){this.jr.mr(t.targetId).forEach(i=>this.Yr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Yr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Wr(){this.Hr=new Set}Gr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Yr,r=>{const i=ot.fromPath(r);return this.Zr(e,i).next(s=>{s||t.removeEntry(i,Nt.min())})}).next(()=>(this.Hr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zr(e,t).next(r=>{r?this.Yr.delete(t.toString()):this.Yr.add(t.toString())})}$r(e){return 0}Zr(e,t){return ae.or([()=>ae.resolve(this.jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zr(e,t)])}}class xx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Qi=r,this.Ki=i}static $i(e,t){let r=Kt(),i=Kt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new xx(e,t.fromCache,r,i)}}class Rx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class cE{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(e,t){this.ji=e,this.indexManager=t,this.Ui=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Hi(e,t).next(u=>{s.result=u}).next(()=>{if(!s.result)return this.Ji(e,t,i,r).next(u=>{s.result=u})}).next(()=>{if(s.result)return;const u=new Rx;return this.Yi(e,t,u).next(d=>{if(s.result=d,this.Wi)return this.Zi(e,t,u,d.size)})}).next(()=>s.result)}Zi(e,t,r,i){return r.documentReadCount<this.Gi?(Vh()<=rs.in.DEBUG&&qe("QueryEngine","SDK will not create cache indexes for query:",cg(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),ae.resolve()):(Vh()<=rs.in.DEBUG&&qe("QueryEngine","Query:",cg(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.zi*i?(Vh()<=rs.in.DEBUG&&qe("QueryEngine","The SDK decides to create cache indexes for query:",cg(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,as(t))):ae.resolve())}Hi(e,t){if(qS(t))return ae.resolve(null);let r=as(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=ug(t,null,"F"),r=as(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=Kt(...s);return this.ji.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.Xi(t,d);return this.es(t,y,u,p.readTime)?this.Hi(e,ug(t,null,"F")):this.ts(e,y,t,p)}))})))}Ji(e,t,r,i){return qS(t)||i.isEqual(Nt.min())?ae.resolve(null):this.ji.getDocuments(e,r).next(s=>{const u=this.Xi(t,s);return this.es(t,u,r,i)?ae.resolve(null):(Vh()<=rs.in.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cg(t)),this.ts(e,u,t,function yS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Nt.fromTimestamp(1e9===r?new yr(t+1,0):new yr(t,r));return new ko(i,ot.empty(),e)}(i,-1)).next(d=>d))})}Xi(e,t){let r=new rr(qT(e));return t.forEach((i,s)=>{H_(e,s)&&(r=r.add(s))}),r}es(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Yi(e,t,r){return Vh()<=rs.in.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",cg(t)),this.ji.getDocumentsMatchingQuery(e,t,ko.min(),r)}ts(e,t,r,i){return this.ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class FN{constructor(e,t,r,i){this.persistence=e,this.ns=t,this.serializer=i,this.rs=new nr(Qt),this.ss=new qu(s=>Wh(s),og),this.os=new Map,this._s=e.getRemoteDocumentCache(),this.Kr=e.getTargetCache(),this.Ur=e.getBundleCache(),this.us(r)}us(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sE(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.rs))}}function LN(n,e){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,ie.Z)(function*(n,e){const t=ut(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.us(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const u=[],d=[];let p=Kt();for(const y of i){u.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of s){d.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(r,p).next(y=>({cs:y,removedBatchIds:u,addedBatchIds:d}))})})}),Mx.apply(this,arguments)}function Nx(n){const e=ut(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Kr.getLastRemoteSnapshotVersion(t))}function lf(n,e,t){return kb.apply(this,arguments)}function kb(){return kb=(0,ie.Z)(function*(n,e,t){const r=ut(n),i=r.rs.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Zl(u))throw u;qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.rs=r.rs.remove(e),r.ss.delete(i.target)}),kb.apply(this,arguments)}function Ob(n,e,t){const r=ut(n);let i=Nt.min(),s=Kt();return r.persistence.runTransaction("Execute query","readwrite",u=>function(p,y,E){const D=ut(p),P=D.ss.get(E);return void 0!==P?ae.resolve(D.rs.get(P)):D.Kr.getTargetData(y,E)}(r,u,as(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(u,d.targetId).next(p=>{s=p})}).next(()=>r.ns.getDocumentsMatchingQuery(u,e,t?i:Nt.min(),t?s:Kt())).next(d=>(function Fb(n,e,t){let r=n.os.get(e)||Nt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.os.set(e,r)}(r,function WS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),d),{documents:d,Ps:s})))}class Ux{constructor(){this.activeTargetIds=function ZT(){return sN}()}Rs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}As(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jx{constructor(){this.ro=new Ux,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.ro.Rs(e),this.io[e]||"not-current"}updateQueryState(e,t,r){this.io[e]=t}removeLocalQueryTarget(e){this.ro.Vs(e)}isLocalQueryTarget(e){return this.ro.activeTargetIds.has(e)}clearQueryState(e){delete this.io[e]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(e){return this.ro.activeTargetIds.has(e)}start(){return this.ro=new Ux,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class BN{so(e){}shutdown(){}}class jN{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(e){this.co.push(e)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.co)e(0)}uo(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.co)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Hb=null;function $x(){return null===Hb?Hb=268435456+Math.round(2147483648*Math.random()):Hb++,"0x"+Hb.toString(16)}const Q2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Y2{constructor(e){this.ho=e.ho,this.Po=e.Po}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.Po()}send(e){this.ho(e)}Vo(){this.To()}mo(e){this.Ao(e)}fo(e){this.Ro(e)}}const Ts="WebChannelConnection";class X2 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+t.host,this.yo=`projects/${i}/databases/${s}`,this.wo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get So(){return!1}bo(t,r,i,s,u){const d=$x(),p=this.Do(t,r);qe("RestConnection",`Sending RPC '${t}' ${d}:`,p,i);const y={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(y,s,u),this.vo(t,p,y,i).then(E=>(qe("RestConnection",`Received RPC '${t}' ${d}: `,E),E),E=>{throw No("RestConnection",`RPC '${t}' ${d} failed with error: `,E,"url: ",p,"request:",i),E})}Fo(t,r,i,s,u,d){return this.bo(t,r,i,s,u)}Co(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Lh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,u)=>t[u]=s),i&&i.headers.forEach((s,u)=>t[u]=s)}Do(t,r){return`${this.po}/v1/${r}:${Q2[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const s=$x();return new Promise((u,d)=>{const p=new DI;p.setWithCredentials(!0),p.listenOnce(bM.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case zl.NO_ERROR:const E=p.getResponseJson();qe(Ts,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(E)),u(E);break;case zl.TIMEOUT:qe(Ts,`RPC '${e}' ${s} timed out`),d(new $e(ge.DEADLINE_EXCEEDED,"Request time out"));break;case zl.HTTP_ERROR:const D=p.getStatus();if(qe(Ts,`RPC '${e}' ${s} failed with status:`,D,"response text:",p.getResponseText()),D>0){let P=p.getResponseJson();Array.isArray(P)&&(P=P[0]);const k=P?.error;if(k&&k.status&&k.message){const B=function(z){const me=z.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(me)>=0?me:ge.UNKNOWN}(k.status);d(new $e(B,k.message))}else d(new $e(ge.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new $e(ge.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{qe(Ts,`RPC '${e}' ${s} completed.`)}});const y=JSON.stringify(i);qe(Ts,`RPC '${e}' ${s} sending request:`,i),p.send(t,"POST",y,r,15)})}Mo(e,t,r){const i=$x(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=hS(),d=k2(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Co(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const E=s.join("");qe(Ts,`Creating RPC '${e}' stream ${i}: ${E}`,p);const D=u.createWebChannel(E,p);let P=!1,k=!1;const B=new Y2({ho:z=>{k?qe(Ts,`Not sending because RPC '${e}' stream ${i} is closed:`,z):(P||(qe(Ts,`Opening RPC '${e}' stream ${i} transport.`),D.open(),P=!0),qe(Ts,`RPC '${e}' stream ${i} sending:`,z),D.send(z))},Po:()=>D.close()}),Z=(z,me,Ne)=>{z.listen(me,Se=>{try{Ne(Se)}catch(ke){setTimeout(()=>{throw ke},0)}})};return Z(D,CI.EventType.OPEN,()=>{k||qe(Ts,`RPC '${e}' stream ${i} transport opened.`)}),Z(D,CI.EventType.CLOSE,()=>{k||(k=!0,qe(Ts,`RPC '${e}' stream ${i} transport closed`),B.mo())}),Z(D,CI.EventType.ERROR,z=>{k||(k=!0,No(Ts,`RPC '${e}' stream ${i} transport errored:`,z),B.mo(new $e(ge.UNAVAILABLE,"The operation could not be completed")))}),Z(D,CI.EventType.MESSAGE,z=>{var me;if(!k){const Ne=z.data[0];Ct(!!Ne);const ke=Ne.error||(null===(me=Ne[0])||void 0===me?void 0:me.error);if(ke){qe(Ts,`RPC '${e}' stream ${i} received error:`,ke);const at=ke.status;let pt=function(bf){const bG=Wr[bf];if(void 0!==bG)return tb(bG)}(at),nn=ke.message;void 0===pt&&(pt=ge.INTERNAL,nn="Unknown error status: "+at+" with message "+ke.message),k=!0,B.mo(new $e(pt,nn)),D.close()}else qe(Ts,`RPC '${e}' stream ${i} received:`,Ne),B.fo(Ne)}}),Z(d,CM.STAT_EVENT,z=>{z.stat===fS.PROXY?qe(Ts,`RPC '${e}' stream ${i} detected buffering proxy`):z.stat===fS.NOPROXY&&qe(Ts,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{B.Vo()},0),B}}function Gb(){return typeof document<"u"?document:null}function fE(n){return new ab(n,!0)}class Hx{constructor(e,t,r=1e3,i=1.5,s=6e4){this._i=e,this.timerId=t,this.xo=r,this.Oo=i,this.No=s,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(e){this.cancel();const t=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,t-r);i>0&&qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,()=>(this.ko=Date.now(),e())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}class HN{constructor(e,t,r,i,s,u,d,p){this._i=e,this.Uo=r,this.Wo=i,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new Hx(e,t)}Jo(){return 1===this.state||5===this.state||this.Yo()}Yo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Zo()}stop(){var e=this;return(0,ie.Z)(function*(){e.Jo()&&(yield e.close(0))})()}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(e){this.r_(),this.stream.send(e)}t_(){var e=this;return(0,ie.Z)(function*(){if(e.Yo())return e.close(0)})()}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}close(e,t){var r=this;return(0,ie.Z)(function*(){r.r_(),r.i_(),r.Ho.cancel(),r.Go++,4!==e?r.Ho.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),r.Ho.qo()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.s_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Eo(t)})()}s_(){}auth(){this.state=1;const e=this.o_(this.Go),t=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Go===t&&this.__(r,i)},r=>{e(()=>{const i=new $e(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.a_(i)})})}__(e,t){const r=this.o_(this.Go);this.stream=this.u_(e,t),this.stream.Io(()=>{r(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.a_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Zo(){var e=this;this.state=5,this.Ho.Qo((0,ie.Z)(function*(){e.state=0,e.start()}))}a_(e){return qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}o_(e){return t=>{this._i.enqueueAndForget(()=>this.Go===e?t():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class J2 extends HN{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s}u_(e,t){return this.connection.Mo("Listen",e,t)}onMessage(e){this.Ho.reset();const t=function EN(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:vt(),i=e.targetChange.targetIds||[],s=function(y,E){return y.useProto3Json?(Ct(void 0===E||"string"==typeof E),si.fromBase64String(E||"")):(Ct(void 0===E||E instanceof Uint8Array),si.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(y){const E=void 0===y.code?ge.UNKNOWN:tb(y.code);return new $e(E,y.message||"")}(u);t=new gN(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Wu(n,r.document.name),s=oi(r.document.updateTime),u=r.document.createTime?oi(r.document.createTime):Nt.min(),d=new ws({mapValue:{fields:r.document.fields}}),p=cr.newFoundDocument(i,s,u,d);t=new ob(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Wu(n,r.document),s=r.readTime?oi(r.readTime):Nt.min(),u=cr.newNoDocument(i,s);t=new ob([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Wu(n,r.document);t=new ob([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return vt();{const r=e.filter,{count:i=0,unchangedNames:s}=r,u=new tx(i,s);t=new pN(r.targetId,u)}}var y;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Nt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Nt.min():u.readTime?oi(u.readTime):Nt.min()}(e);return this.listener.c_(t,r)}l_(e){const t={};t.database=QI(this.serializer),t.addTarget=function(s,u){let d;const p=u.target;if(d=Kh(p)?{documents:cx(s,p)}:{query:Z_(s,p)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=function z_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}(s,u.resumeToken);const y=ZI(s,u.expectedCount);null!==y&&(d.expectedCount=y)}else if(u.snapshotVersion.compareTo(Nt.min())>0){d.readTime=function yg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}(s,u.snapshotVersion.toTimestamp());const y=ZI(s,u.expectedCount);null!==y&&(d.expectedCount=y)}return d}(this.serializer,e);const r=function TN(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.n_(t)}h_(e){const t={};t.database=QI(this.serializer),t.removeTarget=e,this.n_(t)}}class a extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.R_=!1}V_(){if(this.R_)throw new $e(ge.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.bo(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $e(ge.UNKNOWN,i.toString())})}Fo(e,t,r,i){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Fo(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $e(ge.UNKNOWN,s.toString())})}terminate(){this.R_=!0}}class h{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(e){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.w_("Offline")))}set(e){this.D_(),this.f_=0,"Online"===e&&(this.p_=!1),this.w_(e)}w_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}S_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(Fr(t),this.p_=!1):qe("OnlineStateTracker",t)}D_(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}class m{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=s,this.x_.so(d=>{r.enqueueAndForget((0,ie.Z)(function*(){var p;rt(u)&&(qe("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,ie.Z)(function*(E){const D=ut(E);D.F_.add(4),yield C(D),D.O_.set("Unknown"),D.F_.delete(4),yield v(D)}),function y(E){return p.apply(this,arguments)})(u))}))}),this.O_=new h(r,i)}}function v(n){return T.apply(this,arguments)}function T(){return T=(0,ie.Z)(function*(n){if(rt(n))for(const e of n.M_)yield e(!0)}),T.apply(this,arguments)}function C(n){return x.apply(this,arguments)}function x(){return x=(0,ie.Z)(function*(n){for(const e of n.M_)yield e(!1)}),x.apply(this,arguments)}function M(n,e){const t=ut(n);t.v_.has(e.targetId)||(t.v_.set(e.targetId,e),ze(t)?De(t):pE(t).Yo()&&K(t,e))}function V(n,e){const t=ut(n),r=pE(t);t.v_.delete(e),r.Yo()&&ne(t,e),0===t.v_.size&&(r.Yo()?r.e_():rt(t)&&t.O_.set("Unknown"))}function K(n,e){if(n.N_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Nt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pE(n).l_(e)}function ne(n,e){n.N_.Le(e),pE(n).h_(e)}function De(n){n.N_=new U2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.v_.get(e)||null,st:()=>n.datastore.serializer.databaseId}),pE(n).start(),n.O_.y_()}function ze(n){return rt(n)&&!pE(n).Jo()&&n.v_.size>0}function rt(n){return 0===ut(n).F_.size}function Pt(n){n.N_=void 0}function Be(n){return Gt.apply(this,arguments)}function Gt(){return Gt=(0,ie.Z)(function*(n){n.v_.forEach((e,t)=>{K(n,e)})}),Gt.apply(this,arguments)}function an(n,e){return xn.apply(this,arguments)}function xn(){return xn=(0,ie.Z)(function*(n,e){Pt(n),ze(n)?(n.O_.b_(e),De(n)):n.O_.set("Unknown")}),xn.apply(this,arguments)}function ao(n,e,t){return Ya.apply(this,arguments)}function Ya(){return Ya=(0,ie.Z)(function*(n,e,t){if(n.O_.set("Online"),e instanceof gN&&2===e.state&&e.cause)try{yield(r=(0,ie.Z)(function*(s,u){const d=u.cause;for(const p of u.targetIds)s.v_.has(p)&&(yield s.remoteSyncer.rejectListen(p,d),s.v_.delete(p),s.N_.removeTarget(p))}),function i(s,u){return r.apply(this,arguments)})(n,e)}catch(r){qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Fc(n,r)}else if(e instanceof ob?n.N_.Ge(e):e instanceof pN?n.N_.Xe(e):n.N_.He(e),!t.isEqual(Nt.min()))try{const r=yield Nx(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const d=s.N_._t(u);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=s.v_.get(y);E&&s.v_.set(y,E.withResumeToken(p.resumeToken,u))}}),d.targetMismatches.forEach((p,y)=>{const E=s.v_.get(p);if(!E)return;s.v_.set(p,E.withResumeToken(si.EMPTY_BYTE_STRING,E.snapshotVersion)),ne(s,p);const D=new kc(E.target,p,y,E.sequenceNumber);K(s,D)}),s.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){qe("RemoteStore","Failed to raise snapshot:",r),yield Fc(n,r)}var r}),Ya.apply(this,arguments)}function Fc(n,e,t){return uy.apply(this,arguments)}function uy(){return uy=(0,ie.Z)(function*(n,e,t){if(!Zl(e))throw e;n.F_.add(1),yield C(n),n.O_.set("Offline"),t||(t=()=>Nx(n.localStore)),n.asyncQueue.enqueueRetryable((0,ie.Z)(function*(){qe("RemoteStore","Retrying IndexedDB access"),yield t(),n.F_.delete(1),yield v(n)}))}),uy.apply(this,arguments)}function nU(n,e){return ZN.apply(this,arguments)}function ZN(){return ZN=(0,ie.Z)(function*(n,e){const t=ut(n);t.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const r=rt(t);t.F_.add(3),yield C(t),r&&t.O_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.F_.delete(3),yield v(t)}),ZN.apply(this,arguments)}function YN(){return YN=(0,ie.Z)(function*(n,e){const t=ut(n);e?(t.F_.delete(2),yield v(t)):e||(t.F_.add(2),yield C(t),t.O_.set("Unknown"))}),YN.apply(this,arguments)}function pE(n){return n.B_||(n.B_=function(t,r,i){const s=ut(t);return s.V_(),new J2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Io:Be.bind(null,n),Eo:an.bind(null,n),c_:ao.bind(null,n)}),n.M_.push(function(){var e=(0,ie.Z)(function*(t){t?(n.B_.Xo(),ze(n)?De(n):n.O_.set("Unknown")):(yield n.B_.stop(),Pt(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}class XN{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,d=new XN(e,t,u,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $e(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gE(n,e){if(Fr("AsyncQueue",`${e}: ${n}`),Zl(n))return new $e(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class mE{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ot.comparator(t.key,r.key):(t,r)=>ot.comparator(t.key,r.key),this.keyedMap=G_(),this.sortedSet=new nr(this.comparator)}static emptySet(e){return new mE(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof mE)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new mE;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class rU{constructor(){this.k_=new nr(ot.comparator)}track(e){const t=e.doc.key,r=this.k_.get(t);r?0!==e.type&&3===r.type?this.k_=this.k_.insert(t,e):3===e.type&&1!==r.type?this.k_=this.k_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.k_=this.k_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.k_=this.k_.remove(t):1===e.type&&2===r.type?this.k_=this.k_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):vt():this.k_=this.k_.insert(t,e)}q_(){const e=[];return this.k_.inorderTraversal((t,r)=>{e.push(r)}),e}}class _E{constructor(e,t,r,i,s,u,d,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new _E(e,t,mE.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class kG{constructor(){this.Q_=void 0,this.listeners=[]}}class OG{constructor(){this.queries=new qu(e=>zS(e),Qh),this.onlineState="Unknown",this.K_=new Set}}function ek(){return ek=(0,ie.Z)(function*(n,e){const t=ut(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new kG),i)try{s.Q_=yield t.onListen(r)}catch(u){const d=gE(u,`Initialization of query '${cg(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.U_(t.onlineState),s.Q_&&e.W_(s.Q_)&&rk(t)}),ek.apply(this,arguments)}function nk(){return nk=(0,ie.Z)(function*(n,e){const t=ut(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),nk.apply(this,arguments)}function FG(n,e){const t=ut(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.W_(i)&&(r=!0);u.Q_=i}}r&&rk(t)}function LG(n,e,t){const r=ut(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function rk(n){n.K_.forEach(e=>{e.next()})}class ik{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new _E(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){return!e.fromCache||(!this.options.Z_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=_E.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class oU{constructor(e){this.key=e}}class aU{constructor(e){this.key=e}}class uU{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Kt(),this.mutatedKeys=Kt(),this.ua=qT(e),this.ca=new mE(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new rU,i=t?t.ca:this.ca;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,D)=>{const P=i.get(E),k=H_(this.query,D)?D:null,B=!!P&&this.mutatedKeys.has(P.key),Z=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let z=!1;P&&k?P.data.isEqual(k.data)?B!==Z&&(r.track({type:3,doc:k}),z=!0):this.Ia(P,k)||(r.track({type:2,doc:k}),z=!0,(p&&this.ua(k,p)>0||y&&this.ua(k,y)<0)&&(d=!0)):!P&&k?(r.track({type:0,doc:k}),z=!0):P&&!k&&(r.track({type:1,doc:P}),z=!0,(p||y)&&(d=!0)),z&&(k?(u=u.add(k),s=Z?s.add(E):s.delete(E)):(u=u.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const E="F"===this.query.limitType?u.last():u.first();u=u.delete(E.key),s=s.delete(E.key),r.track({type:1,doc:E})}return{ca:u,Pa:r,es:d,mutatedKeys:s}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.q_();s.sort((y,E)=>function(P,k){const B=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return B(P)-B(k)}(y.type,E.type)||this.ua(y.doc,E.doc)),this.da(r);const u=t?this.Ta():[],d=0===this.aa.size&&this.current?1:0,p=d!==this._a;return this._a=d,0!==s.length||p?{snapshot:new _E(this.query,e.ca,i,s,e.mutatedKeys,0===d,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ea:u}:{Ea:u}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new rU,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}da(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ta(){if(!this.current)return[];const e=this.aa;this.aa=Kt(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new aU(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new oU(r))}),t}Ra(e){this.oa=e.Ps,this.aa=Kt();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return _E.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class BG{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jG{constructor(e){this.key=e,this.ma=!1}}class $G{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.fa={},this.ga=new qu(d=>zS(d),Qh),this.pa=new Map,this.ya=new Set,this.wa=new nr(ot.comparator),this.Sa=new Map,this.ba=new ry,this.Da={},this.Ca=new Map,this.va=sf.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function HG(n,e){return sk.apply(this,arguments)}function sk(){return sk=(0,ie.Z)(function*(n,e){const t=function Sk(n){const e=ut(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zG.bind(null,e),e.fa.c_=FG.bind(null,e.eventManager),e.fa.xa=LG.bind(null,e.eventManager),e}(n);let r,i;const s=t.ga.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const u=yield function cf(n,e){const t=ut(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Kr.getTargetData(r,e).next(s=>s?(i=s,ae.resolve(i)):t.Kr.allocateTargetId(r).next(u=>(i=new kc(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.rs.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.rs=t.rs.insert(r.targetId,r),t.ss.set(e,r.targetId)),r})}(t.localStore,as(e)),d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield function ok(n,e,t,r,i){return ak.apply(this,arguments)}(t,e,r,"current"===d,u.resumeToken),t.isPrimaryClient&&M(t.remoteStore,u)}return i}),sk.apply(this,arguments)}function ak(){return ak=(0,ie.Z)(function*(n,e,t,r,i){n.Ma=(D,P,k)=>{return(B=(0,ie.Z)(function*(z,me,Ne,Se){let ke=me.view.ha(Ne);ke.es&&(ke=yield Ob(z.localStore,me.query,!1).then(({documents:nn})=>me.view.ha(nn,ke)));const at=Se&&Se.targetChanges.get(me.targetId),pt=me.view.applyChanges(ke,z.isPrimaryClient,at);return _k(z,me.targetId,pt.Ea),pt.snapshot}),function Z(z,me,Ne,Se){return B.apply(this,arguments)})(n,D,P,k);var B};const s=yield Ob(n.localStore,e,!0),u=new uU(e,s.Ps),d=u.ha(s.documents),p=_g.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=u.applyChanges(d,n.isPrimaryClient,p);_k(n,t,y.Ea);const E=new BG(e,t,u);return n.ga.set(e,E),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),y.snapshot}),ak.apply(this,arguments)}function GG(n,e){return uk.apply(this,arguments)}function uk(){return uk=(0,ie.Z)(function*(n,e){const t=ut(n),r=t.ga.get(e),i=t.pa.get(r.targetId);if(i.length>1)return t.pa.set(r.targetId,i.filter(s=>!Qh(s,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield lf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),V(t.remoteStore,r.targetId),yE(t,r.targetId)}).catch(aa))):(yE(t,r.targetId),yield lf(t.localStore,r.targetId,!0))}),uk.apply(this,arguments)}function cU(n,e){return lk.apply(this,arguments)}function lk(){return lk=(0,ie.Z)(function*(n,e){const t=ut(n);try{const r=yield function UN(n,e){const t=ut(n),r=e.snapshotVersion;let i=t.rs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t._s.newChangeBuffer({trackRemovals:!0});i=t.rs;const d=[];e.targetChanges.forEach((E,D)=>{const P=i.get(D);if(!P)return;d.push(t.Kr.removeMatchingKeys(s,E.removedDocuments,D).next(()=>t.Kr.addMatchingKeys(s,E.addedDocuments,D)));let k=P.withSequenceNumber(s.currentSequenceNumber);var Z,z,me;null!==e.targetMismatches.get(D)?k=k.withResumeToken(si.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):E.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(E.resumeToken,r)),i=i.insert(D,k),z=k,me=E,(0===(Z=P).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0)&&d.push(t.Kr.updateTargetData(s,k))});let p=Vs(),y=Kt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,E))}),d.push(function kx(n,e,t){let r=Kt(),i=Kt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=Vs();return t.forEach((d,p)=>{const y=s.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(Nt.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):qe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{ls:u,hs:i}})}(s,u,e.documentUpdates).next(E=>{p=E.ls,y=E.hs})),!r.isEqual(Nt.min())){const E=t.Kr.getLastRemoteSnapshotVersion(s).next(D=>t.Kr.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(E)}return ae.waitFor(d).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(t.rs=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.Sa.get(s);u&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.ma=!0:i.modifiedDocuments.size>0?Ct(u.ma):i.removedDocuments.size>0&&(Ct(u.ma),u.ma=!1))}),yield df(t,r,e)}catch(r){yield aa(r)}}),lk.apply(this,arguments)}function lU(n,e,t){const r=ut(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ga.forEach((s,u)=>{const d=u.view.U_(e);d.snapshot&&i.push(d.snapshot)}),function(u,d){const p=ut(u);p.onlineState=d;let y=!1;p.queries.forEach((E,D)=>{for(const P of D.listeners)P.U_(d)&&(y=!0)}),y&&rk(p)}(r.eventManager,e),i.length&&r.fa.c_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zG(n,e,t){return dk.apply(this,arguments)}function dk(){return dk=(0,ie.Z)(function*(n,e,t){const r=ut(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Sa.get(e),s=i&&i.key;if(s){let u=new nr(ot.comparator);u=u.insert(s,cr.newNoDocument(s,Nt.min()));const d=Kt().add(s),p=new KI(Nt.min(),new Map,new nr(Qt),u,d);yield cU(r,p),r.wa=r.wa.remove(s),r.Sa.delete(e),yk(r)}else yield lf(r.localStore,e,!1).then(()=>yE(r,e,t)).catch(aa)}),dk.apply(this,arguments)}function yE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.mr(e).forEach(r=>{n.ba.containsKey(r)||dU(n,r)})}function dU(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);null!==t&&(V(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),yk(n))}function _k(n,e,t){for(const r of t)r instanceof oU?(n.ba.addReference(r.key,e),QG(n,r)):r instanceof aU?(qe("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||dU(n,r.key)):vt()}function QG(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(qe("SyncEngine","New document in limbo: "+t),n.ya.add(r),yk(n))}function yk(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new ot(bn.fromString(e)),r=n.va.next();n.Sa.set(r,new jG(t)),n.wa=n.wa.insert(t,r),M(n.remoteStore,new kc(as(Zh(t.path)),r,"TargetPurposeLimboResolution",Oo.ae))}}function df(n,e,t){return vk.apply(this,arguments)}function vk(){return vk=(0,ie.Z)(function*(n,e,t){const r=ut(n),i=[],s=[],u=[];var d;r.ga.isEmpty()||(r.ga.forEach((d,p)=>{u.push(r.Ma(p,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const E=xx.$i(p.targetId,y);s.push(E)}}))}),yield Promise.all(u),r.fa.c_(i),yield(d=(0,ie.Z)(function*(y,E){const D=ut(y);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>ae.forEach(E,k=>ae.forEach(k.Qi,B=>D.persistence.referenceDelegate.addReference(P,k.targetId,B)).next(()=>ae.forEach(k.Ki,B=>D.persistence.referenceDelegate.removeReference(P,k.targetId,B)))))}catch(P){if(!Zl(P))throw P;qe("LocalStore","Failed to update sequence numbers: "+P)}for(const P of E){const k=P.targetId;if(!P.fromCache){const B=D.rs.get(k),z=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);D.rs=D.rs.insert(k,z)}}}),function p(y,E){return d.apply(this,arguments)})(r.localStore,s))}),vk.apply(this,arguments)}function YG(n,e){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,ie.Z)(function*(n,e){const t=ut(n);if(!t.currentUser.isEqual(e)){qe("SyncEngine","User change. New user:",e.toKey());const r=yield LN(t.localStore,e);t.currentUser=e,(s=t).Ca.forEach(d=>{d.forEach(p=>{p.reject(new $e(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ca.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield df(t,r.cs)}var s}),Ik.apply(this,arguments)}function XG(n,e){const t=ut(n),r=t.Sa.get(e);if(r&&r.ma)return Kt().add(r.key);{let i=Kt();const s=t.pa.get(e);if(!s)return i;for(const u of s){const d=t.ga.get(u);i=i.unionWith(d.view.la)}return i}}class qx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ie.Z)(function*(){t.serializer=fE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function Px(n,e,t,r){return new FN(n,e,t,r)}(this.persistence,new cE,e.initialUser,this.serializer)}createPersistence(e){return new Pb(oE.Jr,this.serializer)}createSharedClientState(e){return new jx}terminate(){var e=this;return(0,ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class vE{initialize(e,t){var r=this;return(0,ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>lU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=YG.bind(null,r.syncEngine),yield function QN(n,e){return YN.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OG}createDatastore(e){const t=fE(e.databaseInfo.databaseId),r=new X2(e.databaseInfo);return new a(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,u=t=>lU(this.syncEngine,t,0),d=jN.C()?new jN:new BN,new m(r,i,s,u,d);var r,i,s,u,d}createSyncEngine(e,t){return function(i,s,u,d,p,y,E){const D=new $G(i,s,u,d,p,y);return E&&(D.Fa=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ie.Z)(function*(r){const i=ut(r);qe("RemoteStore","RemoteStore shutting down."),i.F_.add(5),yield C(i),i.x_.shutdown(),i.O_.set("Unknown")}),function t(r){return e.apply(this,arguments)})(this.remoteStore);var e}}class zx{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class d9{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=xi.UNAUTHENTICATED,this.clientId=TT.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,ie.Z)(function*(d){qe("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(qe("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $e(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ie.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=gE(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Wx(n,e){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ie.Z)(function*(s){r.isEqual(s)||(yield LN(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Rk.apply(this,arguments)}function Pk(n,e){return Mk.apply(this,arguments)}function Mk(){return Mk=(0,ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function Nk(n){return kk.apply(this,arguments)}(n);qe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>nU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>nU(e.remoteStore,s)),n._onlineComponents=e}),Mk.apply(this,arguments)}function kk(){return kk=(0,ie.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){qe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Wx(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function _U(n){return"FirebaseError"===n.name?n.code===ge.FAILED_PRECONDITION||n.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;No("Error using user provided cache. Falling back to memory cache: "+t),yield Wx(n,new qx)}}else qe("FirestoreClient","Using default OfflineComponentProvider"),yield Wx(n,new qx);return n._offlineComponents}),kk.apply(this,arguments)}function Ok(){return Ok=(0,ie.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(qe("FirestoreClient","Using user provided OnlineComponentProvider"),yield Pk(n,n._uninitializedComponentsProvider._online)):(qe("FirestoreClient","Using default OnlineComponentProvider"),yield Pk(n,new vE))),n._onlineComponents}),Ok.apply(this,arguments)}function Lk(){return Lk=(0,ie.Z)(function*(n){const e=yield function Kx(n){return Ok.apply(this,arguments)}(n),t=e.eventManager;return t.onListen=HG.bind(null,e.syncEngine),t.onUnlisten=GG.bind(null,e.syncEngine),t}),Lk.apply(this,arguments)}function wU(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(s,u,d,p,y){const E=new zx({next:P=>{u.enqueueAndForget(()=>function tk(n,e){return nk.apply(this,arguments)}(s,D)),P.fromCache&&"server"===p.source?y.reject(new $e(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(P)},error:P=>y.reject(P)}),D=new ik(d,E,{includeMetadataChanges:!0,Z_:!0});return function JN(n,e){return ek.apply(this,arguments)}(s,D)}(yield function EE(n){return Lk.apply(this,arguments)}(n),n.asyncQueue,e,t,r)})),r.promise}function TU(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const bU=new Map;function DU(n){if(ot.isDocumentKey(n))throw new $e(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function En(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $e(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=function Zx(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":vt()}(n);throw new $e(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class SU{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new $e(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new $e(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function w9(n,e,t,r){if(!0===e&&!0===r)throw new $e(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=TU(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new $e(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $e(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $e(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qb{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $e(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new $e(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SU(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new pS;switch(r.type){case"firstParty":return new xM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $e(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=bU.get(t);r&&(qe("ComponentProvider","Removing Datastore"),bU.delete(t),r.terminate())}(this),Promise.resolve()}}class Bs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bs(this.firestore,e,this._query)}}class Ri{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ad(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ri(this.firestore,e,this._key)}}class ad extends Bs{constructor(e,t,r){super(e,t,Zh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ri(this.firestore,null,new ot(e))}withConverter(e){return new ad(this.firestore,e,this._path)}}class D9{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new Hx(this,"async_queue_retry"),this.ou=()=>{const t=Gb();t&&qe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Ho.$o()};const e=Gb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this._u(),this.au(e)}enterRestrictedMode(e){if(!this.eu){this.eu=!0,this.iu=e||!1;const t=Gb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ou)}}enqueue(e){if(this._u(),this.eu)return new Promise(()=>{});const t=new ii;return this.au(()=>this.eu&&this.iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xa.push(e),this.uu()))}uu(){var e=this;return(0,ie.Z)(function*(){if(0!==e.Xa.length){try{yield e.Xa[0](),e.Xa.shift(),e.Ho.reset()}catch(t){if(!Zl(t))throw t;qe("AsyncQueue","Operation failed with retryable error: "+t)}e.Xa.length>0&&e.Ho.Qo(()=>e.uu())}})()}au(e){const t=this.Za.then(()=>(this.ru=!0,e().catch(r=>{throw this.nu=r,this.ru=!1,Fr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.ru=!1,r))));return this.Za=t,t}enqueueAfterDelay(e,t,r){this._u(),this.su.indexOf(e)>-1&&(t=0);const i=XN.createAndSchedule(this,e,t,r,s=>this.cu(s));return this.tu.push(i),i}_u(){this.nu&&vt()}verifyOperationInProgress(){}lu(){var e=this;return(0,ie.Z)(function*(){let t;do{t=e.Za,yield t}while(t!==e.Za)})()}hu(e){for(const t of this.tu)if(t.timerId===e)return!0;return!1}Pu(e){return this.lu().then(()=>{this.tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.lu()})}Iu(e){this.su.push(e)}cu(e){const t=this.tu.indexOf(e);this.tu.splice(t,1)}}class pr extends qb{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new D9,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||RU(this),this._firestoreClient.terminate()}}function RU(n){var e,t,r;const i=n._freezeSettings(),s=(p=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new QM(n._databaseId,p,n._persistenceKey,(E=i).host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,TU(E.experimentalLongPollingOptions),E.useFetchStreams));var p,E;n._firestoreClient=new d9(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class cy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cy(si.fromBase64String(e))}catch(t){throw new $e(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cy(si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wE{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new $e(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bk{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $e(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $e(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)}}const F9=new RegExp("[~\\*/\\[\\]]");function Xx(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||u)&&(p+=" (found",s&&(p+=` in field ${r}`),u&&(p+=` in document ${i}`),p+=")"),new $e(ge.INVALID_ARGUMENT,d+n+p)}class Gk{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ri(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new L9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class L9 extends Gk{data(){return super.data()}}function Jx(n,e){return"string"==typeof e?function Yx(n,e,t){if(e.search(F9)>=0)throw Xx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wE(...e.split("."))._internalPath}catch{throw Xx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}(n,e):e instanceof wE?e._internalPath:e._delegate._internalPath}class U9{convertValue(e,t="none"){switch(Xl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw vt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ju(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Bk(Lr(e.latitude),Lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=FT(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(eg(e));default:return null}}convertTimestamp(e){const t=Yl(e);return new yr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=bn.fromString(e);Ct(YI(r));const i=new Gh(r.get(1),r.get(3)),s=new ot(r.popFirst(5));return i.isEqual(t)||Fr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class dy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class CE extends Gk{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Jx("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class rR extends CE{data(e={}){return super.data(e)}}class DE{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new dy(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new rR(this._firestore,this._userDataWriter,r.key,r,new dy(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $e(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map(d=>({type:"added",doc:new rR(i._firestore,i._userDataWriter,d.doc.key,d.doc,new dy(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:u++}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>s||3!==d.type).map(d=>{const p=new rR(i._firestore,i._userDataWriter,d.doc.key,d.doc,new dy(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let y=-1,E=-1;return 0!==d.type&&(y=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),E=u.indexOf(d.doc.key)),{type:j9(d.type),doc:p,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function j9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}class Sg extends U9{constructor(e){super(),this.firestore=e}convertBytes(e){return new cy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ri(this.firestore,null,t)}}!function(e,t=!0){Lh=Hi.Jn,(0,Hi.Xd)(new Sh.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const u=r.getProvider("app").getImmediate(),d=new pr(new N_(r.getProvider("auth-internal")),new RM(r.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new $e(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gh(y.options.projectId,E)}(u,i),u);return s=Object.assign({useFetchStreams:t},s),d._setSettings(s),d},"PUBLIC").setMultipleInstances(!0)),(0,Hi.KN)(DM,"4.2.0",e),(0,Hi.KN)(DM,"4.2.0","esm2017")}(),(0,Hi.KN)("firebase","10.4.0","app");const JU_firebase={projectId:"forms-a1d88",appId:"1:404672634216:web:a85278503609d7b0e60add",storageBucket:"forms-a1d88.appspot.com",apiKey:"AIzaSyDPMVpk6AUtCrDqweT4ioRDvIDnGumWIaI",authDomain:"forms-a1d88.firebaseapp.com",messagingSenderId:"404672634216",measurementId:"G-JJLY1VB8P0"},eB="firebasestorage.googleapis.com";class Qr extends on.ZR{constructor(e,t,r=0){super(Zk(e),`Firebase Storage: ${t} (${Zk(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Vr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Vr||{});function Zk(n){return"storage/"+n}function Yk(n){return new Qr(Vr.INVALID_ARGUMENT,n)}function sB(){return new Qr(Vr.APP_DELETED,"The Firebase app was deleted.")}class Fo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Fo.makeFromUrl(e,t)}catch{return new Fo(e,"")}if(""===r.path)return r;throw function h6(n){return new Qr(Vr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(ke){ke.path_=decodeURIComponent(ke.path)}const D=t.replace(/[.]/g,"\\."),Se=[{regex:d,indices:{bucket:1,path:3},postModify:function s(ke){"/"===ke.path.charAt(ke.path.length-1)&&(ke.path_=ke.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===eB?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let ke=0;ke<Se.length;ke++){const at=Se[ke],pt=at.regex.exec(e);if(pt){let Cr=pt[at.indices.path];Cr||(Cr=""),r=new Fo(pt[at.indices.bucket],Cr),at.postModify(r);break}}if(null==r)throw function d6(n){return new Qr(Vr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class y6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Jk(n,e,t,r){if(r<e)throw Yk(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Yk(`Invalid value for '${n}'. Expected ${t} or less.`)}var AE=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(AE||{});class b6{constructor(e,t,r,i,s,u,d,p,y,E,D,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=E,this.connectionFactory_=D,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,B)=>{this.resolve_=k,this.reject_=B,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,u=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function E6(n){return void 0!==n}(p)?s():s(p)}catch(p){u(p)}else if(null!==d){const p=function Qk(){return new Qr(Vr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();p.serverResponse=d.getErrorText(),u(this.errorCallback_?this.errorCallback_(d,p):p)}else u(i.canceled?this.appDelete_?sB():function rB(){return new Qr(Vr.CANCELED,"User canceled the upload/download.")}():function nB(){return new Qr(Vr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new aR(!1,null,!0)):this.backoffId_=function v6(n,e,t){let r=1,i=null,s=null,u=!1,d=0;function p(){return 2===d}let y=!1;function E(...z){y||(y=!0,e.apply(null,z))}function D(z){i=setTimeout(()=>{i=null,n(k,p())},z)}function P(){s&&clearTimeout(s)}function k(z,...me){if(y)return void P();if(z)return P(),void E.call(null,z,...me);if(p()||u)return P(),void E.call(null,z,...me);let Se;r<64&&(r*=2),1===d?(d=2,Se=0):Se=1e3*(r+Math.random()),D(Se)}let B=!1;function Z(z){B||(B=!0,P(),!y&&(null!==i?(z||(d=2),clearTimeout(i),D(0)):z||(d=1)))}return D(0),s=setTimeout(()=>{u=!0,Z(!0)},t),Z}((r,i)=>{if(i)return void r(!1,new aR(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const u=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(u),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(u),this.pendingConnection_=null;const d=s.getErrorCode()===AE.NO_ERROR,p=s.getStatus();if(!d||function uB(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}(p,this.additionalRetryCodes_)&&this.retry){const E=s.getErrorCode()===AE.ABORT;return void r(!1,new aR(!1,null,E))}const y=-1!==this.successCodes_.indexOf(p);r(!0,new aR(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function I6(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class aR{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class hy{constructor(e,t){this._service=e,this._location=t instanceof Fo?t:Fo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new hy(e,t)}get root(){const e=new Fo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function fB(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function V6(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Fo(this._location.bucket,e);return new hy(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function _6(n){return new Qr(Vr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function SB(n,e){const t=e?.storageBucket;return null==t?null:Fo.makeFromBucketSpec(t,n)}class oO{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=eB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Fo.makeFromBucketSpec(i,this._host):SB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Fo.makeFromBucketSpec(this._url,e):SB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Jk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Jk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ie.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ie.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hy(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new y6(sB());{const u=function x6(n,e,t,r,i,s,u=!0){const d=function aB(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),p=n.url+d,y=Object.assign({},n.headers);return function A6(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function C6(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function D6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,s),function S6(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new b6(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,ie.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const xB="@firebase/storage",PB="storage";function MB(n=(0,Hi.Mq)(),e){n=(0,on.m9)(n);const r=(0,Hi.qX)(n,PB).getImmediate({identifier:e}),i=(0,on.P0)("storage");return i&&function Tq(n,e,t,r={}){!function wq(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,on.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function bq(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new oO(t,r,i,e,Hi.Jn)}!function Cq(){(0,Hi.Xd)(new Sh.wA(PB,bq,"PUBLIC").setMultipleInstances(!0)),(0,Hi.KN)(xB,"0.11.2",""),(0,Hi.KN)(xB,"0.11.2","esm2017")}();var Dq=O(6321),js=O(2793);function aO(){return(0,qr.e)((n,e)=>{let t,r=!1;n.subscribe((0,er.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var gt,Aq=O(3997),Uc=O(6304),Sq=(O(8977),O(3399)),dR=O(7592),xq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bc={},uO=uO||{},tn=xq||self;function hR(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function tC(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var cO="closure_uid_"+(1e9*Math.random()>>>0),Pq=0;function Mq(n,e,t){return n.call.apply(n.bind,arguments)}function Nq(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function uo(n,e,t){return(uo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Mq:Nq).apply(null,arguments)}function fR(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function bs(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function xg(){this.s=this.s,this.o=this.o}xg.prototype.s=!1,xg.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Rq(n){Object.prototype.hasOwnProperty.call(n,cO)&&n[cO]||(n[cO]=++Pq)}(this)},xg.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const NB=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function lO(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function kB(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(hR(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let u=0;u<s;u++)n[i+u]=r[u]}else n.push(r)}}function co(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}co.prototype.h=function(){this.defaultPrevented=!0};var Oq=function(){if(!tn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{tn.addEventListener("test",()=>{},e),tn.removeEventListener("test",()=>{},e)}catch{}return n}();function nC(n){return/^[\s\xa0]*$/.test(n)}function pR(){var n=tn.navigator;return n&&(n=n.userAgent)?n:""}function ld(n){return-1!=pR().indexOf(n)}function dO(n){return dO[" "](n),n}dO[" "]=function(){};var fO,Lq=ld("Opera"),RE=ld("Trident")||ld("MSIE"),OB=ld("Edge"),hO=OB||RE,FB=ld("Gecko")&&!(-1!=pR().toLowerCase().indexOf("webkit")&&!ld("Edge"))&&!(ld("Trident")||ld("MSIE"))&&!ld("Edge"),Vq=-1!=pR().toLowerCase().indexOf("webkit")&&!ld("Edge");function LB(){var n=tn.document;return n?n.documentMode:void 0}e:{var pO="",gO=function(){var n=pR();return FB?/rv:([^\);]+)(\)|;)/.exec(n):OB?/Edge\/([\d\.]+)/.exec(n):RE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Vq?/WebKit\/(\S+)/.exec(n):Lq?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(gO&&(pO=gO?gO[1]:""),RE){var mO=LB();if(null!=mO&&mO>parseFloat(pO)){fO=String(mO);break e}}fO=pO}var Uq=tn.document&&RE&&(LB()||parseInt(fO,10))||void 0;function rC(n,e){if(co.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(FB){e:{try{dO(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Bq[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&rC.$.h.call(this)}}bs(rC,co);var Bq={2:"touch",3:"pen",4:"mouse"};rC.prototype.h=function(){rC.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var iC="closure_listenable_"+(1e6*Math.random()|0),jq=0;function $q(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++jq,this.fa=this.ia=!1}function gR(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function yO(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function UB(n){const e={};for(const t in n)e[t]=n[t];return e}const BB="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jB(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<BB.length;s++)t=BB[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function mR(n){this.src=n,this.g={},this.h=0}function vO(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=NB(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(gR(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function IO(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}mR.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=IO(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new $q(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var EO="closure_lm_"+(1e6*Math.random()|0),wO={};function $B(n,e,t,r,i){if(r&&r.once)return GB(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)$B(n,e[s],t,r,i);return null}return t=DO(t),n&&n[iC]?n.O(e,t,tC(r)?!!r.capture:!!r,i):HB(n,e,t,!1,r,i)}function HB(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=tC(i)?!!i.capture:!!i,d=bO(n);if(d||(n[EO]=d=new mR(n)),(t=d.add(e,t,r,u,s)).proxy)return t;if(r=function Gq(){const e=qq;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Oq||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(zB(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function GB(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)GB(n,e[s],t,r,i);return null}return t=DO(t),n&&n[iC]?n.P(e,t,tC(r)?!!r.capture:!!r,i):HB(n,e,t,!0,r,i)}function qB(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)qB(n,e[s],t,r,i);else r=tC(r)?!!r.capture:!!r,t=DO(t),n&&n[iC]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=IO(s=n.g[e],t,r,i))&&(gR(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=bO(n))&&(e=n.g[e.toString()],n=-1,e&&(n=IO(e,t,r,i)),(t=-1<n?e[n]:null)&&TO(t))}function TO(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[iC])vO(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(zB(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=bO(e))?(vO(t,n),0==t.h&&(t.src=null,e[EO]=null)):gR(n)}}}function zB(n){return n in wO?wO[n]:wO[n]="on"+n}function qq(n,e){if(n.fa)n=!0;else{e=new rC(e,this);var t=n.listener,r=n.la||n.src;n.ia&&TO(n),n=t.call(r,e)}return n}function bO(n){return(n=n[EO])instanceof mR?n:null}var CO="__closure_events_fn_"+(1e9*Math.random()>>>0);function DO(n){return"function"==typeof n?n:(n[CO]||(n[CO]=function(e){return n.handleEvent(e)}),n[CO])}function Cs(){xg.call(this),this.i=new mR(this),this.S=this,this.J=null}function $s(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new co(e,n);else if(e instanceof co)e.target=e.target||n;else{var i=e;jB(e=new co(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=_R(u,r,!0,e)&&i}if(i=_R(u=e.g=n,r,!0,e)&&i,i=_R(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=_R(u=e.g=t[s],r,!1,e)&&i}function _R(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.fa&&u.capture==t){var d=u.listener,p=u.la||u.src;u.ia&&vO(n.i,u),i=!1!==d.call(p,r)&&i}}return i&&!r.defaultPrevented}bs(Cs,xg),Cs.prototype[iC]=!0,Cs.prototype.removeEventListener=function(n,e,t,r){qB(this,n,e,t,r)},Cs.prototype.N=function(){if(Cs.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)gR(t[r]);delete n.g[e],n.h--}}this.J=null},Cs.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Cs.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var AO=tn.JSON.stringify;function Wq(){var n=SO;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var WB=new class zq{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Zq,n=>n.reset());class Zq{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Qq(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Yq(n){tn.setTimeout(()=>{throw n},0)}let sC,oC=!1,SO=new class Kq{constructor(){this.h=this.g=null}add(e,t){const r=WB.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},KB=()=>{const n=tn.Promise.resolve(void 0);sC=()=>{n.then(Xq)}};var Xq=()=>{for(var n;n=Wq();){try{n.h.call(n.g)}catch(t){Yq(t)}var e=WB;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}oC=!1};function yR(n,e){Cs.call(this),this.h=n||1,this.g=e||tn,this.j=uo(this.qb,this),this.l=Date.now()}function xO(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function RO(n,e,t){if("function"==typeof n)t&&(n=uo(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=uo(n.handleEvent,n)}return 2147483647<Number(e)?-1:tn.setTimeout(n,e||0)}function ZB(n){n.g=RO(()=>{n.g=null,n.i&&(n.i=!1,ZB(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}bs(yR,Cs),(gt=yR.prototype).ga=!1,gt.T=null,gt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),$s(this,"tick"),this.ga&&(xO(this),this.start()))}},gt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gt.N=function(){yR.$.N.call(this),xO(this),delete this.g};class Jq extends xg{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ZB(this)}N(){super.N(),this.g&&(tn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function aC(n){xg.call(this),this.h=n,this.g={}}bs(aC,xg);var QB=[];function YB(n,e,t,r){Array.isArray(t)||(t&&(QB[0]=t.toString()),t=QB);for(var i=0;i<t.length;i++){var s=$B(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function XB(n){yO(n.g,function(e,t){this.g.hasOwnProperty(t)&&TO(e)},n),n.g={}}function vR(){this.g=!0}function PE(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function rz(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return AO(t)}catch{return e}}(n,t)+(r?" "+r:"")})}aC.prototype.N=function(){aC.$.N.call(this),XB(this)},aC.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vR.prototype.Ea=function(){this.g=!1},vR.prototype.info=function(){};var fy={},JB=null;function IR(){return JB=JB||new Cs}function ej(n){co.call(this,fy.Ta,n)}function uC(n){const e=IR();$s(e,new ej(e))}function tj(n,e){co.call(this,fy.STAT_EVENT,n),this.stat=e}function Vo(n){const e=IR();$s(e,new tj(e,n))}function nj(n,e){co.call(this,fy.Ua,n),this.size=e}function cC(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return tn.setTimeout(function(){n()},e)}fy.Ta="serverreachability",bs(ej,co),fy.STAT_EVENT="statevent",bs(tj,co),fy.Ua="timingevent",bs(nj,co);var ER={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},rj={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function PO(){}function sj(){}PO.prototype.h=null;var kO,lC={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function MO(){co.call(this,"d")}function NO(){co.call(this,"c")}function wR(){}function dC(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new aC(this),this.P=iz,this.V=new yR(n=hO?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new oj}function oj(){this.i=null,this.g="",this.h=!1}bs(MO,co),bs(NO,co),bs(wR,PO),wR.prototype.g=function(){return new XMLHttpRequest},wR.prototype.i=function(){return{}},kO=new wR;var iz=45e3,OO={},TR={};function FO(n,e,t){n.L=1,n.v=AR(pf(e)),n.s=t,n.S=!0,aj(n,null)}function aj(n,e){n.G=Date.now(),hC(n),n.A=pf(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),_j(t.i,"t",r),n.C=0,t=n.l.J,n.h=new oj,n.g=jj(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Jq(uo(n.Pa,n,n.g),n.O)),YB(n.U,n.g,"readystatechange",n.nb),e=n.I?UB(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),uC(),function ez(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",d=s.split("&"),p=0;p<d.length;p++){var y=d[p].split("=");if(1<y.length){var E=y[0];y=y[1];var D=E.split("_");u=2<=D.length&&"type"==D[1]?u+(E+"=")+y+"&":u+(E+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function uj(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function cj(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=sz(n,t),i==TR){4==e&&(n.o=4,Vo(14),r=!1),PE(n.j,n.m,null,"[Incomplete Response]");break}if(i==OO){n.o=4,Vo(15),PE(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}PE(n.j,n.m,i,null),LO(n,i)}uj(n)&&i!=TR&&i!=OO&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Vo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),GO(e),e.M=!0,Vo(11))):(PE(n.j,n.m,t,"[Invalid Chunked Response]"),py(n),fC(n))}function sz(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?TR:(t=Number(e.substring(t,r)),isNaN(t)?OO:(r+=1)+t>e.length?TR:(e=e.slice(r,r+t),n.C=r+t,e))}function hC(n){n.Y=Date.now()+n.P,lj(n,n.P)}function lj(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=cC(uo(n.lb,n),e)}function bR(n){n.B&&(tn.clearTimeout(n.B),n.B=null)}function fC(n){0==n.l.H||n.J||Lj(n.l,n)}function py(n){bR(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,xO(n.V),XB(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function LO(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||VO(t.i,n)))if(!n.K&&VO(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;NR(t),PR(t)}HO(t),Vo(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=cC(uo(t.ib,t),6e3));if(1>=Ij(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else my(t,11)}else if((n.K||t.g==n)&&NR(t),!nC(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const E=y[3];null!=E&&(t.ra=E,t.l.info("VER="+t.ra));const D=y[4];null!=D&&(t.Ga=D,t.l.info("SVER="+t.Ga));const P=y[5];null!=P&&"number"==typeof P&&0<P&&(t.L=r=1.5*P,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const k=n.g;if(k){const B=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var s=r.i;s.g||-1==B.indexOf("spdy")&&-1==B.indexOf("quic")&&-1==B.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(UO(s,s.h),s.h=null))}if(r.F){const Z=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;Z&&(r.Da=Z,Ir(r.I,r.F,Z))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=Bj(r,r.J?r.pa:null,r.Y),u.K){Ej(r.i,u);var d=u,p=r.L;p&&d.setTimeout(p),d.B&&(bR(d),hC(d)),r.g=u}else Oj(r);0<t.j.length&&MR(t)}else"stop"!=y[0]&&"close"!=y[0]||my(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?my(t,7):$O(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}uC()}catch{}}function dj(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(hR(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function az(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(hR(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function oz(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(hR(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(gt=dC.prototype).setTimeout=function(n){this.P=n},gt.nb=function(n){n=n.target;const e=this.M;e&&3==dd(n)?e.l():this.Pa(n)},gt.Pa=function(n){try{if(n==this.g)e:{const E=dd(this.g);var e=this.g.Ia();if(this.g.da(),!(3>E)&&(3!=E||hO||this.g&&(this.h.h||this.g.ja()||xj(this.g)))){this.J||4!=E||7==e||uC(),bR(this);var t=this.g.da();this.ca=t;t:if(uj(this)){var r=xj(this.g);n="";var i=r.length,s=4==dd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){py(this),fC(this);var u="";break t}this.h.i=new tn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function tz(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.W,E,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nC(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Vo(12),py(this),fC(this);break e}PE(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,LO(this,t)}this.S?(cj(this,E,u),hO&&this.i&&3==E&&(YB(this.U,this.V,"tick",this.mb),this.V.start())):(PE(this.j,this.m,u,null),LO(this,u)),4==E&&py(this),this.i&&!this.J&&(4==E?Lj(this.l,this):(this.i=!1,hC(this)))}else(function Cz(n){const e={};n=(n.g&&2<=dd(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(nC(n[r]))continue;var t=Qq(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function Hq(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Vo(12)):(this.o=0,Vo(13)),py(this),fC(this)}}}catch{}},gt.mb=function(){if(this.g){var n=dd(this.g),e=this.g.ja();this.C<e.length&&(bR(this),cj(this,n,e),this.i&&4!=n&&hC(this))}},gt.cancel=function(){this.J=!0,py(this)},gt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function nz(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(uC(),Vo(17)),py(this),this.o=2,fC(this)):lj(this,this.Y-n)};var hj=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gy(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof gy){this.h=n.h,CR(this,n.j),this.s=n.s,this.g=n.g,DR(this,n.m),this.l=n.l;var e=n.i,t=new mC;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),fj(this,t),this.o=n.o}else n&&(e=String(n).match(hj))?(this.h=!1,CR(this,e[1]||"",!0),this.s=pC(e[2]||""),this.g=pC(e[3]||"",!0),DR(this,e[4]),this.l=pC(e[5]||"",!0),fj(this,e[6]||"",!0),this.o=pC(e[7]||"")):(this.h=!1,this.i=new mC(null,this.h))}function pf(n){return new gy(n)}function CR(n,e,t){n.j=t?pC(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function DR(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function fj(n,e,t){e instanceof mC?(n.i=e,function pz(n,e){e&&!n.j&&(Rg(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(gj(this,r),_j(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=gC(e,hz)),n.i=new mC(e,n.h))}function Ir(n,e,t){n.i.set(e,t)}function AR(n){return Ir(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function pC(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function gC(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,cz),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function cz(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}gy.prototype.toString=function(){var n=[],e=this.j;e&&n.push(gC(e,pj,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(gC(e,pj,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(gC(t,"/"==t.charAt(0)?dz:lz,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",gC(t,fz)),n.join("")};var pj=/[#\/\?@]/g,lz=/[#\?:]/g,dz=/[#\?]/g,hz=/[#\?@]/g,fz=/#/g;function mC(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Rg(n){n.g||(n.g=new Map,n.h=0,n.i&&function uz(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function gj(n,e){Rg(n),e=ME(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function mj(n,e){return Rg(n),e=ME(n,e),n.g.has(e)}function _j(n,e,t){gj(n,e),0<t.length&&(n.i=null,n.g.set(ME(n,e),lO(t)),n.h+=t.length)}function ME(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function yj(n){this.l=n||mz,n=tn.PerformanceNavigationTiming?0<(n=tn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(tn.g&&tn.g.Ka&&tn.g.Ka()&&tn.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(gt=mC.prototype).add=function(n,e){Rg(this),this.i=null,n=ME(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},gt.forEach=function(n,e){Rg(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},gt.ta=function(){Rg(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},gt.Z=function(n){Rg(this);let e=[];if("string"==typeof n)mj(this,n)&&(e=e.concat(this.g.get(ME(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},gt.set=function(n,e){return Rg(this),this.i=null,mj(this,n=ME(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},gt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},gt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=s;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var mz=10;function vj(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Ij(n){return n.h?1:n.g?n.g.size:0}function VO(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function UO(n,e){n.g?n.g.add(e):n.h=e}function Ej(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function wj(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return lO(n.i)}yj.prototype.cancel=function(){if(this.i=wj(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var _z=class{stringify(n){return tn.JSON.stringify(n,void 0)}parse(n){return tn.JSON.parse(n,void 0)}};function yz(){this.g=new _z}function vz(n,e,t){const r=t||"";try{dj(n,function(i,s){let u=i;tC(i)&&(u=AO(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function SR(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function _C(n){this.l=n.fc||null,this.j=n.ob||!1}function xR(n,e){Cs.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=BO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bs(_C,PO),_C.prototype.g=function(){return new xR(this.l,this.j)},_C.prototype.i=function(n){return function(){return n}}({}),bs(xR,Cs);var BO=0;function Tj(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function yC(n){n.readyState=4,n.l=null,n.j=null,n.A=null,vC(n)}function vC(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(gt=xR.prototype).open=function(n,e){if(this.readyState!=BO)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,vC(this)},gt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||tn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},gt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yC(this)),this.readyState=BO},gt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,vC(this)),this.g&&(this.readyState=3,vC(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof tn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Tj(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},gt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?yC(this):vC(this),3==this.readyState&&Tj(this)}},gt.Za=function(n){this.g&&(this.response=this.responseText=n,yC(this))},gt.Ya=function(n){this.g&&(this.response=n,yC(this))},gt.ka=function(){this.g&&yC(this)},gt.setRequestHeader=function(n,e){this.v.append(n,e)},gt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},gt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(xR.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Ez=tn.JSON.parse;function ui(n){Cs.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=bj,this.L=this.M=!1}bs(ui,Cs);var bj="",wz=/^https?$/i,Tz=["POST","PUT"];function Cj(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Dj(n),RR(n)}function Dj(n){n.F||(n.F=!0,$s(n,"complete"),$s(n,"error"))}function Aj(n){if(n.h&&typeof uO<"u"&&(!n.C[1]||4!=dd(n)||2!=n.da()))if(n.v&&4==dd(n))RO(n.La,0,n);else if($s(n,"readystatechange"),4==dd(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(hj)[1]||null;!i&&tn.self&&tn.self.location&&(i=tn.self.location.protocol.slice(0,-1)),r=!wz.test(i?i.toLowerCase():"")}t=r}if(t)$s(n,"complete"),$s(n,"success");else{n.m=6;try{var s=2<dd(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",Dj(n)}}finally{RR(n)}}}function RR(n,e){if(n.g){Sj(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||$s(n,"ready");try{t.onreadystatechange=r}catch{}}}function Sj(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(tn.clearTimeout(n.A),n.A=null)}function dd(n){return n.g?n.g.readyState:0}function xj(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case bj:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Rj(n){let e="";return yO(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function jO(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Rj(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ir(n,e,t))}function IC(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Pj(n){this.Ga=0,this.j=[],this.l=new vR,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=IC("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=IC("baseRetryDelayMs",5e3,n),this.hb=IC("retryDelaySeedMs",1e4,n),this.eb=IC("forwardChannelMaxRetries",2,n),this.xa=IC("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new yj(n&&n.concurrentRequestLimit),this.Ja=new yz,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function $O(n){if(Mj(n),3==n.H){var e=n.W++,t=pf(n.I);if(Ir(t,"SID",n.K),Ir(t,"RID",e),Ir(t,"TYPE","terminate"),EC(n,t),(e=new dC(n,n.l,e)).L=2,e.v=AR(pf(t)),t=!1,tn.navigator&&tn.navigator.sendBeacon)try{t=tn.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&tn.Image&&((new Image).src=e.v,t=!0),t||(e.g=jj(e.l,null),e.g.ha(e.v)),e.G=Date.now(),hC(e)}Uj(n)}function PR(n){n.g&&(GO(n),n.g.cancel(),n.g=null)}function Mj(n){PR(n),n.u&&(tn.clearTimeout(n.u),n.u=null),NR(n),n.i.cancel(),n.m&&("number"==typeof n.m&&tn.clearTimeout(n.m),n.m=null)}function MR(n){if(!vj(n.i)&&!n.m){n.m=!0;var e=n.Na;sC||KB(),oC||(sC(),oC=!0),SO.add(e,n),n.C=0}}function Nj(n,e){var t;t=e?e.m:n.W++;const r=pf(n.I);Ir(r,"SID",n.K),Ir(r,"RID",t),Ir(r,"AID",n.V),EC(n,r),n.o&&n.s&&jO(r,n.o,n.s),t=new dC(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=kj(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),UO(n.i,t),FO(t,r,e)}function EC(n,e){n.na&&yO(n.na,function(t,r){Ir(e,r,t)}),n.h&&dj({},function(t,r){Ir(e,r,t)})}function kj(n,e,t){t=Math.min(n.j.length,t);var r=n.h?uo(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].g,u.push("ofs="+s)):s=0:u.push("ofs="+s);let d=!0;for(let p=0;p<t;p++){let y=i[p].g;const E=i[p].map;if(y-=s,0>y)s=Math.max(0,i[p].g-100),d=!1;else try{vz(E,u,"req"+y+"_")}catch{r&&r(E)}}if(d){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Oj(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;sC||KB(),oC||(sC(),oC=!0),SO.add(e,n),n.A=0}}function HO(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=cC(uo(n.Ma,n),Vj(n,n.A)),n.A++,0))}function GO(n){null!=n.B&&(tn.clearTimeout(n.B),n.B=null)}function Fj(n){n.g=new dC(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=pf(n.wa);Ir(e,"RID","rpc"),Ir(e,"SID",n.K),Ir(e,"AID",n.V),Ir(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Ir(e,"TO",n.qa),Ir(e,"TYPE","xmlhttp"),EC(n,e),n.o&&n.s&&jO(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=AR(pf(e)),t.s=null,t.S=!0,aj(t,n)}function NR(n){null!=n.v&&(tn.clearTimeout(n.v),n.v=null)}function Lj(n,e){var t=null;if(n.g==e){NR(n),GO(n),n.g=null;var r=2}else{if(!VO(n.i,e))return;t=e.F,Ej(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;$s(r=IR(),new nj(r,t)),MR(n)}else Oj(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function Dz(n,e){return!(Ij(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=cC(uo(n.Na,n,e),Vj(n,n.C)),n.C++,0)))}(n,e)||2==r&&HO(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:my(n,5);break;case 4:my(n,10);break;case 3:my(n,6);break;default:my(n,2)}}function Vj(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function my(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=uo(n.pb,n);t||(t=new gy("//www.google.com/images/cleardot.gif"),tn.location&&"http"==tn.location.protocol||CR(t,"https"),AR(t)),function Iz(n,e){const t=new vR;if(tn.Image){const r=new Image;r.onload=fR(SR,t,r,"TestLoadImage: loaded",!0,e),r.onerror=fR(SR,t,r,"TestLoadImage: error",!1,e),r.onabort=fR(SR,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=fR(SR,t,r,"TestLoadImage: timeout",!1,e),tn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Vo(2);n.H=0,n.h&&n.h.za(e),Uj(n),Mj(n)}function Uj(n){if(n.H=0,n.ma=[],n.h){const e=wj(n.i);(0!=e.length||0!=n.j.length)&&(kB(n.ma,e),kB(n.ma,n.j),n.i.i.length=0,lO(n.j),n.j.length=0),n.h.ya()}}function Bj(n,e,t){var r=t instanceof gy?pf(t):new gy(t);if(""!=r.g)e&&(r.g=e+"."+r.g),DR(r,r.m);else{var i=tn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new gy(null);r&&CR(s,r),e&&(s.g=e),i&&DR(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&Ir(r,t,e),Ir(r,"VER",n.ra),EC(n,r),r}function jj(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ui(t&&n.Ha&&!n.va?new _C({ob:!0}):n.va)).Oa(n.J),e}function $j(){}function kR(){if(RE&&!(10<=Number(Uq)))throw Error("Environmental error: no available transport.")}function Xa(n,e){Cs.call(this),this.g=new Pj(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!nC(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!nC(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new NE(this)}function Hj(n){MO.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Gj(){NO.call(this),this.status=1}function NE(n){this.g=n}function jc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function qO(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],u=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;u=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(u<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((s=(e=t+((u=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=s+((u=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Wn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(gt=ui.prototype).Oa=function(n){this.M=n},gt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():kO.g(),this.C=function ij(n){return n.h||(n.h=n.i())}(this.u?this.u:kO),this.g.onreadystatechange=uo(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void Cj(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=tn.FormData&&n instanceof tn.FormData,!(0<=NB(Tz,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,u]of t)this.g.setRequestHeader(s,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Sj(this),0<this.B&&((this.L=function bz(n){return RE&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=uo(this.ua,this)):this.A=RO(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Cj(this,s)}},gt.ua=function(){typeof uO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$s(this,"timeout"),this.abort(8))},gt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$s(this,"complete"),$s(this,"abort"),RR(this))},gt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),RR(this,!0)),ui.$.N.call(this)},gt.La=function(){this.s||(this.G||this.v||this.l?Aj(this):this.kb())},gt.kb=function(){Aj(this)},gt.isActive=function(){return!!this.g},gt.da=function(){try{return 2<dd(this)?this.g.status:-1}catch{return-1}},gt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},gt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Ez(e)}},gt.Ia=function(){return this.m},gt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(gt=Pj.prototype).ra=8,gt.H=1,gt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new dC(this,this.l,n);let s=this.s;if(this.U&&(s?(s=UB(s),jB(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=kj(this,i,e),Ir(t=pf(this.I),"RID",n),Ir(t,"CVER",22),this.F&&Ir(t,"X-HTTP-Session-Id",this.F),EC(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(Rj(s)))+"&"+e:this.o&&jO(t,this.o,s)),UO(this.i,i),this.bb&&Ir(t,"TYPE","init"),this.P?(Ir(t,"$req",e),Ir(t,"SID","null"),i.aa=!0,FO(i,t,null)):FO(i,t,e),this.H=2}}else 3==this.H&&(n?Nj(this,n):0==this.j.length||vj(this.i)||Nj(this))},gt.Ma=function(){if(this.u=null,Fj(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=cC(uo(this.jb,this),n)}},gt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Vo(10),PR(this),Fj(this))},gt.ib=function(){null!=this.v&&(this.v=null,PR(this),HO(this),Vo(19))},gt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Vo(2)):(this.l.info("Failed to ping google.com"),Vo(1))},gt.isActive=function(){return!!this.h&&this.h.isActive(this)},(gt=$j.prototype).Ba=function(){},gt.Aa=function(){},gt.za=function(){},gt.ya=function(){},gt.isActive=function(){return!0},gt.Va=function(){},kR.prototype.g=function(n,e){return new Xa(n,e)},bs(Xa,Cs),Xa.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Vo(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Bj(n,null,n.Y),MR(n)},Xa.prototype.close=function(){$O(this.g)},Xa.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=AO(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&MR(e)},Xa.prototype.N=function(){this.g.h=null,delete this.j,$O(this.g),delete this.g,Xa.$.N.call(this)},bs(Hj,MO),bs(Gj,NO),bs(NE,$j),NE.prototype.Ba=function(){$s(this.g,"a")},NE.prototype.Aa=function(n){$s(this.g,new Hj(n))},NE.prototype.za=function(n){$s(this.g,new Gj)},NE.prototype.ya=function(){$s(this.g,"b")},bs(jc,function Az(){this.blockSize=-1}),jc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},jc.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)qO(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){qO(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){qO(this,r),i=0;break}}this.h=i,this.i+=e},jc.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Sz={};function zO(n){return-128<=n&&128>n?function Fq(n,e){var t=Sz;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Wn([0|e],0>e?-1:0)}):new Wn([0|n],0>n?-1:0)}function hd(n){if(isNaN(n)||!isFinite(n))return kE;if(0>n)return Hs(hd(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=WO;return new Wn(e,0)}var WO=4294967296,kE=zO(0),KO=zO(1),zj=zO(16777216);function gf(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ku(n){return-1==n.h}function Hs(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Wn(t,~n.h).add(KO)}function OR(n,e){return n.add(Hs(e))}function FR(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function wC(n,e){this.g=n,this.h=e}function LR(n,e){if(gf(e))throw Error("division by zero");if(gf(n))return new wC(kE,kE);if(Ku(n))return e=LR(Hs(n),e),new wC(Hs(e.g),Hs(e.h));if(Ku(e))return e=LR(n,Hs(e)),new wC(Hs(e.g),e.h);if(30<n.g.length){if(Ku(n)||Ku(e))throw Error("slowDivide_ only works with positive integers.");for(var t=KO,r=e;0>=r.X(n);)t=Wj(t),r=Wj(r);var i=OE(t,1),s=OE(r,1);for(r=OE(r,2),t=OE(t,2);!gf(r);){var u=s.add(r);0>=u.X(n)&&(i=i.add(t),s=u),r=OE(r,1),t=OE(t,1)}return e=OR(n,i.R(e)),new wC(i,e)}for(i=kE;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(s=hd(t)).R(e);Ku(u)||0<u.X(n);)u=(s=hd(t-=r)).R(e);gf(s)&&(s=KO),i=i.add(s),n=OR(n,u)}return new wC(i,n)}function Wj(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Wn(t,n.h)}function OE(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Wn(i,n.h)}(gt=Wn.prototype).ea=function(){if(Ku(this))return-Hs(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:WO+r)*e,e*=WO}return n},gt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(gf(this))return"0";if(Ku(this))return"-"+Hs(this).toString(n);for(var e=hd(Math.pow(n,6)),t=this,r="";;){var i=LR(t,e).g,s=((0<(t=OR(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(gf(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},gt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},gt.X=function(n){return Ku(n=OR(this,n))?-1:gf(n)?0:1},gt.abs=function(){return Ku(this)?Hs(this):this},gt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),u=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(s&=65535)}return new Wn(t,-2147483648&t[t.length-1]?-1:0)},gt.R=function(n){if(gf(this)||gf(n))return kE;if(Ku(this))return Ku(n)?Hs(this).R(Hs(n)):Hs(Hs(this).R(n));if(Ku(n))return Hs(this.R(Hs(n)));if(0>this.X(zj)&&0>n.X(zj))return hd(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,u=65535&this.D(r),d=n.D(i)>>>16,p=65535&n.D(i);t[2*r+2*i]+=u*p,FR(t,2*r+2*i),t[2*r+2*i+1]+=s*p,FR(t,2*r+2*i+1),t[2*r+2*i+1]+=u*d,FR(t,2*r+2*i+1),t[2*r+2*i+2]+=s*d,FR(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Wn(t,0)},gt.gb=function(n){return LR(this,n).h},gt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Wn(t,this.h&n.h)},gt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Wn(t,this.h|n.h)},gt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Wn(t,this.h^n.h)},kR.prototype.createWebChannel=kR.prototype.g,Xa.prototype.send=Xa.prototype.u,Xa.prototype.open=Xa.prototype.m,Xa.prototype.close=Xa.prototype.close,ER.NO_ERROR=0,ER.TIMEOUT=8,ER.HTTP_ERROR=6,rj.COMPLETE="complete",sj.EventType=lC,lC.OPEN="a",lC.CLOSE="b",lC.ERROR="c",lC.MESSAGE="d",Cs.prototype.listen=Cs.prototype.O,ui.prototype.listenOnce=ui.prototype.P,ui.prototype.getLastError=ui.prototype.Sa,ui.prototype.getLastErrorCode=ui.prototype.Ia,ui.prototype.getStatus=ui.prototype.da,ui.prototype.getResponseJson=ui.prototype.Wa,ui.prototype.getResponseText=ui.prototype.ja,ui.prototype.send=ui.prototype.ha,ui.prototype.setWithCredentials=ui.prototype.Oa,jc.prototype.digest=jc.prototype.l,jc.prototype.reset=jc.prototype.reset,jc.prototype.update=jc.prototype.j,Wn.prototype.add=Wn.prototype.add,Wn.prototype.multiply=Wn.prototype.R,Wn.prototype.modulo=Wn.prototype.gb,Wn.prototype.compare=Wn.prototype.X,Wn.prototype.toNumber=Wn.prototype.ea,Wn.prototype.toString=Wn.prototype.toString,Wn.prototype.getBits=Wn.prototype.D,Wn.fromNumber=hd,Wn.fromString=function qj(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Hs(qj(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=hd(Math.pow(e,8)),r=kE,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+s),e);8>s?(s=hd(Math.pow(e,s)),r=r.R(s).add(hd(u))):r=(r=r.R(t)).add(hd(u))}return r};var xz=Bc.createWebChannelTransport=function(){return new kR},Rz=Bc.getStatEventTarget=function(){return IR()},ZO=Bc.ErrorCode=ER,Pz=Bc.EventType=rj,Mz=Bc.Event=fy,Kj=Bc.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Nz=Bc.FetchXmlHttpFactory=_C,VR=Bc.WebChannel=sj,kz=Bc.XhrIo=ui,Oz=Bc.Md5=jc,FE=Bc.Integer=Wn;const Zj="@firebase/firestore";class Ds{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ds.UNAUTHENTICATED=new Ds(null),Ds.GOOGLE_CREDENTIALS=new Ds("google-credentials-uid"),Ds.FIRST_PARTY=new Ds("first-party-uid"),Ds.MOCK_USER=new Ds("mock-user");let LE="9.23.0";const Pg=new rs.Yd("@firebase/firestore");function QO(){return Pg.logLevel}function Ke(n,...e){if(Pg.logLevel<=rs.in.DEBUG){const t=e.map(YO);Pg.debug(`Firestore (${LE}): ${n}`,...t)}}function Mi(n,...e){if(Pg.logLevel<=rs.in.ERROR){const t=e.map(YO);Pg.error(`Firestore (${LE}): ${n}`,...t)}}function Zu(n,...e){if(Pg.logLevel<=rs.in.WARN){const t=e.map(YO);Pg.warn(`Firestore (${LE}): ${n}`,...t)}}function YO(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function It(n="Unexpected state"){const e=`FIRESTORE (${LE}) INTERNAL ASSERTION FAILED: `+n;throw Mi(e),new Error(e)}function kt(n,e){n||It()}function ft(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends on.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class cs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Qj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Vz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ds.UNAUTHENTICATED))}shutdown(){}}class Uz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Bz{constructor(e){this.t=e,this.currentUser=Ds.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new cs,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=u;e.enqueueRetryable((0,ie.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new cs)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kt("string"==typeof r.accessToken),new Qj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(null===e||"string"==typeof e),new Ds(e)}}class jz{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Ds.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class $z{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new jz(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ds.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hz{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.T;return this.T=s.token,Ke("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kt("string"==typeof t.token),this.T=t.token,new Yj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Gz(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Xj{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Gz(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function en(n,e){return n<e?-1:n>e?1:0}function VE(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Jj(n){return n+"\0"}class Ur{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new je(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ur.fromMillis(Date.now())}static fromDate(e){return Ur.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ur(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?en(this.nanoseconds,e.nanoseconds):en(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ft(e)}static min(){return new Ft(new Ur(0,0))}static max(){return new Ft(new Ur(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class TC{constructor(e,t,r){void 0===t?t=0:t>e.length&&It(),void 0===r?r=e.length-t:r>e.length-t&&It(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===TC.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof TC?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Cn extends TC{construct(e,t,r){return new Cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new je(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Cn(t)}static emptyPath(){return new Cn([])}}const qz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ci extends TC{construct(e,t,r){return new ci(e,t,r)}static isValidIdentifier(e){return qz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ci.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ci(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new je(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new je(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new je(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(s(),i++)}if(s(),u)throw new je(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ci(t)}static emptyPath(){return new ci([])}}class lt{constructor(e){this.path=e}static fromPath(e){return new lt(Cn.fromString(e))}static fromName(e){return new lt(Cn.fromString(e).popFirst(5))}static empty(){return new lt(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new Cn(e.slice()))}}class UR{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function XO(n){return n.fields.find(e=>2===e.kind)}function _y(n){return n.fields.filter(e=>2!==e.kind)}UR.UNKNOWN_ID=-1;class BR{constructor(e,t){this.fieldPath=e,this.kind=t}}class bC{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bC(0,Ja.min())}}function e4(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ft.fromTimestamp(1e9===r?new Ur(t+1,0):new Ur(t,r));return new Ja(i,lt.empty(),e)}function t4(n){return new Ja(n.readTime,n.key,-1)}class Ja{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ja(Ft.min(),lt.empty(),-1)}static max(){return new Ja(Ft.max(),lt.empty(),-1)}}function JO(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=lt.comparator(n.documentKey,e.documentKey),0!==t?t:en(n.largestBatchId,e.largestBatchId))}const n4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class r4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Mg(n){return eF.apply(this,arguments)}function eF(){return eF=(0,ie.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==n4)throw n;Ke("LocalStore","Unexpectedly lost primary lease")}),eF.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&It(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,s=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++s,u&&s===i&&t()},p=>r(p))}),u=!0,s===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const s=e.length,u=new Array(s);let d=0;for(let p=0;p<s;p++){const y=p;t(e[y]).next(E=>{u[y]=E,++d,d===s&&r(u)},E=>i(E))}})}static doWhile(e,t){return new le((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class jR{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new cs,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new CC(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=tF(r.target.error);this.v.reject(new CC(e,i))}}static open(e,t,r,i){try{return new jR(t,e.transaction(i,r))}catch(s){throw new CC(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Zz(t)}}class $c{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===$c.S((0,on.z$)())&&Mi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ke("SimpleDb","Removing database:",e),yy(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,on.hl)())return!1;if($c.C())return!0;const e=(0,on.z$)(),t=$c.S(e),r=0<t&&t<10,i=$c.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ie.Z)(function*(){return t.db||(Ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{r(u.target.result)},s.onblocked=()=>{i(new CC(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const d=u.target.error;i("VersionError"===d.name?new je(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new je(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new CC(e,d))},s.onupgradeneeded=u=>{Ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.V.O(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ie.Z)(function*(){const u="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.$(e);const p=jR.open(s.db,e,u?"readonly":"readwrite",r),y=i(p).next(E=>(p.P(),E)).catch(E=>(p.abort(E),le.reject(E))).toPromise();return y.catch(()=>{}),yield p.R,y}catch(p){const y=p,E="FirebaseError"!==y.name&&d<3;if(Ke("SimpleDb","Transaction failed with error:",y.message,"Retrying:",E),s.close(),!E)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Kz{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return yy(this.L.delete())}}class CC extends je{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ng(n){return"IndexedDbTransactionError"===n.name}class Zz{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yy(r)}add(e){return Ke("SimpleDb","ADD",this.store.name,e,e),yy(this.store.add(e))}get(e){return yy(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ke("SimpleDb","DELETE",this.store.name,e),yy(this.store.delete(e))}count(){return Ke("SimpleDb","COUNT",this.store.name),yy(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.W(i,(u,d)=>{s.push(d)}).next(()=>s)}{const i=this.store.getAll(r.range);return new le((s,u)=>{i.onerror=d=>{u(d.target.error)},i.onsuccess=d=>{s(d.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,s)=>{r.onerror=u=>{s(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}J(e,t){Ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,u,d)=>d.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=s=>{const u=tF(s.target.error);i(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():r()}):r()}})}W(e,t){const r=[];return new le((i,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void i();const p=new Kz(d),y=t(d.primaryKey,d.value,p);if(y instanceof le){const E=y.catch(D=>(p.done(),le.reject(D)));r.push(E)}p.isDone?i():null===p.K?d.continue():d.continue(p.K)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function yy(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=tF(r.target.error);t(i)}})}let i4=!1;function tF(n){const e=$c.S((0,on.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new je("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return i4||(i4=!0,setTimeout(()=>{throw r},0)),r}}return n}class Qz{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ie.Z)(function*(){t.task=null;try{Ke("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Ng(r)?Ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Mg(r)}yield t.et(6e4)}))}}class Yz{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,s=!0;return le.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Ke("IndexBackiller",`Processing collection: ${u}`),this.it(e,u,i).next(d=>{i-=d,r.add(u)});s=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const u=s.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.rt(i,s)).next(d=>(Ke("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>u.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,s)=>{const u=t4(s);JO(u,r)>0&&(r=u)}),new Ja(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let eu=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function DC(n){return null==n}function AC(n){return 0===n&&1/n==-1/0}function s4(n){return"number"==typeof n&&Number.isInteger(n)&&!AC(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function lo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=o4(e)),e=Xz(n.get(t),e);return o4(e)}function Xz(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function o4(n){return n+"\x01\x01"}function fd(n){const e=n.length;if(kt(e>=2),2===e)return kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Cn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&It(),n.charAt(u+1)){case"\x01":const d=n.substring(s,u);let p;0===i.length?p=d:(i+=d,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,u),i+="\0";break;case"\x11":i+=n.substring(s,u+1);break;default:It()}s=u+2}return new Cn(r)}const a4=["userId","batchId"];function $R(n,e){return[n,lo(e)]}function u4(n,e,t){return[n,lo(e),t]}const Jz={},e7=["prefixPath","collectionGroup","readTime","documentId"],t7=["prefixPath","collectionGroup","documentId"],n7=["collectionGroup","readTime","prefixPath","documentId"],r7=["canonicalId","targetId"],i7=["targetId","path"],s7=["path","targetId"],o7=["collectionId","parent"],a7=["indexId","uid"],u7=["uid","sequenceNumber"],c7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],l7=["indexId","uid","orderedDocumentKey"],d7=["userId","collectionPath","documentId"],h7=["userId","collectionPath","largestBatchId"],f7=["userId","collectionGroup","largestBatchId"],c4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],p7=[...c4,"documentOverlays"],l4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],d4=l4,g7=[...d4,"indexConfiguration","indexState","indexEntries"];class nF extends r4{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function As(n,e){const t=ft(n);return $c.M(t.ht,e)}function h4(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function kg(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function f4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class gr{constructor(e,t){this.comparator=e,this.root=t||Gs.EMPTY}insert(e,t){return new gr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gs.BLACK,null,null))}remove(e){return new gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new HR(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new HR(this.root,e,this.comparator,!1)}getReverseIterator(){return new HR(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new HR(this.root,e,this.comparator,!0)}}class HR{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gs{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Gs.RED,this.left=i??Gs.EMPTY,this.right=s??Gs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Gs(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Gs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw It();const e=this.left.check();if(e!==this.right.check())throw It();return e+(this.isRed()?0:1)}}Gs.EMPTY=null,Gs.RED=!0,Gs.BLACK=!1,Gs.EMPTY=new class{constructor(){this.size=0}get key(){throw It()}get value(){throw It()}get color(){throw It()}get left(){throw It()}get right(){throw It()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Gs(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Er{constructor(e){this.comparator=e,this.data=new gr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new p4(this.data.getIterator())}getIteratorFrom(e){return new p4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Er)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Er(this.comparator);return t.data=e,t}}class p4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function UE(n){return n.hasNext()?n.getNext():void 0}class la{constructor(e){this.fields=e,e.sort(ci.comparator)}static empty(){return new la([])}unionWith(e){let t=new Er(ci.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new la(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return VE(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class g4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ls{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new g4("Invalid base64 string: "+i):i}}(e);return new ls(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ls(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return en(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ls.EMPTY_BYTE_STRING=new ls("");const _7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Og(n){if(kt(!!n),"string"==typeof n){let e=0;const t=_7.exec(n);if(kt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:li(n.seconds),nanos:li(n.nanos)}}function li(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function mf(n){return"string"==typeof n?ls.fromBase64String(n):ls.fromUint8Array(n)}function GR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function qR(n){const e=n.mapValue.fields.__previous_value__;return GR(e)?qR(e):e}function SC(n){const e=Og(n.mapValue.fields.__local_write_time__.timestampValue);return new Ur(e.seconds,e.nanos)}class y7{constructor(e,t,r,i,s,u,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}class Fg{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Fg("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fg&&e.projectId===this.projectId&&e.database===this.database}}const Lg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zR={nullValue:"NULL_VALUE"};function Vg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?GR(n)?4:v4(n)?9007199254740991:10:It()}function pd(n,e){if(n===e)return!0;const t=Vg(n);if(t!==Vg(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return SC(n).isEqual(SC(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Og(r.timestampValue),u=Og(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,mf(n.bytesValue).isEqual(mf(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return li(r.geoPointValue.latitude)===li(i.geoPointValue.latitude)&&li(r.geoPointValue.longitude)===li(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return li(r.integerValue)===li(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=li(r.doubleValue),u=li(i.doubleValue);return s===u?AC(s)===AC(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return VE(n.arrayValue.values||[],e.arrayValue.values||[],pd);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(h4(s)!==h4(u))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===u[d]||!pd(s[d],u[d])))return!1;return!0}(n,e);default:return It()}var i}function xC(n,e){return void 0!==(n.values||[]).find(t=>pd(t,e))}function Ug(n,e){if(n===e)return 0;const t=Vg(n),r=Vg(e);if(t!==r)return en(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return en(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=li(i.integerValue||i.doubleValue),d=li(s.integerValue||s.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return m4(n.timestampValue,e.timestampValue);case 4:return m4(SC(n),SC(e));case 5:return en(n.stringValue,e.stringValue);case 6:return function(i,s){const u=mf(i),d=mf(s);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),d=s.split("/");for(let p=0;p<u.length&&p<d.length;p++){const y=en(u[p],d[p]);if(0!==y)return y}return en(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=en(li(i.latitude),li(s.latitude));return 0!==u?u:en(li(i.longitude),li(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],d=s.values||[];for(let p=0;p<u.length&&p<d.length;++p){const y=Ug(u[p],d[p]);if(y)return y}return en(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Lg.mapValue&&s===Lg.mapValue)return 0;if(i===Lg.mapValue)return 1;if(s===Lg.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),p=s.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let E=0;E<d.length&&E<y.length;++E){const D=en(d[E],y[E]);if(0!==D)return D;const P=Ug(u[d[E]],p[y[E]]);if(0!==P)return P}return en(d.length,y.length)}(n.mapValue,e.mapValue);default:throw It()}}function m4(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return en(n,e);const t=Og(n),r=Og(e),i=en(t.seconds,r.seconds);return 0!==i?i:en(t.nanos,r.nanos)}function BE(n){return rF(n)}function rF(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Og(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?mf(n.bytesValue).toBase64():"referenceValue"in n?lt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=rF(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const d of i)u?u=!1:s+=",",s+=`${d}:${rF(r.fields[d])}`;return s+"}"}(n.mapValue):It();var e}function vy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function iF(n){return!!n&&"integerValue"in n}function RC(n){return!!n&&"arrayValue"in n}function _4(n){return!!n&&"nullValue"in n}function y4(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function KR(n){return!!n&&"mapValue"in n}function PC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return kg(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=PC(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=PC(n.arrayValue.values[t]);return e}return Object.assign({},n)}function v4(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function v7(n){return"nullValue"in n?zR:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vy(Fg.empty(),lt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:It()}function I7(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vy(Fg.empty(),lt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Lg:It()}function I4(n,e){const t=Ug(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function E4(n,e){const t=Ug(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class qs{constructor(e){this.value=e}static empty(){return new qs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!KR(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=PC(t)}setAll(e){let t=ci.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=PC(u):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());KR(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];KR(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){kg(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new qs(PC(this.value))}}function w4(n){const e=[];return kg(n.fields,(t,r)=>{const i=new ci([t]);if(KR(r)){const s=w4(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new la(e)}class wr{constructor(e,t,r,i,s,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=u,this.documentState=d}static newInvalidDocument(e){return new wr(e,0,Ft.min(),Ft.min(),Ft.min(),qs.empty(),0)}static newFoundDocument(e,t,r,i){return new wr(e,1,t,Ft.min(),r,i,0)}static newNoDocument(e,t){return new wr(e,2,t,Ft.min(),Ft.min(),qs.empty(),0)}static newUnknownDocument(e,t){return new wr(e,3,t,Ft.min(),Ft.min(),qs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ft.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bg{constructor(e,t){this.position=e,this.inclusive=t}}function T4(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?lt.comparator(lt.fromName(u.referenceValue),t.key):Ug(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function b4(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pd(n.position[t],e.position[t]))return!1;return!0}class jE{constructor(e,t="asc"){this.field=e,this.dir=t}}function E7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class C4{}class wn extends C4{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new w7(e,t,r):"array-contains"===t?new C7(e,r):"in"===t?new P4(e,r):"not-in"===t?new D7(e,r):"array-contains-any"===t?new A7(e,r):new wn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new T7(e,r):new b7(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ug(t,this.value)):null!==t&&Vg(this.value)===Vg(t)&&this.matchesComparison(Ug(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return It()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Kn extends C4{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Kn(e,t)}matches(e){return $E(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function $E(n){return"and"===n.op}function sF(n){return"or"===n.op}function oF(n){return D4(n)&&$E(n)}function D4(n){for(const e of n.filters)if(e instanceof Kn)return!1;return!0}function aF(n){if(n instanceof wn)return n.field.canonicalString()+n.op.toString()+BE(n.value);if(oF(n))return n.filters.map(e=>aF(e)).join(",");{const e=n.filters.map(t=>aF(t)).join(",");return`${n.op}(${e})`}}function A4(n,e){return n instanceof wn?(t=n,(r=e)instanceof wn&&t.op===r.op&&t.field.isEqual(r.field)&&pd(t.value,r.value)):n instanceof Kn?function(t,r){return r instanceof Kn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,u)=>i&&A4(s,r.filters[u]),!0)}(n,e):void It();var t,r}function S4(n,e){const t=n.filters.concat(e);return Kn.create(t,n.op)}function x4(n){return n instanceof wn?`${(e=n).field.canonicalString()} ${e.op} ${BE(e.value)}`:n instanceof Kn?function(e){return e.op.toString()+" {"+e.getFilters().map(x4).join(" ,")+"}"}(n):"Filter";var e}class w7 extends wn{constructor(e,t,r){super(e,t,r),this.key=lt.fromName(r.referenceValue)}matches(e){const t=lt.comparator(e.key,this.key);return this.matchesComparison(t)}}class T7 extends wn{constructor(e,t){super(e,"in",t),this.keys=R4(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class b7 extends wn{constructor(e,t){super(e,"not-in",t),this.keys=R4(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function R4(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>lt.fromName(r.referenceValue))}class C7 extends wn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return RC(t)&&xC(t.arrayValue,this.value)}}class P4 extends wn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xC(this.value.arrayValue,t)}}class D7 extends wn{constructor(e,t){super(e,"not-in",t)}matches(e){if(xC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xC(this.value.arrayValue,t)}}class A7 extends wn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!RC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xC(this.value.arrayValue,r))}}class S7{constructor(e,t=null,r=[],i=[],s=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=d,this.dt=null}}function uF(n,e=null,t=[],r=[],i=null,s=null,u=null){return new S7(n,e,t,r,i,s,u)}function Iy(n){const e=ft(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>aF(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),DC(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>BE(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>BE(r)).join(",")),e.dt=t}return e.dt}function MC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!E7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!A4(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!b4(n.startAt,e.startAt)&&b4(n.endAt,e.endAt)}function ZR(n){return lt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function QR(n,e){return n.filters.filter(t=>t instanceof wn&&t.field.isEqual(e))}function M4(n,e,t){let r=zR,i=!0;for(const s of QR(n,e)){let u=zR,d=!0;switch(s.op){case"<":case"<=":u=v7(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,d=!1;break;case"!=":case"not-in":u=zR}I4({value:r,inclusive:i},{value:u,inclusive:d})<0&&(r=u,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];I4({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function N4(n,e,t){let r=Lg,i=!0;for(const s of QR(n,e)){let u=Lg,d=!0;switch(s.op){case">=":case">":u=I7(s.value),d=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,d=!1;break;case"!=":case"not-in":u=Lg}E4({value:r,inclusive:i},{value:u,inclusive:d})>0&&(r=u,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];E4({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class _f{constructor(e,t=null,r=[],i=[],s=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=d,this.endAt=p,this.wt=null,this._t=null}}function k4(n,e,t,r,i,s,u,d){return new _f(n,e,t,r,i,s,u,d)}function HE(n){return new _f(n)}function O4(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function cF(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function YR(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function lF(n){return null!==n.collectionGroup}function Ey(n){const e=ft(n);if(null===e.wt){e.wt=[];const t=YR(e),r=cF(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new jE(t)),e.wt.push(new jE(ci.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new jE(ci.keyField(),s))}}}return e.wt}function Uo(n){const e=ft(n);if(!e._t)if("F"===e.limitType)e._t=uF(e.path,e.collectionGroup,Ey(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Ey(e))t.push(new jE(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Bg(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Bg(e.startAt.position,e.startAt.inclusive):null;e._t=uF(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function dF(n,e){e.getFirstInequalityField(),YR(n);const t=n.filters.concat([e]);return new _f(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function XR(n,e,t){return new _f(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function NC(n,e){return MC(Uo(n),Uo(e))&&n.limitType===e.limitType}function F4(n){return`${Iy(Uo(n))}|lt:${n.limitType}`}function hF(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>x4(r)).join(", ")}]`),DC(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>BE(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>BE(r)).join(",")),`Target(${t})`}(Uo(n))}; limitType=${n.limitType})`}function kC(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):lt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Ey(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const d=T4(i,s,u);return i.inclusive?d<=0:d<0}(t.startAt,Ey(t),r)||t.endAt&&!function(i,s,u){const d=T4(i,s,u);return i.inclusive?d>=0:d>0}(t.endAt,Ey(t),r)));var t,r}function L4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function V4(n){return(e,t)=>{let r=!1;for(const i of Ey(n)){const s=x7(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function x7(n,e,t){const r=n.field.isKeyField()?lt.comparator(e.key,t.key):function(i,s,u){const d=s.data.field(i),p=u.data.field(i);return null!==d&&null!==p?Ug(d,p):It()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return It()}}class yf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){kg(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return f4(this.inner)}size(){return this.innerSize}}const R7=new gr(lt.comparator);function da(){return R7}const U4=new gr(lt.comparator);function OC(...n){let e=U4;for(const t of n)e=e.insert(t.key,t);return e}function B4(n){let e=U4;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function gd(){return FC()}function j4(){return FC()}function FC(){return new yf(n=>n.toString(),(n,e)=>n.isEqual(e))}const P7=new gr(lt.comparator),M7=new Er(lt.comparator);function un(...n){let e=M7;for(const t of n)e=e.add(t);return e}const N7=new Er(en);function fF(){return N7}function $4(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:AC(e)?"-0":e}}function H4(n){return{integerValue:""+n}}function G4(n,e){return s4(e)?H4(e):$4(n,e)}class JR{constructor(){this._=void 0}}function k7(n,e,t){return n instanceof GE?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&GR(i)&&(i=qR(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof wy?z4(n,e):n instanceof Ty?W4(n,e):function(r,i){const s=q4(r,i),u=K4(s)+K4(r.gt);return iF(s)&&iF(r.gt)?H4(u):$4(r.serializer,u)}(n,e)}function O7(n,e,t){return n instanceof wy?z4(n,e):n instanceof Ty?W4(n,e):t}function q4(n,e){return n instanceof qE?iF(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class GE extends JR{}class wy extends JR{constructor(e){super(),this.elements=e}}function z4(n,e){const t=Z4(e);for(const r of n.elements)t.some(i=>pd(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ty extends JR{constructor(e){super(),this.elements=e}}function W4(n,e){let t=Z4(e);for(const r of n.elements)t=t.filter(i=>!pd(i,r));return{arrayValue:{values:t}}}class qE extends JR{constructor(e,t){super(),this.serializer=e,this.gt=t}}function K4(n){return li(n.integerValue||n.doubleValue)}function Z4(n){return RC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class LC{constructor(e,t){this.field=e,this.transform=t}}class L7{constructor(e,t){this.version=e,this.transformResults=t}}class Br{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Br}static exists(e){return new Br(void 0,e)}static updateTime(e){return new Br(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function e1(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class t1{}function Q4(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new WE(n.key,Br.none()):new zE(n.key,n.data,Br.none());{const t=n.data,r=qs.empty();let i=new Er(ci.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new vf(n.key,r,new la(i.toArray()),Br.none())}}function V7(n,e,t){n instanceof zE?function(r,i,s){const u=r.value.clone(),d=J4(r.fieldTransforms,i,s.transformResults);u.setAll(d),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof vf?function(r,i,s){if(!e1(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=J4(r.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(X4(r)),d.setAll(u),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function VC(n,e,t,r){return n instanceof zE?function(i,s,u,d){if(!e1(i.precondition,s))return u;const p=i.value.clone(),y=e$(i.fieldTransforms,d,s);return p.setAll(y),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof vf?function(i,s,u,d){if(!e1(i.precondition,s))return u;const p=e$(i.fieldTransforms,d,s),y=s.data;return y.setAll(X4(i)),y.setAll(p),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(u=t,e1(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u);var s,u}function U7(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=q4(r.transform,i||null);null!=s&&(null===t&&(t=qs.empty()),t.set(r.field,s))}return t||null}function Y4(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&VE(t,r,(i,s)=>function F7(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof wy&&r instanceof wy||t instanceof Ty&&r instanceof Ty?VE(t.elements,r.elements,pd):t instanceof qE&&r instanceof qE?pd(t.gt,r.gt):t instanceof GE&&r instanceof GE);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class zE extends t1{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vf extends t1{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function X4(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function J4(n,e,t){const r=new Map;kt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,d=e.data.field(s.field);r.set(s.field,O7(u,d,t[i]))}return r}function e$(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,k7(s,u,e))}return r}class WE extends t1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pF extends t1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gF{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&V7(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=VC(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=VC(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=j4();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let d=this.applyToLocalView(u,s.mutatedFields);d=t.has(i.key)?null:d;const p=Q4(u,d);null!==p&&r.set(i.key,p),u.isValidDocument()||u.convertToNoDocument(Ft.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&VE(this.mutations,e.mutations,(t,r)=>Y4(t,r))&&VE(this.baseMutations,e.baseMutations,(t,r)=>Y4(t,r))}}class mF{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){kt(e.mutations.length===r.length);let i=P7;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new mF(e,t,r,i)}}class _F{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class j7{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qi,Dn;function t$(n){switch(n){default:return It();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function n$(n){if(void 0===n)return Mi("GRPC error has no .code"),_e.UNKNOWN;switch(n){case Qi.OK:return _e.OK;case Qi.CANCELLED:return _e.CANCELLED;case Qi.UNKNOWN:return _e.UNKNOWN;case Qi.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Qi.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Qi.INTERNAL:return _e.INTERNAL;case Qi.UNAVAILABLE:return _e.UNAVAILABLE;case Qi.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Qi.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Qi.NOT_FOUND:return _e.NOT_FOUND;case Qi.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Qi.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Qi.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Qi.ABORTED:return _e.ABORTED;case Qi.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Qi.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Qi.DATA_LOSS:return _e.DATA_LOSS;default:return It()}}(Dn=Qi||(Qi={}))[Dn.OK=0]="OK",Dn[Dn.CANCELLED=1]="CANCELLED",Dn[Dn.UNKNOWN=2]="UNKNOWN",Dn[Dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dn[Dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dn[Dn.NOT_FOUND=5]="NOT_FOUND",Dn[Dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dn[Dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dn[Dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dn[Dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dn[Dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dn[Dn.ABORTED=10]="ABORTED",Dn[Dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dn[Dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dn[Dn.INTERNAL=13]="INTERNAL",Dn[Dn.UNAVAILABLE=14]="UNAVAILABLE",Dn[Dn.DATA_LOSS=15]="DATA_LOSS";class yF{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return n1}static getOrCreateInstance(){return null===n1&&(n1=new yF),n1}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let n1=null;function r$(){return new TextEncoder}const $7=new FE([4294967295,4294967295],0);function i$(n){const e=r$().encode(n),t=new Oz;return t.update(e),new Uint8Array(t.digest())}function s$(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new FE([t,r],0),new FE([i,s],0)]}class vF{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new UC(`Invalid padding: ${t}`);if(r<0)throw new UC(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new UC(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new UC(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=FE.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(FE.fromNumber(r)));return 1===i.compare($7)&&(i=new FE([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=i$(e),[r,i]=s$(t);for(let s=0;s<this.hashCount;s++){const u=this.Et(r,i,s);if(!this.At(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),u=new vF(s,i,t);return r.forEach(d=>u.insert(d)),u}insert(e){if(0===this.It)return;const t=i$(e),[r,i]=s$(t);for(let s=0;s<this.hashCount;s++){const u=this.Et(r,i,s);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class UC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class BC{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,jC.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new BC(Ft.min(),i,new gr(en),da(),un())}}class jC{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new jC(r,t,un(),un(),un())}}class r1{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class o${constructor(e,t){this.targetId=e,this.Vt=t}}class a${constructor(e,t,r=ls.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class u${constructor(){this.St=0,this.Dt=l$(),this.Ct=ls.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=un(),t=un(),r=un();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:It()}}),new jC(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=l$()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class H7{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=da(),this.zt=c$(),this.Wt=new gr(en)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:It()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const u=s.target;if(ZR(u))if(0===i){const d=new lt(u.path);this.Yt(r,d,wr.newNoDocument(d,Ft.min()))}else kt(1===i);else{const d=this.ie(r);if(d!==i){const p=this.re(e,d);0!==p&&(this.ee(r),this.Wt=this.Wt.insert(r,2===p?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=yF.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(y,E,D){var P,k,B,Z,z,me;const Ne={localCacheCount:E,existenceFilterCount:D.count},Se=D.unchangedNames;return Se&&(Ne.bloomFilter={applied:0===y,hashCount:null!==(P=Se?.hashCount)&&void 0!==P?P:0,bitmapLength:null!==(Z=null===(B=null===(k=Se?.bits)||void 0===k?void 0:k.bitmap)||void 0===B?void 0:B.length)&&void 0!==Z?Z:0,padding:null!==(me=null===(z=Se?.bits)||void 0===z?void 0:z.padding)&&void 0!==me?me:0}),Ne}(p,d,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:u=0},hashCount:d=0}=r;let p,y;try{p=mf(s).toUint8Array()}catch(E){if(E instanceof g4)return Zu("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw E}try{y=new vF(p,u,d)}catch(E){return Zu(E instanceof UC?"BloomFilter error: ":"Applying bloom filter failed: ",E),1}return 0===y.It?1:i!==t-this.oe(e.targetId,y)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const u=this.Gt.ue(),d=`projects/${u.projectId}/databases/${u.database}/documents/${s.path.canonicalString()}`;t.vt(d)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,u)=>{const d=this.se(u);if(d){if(s.current&&ZR(d.target)){const p=new lt(d.target.path);null!==this.jt.get(p)||this.ae(u,p)||this.Yt(u,p,wr.newNoDocument(p,e))}s.Mt&&(t.set(u,s.Ot()),s.Ft())}});let r=un();this.zt.forEach((s,u)=>{let d=!0;u.forEachWhile(p=>{const y=this.se(p);return!y||"TargetPurposeLimboResolution"===y.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.jt.forEach((s,u)=>u.setReadTime(e));const i=new BC(e,t,this.Wt,this.jt,r);return this.jt=da(),this.zt=c$(),this.Wt=new gr(en),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new u$,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Er(en),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ke("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new u$),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function c$(){return new gr(lt.comparator)}function l$(){return new gr(lt.comparator)}const G7={asc:"ASCENDING",desc:"DESCENDING"},q7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z7={and:"AND",or:"OR"};class W7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function IF(n,e){return n.useProto3Json||DC(e)?e:{value:e}}function KE(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function d$(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function K7(n,e){return KE(n,e.toTimestamp())}function Ni(n){return kt(!!n),Ft.fromTimestamp(function(e){const t=Og(e);return new Ur(t.seconds,t.nanos)}(n))}function EF(n,e){return(t=n,new Cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function h$(n){const e=Cn.fromString(n);return kt(E$(e)),e}function $C(n,e){return EF(n.databaseId,e.path)}function md(n,e){const t=h$(e);if(t.get(1)!==n.databaseId.projectId)throw new je(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new je(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new lt(p$(t))}function wF(n,e){return EF(n.databaseId,e)}function f$(n){const e=h$(n);return 4===e.length?Cn.emptyPath():p$(e)}function HC(n){return new Cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function p$(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function g$(n,e,t){return{name:$C(n,e),fields:t.value.mapValue.fields}}function m$(n,e,t){const r=md(n,e.name),i=Ni(e.updateTime),s=e.createTime?Ni(e.createTime):Ft.min(),u=new qs({mapValue:{fields:e.fields}}),d=wr.newFoundDocument(r,i,s,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function GC(n,e){let t;if(e instanceof zE)t={update:g$(n,e.key,e.value)};else if(e instanceof WE)t={delete:$C(n,e.key)};else if(e instanceof vf)t={update:g$(n,e.key,e.data),updateMask:n5(e.fieldMask)};else{if(!(e instanceof pF))return It();t={verify:$C(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const u=s.transform;if(u instanceof GE)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof wy)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ty)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof qE)return{fieldPath:s.field.canonicalString(),increment:u.gt};throw It()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:K7(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:It()),t;var i}function TF(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Br.updateTime(Ni(i.updateTime)):void 0!==i.exists?Br.exists(i.exists):Br.none():Br.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let d=null;"setToServerValue"in u?(kt("REQUEST_TIME"===u.setToServerValue),d=new GE):"appendMissingElements"in u?d=new wy(u.appendMissingElements.values||[]):"removeAllFromArray"in u?d=new Ty(u.removeAllFromArray.values||[]):"increment"in u?d=new qE(s,u.increment):It();const p=ci.fromServerFormat(u.fieldPath);return new LC(p,d)}(n,i)):[];var i;if(e.update){const i=md(n,e.update.name),s=new qs({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new la((e.updateMask.fieldPaths||[]).map(y=>ci.fromServerFormat(y)));return new vf(i,s,u,t,r)}return new zE(i,s,t,r)}if(e.delete){const i=md(n,e.delete);return new WE(i,t)}if(e.verify){const i=md(n,e.verify);return new pF(i,t)}return It()}function _$(n,e){return{documents:[wF(n,e.path)]}}function bF(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=wF(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wF(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0!==p.length)return I$(Kn.create(p,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:jg((E=y).field),direction:J7(E.dir)};var E})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=IF(n,e.limit);var d,p;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function y$(n){let e=f$(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){kt(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let s=[];t.where&&(s=function(E){const D=v$(E);return D instanceof Kn&&oF(D)?D.getFilters():[D]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(E=>{return new jE(ZE((D=E).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(E){let D;return D="object"==typeof E?E.value:E,DC(D)?null:D}(t.limit));let p=null;var E;t.startAt&&(p=new Bg((E=t.startAt).values||[],!!E.before));let y=null;return t.endAt&&(y=function(E){return new Bg(E.values||[],!E.before)}(t.endAt)),k4(e,i,u,s,d,"F",p,y)}function v$(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ZE(e.unaryFilter.field);return wn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=ZE(e.unaryFilter.field);return wn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ZE(e.unaryFilter.field);return wn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ZE(e.unaryFilter.field);return wn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return It()}}(n):void 0!==n.fieldFilter?wn.create(ZE((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return It()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Kn.create(e.compositeFilter.filters.map(t=>v$(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return It()}}(e.compositeFilter.op))}(n):It();var e}function J7(n){return G7[n]}function e5(n){return q7[n]}function t5(n){return z7[n]}function jg(n){return{fieldPath:n.canonicalString()}}function ZE(n){return ci.fromServerFormat(n.fieldPath)}function I$(n){return n instanceof wn?function(e){if("=="===e.op){if(y4(e.value))return{unaryFilter:{field:jg(e.field),op:"IS_NAN"}};if(_4(e.value))return{unaryFilter:{field:jg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(y4(e.value))return{unaryFilter:{field:jg(e.field),op:"IS_NOT_NAN"}};if(_4(e.value))return{unaryFilter:{field:jg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jg(e.field),op:e5(e.op),value:e.value}}}(n):n instanceof Kn?function(e){const t=e.getFilters().map(r=>I$(r));return 1===t.length?t[0]:{compositeFilter:{op:t5(e.op),filters:t}}}(n):It()}function n5(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function E$(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class If{constructor(e,t,r,i,s=Ft.min(),u=Ft.min(),d=ls.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new If(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new If(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new If(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new If(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class w${constructor(e){this.fe=e}}function T$(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:i1(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:$C(i=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:KE(i,s.version.toTimestamp()),createTime:KE(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:by(e.version)};else{if(!e.isUnknownDocument())return It();r.unknownDocument={path:t.path.toArray(),version:by(e.version)}}var i,s;return r}function i1(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function by(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cy(n){const e=new Ur(n.seconds,n.nanoseconds);return Ft.fromTimestamp(e)}function Dy(n,e){const t=(e.baseMutations||[]).map(s=>TF(n.fe,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>TF(n.fe,s)),i=Ur.fromMillis(e.localWriteTimeMs);return new gF(e.batchId,i,t,r)}function qC(n){const e=Cy(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Cy(n.lastLimboFreeSnapshotVersion):Ft.min();let r;var i;return void 0!==n.query.documents?(kt(1===(i=n.query).documents.length),r=Uo(HE(f$(i.documents[0])))):r=Uo(y$(n.query)),new If(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ls.fromBase64String(n.resumeToken))}function b$(n,e){const t=by(e.snapshotVersion),r=by(e.lastLimboFreeSnapshotVersion);let i;i=ZR(e.target)?_$(n.fe,e.target):bF(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Iy(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function CF(n){const e=y$({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?XR(e,e.limit,"L"):e}function DF(n,e){return new _F(e.largestBatchId,TF(n.fe,e.overlayMutation))}function C$(n,e){const t=e.path.lastSegment();return[n,lo(e.path.popLast()),t]}function D$(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:by(r.readTime),documentKey:lo(r.documentKey.path),largestBatchId:r.largestBatchId}}class i5{getBundleMetadata(e,t){return A$(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Cy(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return A$(e).put({bundleId:(r=t).id,createTime:by(Ni(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return S$(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:CF(i.bundledQuery),readTime:Cy(i.readTime)};var i})}saveNamedQuery(e,t){return S$(e).put({name:(r=t).name,readTime:by(Ni(r.readTime)),bundledQuery:r.bundledQuery});var r}}function A$(n){return As(n,"bundles")}function S$(n){return As(n,"namedQueries")}class s1{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new s1(e,t.uid||"")}getOverlay(e,t){return zC(e).get(C$(this.userId,t)).next(r=>r?DF(this.serializer,r):null)}getOverlays(e,t){const r=gd();return le.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,u)=>{const d=new _F(t,u);i.push(this.we(e,d))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(lo(u.getCollectionPath())));const s=[];return i.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);s.push(zC(e).J("collectionPathOverlayIndex",d))}),le.waitFor(s)}getOverlaysForCollection(e,t,r){const i=gd(),s=lo(t),u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return zC(e).j("collectionPathOverlayIndex",u).next(d=>{for(const p of d){const y=DF(this.serializer,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=gd();let u;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zC(e).X({index:"collectionGroupOverlayIndex",range:d},(p,y,E)=>{const D=DF(this.serializer,y);s.size()<i||D.largestBatchId===u?(s.set(D.getKey(),D),u=D.largestBatchId):E.done()}).next(()=>s)}we(e,t){return zC(e).put(function(r,i,s){const[u,d,p]=C$(i,s.mutation.key);return{userId:i,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:GC(r.fe,s.mutation)}}(this.serializer,this.userId,t))}}function zC(n){return As(n,"documentOverlays")}class Ay{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(li(e.integerValue));else if("doubleValue"in e){const r=li(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),AC(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(mf(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?v4(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):It()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),lt.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function s5(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function x$(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=s5(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Ay.Ve=new Ay;class o5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=x$(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=x$(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class a5{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class u5{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class WC{constructor(){this.je=new o5,this.ze=new a5(this.je),this.We=new u5(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Sy{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Sy(this.indexId,this.documentKey,this.arrayValue,r)}}function $g(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=R$(n.arrayValue,e.arrayValue),0!==t?t:(t=R$(n.directionalValue,e.directionalValue),0!==t?t:lt.comparator(n.documentKey,e.documentKey)))}function R$(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class c5{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){kt(e.collectionGroup===this.collectionId);const t=XO(e);if(void 0!==t&&!this.en(t))return!1;const r=_y(e);let i=new Set,s=0,u=0;for(;s<r.length&&this.en(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const d=r[s];if(!this.nn(this.Ze,d)||!this.sn(this.Ye[u++],d))return!1}++s}for(;s<r.length;++s)if(u>=this.Ye.length||!this.sn(this.Ye[u++],r[s]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function P$(n){var e,t;if(kt(n instanceof wn||n instanceof Kn),n instanceof wn){if(n instanceof P4){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>wn.create(n.field,"==",s)))||[];return Kn.create(i,"or")}return n}const r=n.filters.map(i=>P$(i));return Kn.create(r,n.op)}function l5(n){if(0===n.getFilters().length)return[];const e=xF(P$(n));return kt(M$(e)),AF(e)||SF(e)?[e]:e.getFilters()}function AF(n){return n instanceof wn}function SF(n){return n instanceof Kn&&oF(n)}function M$(n){return AF(n)||SF(n)||function(e){if(e instanceof Kn&&sF(e)){for(const t of e.getFilters())if(!AF(t)&&!SF(t))return!1;return!0}return!1}(n)}function xF(n){if(kt(n instanceof wn||n instanceof Kn),n instanceof wn)return n;if(1===n.filters.length)return xF(n.filters[0]);const e=n.filters.map(r=>xF(r));let t=Kn.create(e,n.op);return t=o1(t),M$(t)?t:(kt(t instanceof Kn),kt($E(t)),kt(t.filters.length>1),t.filters.reduce((r,i)=>RF(r,i)))}function RF(n,e){let t;return kt(n instanceof wn||n instanceof Kn),kt(e instanceof wn||e instanceof Kn),t=n instanceof wn?e instanceof wn?Kn.create([n,e],"and"):N$(n,e):e instanceof wn?N$(e,n):function(r,i){if(kt(r.filters.length>0&&i.filters.length>0),$E(r)&&$E(i))return S4(r,i.getFilters());const s=sF(r)?r:i,u=sF(r)?i:r,d=s.filters.map(p=>RF(p,u));return Kn.create(d,"or")}(n,e),o1(t)}function N$(n,e){if($E(e))return S4(e,n.getFilters());{const t=e.filters.map(r=>RF(n,r));return Kn.create(t,"or")}}function o1(n){if(kt(n instanceof wn||n instanceof Kn),n instanceof wn)return n;const e=n.getFilters();if(1===e.length)return o1(e[0]);if(D4(n))return n;const t=e.map(i=>o1(i)),r=[];return t.forEach(i=>{i instanceof wn?r.push(i):i instanceof Kn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Kn.create(r,n.op)}class d5{constructor(){this.rn=new PF}addToCollectionParentIndex(e,t){return this.rn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Ja.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Ja.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class PF{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Er(Cn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Er(Cn.comparator)).toArray()}}const a1=new Uint8Array(0);class h5{constructor(e,t){this.user=e,this.databaseId=t,this.on=new PF,this.un=new yf(r=>Iy(r),(r,i)=>MC(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:r,parent:lo(i)};return k$(e).put(s)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Jj(t),""],!1,!0);return k$(e).j(i).next(s=>{for(const u of s){if(u.collectionId!==t)break;r.push(fd(u.parent))}return r})}addFieldIndex(e,t){const r=u1(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;delete i.indexId;const s=r.add(i);if(t.indexState){const u=ZC(e);return s.next(d=>{u.put(D$(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=u1(e),i=ZC(e),s=KC(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=KC(e);let i=!0;const s=new Map;return le.forEach(this.cn(t),u=>this.an(e,u).next(d=>{i&&(i=!!d),s.set(u,d)})).next(()=>{if(i){let u=un();const d=[];return le.forEach(s,(p,y)=>{var E;Ke("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(Se=>`${Se.fieldPath}:${Se.kind}`).join(",")}`} to execute ${Iy(t)}`);const D=function(Se,ke){const at=XO(ke);if(void 0===at)return null;for(const pt of QR(Se,at.fieldPath))switch(pt.op){case"array-contains-any":return pt.value.arrayValue.values||[];case"array-contains":return[pt.value]}return null}(y,p),P=function(Se,ke){const at=new Map;for(const pt of _y(ke))for(const nn of QR(Se,pt.fieldPath))switch(nn.op){case"==":case"in":at.set(pt.fieldPath.canonicalString(),nn.value);break;case"not-in":case"!=":return at.set(pt.fieldPath.canonicalString(),nn.value),Array.from(at.values())}return null}(y,p),k=function(Se,ke){const at=[];let pt=!0;for(const nn of _y(ke)){const Cr=0===nn.kind?M4(Se,nn.fieldPath,Se.startAt):N4(Se,nn.fieldPath,Se.startAt);at.push(Cr.value),pt&&(pt=Cr.inclusive)}return new Bg(at,pt)}(y,p),B=function(Se,ke){const at=[];let pt=!0;for(const nn of _y(ke)){const Cr=0===nn.kind?N4(Se,nn.fieldPath,Se.endAt):M4(Se,nn.fieldPath,Se.endAt);at.push(Cr.value),pt&&(pt=Cr.inclusive)}return new Bg(at,pt)}(y,p),Z=this.hn(p,y,k),z=this.hn(p,y,B),me=this.ln(p,y,P),Ne=this.fn(p.indexId,D,Z,k.inclusive,z,B.inclusive,me);return le.forEach(Ne,Se=>r.H(Se,t.limit).next(ke=>{ke.forEach(at=>{const pt=lt.fromSegments(at.documentKey);u.has(pt)||(u=u.add(pt),d.push(pt))})}))}).next(()=>d)}return le.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:l5(Kn.create(e.filters,"and")).map(r=>uF(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,s,u,d){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),y=p/(null!=t?t.length:1),E=[];for(let D=0;D<p;++D){const P=t?this.dn(t[D/y]):a1,k=this.wn(e,P,r[D%y],i),B=this._n(e,P,s[D%y],u),Z=d.map(z=>this.wn(e,P,z,!0));E.push(...this.createRange(k,B,Z))}return E}wn(e,t,r,i){const s=new Sy(e,lt.empty(),t,r);return i?s:s.Je()}_n(e,t,r,i){const s=new Sy(e,lt.empty(),t,r);return i?s.Je():s}an(e,t){const r=new c5(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let u=null;for(const d of s)r.tn(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u})}getIndexType(e,t){let r=2;const i=this.cn(t);return le.forEach(i,s=>this.an(e,s).next(u=>{u?0!==r&&u.fields.length<function(d){let p=new Er(ci.comparator),y=!1;for(const E of d.filters)for(const D of E.getFlattenedFilters())D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?y=!0:p=p.add(D.field));for(const E of d.orderBy)E.field.isKeyField()||(p=p.add(E.field));return p.size+(y?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new WC;for(const i of _y(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const u=r.He(i.kind);Ay.Ve._e(s,u)}return r.Qe()}dn(e){const t=new WC;return Ay.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new WC;return Ay.Ve._e(vy(this.databaseId,t),r.He(function(i){const s=_y(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new WC);let s=0;for(const u of _y(e)){const d=r[s++];for(const p of i)if(this.yn(t,u.fieldPath)&&RC(d))i=this.pn(i,u,d);else{const y=p.He(u.kind);Ay.Ve._e(d,y)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],s=[];for(const u of r.arrayValue.values||[])for(const d of i){const p=new WC;p.seed(d.Qe()),Ay.Ve._e(u,p.He(t.kind)),s.push(p)}return s}yn(e,t){return!!e.filters.find(r=>r instanceof wn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=u1(e),i=ZC(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(s=>{const u=[];return le.forEach(s,d=>i.get([d.indexId,this.uid]).next(p=>{u.push(function(y,E){const D=E?new bC(E.sequenceNumber,new Ja(Cy(E.readTime),new lt(fd(E.documentKey)),E.largestBatchId)):bC.empty(),P=y.fields.map(([k,B])=>new BR(ci.fromServerFormat(k),B));return new UR(y.indexId,y.collectionGroup,P,D)}(d,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:en(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=u1(e),s=ZC(e);return this.Tn(e).next(u=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>le.forEach(d,p=>s.put(D$(p.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,s)=>{const u=r.get(i.collectionGroup);return(u?le.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),le.forEach(d,p=>this.En(e,i,p).next(y=>{const E=this.An(s,p);return y.isEqual(E)?le.resolve():this.vn(e,s,p,y,E)}))))})}Rn(e,t,r,i){return KC(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return KC(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=KC(e);let s=new Er($g);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(u,d)=>{s=s.add(new Sy(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}An(e,t){let r=new Er($g);const i=this.mn(t,e);if(null==i)return r;const s=XO(t);if(null!=s){const u=e.data.field(s.fieldPath);if(RC(u))for(const d of u.arrayValue.values||[])r=r.add(new Sy(t.indexId,e.key,this.dn(d),i))}else r=r.add(new Sy(t.indexId,e.key,a1,i));return r}vn(e,t,r,i,s){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,p,y,E,D){const P=d.getIterator(),k=p.getIterator();let B=UE(P),Z=UE(k);for(;B||Z;){let z=!1,me=!1;if(B&&Z){const Ne=y(B,Z);Ne<0?me=!0:Ne>0&&(z=!0)}else null!=B?me=!0:z=!0;z?(E(Z),Z=UE(k)):me?(D(B),B=UE(P)):(B=UE(P),Z=UE(k))}}(i,s,$g,d=>{u.push(this.Rn(e,t,r,d))},d=>{u.push(this.Pn(e,t,r,d))}),le.waitFor(u)}Tn(e){let t=1;return ZC(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,d)=>$g(u,d)).filter((u,d,p)=>!d||0!==$g(u,p[d-1]));const i=[];i.push(e);for(const u of r){const d=$g(u,e),p=$g(u,t);if(0===d)i[0]=e.Je();else if(d>0&&p<0)i.push(u),i.push(u.Je());else if(p>0)break}i.push(t);const s=[];for(let u=0;u<i.length;u+=2){if(this.bn(i[u],i[u+1]))return[];s.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,a1,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,a1,[]]))}return s}bn(e,t){return $g(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(O$)}getMinOffset(e,t){return le.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||It())).next(O$)}}function k$(n){return As(n,"collectionParents")}function KC(n){return As(n,"indexEntries")}function u1(n){return As(n,"indexConfiguration")}function ZC(n){return As(n,"indexState")}function O$(n){kt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;JO(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ja(e.readTime,e.documentKey,t)}const F$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ho{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ho(e,ho.DEFAULT_COLLECTION_PERCENTILE,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function L$(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],u=IDBKeyRange.only(t.batchId);let d=0;const p=r.X({range:u},(E,D,P)=>(d++,P.delete()));s.push(p.next(()=>{kt(1===d)}));const y=[];for(const E of t.mutations){const D=u4(e,E.key.path,t.batchId);s.push(i.delete(D)),y.push(E.key)}return le.waitFor(s).next(()=>y)}function c1(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw It();e=n.noDocument}return JSON.stringify(e).length}ho.DEFAULT_COLLECTION_PERCENTILE=10,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ho.DEFAULT=new ho(41943040,ho.DEFAULT_COLLECTION_PERCENTILE,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ho.DISABLED=new ho(-1,0,0);class l1{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){kt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new l1(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hg(e).X({index:"userMutationsIndex",range:r},(i,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=QE(e),u=Hg(e);return u.add({}).next(d=>{kt("number"==typeof d);const p=new gF(d,t,r,i),y=function(P,k,B){const Z=B.baseMutations.map(me=>GC(P.fe,me)),z=B.mutations.map(me=>GC(P.fe,me));return{userId:k,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:Z,mutations:z}}(this.serializer,this.userId,p),E=[];let D=new Er((P,k)=>en(P.canonicalString(),k.canonicalString()));for(const P of i){const k=u4(this.userId,P.key.path,d);D=D.add(P.key.path.popLast()),E.push(u.put(y)),E.push(s.put(k,Jz))}return D.forEach(P=>{E.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.Vn[d]=p.keys()}),le.waitFor(E).next(()=>p)})}lookupMutationBatch(e,t){return Hg(e).get(t).next(r=>r?(kt(r.userId===this.userId),Dy(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?le.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Hg(e).X({index:"userMutationsIndex",range:i},(u,d,p)=>{d.userId===this.userId&&(kt(d.batchId>=r),s=Dy(this.serializer,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Hg(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,s,u)=>{r=s.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hg(e).j("userMutationsIndex",t).next(r=>r.map(i=>Dy(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=$R(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return QE(e).X({range:i},(u,d,p)=>{const[y,E,D]=u,P=fd(E);if(y===this.userId&&t.path.isEqual(P))return Hg(e).get(D).next(k=>{if(!k)throw It();kt(k.userId===this.userId),s.push(Dy(this.serializer,k))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Er(en);const i=[];return t.forEach(s=>{const u=$R(this.userId,s.path),d=IDBKeyRange.lowerBound(u),p=QE(e).X({range:d},(y,E,D)=>{const[P,k,B]=y,Z=fd(k);P===this.userId&&s.path.isEqual(Z)?r=r.add(B):D.done()});i.push(p)}),le.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=$R(this.userId,r),u=IDBKeyRange.lowerBound(s);let d=new Er(en);return QE(e).X({range:u},(p,y,E)=>{const[D,P,k]=p,B=fd(P);D===this.userId&&r.isPrefixOf(B)?B.length===i&&(d=d.add(k)):E.done()}).next(()=>this.Dn(e,d))}Dn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Hg(e).get(s).next(u=>{if(null===u)throw It();kt(u.userId===this.userId),r.push(Dy(this.serializer,u))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return L$(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return QE(e).X({range:r},(s,u,d)=>{if(s[0]===this.userId){const p=fd(s[1]);i.push(p)}else d.done()}).next(()=>{kt(0===i.length)})})}containsKey(e,t){return V$(e,this.userId,t)}xn(e){return U$(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function V$(n,e,t){const r=$R(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let u=!1;return QE(n).X({range:s,Y:!0},(d,p,y)=>{const[E,D,P]=d;E===e&&D===i&&(u=!0),y.done()}).next(()=>u)}function Hg(n){return As(n,"mutations")}function QE(n){return As(n,"documentMutations")}function U$(n){return As(n,"mutationQueues")}class xy{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new xy(0)}static Mn(){return new xy(-1)}}class f5{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new xy(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Ft.fromTimestamp(new Ur(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>YE(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(kt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return YE(e).X((u,d)=>{const p=qC(d);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>le.waitFor(s)).next(()=>i)}forEachTarget(e,t){return YE(e).X((r,i)=>{const s=qC(i);t(s)})}$n(e){return B$(e).get("targetGlobalKey").next(t=>(kt(null!==t),t))}On(e,t){return B$(e).put("targetGlobalKey",t)}Fn(e,t){return YE(e).put(b$(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Iy(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return YE(e).X({range:i,index:"queryTargetsIndex"},(u,d,p)=>{const y=qC(d);MC(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Gg(e);return t.forEach(u=>{const d=lo(u.path);i.push(s.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,u))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=Gg(e);return le.forEach(t,s=>{const u=lo(s.path);return le.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Gg(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Gg(e);let s=un();return i.X({range:r,Y:!0},(u,d,p)=>{const y=fd(u[1]),E=new lt(y);s=s.add(E)}).next(()=>s)}containsKey(e,t){const r=lo(t.path),i=IDBKeyRange.bound([r],[Jj(r)],!1,!0);let s=0;return Gg(e).X({index:"documentTargetsIndex",Y:!0,range:i},([u,d],p,y)=>{0!==u&&(s++,y.done())}).next(()=>s>0)}le(e,t){return YE(e).get(t).next(r=>r?qC(r):null)}}function YE(n){return As(n,"targets")}function B$(n){return As(n,"targetGlobal")}function Gg(n){return As(n,"targetDocuments")}function j$([n,e],[t,r]){const i=en(n,t);return 0===i?en(e,r):i}class p5{constructor(e){this.Ln=e,this.buffer=new Er(j$),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();j$(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $${constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ie.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ng(r)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Mg(r)}yield t.Qn(3e5)}))}}class g5{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(eu.ct);const r=new p5(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(F$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),F$):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,s,u,d,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,u=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(y=Date.now(),QO()<=rs.in.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-E}ms\n\tDetermined least recently used ${i} in `+(d-u)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${D} documents in `+(y-p)+`ms\nTotal Duration: ${y-E}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:D})))}}class m5{constructor(e,t){this.db=e,this.garbageCollector=function H$(n,e){return new g5(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return d1(e,r)}removeReference(e,t,r){return d1(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return d1(e,t)}Xn(e,t){return function(r,i){let s=!1;return U$(r).Z(u=>V$(r,u,i).next(d=>(d&&(s=!0),le.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(u,d)=>{if(d<=t){const p=this.Xn(e,u).next(y=>{if(!y)return s++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Ft.min()),Gg(e).delete([0,lo(u.path)])))});i.push(p)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return d1(e,t)}Yn(e,t){const r=Gg(e);let i,s=eu.ct;return r.X({index:"documentTargetsIndex"},([u,d],{path:p,sequenceNumber:y})=>{0===u?(s!==eu.ct&&t(new lt(fd(i)),s),s=y,i=p):s=eu.ct}).next(()=>{s!==eu.ct&&t(new lt(fd(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function d1(n,e){return Gg(n).put((r=n.currentSequenceNumber,{targetId:0,path:lo(e.path),sequenceNumber:r}));var r}class G${constructor(){this.changes=new yf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _5{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ry(e).put(r)}removeEntry(e,t,r){return Ry(e).delete(function(i,s){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],i1(s),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=wr.newInvalidDocument(t);return Ry(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(QC(t))},(i,s)=>{r=this.ts(t,s)}).next(()=>r)}es(e,t){let r={size:0,document:wr.newInvalidDocument(t)};return Ry(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(QC(t))},(i,s)=>{r={document:this.ts(t,s),size:c1(s)}}).next(()=>r)}getEntries(e,t){let r=da();return this.ns(e,t,(i,s)=>{const u=this.ts(i,s);r=r.insert(i,u)}).next(()=>r)}ss(e,t){let r=da(),i=new gr(lt.comparator);return this.ns(e,t,(s,u)=>{const d=this.ts(s,u);r=r.insert(s,d),i=i.insert(s,c1(u))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return le.resolve();let i=new Er(K$);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(QC(i.first()),QC(i.last())),u=i.getIterator();let d=u.getNext();return Ry(e).X({index:"documentKeyIndex",range:s},(p,y,E)=>{const D=lt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&K$(d,D)<0;)r(d,null),d=u.getNext();d&&d.isEqual(D)&&(r(d,y),d=u.hasNext()?u.getNext():null),d?E.G(QC(d)):E.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const s=t.path,u=[s.popLast().toArray(),s.lastSegment(),i1(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ry(e).j(IDBKeyRange.bound(u,d,!0)).next(p=>{let y=da();for(const E of p){const D=this.ts(lt.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);D.isFoundDocument()&&(kC(t,D)||i.has(D.key))&&(y=y.insert(D.key,D))}return y})}getAllFromCollectionGroup(e,t,r,i){let s=da();const u=W$(t,r),d=W$(t,Ja.max());return Ry(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,d,!0)},(p,y,E)=>{const D=this.ts(lt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(D.key,D),s.size===i&&E.done()}).next(()=>s)}newChangeBuffer(e){return new y5(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return z$(e).get("remoteDocumentGlobalKey").next(t=>(kt(!!t),t))}Zn(e,t){return z$(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function r5(n,e){let t;if(e.document)t=m$(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=lt.fromSegments(e.noDocument.path),i=Cy(e.noDocument.readTime);t=wr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return It();{const r=lt.fromSegments(e.unknownDocument.path),i=Cy(e.unknownDocument.version);t=wr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ur(r[0],r[1]);return Ft.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ft.min()))return r}return wr.newInvalidDocument(e)}}function q$(n){return new _5(n)}class y5 extends G${constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new yf(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Er((s,u)=>en(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const d=this.us.get(s);if(t.push(this.os.removeEntry(e,s,d.readTime)),u.isValidDocument()){const p=T$(this.os.serializer,u);i=i.add(s.path.popLast());const y=c1(p);r+=y-d.size,t.push(this.os.addEntry(e,s,p))}else if(r-=d.size,this.trackRemovals){const p=T$(this.os.serializer,u.convertToNoDocument(Ft.min()));t.push(this.os.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((s,u)=>{this.us.set(s,{size:u,readTime:r.get(s).readTime})}),r))}}function z$(n){return As(n,"remoteDocumentGlobal")}function Ry(n){return As(n,"remoteDocumentsV14")}function QC(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function W$(n,e){const t=e.documentKey.path.toArray();return[n,i1(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function K$(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=en(t[s],r[s]),i)return i;return i=en(t.length,r.length),i||(i=en(t[t.length-2],r[r.length-2]),i||en(t[t.length-1],r[r.length-1]))}class v5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Z${constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&VC(r.mutation,i,la.empty(),Ur.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,un()).next(()=>r))}getLocalViewOfDocuments(e,t,r=un()){const i=gd();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=OC();return s.forEach((d,p)=>{u=u.insert(d,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=gd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,un()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,i){let s=da();const u=FC(),d=FC();return t.forEach((p,y)=>{const E=r.get(y.key);i.has(y.key)&&(void 0===E||E.mutation instanceof vf)?s=s.insert(y.key,y):void 0!==E?(u.set(y.key,E.mutation.getFieldMask()),VC(E.mutation,y,E.mutation.getFieldMask(),Ur.now())):u.set(y.key,la.empty())}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((y,E)=>u.set(y,E)),t.forEach((y,E)=>{var D;return d.set(y,new v5(E,null!==(D=u.get(y))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(e,t){const r=FC();let i=new gr((u,d)=>u-d),s=un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let E=r.get(p)||la.empty();E=d.applyToLocalView(y,E),r.set(p,E);const D=(i.get(d.batchId)||un()).add(p);i=i.insert(d.batchId,D)})}).next(()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,E=p.value,D=j4();E.forEach(P=>{if(!s.has(P)){const k=Q4(t.get(P),r.get(P));null!==k&&D.set(P,k),s=s.add(P)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,D))}return le.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return lt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):lF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):le.resolve(gd());let d=-1,p=s;return u.next(y=>le.forEach(y,(E,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),s.get(E)?le.resolve():this.remoteDocumentCache.getEntry(e,E).next(P=>{p=p.insert(E,P)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,p,y,un())).next(E=>({batchId:d,changes:B4(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new lt(t)).next(r=>{let i=OC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=OC();return this.indexManager.getCollectionParents(e,i).next(u=>le.forEach(u,d=>{const p=(y=t,E=d.child(i),new _f(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(y=>{y.forEach((E,D)=>{s=s.insert(E,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((d,p)=>{const y=p.getKey();null===s.get(y)&&(s=s.insert(y,wr.newInvalidDocument(y)))});let u=OC();return s.forEach((d,p)=>{const y=i.get(d);void 0!==y&&VC(y.mutation,p,la.empty(),Ur.now()),kC(t,p)&&(u=u.insert(d,p))}),u})}}class I5{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return le.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Ni(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:CF(r.bundledQuery),readTime:Ni(r.readTime)}),le.resolve();var r}}class E5{constructor(){this.overlays=new gr(lt.comparator),this.ls=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=gd();return le.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=gd(),s=t.length+1,u=new lt(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new gr((y,E)=>y-E);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let E=s.get(y.largestBatchId);null===E&&(E=gd(),s=s.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const d=gd(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>d.set(y,E)),!(d.size()>=i)););return le.resolve(d)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new _F(t,r));let s=this.ls.get(t);void 0===s&&(s=un(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class MF{constructor(){this.fs=new Er(Ss.ds),this.ws=new Er(Ss._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ss(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ss(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new lt(new Cn([])),r=new Ss(t,e),i=new Ss(t,e+1),s=[];return this.ws.forEachInRange([r,i],u=>{this.ys(u),s.push(u.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new lt(new Cn([])),r=new Ss(t,e),i=new Ss(t,e+1);let s=un();return this.ws.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new Ss(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ss{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return lt.comparator(e.key,t.key)||en(e.As,t.As)}static _s(e,t){return en(e.As,t.As)||lt.comparator(e.key,t.key)}}class w5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Er(Ss.ds)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const u=new gF(s,t,r,i);this.mutationQueue.push(u);for(const d of i)this.Rs=this.Rs.add(new Ss(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return le.resolve(u)}lookupMutationBatch(e,t){return le.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ss(t,0),i=new Ss(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],u=>{const d=this.Ps(u.As);s.push(d)}),le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Er(en);return t.forEach(i=>{const s=new Ss(i,0),u=new Ss(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,u],d=>{r=r.add(d.As)})}),le.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;lt.isDocumentKey(s)||(s=s.child(""));const u=new Ss(new lt(s),0);let d=new Er(en);return this.Rs.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(p.As)),!0)},u),le.resolve(this.Vs(d))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){kt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return le.forEach(t.mutations,i=>{const s=new Ss(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ss(t,0),i=this.Rs.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class T5{constructor(e){this.Ds=e,this.docs=new gr(lt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():wr.newInvalidDocument(t))}getEntries(e,t){let r=da();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wr.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=da();const u=t.path,d=new lt(u.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||JO(t4(E),r)<=0||(i.has(E.key)||kC(t,E))&&(s=s.insert(E.key,E.mutableCopy()))}return le.resolve(s)}getAllFromCollectionGroup(e,t,r,i){It()}Cs(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new b5(this)}getSize(e){return le.resolve(this.size)}}class b5 extends G${constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class C5{constructor(e){this.persistence=e,this.xs=new yf(t=>Iy(t),MC),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.Ns=0,this.ks=new MF,this.targetCount=0,this.Ms=xy.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),le.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new xy(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Fn(t),le.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.xs.delete(u),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),le.waitFor(s).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),le.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.ks.containsKey(t))}}class NF{constructor(e,t){this.$s={},this.overlays={},this.Os=new eu(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new C5(this),this.indexManager=new d5,this.remoteDocumentCache=new T5(r=>this.referenceDelegate.Ls(r)),this.serializer=new w$(t),this.qs=new I5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new E5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new w5(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ke("MemoryPersistence","Starting transaction:",e);const i=new D5(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return le.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class D5 extends r4{constructor(e){super(),this.currentSequenceNumber=e}}class h1{constructor(e){this.persistence=e,this.Qs=new MF,this.js=null}static zs(e){return new h1(e)}get Ws(){if(this.js)return this.js;throw It()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),le.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ws,r=>{const i=lt.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,Ft.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return le.or([()=>le.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class A5{constructor(e){this.serializer=e}O(e,t,r,i){const s=new jR("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",a4,{unique:!0}),d.createObjectStore("documentMutations"),Q$(e),function(d){d.createObjectStore("remoteDocuments")}(e));let u=le.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),Q$(e)),u=u.next(()=>function(d){const p=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ft.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(d,p){return p.store("mutations").j().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",a4,{unique:!0});const E=p.store("mutations"),D=y.map(P=>E.put(P));return le.waitFor(D)})}(e,s))),u=u.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Ys(s))),r<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),r<7&&i>=7&&(u=u.next(()=>this.Zs(s))),r<8&&i>=8&&(u=u.next(()=>this.ti(e,s))),r<9&&i>=9&&(u=u.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.ei(s))),r<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:d7});p.createIndex("collectionPathOverlayIndex",h7,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",f7,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:e7});p.createIndex("documentKeyIndex",t7),p.createIndex("collectionGroupIndex",n7)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.si(e,s))),r<15&&i>=15&&(u=u.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:a7}).createIndex("sequenceNumberIndex",u7,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:c7}).createIndex("documentKeyIndex",l7,{unique:!1})}(e))),u}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=c1(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>le.forEach(i,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",u).next(d=>le.forEach(d,p=>{kt(p.userId===s.userId);const y=Dy(this.serializer,p);return L$(e,s.userId,y).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((u,d)=>{const p=new Cn(u),y=[0,lo(p)];s.push(t.get(y).next(E=>E?le.resolve():t.put({targetId:0,path:lo(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:o7});const r=t.store("collectionParents"),i=new PF,s=u=>{if(i.add(u)){const d=u.lastSegment(),p=u.popLast();return r.put({collectionId:d,parent:lo(p)})}};return t.store("remoteDocuments").X({Y:!0},(u,d)=>{const p=new Cn(u);return s(p.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([u,d,p],y)=>{const E=fd(d);return s(E.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const s=qC(i),u=b$(this.serializer,s);return t.put(u)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((s,u)=>{const d=t.store("remoteDocumentsV14"),p=(y=u,y.document?new lt(Cn.fromString(y.document.name).popFirst(5)):y.noDocument?lt.fromSegments(y.noDocument.path):y.unknownDocument?lt.fromSegments(y.unknownDocument.path):It()).path.toArray();var y;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(d.put(E))}).next(()=>le.waitFor(i))}si(e,t){const r=t.store("mutations"),i=q$(this.serializer),s=new NF(h1.zs,this.serializer.fe);return r.j().next(u=>{const d=new Map;return u.forEach(p=>{var y;let E=null!==(y=d.get(p.userId))&&void 0!==y?y:un();Dy(this.serializer,p).keys().forEach(D=>E=E.add(D)),d.set(p.userId,E)}),le.forEach(d,(p,y)=>{const E=new Ds(y),D=s1.de(this.serializer,E),P=s.getIndexManager(E),k=l1.de(E,this.serializer,P,s.referenceDelegate);return new Z$(i,k,D,P).recalculateAndSaveOverlaysForDocumentKeys(new nF(t,eu.ct),p).next()})})}}function Q$(n){n.createObjectStore("targetDocuments",{keyPath:i7}).createIndex("documentTargetsIndex",s7,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",r7,{unique:!0}),n.createObjectStore("targetGlobal")}const kF="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class OF{constructor(e,t,r,i,s,u,d,p,y,E,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=s,this.window=u,this.document=d,this.ri=y,this.oi=E,this.ui=D,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=P=>Promise.resolve(),!OF.D())throw new je(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new m5(this,i),this.di=t+"main",this.serializer=new w$(p),this.wi=new $c(this.di,this.ui,new A5(this.serializer)),this.Bs=new f5(this.referenceDelegate,this.serializer),this.remoteDocumentCache=q$(this.serializer),this.qs=new i5,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===E&&Mi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new je(_e.FAILED_PRECONDITION,kF);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new eu(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ie.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ie.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>p1(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Ng(e))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return YC(e).get("owner").next(t=>le.resolve(this.Ri(t)))}Pi(e){return p1(e).delete(this.clientId)}bi(){var e=this;return(0,ie.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=As(r,"clientMetadata");return i.j().next(s=>{const u=e.Si(s,18e5),d=s.filter(p=>-1===u.indexOf(p));return le.forEach(d,p=>i.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?le.resolve(!0):YC(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new je(_e.FAILED_PRECONDITION,kF);return!1}}return!(!this.networkEnabled||!this.inForeground)||p1(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ie.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new nF(t,eu.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>p1(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return l1.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new h5(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return s1.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(u=this.ui)?g7:14===u?d4:13===u?l4:12===u?p7:11===u?c4:void It();var u;let d;return this.wi.runTransaction(e,i,s,p=>(d=new nF(p,this.Os?this.Os.next():eu.ct),"readwrite-primary"===t?this.Ti(d).next(y=>!!y||this.Ei(d)).next(y=>{if(!y)throw Mi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new je(_e.FAILED_PRECONDITION,n4);return r(d)}).next(y=>this.vi(d).next(()=>y)):this.Oi(d).next(()=>r(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Oi(e){return YC(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new je(_e.FAILED_PRECONDITION,kF)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return YC(e).put("owner",t)}static D(){return $c.D()}Ai(e){const t=YC(e);return t.get("owner").next(r=>this.Ri(r)?(Ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Mi(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,on.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Mi("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function YC(n){return As(n,"owner")}function p1(n){return As(n,"clientMetadata")}function FF(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class LF{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=un(),i=un();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new LF(e,t.fromCache,r,i)}}class Y${constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(O4(t))return le.resolve(null);let r=Uo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=XR(t,null,"F"),r=Uo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=un(...s);return this.Ui.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.ji(t,d);return this.zi(t,y,u,p.readTime)?this.Ki(e,XR(t,null,"F")):this.Wi(e,y,t,p)}))})))}Gi(e,t,r,i){return O4(t)||i.isEqual(Ft.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const u=this.ji(t,s);return this.zi(t,u,r,i)?this.Qi(e,t):(QO()<=rs.in.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hF(t)),this.Wi(e,u,t,e4(i,-1)))})}ji(e,t){let r=new Er(V4(e));return t.forEach((i,s)=>{kC(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return QO()<=rs.in.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",hF(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ja.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class S5{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new gr(en),this.Yi=new yf(s=>Iy(s),MC),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z$(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function X$(n,e,t,r){return new S5(n,e,t,r)}function J$(n,e){return VF.apply(this,arguments)}function VF(){return VF=(0,ie.Z)(function*(n,e){const t=ft(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const u=[],d=[];let p=un();for(const y of i){u.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of s){d.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(r,p).next(y=>({er:y,removedBatchIds:u,addedBatchIds:d}))})})}),VF.apply(this,arguments)}function e3(n){const e=ft(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function t3(n,e,t){let r=un(),i=un();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=da();return t.forEach((d,p)=>{const y=s.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(Ft.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):Ke("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{nr:u,sr:i}})}function P5(n,e){const t=ft(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XE(n,e){const t=ft(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,le.resolve(i)):t.Bs.allocateTargetId(r).next(u=>(i=new If(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function JE(n,e,t){return UF.apply(this,arguments)}function UF(){return UF=(0,ie.Z)(function*(n,e,t){const r=ft(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Ng(u))throw u;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),UF.apply(this,arguments)}function g1(n,e,t){const r=ft(n);let i=Ft.min(),s=un();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,p,y){const E=ft(d),D=E.Yi.get(y);return void 0!==D?le.resolve(E.Ji.get(D)):E.Bs.getTargetData(p,y)}(r,u,Uo(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(u,d.targetId).next(p=>{s=p})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:Ft.min(),t?s:un())).next(d=>(i3(r,L4(e),d),{documents:d,ir:s})))}function n3(n,e){const t=ft(n),r=ft(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.le(s,e).next(u=>u?u.target:null))}function r3(n,e){const t=ft(n),r=t.Xi.get(e)||Ft.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,e4(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(i3(t,e,i),i))}function i3(n,e,t){let r=n.Xi.get(e)||Ft.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}function BF(){return BF=(0,ie.Z)(function*(n,e,t,r){const i=ft(n);let s=un(),u=da();for(const y of t){const E=e.rr(y.metadata.name);y.document&&(s=s.add(E));const D=e.ur(y);D.setReadTime(e.cr(y.metadata.readTime)),u=u.insert(E,D)}const d=i.Zi.newChangeBuffer({trackRemovals:!0}),p=yield XE(i,(y=r,Uo(HE(Cn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>t3(y,d,u).next(E=>(d.apply(y),E)).next(E=>i.Bs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.Bs.addMatchingKeys(y,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,E.nr,E.sr)).next(()=>E.nr)))}),BF.apply(this,arguments)}function N5(n,e){return jF.apply(this,arguments)}function jF(){return jF=(0,ie.Z)(function*(n,e,t=un()){const r=yield XE(n,Uo(CF(e.bundledQuery))),i=ft(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const u=Ni(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.qs.saveNamedQuery(s,e);const d=r.withResumeToken(ls.EMPTY_BYTE_STRING,u);return i.Ji=i.Ji.insert(d.targetId,d),i.Bs.updateTargetData(s,d).next(()=>i.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Bs.addMatchingKeys(s,t,r.targetId)).next(()=>i.qs.saveNamedQuery(s,e))})}),jF.apply(this,arguments)}function s3(n,e){return`firestore_clients_${n}_${e}`}function o3(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function $F(n,e){return`firestore_targets_${n}_${e}`}class m1{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let s,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(s=new je(i.error.code,i.error.message))),u?new m1(e,t,i.state,s):(Mi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class XC{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new je(r.error.code,r.error.message))),s?new XC(e,r.state,i):(Mi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _1{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=fF();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=s4(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new _1(e,s):(Mi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class HF{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new HF(t.clientId,t.onlineState):(Mi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class GF{constructor(){this.activeTargetIds=fF()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qF{constructor(e,t,r,i,s){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new gr(en),this.started=!1,this.yr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=s3(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new GF),this.Tr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ie.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const s=e.getItem(s3(e.persistenceKey,i));if(s){const u=_1.ar(i,s);u&&(e.gr=e.gr.insert(u.clientId,u))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem($F(this.persistenceKey,e));if(r){const i=XC.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($F(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ke("SharedClientState","READ",e,t),t}setItem(e,t){Ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Mi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(s){let u=eu.ct;if(null!=s)try{const d=JSON.parse(s);kt("number"==typeof d),u=d}catch(d){Mi("SharedClientState","Failed to read sequence number from WebStorage",d)}return u}(r.newValue);i!==eu.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new m1(this.currentUser,e,t,r),s=o3(this.persistenceKey,this.currentUser,e);this.setItem(s,i.hr())}Cr(e){const t=o3(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=$F(this.persistenceKey,e),s=new XC(e,t,r);this.setItem(i,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return _1.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return m1.ar(new Ds(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return XC.ar(i,t)}br(e){return HF.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),s=this.Sr(r),u=[],d=[];return s.forEach(p=>{i.has(p)||u.push(p)}),i.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Wr(u,d).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=fF();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class a3{constructor(){this.Hr=new GF,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new GF,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class k5{Yr(e){}shutdown(){}}class u3{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let y1=null;function zF(){return null===y1?y1=268435456+Math.round(2147483648*Math.random()):y1++,"0x"+y1.toString(16)}const O5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class F5{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const fo="WebChannelConnection";class L5 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const u=zF(),d=this.To(e,t);Ke("RestConnection",`Sending RPC '${e}' ${u}:`,d,r);const p={};return this.Eo(p,i,s),this.Ao(e,d,p,r).then(y=>(Ke("RestConnection",`Received RPC '${e}' ${u}: `,y),y),y=>{throw Zu("RestConnection",`RPC '${e}' ${u} failed with error: `,y,"url: ",d,"request:",r),y})}vo(e,t,r,i,s,u){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+LE,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${O5[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=zF();return new Promise((u,d)=>{const p=new kz;p.setWithCredentials(!0),p.listenOnce(Pz.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case ZO.NO_ERROR:const E=p.getResponseJson();Ke(fo,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(E)),u(E);break;case ZO.TIMEOUT:Ke(fo,`RPC '${e}' ${s} timed out`),d(new je(_e.DEADLINE_EXCEEDED,"Request time out"));break;case ZO.HTTP_ERROR:const D=p.getStatus();if(Ke(fo,`RPC '${e}' ${s} failed with status:`,D,"response text:",p.getResponseText()),D>0){let P=p.getResponseJson();Array.isArray(P)&&(P=P[0]);const k=P?.error;if(k&&k.status&&k.message){const B=function(Z){const z=Z.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(z)>=0?z:_e.UNKNOWN}(k.status);d(new je(B,k.message))}else d(new je(_e.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new je(_e.UNAVAILABLE,"Connection failed."));break;default:It()}}finally{Ke(fo,`RPC '${e}' ${s} completed.`)}});const y=JSON.stringify(i);Ke(fo,`RPC '${e}' ${s} sending request:`,i),p.send(t,"POST",y,r,15)})}Ro(e,t,r){const i=zF(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=xz(),d=Rz(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.xmlHttpFactory=new Nz({})),this.Eo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const E=s.join("");Ke(fo,`Creating RPC '${e}' stream ${i}: ${E}`,p);const D=u.createWebChannel(E,p);let P=!1,k=!1;const B=new F5({ro:z=>{k?Ke(fo,`Not sending because RPC '${e}' stream ${i} is closed:`,z):(P||(Ke(fo,`Opening RPC '${e}' stream ${i} transport.`),D.open(),P=!0),Ke(fo,`RPC '${e}' stream ${i} sending:`,z),D.send(z))},oo:()=>D.close()}),Z=(z,me,Ne)=>{z.listen(me,Se=>{try{Ne(Se)}catch(ke){setTimeout(()=>{throw ke},0)}})};return Z(D,VR.EventType.OPEN,()=>{k||Ke(fo,`RPC '${e}' stream ${i} transport opened.`)}),Z(D,VR.EventType.CLOSE,()=>{k||(k=!0,Ke(fo,`RPC '${e}' stream ${i} transport closed`),B.wo())}),Z(D,VR.EventType.ERROR,z=>{k||(k=!0,Zu(fo,`RPC '${e}' stream ${i} transport errored:`,z),B.wo(new je(_e.UNAVAILABLE,"The operation could not be completed")))}),Z(D,VR.EventType.MESSAGE,z=>{var me;if(!k){const Ne=z.data[0];kt(!!Ne);const ke=Ne.error||(null===(me=Ne[0])||void 0===me?void 0:me.error);if(ke){Ke(fo,`RPC '${e}' stream ${i} received error:`,ke);const at=ke.status;let pt=function(Cr){const bf=Qi[Cr];if(void 0!==bf)return n$(bf)}(at),nn=ke.message;void 0===pt&&(pt=_e.INTERNAL,nn="Unknown error status: "+at+" with message "+ke.message),k=!0,B.wo(new je(pt,nn)),D.close()}else Ke(fo,`RPC '${e}' stream ${i} received:`,Ne),B._o(Ne)}}),Z(d,Mz.STAT_EVENT,z=>{z.stat===Kj.PROXY?Ke(fo,`RPC '${e}' stream ${i} detected buffering proxy`):z.stat===Kj.NOPROXY&&Ke(fo,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{B.fo()},0),B}}function c3(){return typeof window<"u"?window:null}function v1(){return typeof document<"u"?document:null}function JC(n){return new W7(n,!0)}class WF{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class l3{constructor(e,t,r,i,s,u,d,p){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new WF(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ie.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ie.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ie.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(Mi(t.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new je(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,ie.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class V5 extends l3{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Q7(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:It(),i=e.targetChange.targetIds||[],s=function(p,y){return p.useProto3Json?(kt(void 0===y||"string"==typeof y),ls.fromBase64String(y||"")):(kt(void 0===y||y instanceof Uint8Array),ls.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(p){const y=void 0===p.code?_e.UNKNOWN:n$(p.code);return new je(y,p.message||"")}(u);t=new a$(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=md(n,r.document.name),s=Ni(r.document.updateTime),u=r.document.createTime?Ni(r.document.createTime):Ft.min(),d=new qs({mapValue:{fields:r.document.fields}}),p=wr.newFoundDocument(i,s,u,d);t=new r1(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=md(n,r.document),s=r.readTime?Ni(r.readTime):Ft.min(),u=wr.newNoDocument(i,s);t=new r1([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=md(n,r.document);t=new r1([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return It();{const r=e.filter,{count:i=0,unchangedNames:s}=r,u=new j7(i,s);t=new o$(r.targetId,u)}}var p;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ft.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Ft.min():s.readTime?Ni(s.readTime):Ft.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=HC(this.serializer),t.addTarget=function(i,s){let u;const d=s.target;if(u=ZR(d)?{documents:_$(i,d)}:{query:bF(i,d)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=d$(i,s.resumeToken);const p=IF(i,s.expectedCount);null!==p&&(u.expectedCount=p)}else if(s.snapshotVersion.compareTo(Ft.min())>0){u.readTime=KE(i,s.snapshotVersion.toTimestamp());const p=IF(i,s.expectedCount);null!==p&&(u.expectedCount=p)}return u}(this.serializer,e);const r=function X7(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=HC(this.serializer),t.removeTarget=e,this.Wo(t)}}class U5 extends l3{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Y7(n,e){return n&&n.length>0?(kt(void 0!==e),n.map(t=>function(r,i){let s=Ni(r.updateTime?r.updateTime:i);return s.isEqual(Ft.min())&&(s=Ni(i)),new L7(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ni(e.commitTime);return this.listener.cu(r,t)}return kt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=HC(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>GC(this.serializer,r))};this.Wo(t)}}class B5 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new je(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new je(_e.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.vo(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new je(_e.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class $5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Mi(t),this.mu=!1):Ke("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class H5{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(d=>{r.enqueueAndForget((0,ie.Z)(function*(){var p;qg(u)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,ie.Z)(function*(y){const E=ft(y);E.vu.add(4),yield e0(E),E.bu.set("Unknown"),E.vu.delete(4),yield eD(E)}),function(y){return p.apply(this,arguments)})(u))}))}),this.bu=new $5(r,i)}}function eD(n){return ZF.apply(this,arguments)}function ZF(){return ZF=(0,ie.Z)(function*(n){if(qg(n))for(const e of n.Ru)yield e(!0)}),ZF.apply(this,arguments)}function e0(n){return QF.apply(this,arguments)}function QF(){return QF=(0,ie.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),QF.apply(this,arguments)}function I1(n,e){const t=ft(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),JF(t)?XF(t):n0(t).Ko()&&YF(t,e))}function tD(n,e){const t=ft(n),r=n0(t);t.Au.delete(e),r.Ko()&&d3(t,e),0===t.Au.size&&(r.Ko()?r.jo():qg(t)&&t.bu.set("Unknown"))}function YF(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ft.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}n0(n).su(e)}function d3(n,e){n.Vu.qt(e),n0(n).iu(e)}function XF(n){n.Vu=new H7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),n0(n).start(),n.bu.gu()}function JF(n){return qg(n)&&!n0(n).Uo()&&n.Au.size>0}function qg(n){return 0===ft(n).vu.size}function h3(n){n.Vu=void 0}function G5(n){return eL.apply(this,arguments)}function eL(){return eL=(0,ie.Z)(function*(n){n.Au.forEach((e,t)=>{YF(n,e)})}),eL.apply(this,arguments)}function q5(n,e){return tL.apply(this,arguments)}function tL(){return tL=(0,ie.Z)(function*(n,e){h3(n),JF(n)?(n.bu.Iu(e),XF(n)):n.bu.set("Unknown")}),tL.apply(this,arguments)}function z5(n,e,t){return nL.apply(this,arguments)}function nL(){return nL=(0,ie.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof a$&&2===e.state&&e.cause)try{yield(r=(0,ie.Z)(function*(i,s){const u=s.cause;for(const d of s.targetIds)i.Au.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i.Au.delete(d),i.Vu.removeTarget(d))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield E1(n,r)}else if(e instanceof r1?n.Vu.Ht(e):e instanceof o$?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Ft.min()))try{const r=yield e3(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.Vu.ce(s);return u.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.Au.get(p);y&&i.Au.set(p,y.withResumeToken(d.resumeToken,s))}}),u.targetMismatches.forEach((d,p)=>{const y=i.Au.get(d);if(!y)return;i.Au.set(d,y.withResumeToken(ls.EMPTY_BYTE_STRING,y.snapshotVersion)),d3(i,d);const E=new If(y.target,d,p,y.sequenceNumber);YF(i,E)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Ke("RemoteStore","Failed to raise snapshot:",r),yield E1(n,r)}var r}),nL.apply(this,arguments)}function E1(n,e,t){return rL.apply(this,arguments)}function rL(){return rL=(0,ie.Z)(function*(n,e,t){if(!Ng(e))throw e;n.vu.add(1),yield e0(n),n.bu.set("Offline"),t||(t=()=>e3(n.localStore)),n.asyncQueue.enqueueRetryable((0,ie.Z)(function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield eD(n)}))}),rL.apply(this,arguments)}function f3(n,e){return e().catch(t=>E1(n,t,e))}function t0(n){return iL.apply(this,arguments)}function iL(){return iL=(0,ie.Z)(function*(n){const e=ft(n),t=zg(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;W5(e);)try{const i=yield P5(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,K5(e,i)}catch(i){yield E1(e,i)}p3(e)&&g3(e)}),iL.apply(this,arguments)}function W5(n){return qg(n)&&n.Eu.length<10}function K5(n,e){n.Eu.push(e);const t=zg(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function p3(n){return qg(n)&&!zg(n).Uo()&&n.Eu.length>0}function g3(n){zg(n).start()}function Z5(n){return sL.apply(this,arguments)}function sL(){return sL=(0,ie.Z)(function*(n){zg(n).hu()}),sL.apply(this,arguments)}function Q5(n){return oL.apply(this,arguments)}function oL(){return oL=(0,ie.Z)(function*(n){const e=zg(n);for(const t of n.Eu)e.uu(t.mutations)}),oL.apply(this,arguments)}function Y5(n,e,t){return aL.apply(this,arguments)}function aL(){return aL=(0,ie.Z)(function*(n,e,t){const r=n.Eu.shift(),i=mF.from(r,e,t);yield f3(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield t0(n)}),aL.apply(this,arguments)}function X5(n,e){return uL.apply(this,arguments)}function uL(){return uL=(0,ie.Z)(function*(n,e){var t;e&&zg(n).ou&&(yield(t=(0,ie.Z)(function*(r,i){if(t$(s=i.code)&&s!==_e.ABORTED){const u=r.Eu.shift();zg(r).Qo(),yield f3(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield t0(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),p3(n)&&g3(n)}),uL.apply(this,arguments)}function m3(n,e){return cL.apply(this,arguments)}function cL(){return cL=(0,ie.Z)(function*(n,e){const t=ft(n);t.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const r=qg(t);t.vu.add(3),yield e0(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield eD(t)}),cL.apply(this,arguments)}function lL(n,e){return dL.apply(this,arguments)}function dL(){return dL=(0,ie.Z)(function*(n,e){const t=ft(n);e?(t.vu.delete(2),yield eD(t)):e||(t.vu.add(2),yield e0(t),t.bu.set("Unknown"))}),dL.apply(this,arguments)}function n0(n){return n.Su||(n.Su=function(e,t,r){const i=ft(e);return i.fu(),new V5(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:G5.bind(null,n),ao:q5.bind(null,n),nu:z5.bind(null,n)}),n.Ru.push(function(){var e=(0,ie.Z)(function*(t){t?(n.Su.Qo(),JF(n)?XF(n):n.bu.set("Unknown")):(yield n.Su.stop(),h3(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function zg(n){return n.Du||(n.Du=function(e,t,r){const i=ft(e);return i.fu(),new U5(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:Z5.bind(null,n),ao:X5.bind(null,n),au:Q5.bind(null,n),cu:Y5.bind(null,n)}),n.Ru.push(function(){var e=(0,ie.Z)(function*(t){t?(n.Du.Qo(),yield t0(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ke("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class hL{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,d=new hL(e,t,u,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new je(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function r0(n,e){if(Mi("AsyncQueue",`${e}: ${n}`),Ng(n))return new je(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class s0{constructor(e){this.comparator=e?(t,r)=>e(t,r)||lt.comparator(t.key,r.key):(t,r)=>lt.comparator(t.key,r.key),this.keyedMap=OC(),this.sortedSet=new gr(this.comparator)}static emptySet(e){return new s0(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof s0)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new s0;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class _3{constructor(){this.Cu=new gr(lt.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):It():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class o0{constructor(e,t,r,i,s,u,d,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new o0(e,t,s0.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&NC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class J5{constructor(){this.Nu=void 0,this.listeners=[]}}class e8{constructor(){this.queries=new yf(e=>F4(e),NC),this.onlineState="Unknown",this.ku=new Set}}function fL(n,e){return pL.apply(this,arguments)}function pL(){return pL=(0,ie.Z)(function*(n,e){const t=ft(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new J5),i)try{s.Nu=yield t.onListen(r)}catch(u){const d=r0(u,`Initialization of query '${hF(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&_L(t)}),pL.apply(this,arguments)}function gL(n,e){return mL.apply(this,arguments)}function mL(){return mL=(0,ie.Z)(function*(n,e){const t=ft(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),mL.apply(this,arguments)}function t8(n,e){const t=ft(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.$u(i)&&(r=!0);u.Nu=i}}r&&_L(t)}function n8(n,e,t){const r=ft(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function _L(n){n.ku.forEach(e=>{e.next()})}class yL{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new o0(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=o0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class r8{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class y3{constructor(e){this.serializer=e}rr(e){return md(this.serializer,e)}ur(e){return e.metadata.exists?m$(this.serializer,e.document,!1):wr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ni(e)}}class i8{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=v3(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Cn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new y3(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.rr(i.metadata.name);for(const u of i.metadata.queries){const d=(t.get(u)||un()).add(s);t.set(u,d)}}return t}complete(){var e=this;return(0,ie.Z)(function*(){const t=yield function M5(n,e,t,r){return BF.apply(this,arguments)}(e.localStore,new y3(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield N5(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function v3(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class I3{constructor(e){this.key=e}}class E3{constructor(e){this.key=e}}class w3{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=un(),this.mutatedKeys=un(),this.tc=V4(e),this.ec=new s0(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new _3,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,D)=>{const P=i.get(E),k=kC(this.query,D)?D:null,B=!!P&&this.mutatedKeys.has(P.key),Z=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let z=!1;P&&k?P.data.isEqual(k.data)?B!==Z&&(r.track({type:3,doc:k}),z=!0):this.rc(P,k)||(r.track({type:2,doc:k}),z=!0,(p&&this.tc(k,p)>0||y&&this.tc(k,y)<0)&&(d=!0)):!P&&k?(r.track({type:0,doc:k}),z=!0):P&&!k&&(r.track({type:1,doc:P}),z=!0,(p||y)&&(d=!0)),z&&(k?(u=u.add(k),s=Z?s.add(E):s.delete(E)):(u=u.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const E="F"===this.query.limitType?u.last():u.first();u=u.delete(E.key),s=s.delete(E.key),r.track({type:1,doc:E})}return{ec:u,ic:r,zi:d,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((y,E)=>function(D,P){const k=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It()}};return k(D)-k(P)}(y.type,E.type)||this.tc(y.doc,E.doc)),this.oc(r);const u=t?this.uc():[],d=0===this.Zu.size&&this.current?1:0,p=d!==this.Xu;return this.Xu=d,0!==s.length||p?{snapshot:new o0(this.query,e.ec,i,s,e.mutatedKeys,0===d,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new _3,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=un(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new E3(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new I3(r))}),t}hc(e){this.Yu=e.ir,this.Zu=un();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return o0.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class s8{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class o8{constructor(e){this.key=e,this.fc=!1}}class a8{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new yf(d=>F4(d),NC),this._c=new Map,this.mc=new Set,this.gc=new gr(lt.comparator),this.yc=new Map,this.Ic=new MF,this.Tc={},this.Ec=new Map,this.Ac=xy.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function u8(n,e){return vL.apply(this,arguments)}function vL(){return vL=(0,ie.Z)(function*(n,e){const t=$L(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const u=yield XE(t.localStore,Uo(e)),d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield IL(t,e,r,"current"===d,u.resumeToken),t.isPrimaryClient&&I1(t.remoteStore,u)}return i}),vL.apply(this,arguments)}function IL(n,e,t,r,i){return EL.apply(this,arguments)}function EL(){return EL=(0,ie.Z)(function*(n,e,t,r,i){n.Rc=(D,P,k)=>{return(B=(0,ie.Z)(function*(Z,z,me,Ne){let Se=z.view.sc(me);Se.zi&&(Se=yield g1(Z.localStore,z.query,!1).then(({documents:pt})=>z.view.sc(pt,Se)));const ke=Ne&&Ne.targetChanges.get(z.targetId),at=z.view.applyChanges(Se,Z.isPrimaryClient,ke);return PL(Z,z.targetId,at.cc),at.snapshot}),function(Z,z,me,Ne){return B.apply(this,arguments)})(n,D,P,k);var B};const s=yield g1(n.localStore,e,!0),u=new w3(e,s.ir),d=u.sc(s.documents),p=jC.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=u.applyChanges(d,n.isPrimaryClient,p);PL(n,t,y.cc);const E=new s8(e,t,u);return n.wc.set(e,E),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),y.snapshot}),EL.apply(this,arguments)}function c8(n,e){return wL.apply(this,arguments)}function wL(){return wL=(0,ie.Z)(function*(n,e){const t=ft(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!NC(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield JE(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),tD(t.remoteStore,r.targetId),a0(t,r.targetId)}).catch(Mg))):(a0(t,r.targetId),yield JE(t.localStore,r.targetId,!0))}),wL.apply(this,arguments)}function TL(){return TL=(0,ie.Z)(function*(n,e,t){const r=HL(n);try{const i=yield function(s,u){const d=ft(s),p=Ur.now(),y=u.reduce((P,k)=>P.add(k.key),un());let E,D;return d.persistence.runTransaction("Locally write mutations","readwrite",P=>{let k=da(),B=un();return d.Zi.getEntries(P,y).next(Z=>{k=Z,k.forEach((z,me)=>{me.isValidDocument()||(B=B.add(z))})}).next(()=>d.localDocuments.getOverlayedDocuments(P,k)).next(Z=>{E=Z;const z=[];for(const me of u){const Ne=U7(me,E.get(me.key).overlayedDocument);null!=Ne&&z.push(new vf(me.key,Ne,w4(Ne.value.mapValue),Br.exists(!0)))}return d.mutationQueue.addMutationBatch(P,p,z,u)}).next(Z=>{D=Z;const z=Z.applyToLocalDocumentSet(E,B);return d.documentOverlayCache.saveOverlays(P,Z.batchId,z)})}).then(()=>({batchId:D.batchId,changes:B4(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,d){let p=s.Tc[s.currentUser.toKey()];p||(p=new gr(en)),p=p.insert(u,d),s.Tc[s.currentUser.toKey()]=p}(r,i.batchId,t),yield Ef(r,i.changes),yield t0(r.remoteStore)}catch(i){const s=r0(i,"Failed to persist write");t.reject(s)}}),TL.apply(this,arguments)}function T3(n,e){return bL.apply(this,arguments)}function bL(){return bL=(0,ie.Z)(function*(n,e){const t=ft(n);try{const r=yield function R5(n,e){const t=ft(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const d=[];e.targetChanges.forEach((E,D)=>{const P=i.get(D);if(!P)return;d.push(t.Bs.removeMatchingKeys(s,E.removedDocuments,D).next(()=>t.Bs.addMatchingKeys(s,E.addedDocuments,D)));let k=P.withSequenceNumber(s.currentSequenceNumber);var B,Z,z;null!==e.targetMismatches.get(D)?k=k.withResumeToken(ls.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):E.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(E.resumeToken,r)),i=i.insert(D,k),Z=k,z=E,(0===(B=P).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0)&&d.push(t.Bs.updateTargetData(s,k))});let p=da(),y=un();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,E))}),d.push(t3(s,u,e.documentUpdates).next(E=>{p=E.nr,y=E.sr})),!r.isEqual(Ft.min())){const E=t.Bs.getLastRemoteSnapshotVersion(s).next(D=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(E)}return le.waitFor(d).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(t.Ji=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.yc.get(s);u&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.fc=!0:i.modifiedDocuments.size>0?kt(u.fc):i.removedDocuments.size>0&&(kt(u.fc),u.fc=!1))}),yield Ef(t,r,e)}catch(r){yield Mg(r)}}),bL.apply(this,arguments)}function b3(n,e,t){const r=ft(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,u)=>{const d=u.view.Mu(e);d.snapshot&&i.push(d.snapshot)}),function(s,u){const d=ft(s);d.onlineState=u;let p=!1;d.queries.forEach((y,E)=>{for(const D of E.listeners)D.Mu(u)&&(p=!0)}),p&&_L(d)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function d8(n,e,t){return CL.apply(this,arguments)}function CL(){return CL=(0,ie.Z)(function*(n,e,t){const r=ft(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let u=new gr(lt.comparator);u=u.insert(s,wr.newNoDocument(s,Ft.min()));const d=un().add(s),p=new BC(Ft.min(),new Map,new gr(en),u,d);yield T3(r,p),r.gc=r.gc.remove(s),r.yc.delete(e),ML(r)}else yield JE(r.localStore,e,!1).then(()=>a0(r,e,t)).catch(Mg)}),CL.apply(this,arguments)}function h8(n,e){return DL.apply(this,arguments)}function DL(){return DL=(0,ie.Z)(function*(n,e){const t=ft(n),r=e.batch.batchId;try{const i=yield function x5(n,e){const t=ft(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(u,d,p,y){const E=p.batch,D=E.keys();let P=le.resolve();return D.forEach(k=>{P=P.next(()=>y.getEntry(d,k)).next(B=>{const Z=p.docVersions.get(k);kt(null!==Z),B.version.compareTo(Z)<0&&(E.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),y.addEntry(B)))})}),P.next(()=>u.mutationQueue.removeMutationBatch(d,E))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=un();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);RL(t,r,null),xL(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ef(t,i)}catch(i){yield Mg(i)}}),DL.apply(this,arguments)}function f8(n,e,t){return AL.apply(this,arguments)}function AL(){return AL=(0,ie.Z)(function*(n,e,t){const r=ft(n);try{const i=yield function(s,u){const d=ft(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,u).next(E=>(kt(null!==E),y=E.keys(),d.mutationQueue.removeMutationBatch(p,E))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(r.localStore,e);RL(r,e,t),xL(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ef(r,i)}catch(i){yield Mg(i)}}),AL.apply(this,arguments)}function SL(){return SL=(0,ie.Z)(function*(n,e){const t=ft(n);qg(t.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const u=ft(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=r0(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),SL.apply(this,arguments)}function xL(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function RL(n,e,t){const r=ft(n);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function a0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||C3(n,r)})}function C3(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(tD(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),ML(n))}function PL(n,e,t){for(const r of t)r instanceof I3?(n.Ic.addReference(r.key,e),g8(n,r)):r instanceof E3?(Ke("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||C3(n,r.key)):It()}function g8(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ke("SyncEngine","New document in limbo: "+t),n.mc.add(r),ML(n))}function ML(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new lt(Cn.fromString(e)),r=n.Ac.next();n.yc.set(r,new o8(t)),n.gc=n.gc.insert(t,r),I1(n.remoteStore,new If(Uo(HE(t.path)),r,"TargetPurposeLimboResolution",eu.ct))}}function Ef(n,e,t){return NL.apply(this,arguments)}function NL(){return NL=(0,ie.Z)(function*(n,e,t){const r=ft(n),i=[],s=[],u=[];var d;r.wc.isEmpty()||(r.wc.forEach((d,p)=>{u.push(r.Rc(p,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const E=LF.Li(p.targetId,y);s.push(E)}}))}),yield Promise.all(u),r.dc.nu(i),yield(d=(0,ie.Z)(function*(p,y){const E=ft(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>le.forEach(y,P=>le.forEach(P.Fi,k=>E.persistence.referenceDelegate.addReference(D,P.targetId,k)).next(()=>le.forEach(P.Bi,k=>E.persistence.referenceDelegate.removeReference(D,P.targetId,k)))))}catch(D){if(!Ng(D))throw D;Ke("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const P=D.targetId;if(!D.fromCache){const k=E.Ji.get(P),Z=k.withLastLimboFreeSnapshotVersion(k.snapshotVersion);E.Ji=E.Ji.insert(P,Z)}}}),function(p,y){return d.apply(this,arguments)})(r.localStore,s))}),NL.apply(this,arguments)}function m8(n,e){return kL.apply(this,arguments)}function kL(){return kL=(0,ie.Z)(function*(n,e){const t=ft(n);if(!t.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const r=yield J$(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(u=>{u.forEach(d=>{d.reject(new je(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ef(t,r.er)}var i}),kL.apply(this,arguments)}function _8(n,e){const t=ft(n),r=t.yc.get(e);if(r&&r.fc)return un().add(r.key);{let i=un();const s=t._c.get(e);if(!s)return i;for(const u of s){const d=t.wc.get(u);i=i.unionWith(d.view.nc)}return i}}function y8(n,e){return OL.apply(this,arguments)}function OL(){return OL=(0,ie.Z)(function*(n,e){const t=ft(n),r=yield g1(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&PL(t,e.targetId,i.cc),i}),OL.apply(this,arguments)}function v8(n,e){return FL.apply(this,arguments)}function FL(){return FL=(0,ie.Z)(function*(n,e){const t=ft(n);return r3(t.localStore,e).then(r=>Ef(t,r))}),FL.apply(this,arguments)}function I8(n,e,t,r){return LL.apply(this,arguments)}function LL(){return LL=(0,ie.Z)(function*(n,e,t,r){const i=ft(n),s=yield function(u,d){const p=ft(u),y=ft(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.Sn(E,d).next(D=>D?p.localDocuments.getDocuments(E,D):le.resolve(null)))}(i.localStore,e);var d;null!==s?("pending"===t?yield t0(i.remoteStore):"acknowledged"===t||"rejected"===t?(RL(i,e,r||null),xL(i,e),d=e,ft(ft(i.localStore).mutationQueue).Cn(d)):It(),yield Ef(i,s)):Ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),LL.apply(this,arguments)}function VL(){return VL=(0,ie.Z)(function*(n,e){const t=ft(n);if($L(t),HL(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield D3(t,r.toArray());t.vc=!0,yield lL(t.remoteStore,!0);for(const s of i)I1(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((s,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(a0(t,u),JE(t.localStore,u,!0))),tD(t.remoteStore,u)}),yield i,yield D3(t,r),function(s){const u=ft(s);u.yc.forEach((d,p)=>{tD(u.remoteStore,p)}),u.Ic.Ts(),u.yc=new Map,u.gc=new gr(lt.comparator)}(t),t.vc=!1,yield lL(t.remoteStore,!1)}}),VL.apply(this,arguments)}function D3(n,e,t){return UL.apply(this,arguments)}function UL(){return UL=(0,ie.Z)(function*(n,e,t){const r=ft(n),i=[],s=[];for(const u of e){let d;const p=r._c.get(u);if(p&&0!==p.length){d=yield XE(r.localStore,Uo(p[0]));for(const y of p){const E=r.wc.get(y),D=yield y8(r,E);D.snapshot&&s.push(D.snapshot)}}else{const y=yield n3(r.localStore,u);d=yield XE(r.localStore,y),yield IL(r,A3(y),u,!1,d.resumeToken)}i.push(d)}return r.dc.nu(s),i}),UL.apply(this,arguments)}function A3(n){return k4(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function w8(n){const e=ft(n);return ft(ft(e.localStore).persistence).$i()}function T8(n,e,t,r){return BL.apply(this,arguments)}function BL(){return BL=(0,ie.Z)(function*(n,e,t,r){const i=ft(n);if(i.vc)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const u=yield r3(i.localStore,L4(s[0])),d=BC.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ls.EMPTY_BYTE_STRING);yield Ef(i,u,d);break}case"rejected":yield JE(i.localStore,e,!0),a0(i,e,r);break;default:It()}}),BL.apply(this,arguments)}function b8(n,e,t){return jL.apply(this,arguments)}function jL(){return jL=(0,ie.Z)(function*(n,e,t){const r=$L(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ke("SyncEngine","Adding an already active target "+i);continue}const s=yield n3(r.localStore,i),u=yield XE(r.localStore,s);yield IL(r,A3(s),u.targetId,!1,u.resumeToken),I1(r.remoteStore,u)}for(const i of t)r._c.has(i)&&(yield JE(r.localStore,i,!1).then(()=>{tD(r.remoteStore,i),a0(r,i)}).catch(Mg))}}),jL.apply(this,arguments)}function $L(n){const e=ft(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=T3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d8.bind(null,e),e.dc.nu=t8.bind(null,e.eventManager),e.dc.Pc=n8.bind(null,e.eventManager),e}function HL(n){const e=ft(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f8.bind(null,e),e}class nD{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ie.Z)(function*(){t.serializer=JC(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return X$(this.persistence,new Y$,e.initialUser,this.serializer)}createPersistence(e){return new NF(h1.zs,this.serializer)}createSharedClientState(e){return new a3}terminate(){var e=this;return(0,ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class GL extends nD{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ie.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield HL(r.Vc.syncEngine),yield t0(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return X$(this.persistence,new Y$,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new $$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Yz(t,this.persistence);return new Qz(e.asyncQueue,r)}createPersistence(e){const t=FF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ho.withCacheSize(this.cacheSizeBytes):ho.DEFAULT;return new OF(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,c3(),v1(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new a3}}class S3 extends GL{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ie.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof qF&&(r.sharedClientState.syncEngine={jr:I8.bind(null,i),zr:T8.bind(null,i),Wr:b8.bind(null,i),$i:w8.bind(null,i),Qr:v8.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var s=(0,ie.Z)(function*(u){yield function E8(n,e){return VL.apply(this,arguments)}(r.Vc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=c3();if(!qF.D(t))throw new je(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=FF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qF(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class u0{initialize(e,t){var r=this;return(0,ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>b3(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=m8.bind(null,r.syncEngine),yield lL(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new e8}createDatastore(e){const t=JC(e.databaseInfo.databaseId),r=new L5(e.databaseInfo);return new B5(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=d=>b3(this.syncEngine,d,0),u=u3.D()?new u3:new k5,new H5(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,d,p,y){const E=new a8(r,i,s,u,d,p);return y&&(E.vc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ie.Z)(function*(t){const r=ft(t);Ke("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield e0(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function x3(n,e=10240){let t=0;return{read:()=>(0,ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ie.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class w1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Mi("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class A8{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new cs,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ie.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ie.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ie.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const s=yield e.$c(i);return new r8(JSON.parse(s),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ie.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ie.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class S8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new je(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ie.Z)(function*(s,u){const d=ft(s),p=HC(d.serializer)+"/documents",y={documents:u.map(k=>$C(d.serializer,k))},E=yield d.vo("BatchGetDocuments",p,y,u.length),D=new Map;E.forEach(k=>{const B=function Z7(n,e){return"found"in e?function(t,r){kt(!!r.found);const i=md(t,r.found.name),s=Ni(r.found.updateTime),u=r.found.createTime?Ni(r.found.createTime):Ft.min(),d=new qs({mapValue:{fields:r.found.fields}});return wr.newFoundDocument(i,s,u,d)}(n,e):"missing"in e?function(t,r){kt(!!r.missing),kt(!!r.readTime);const i=md(t,r.missing),s=Ni(r.readTime);return wr.newNoDocument(i,s)}(n,e):It()}(d.serializer,k);D.set(B.key.toString(),B)});const P=[];return u.forEach(k=>{const B=D.get(k.toString());kt(!!B),P.push(B)}),P}),function(s,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new WE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=lt.fromPath(i);e.mutations.push(new pF(s,e.precondition(s)))}),yield(r=(0,ie.Z)(function*(i,s){const u=ft(i),d=HC(u.serializer)+"/documents",p={writes:s.map(y=>GC(u.serializer,y))};yield u.Io("Commit",d,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw It();t=Ft.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new je(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ft.min())?Br.exists(!1):Br.updateTime(t):Br.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ft.min()))throw new je(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Br.updateTime(t)}return Br.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class x8{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new WF(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ie.Z)(function*(){const t=new S8(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Uc(s)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!DC(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!t$(t)}return!1}}class R8{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ds.UNAUTHENTICATED,this.clientId=Xj.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,ie.Z)(function*(d){Ke("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Ke("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new je(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ie.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=r0(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function T1(n,e){return qL.apply(this,arguments)}function qL(){return qL=(0,ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ie.Z)(function*(s){r.isEqual(s)||(yield J$(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),qL.apply(this,arguments)}function zL(n,e){return WL.apply(this,arguments)}function WL(){return WL=(0,ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield KL(n);Ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>m3(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>m3(e.remoteStore,s)),n._onlineComponents=e}),WL.apply(this,arguments)}function R3(n){return"FirebaseError"===n.name?n.code===_e.FAILED_PRECONDITION||n.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function KL(n){return ZL.apply(this,arguments)}function ZL(){return ZL=(0,ie.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield T1(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!R3(t))throw t;Zu("Error using user provided cache. Falling back to memory cache: "+t),yield T1(n,new nD)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),yield T1(n,new nD);return n._offlineComponents}),ZL.apply(this,arguments)}function b1(n){return QL.apply(this,arguments)}function QL(){return QL=(0,ie.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield zL(n,n._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield zL(n,new u0))),n._onlineComponents}),QL.apply(this,arguments)}function P3(n){return KL(n).then(e=>e.persistence)}function C1(n){return KL(n).then(e=>e.localStore)}function M3(n){return b1(n).then(e=>e.remoteStore)}function YL(n){return b1(n).then(e=>e.syncEngine)}function c0(n){return XL.apply(this,arguments)}function XL(){return XL=(0,ie.Z)(function*(n){const e=yield b1(n),t=e.eventManager;return t.onListen=u8.bind(null,e.syncEngine),t.onUnlisten=c8.bind(null,e.syncEngine),t}),XL.apply(this,arguments)}function k3(n,e,t={}){const r=new cs;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(i,s,u,d,p){const y=new w1({next:D=>{s.enqueueAndForget(()=>gL(i,E));const P=D.docs.has(u);!P&&D.fromCache?p.reject(new je(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&D.fromCache&&d&&"server"===d.source?p.reject(new je(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),E=new yL(HE(u.path),y,{includeMetadataChanges:!0,Ku:!0});return fL(i,E)}(yield c0(n),n.asyncQueue,e,t,r)})),r.promise}function O3(n,e,t={}){const r=new cs;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(i,s,u,d,p){const y=new w1({next:D=>{s.enqueueAndForget(()=>gL(i,E)),D.fromCache&&"server"===d.source?p.reject(new je(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),E=new yL(u,y,{includeMetadataChanges:!0,Ku:!0});return fL(i,E)}(yield c0(n),n.asyncQueue,e,t,r)})),r.promise}function F3(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const L3=new Map;function JL(n,e,t){if(!t)throw new je(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function V3(n,e,t,r){if(!0===e&&!0===r)throw new je(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function U3(n){if(!lt.isDocumentKey(n))throw new je(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function B3(n){if(lt.isDocumentKey(n))throw new je(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function D1(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":It()}function Tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new je(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=D1(n);throw new je(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function j3(n,e){if(e<=0)throw new je(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class $3{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new je(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new je(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}V3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=F3(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new je(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new je(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new je(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rD{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new je(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new je(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $3(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Vz;switch(t.type){case"firstParty":return new $z(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new je(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=L3.get(e);t&&(Ke("ComponentProvider","Removing Datastore"),L3.delete(e),t.terminate())}(this),Promise.resolve()}}class Tr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _d(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tr(this.firestore,e,this._key)}}class zs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zs(this.firestore,e,this._query)}}class _d extends zs{constructor(e,t,r){super(e,t,HE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tr(this.firestore,null,new lt(e))}withConverter(e){return new _d(this.firestore,e,this._path)}}function G3(n,e,...t){if(n=(0,on.m9)(n),JL("collection","path",e),n instanceof rD){const r=Cn.fromString(e,...t);return B3(r),new _d(n,null,r)}{if(!(n instanceof Tr||n instanceof _d))throw new je(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(e,...t));return B3(r),new _d(n.firestore,null,r)}}function A1(n,e,...t){if(n=(0,on.m9)(n),1===arguments.length&&(e=Xj.A()),JL("doc","path",e),n instanceof rD){const r=Cn.fromString(e,...t);return U3(r),new Tr(n,null,new lt(r))}{if(!(n instanceof Tr||n instanceof _d))throw new je(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(e,...t));return U3(r),new Tr(n.firestore,n instanceof _d?n.converter:null,new lt(r))}}function q3(n,e){return n=(0,on.m9)(n),e=(0,on.m9)(e),(n instanceof Tr||n instanceof _d)&&(e instanceof Tr||e instanceof _d)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function eV(n,e){return n=(0,on.m9)(n),e=(0,on.m9)(e),n instanceof zs&&e instanceof zs&&n.firestore===e.firestore&&NC(n._query,e._query)&&n.converter===e.converter}class B8{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new WF(this,"async_queue_retry"),this.Xc=()=>{const t=v1();t&&Ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=v1();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=v1();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new cs;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ie.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Ng(t))throw t;Ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Mi("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=hL.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&It()}verifyOperationInProgress(){}sa(){var e=this;return(0,ie.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function tV(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class j8{constructor(){this._progressObserver={},this._taskCompletionResolver=new cs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class br extends rD{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new B8,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||z3(this),this._firestoreClient.terminate()}}function ki(n){return n._firestoreClient||z3(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function z3(n){var e,t,r;const i=n._freezeSettings(),s=(d=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new y7(n._databaseId,d,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,F3(y.experimentalLongPollingOptions),y.useFetchStreams));var d,y;n._firestoreClient=new R8(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function W3(n,e,t){const r=new cs;return n.asyncQueue.enqueue((0,ie.Z)(function*(){try{yield T1(n,t),yield zL(n,e),r.resolve()}catch(i){const s=i;if(!R3(s))throw s;Zu("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function K3(n){if(n._initialized||n._terminated)throw new je(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class yd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yd(ls.fromBase64String(e))}catch(t){throw new je(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yd(ls.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wf{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new je(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ci(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Py{constructor(e){this._methodName=e}}class S1{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return en(this._lat,e._lat)||en(this._long,e._long)}}const X8=/^__.*__$/;class J8{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new vf(e,this.data,this.fieldMask,t,this.fieldTransforms):new zE(e,this.data,t,this.fieldTransforms)}}class Z3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Q3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It()}}class x1{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new x1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return M1(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Q3(this.ca)&&X8.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class eW{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||JC(e)}ya(e,t,r,i=!1){return new x1({ca:e,methodName:t,ga:r,path:ci.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function My(n){const e=n._freezeSettings(),t=JC(n._databaseId);return new eW(n._databaseId,!!e.ignoreUndefinedProperties,t)}function R1(n,e,t,r,i,s={}){const u=n.ya(s.merge||s.mergeFields?2:0,e,t,i);sV("Data must be an object, but it was:",u,r);const d=J3(r,u);let p,y;if(s.merge)p=new la(u.fieldMask),y=u.fieldTransforms;else if(s.mergeFields){const E=[];for(const D of s.mergeFields){const P=oD(e,D,t);if(!u.contains(P))throw new je(_e.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);tH(E,P)||E.push(P)}p=new la(E),y=u.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,y=u.fieldTransforms;return new J8(new qs(d),p,y)}class sD extends Py{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sD}}function Y3(n,e,t){return new x1({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class nV extends Py{_toFieldTransform(e){return new LC(e.path,new GE)}isEqual(e){return e instanceof nV}}class tW extends Py{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Y3(this,e,!0),r=this.pa.map(s=>Ny(s,t)),i=new wy(r);return new LC(e.path,i)}isEqual(e){return this===e}}class nW extends Py{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Y3(this,e,!0),r=this.pa.map(s=>Ny(s,t)),i=new Ty(r);return new LC(e.path,i)}isEqual(e){return this===e}}class rW extends Py{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new qE(e.serializer,G4(e.serializer,this.Ia));return new LC(e.path,t)}isEqual(e){return this===e}}function rV(n,e,t,r){const i=n.ya(1,e,t);sV("Data must be an object, but it was:",i,r);const s=[],u=qs.empty();kg(r,(p,y)=>{const E=P1(e,p,t);y=(0,on.m9)(y);const D=i.da(E);if(y instanceof sD)s.push(E);else{const P=Ny(y,D);null!=P&&(s.push(E),u.set(E,P))}});const d=new la(s);return new Z3(u,d,i.fieldTransforms)}function iV(n,e,t,r,i,s){const u=n.ya(1,e,t),d=[oD(e,r,t)],p=[i];if(s.length%2!=0)throw new je(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<s.length;P+=2)d.push(oD(e,s[P])),p.push(s[P+1]);const y=[],E=qs.empty();for(let P=d.length-1;P>=0;--P)if(!tH(y,d[P])){const k=d[P];let B=p[P];B=(0,on.m9)(B);const Z=u.da(k);if(B instanceof sD)y.push(k);else{const z=Ny(B,Z);null!=z&&(y.push(k),E.set(k,z))}}const D=new la(y);return new Z3(E,D,u.fieldTransforms)}function X3(n,e,t,r=!1){return Ny(t,n.ya(r?4:3,e))}function Ny(n,e){if(eH(n=(0,on.m9)(n)))return sV("Unsupported field value:",e,n),J3(n,e);if(n instanceof Py)return function(t,r){if(!Q3(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const u of t){let d=Ny(u,r.wa(s));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,on.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return G4(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ur.fromDate(t);return{timestampValue:KE(r.serializer,i)}}if(t instanceof Ur){const i=new Ur(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:KE(r.serializer,i)}}if(t instanceof S1)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yd)return{bytesValue:d$(r.serializer,t._byteString)};if(t instanceof Tr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:EF(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${D1(t)}`)}(n,e)}function J3(n,e){const t={};return f4(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kg(n,(r,i)=>{const s=Ny(i,e.ha(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function eH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ur||n instanceof S1||n instanceof yd||n instanceof Tr||n instanceof Py)}function sV(n,e,t){if(!eH(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=D1(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function oD(n,e,t){if((e=(0,on.m9)(e))instanceof wf)return e._internalPath;if("string"==typeof e)return P1(n,e);throw M1("Field path arguments must be of type string or ",n,!1,void 0,t)}const iW=new RegExp("[~\\*/\\[\\]]");function P1(n,e,t){if(e.search(iW)>=0)throw M1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wf(...e.split("."))._internalPath}catch{throw M1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function M1(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||u)&&(p+=" (found",s&&(p+=` in field ${r}`),u&&(p+=` in document ${i}`),p+=")"),new je(_e.INVALID_ARGUMENT,d+n+p)}function tH(n,e){return n.some(t=>t.isEqual(e))}class aD{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(N1("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sW extends aD{data(){return super.data()}}function N1(n,e){return"string"==typeof e?P1(n,e):e instanceof wf?e._internalPath:e._delegate._internalPath}function nH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new je(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oV{}class uD extends oV{}function Wg(n,e,...t){let r=[];e instanceof oV&&r.push(e),r=r.concat(t),function(i){const s=i.filter(d=>d instanceof l0).length,u=i.filter(d=>d instanceof cD).length;if(s>1||s>0&&u>0)throw new je(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class cD extends uD{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new cD(e,t,r)}_apply(e){const t=this._parse(e);return oH(e._query,t),new zs(e.firestore,e.converter,dF(e._query,t))}_parse(e){const t=My(e.firestore);return function(i,s,u,d,p,y,E){let D;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new je(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){sH(E,y);const P=[];for(const k of E)P.push(iH(d,i,k));D={arrayValue:{values:P}}}else D=iH(d,i,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||sH(E,y),D=X3(u,"where",E,"in"===y||"not-in"===y);return wn.create(p,y,D)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class l0 extends oV{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new l0(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Kn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const u=i.getFlattenedFilters();for(const d of u)oH(s,d),s=dF(s,d)}(e._query,t),new zs(e.firestore,e.converter,dF(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class aV extends uD{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new aV(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new je(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new je(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new jE(i,s);return function(d,p){if(null===cF(d)){const y=YR(d);null!==y&&aH(0,y,p.field)}}(r,u),u}(e._query,this._field,this._direction);return new zs(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new _f(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class k1 extends uD{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new k1(e,t,r)}_apply(e){return new zs(e.firestore,e.converter,XR(e._query,this._limit,this._limitType))}}class O1 extends uD{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new O1(e,t,r)}_apply(e){const t=rH(e,this.type,this._docOrFields,this._inclusive);return new zs(e.firestore,e.converter,(i=t,new _f((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class F1 extends uD{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new F1(e,t,r)}_apply(e){const t=rH(e,this.type,this._docOrFields,this._inclusive);return new zs(e.firestore,e.converter,(i=t,new _f((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function rH(n,e,t,r){if(t[0]=(0,on.m9)(t[0]),t[0]instanceof aD)return function(i,s,u,d,p){if(!d)throw new je(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const E of Ey(i))if(E.field.isKeyField())y.push(vy(s,d.key));else{const D=d.data.field(E.field);if(GR(D))throw new je(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const P=E.field.canonicalString();throw new je(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}y.push(D)}return new Bg(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=My(n.firestore);return function(s,u,d,p,y,E){const D=s.explicitOrderBy;if(y.length>D.length)throw new je(_e.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let k=0;k<y.length;k++){const B=y[k];if(D[k].field.isKeyField()){if("string"!=typeof B)throw new je(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof B}`);if(!lF(s)&&-1!==B.indexOf("/"))throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${B}' contains a slash.`);const Z=s.path.child(Cn.fromString(B));if(!lt.isDocumentKey(Z))throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Z}' is not because it contains an odd number of segments.`);const z=new lt(Z);P.push(vy(u,z))}else{const Z=X3(d,p,B);P.push(Z)}}return new Bg(P,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function iH(n,e,t){if("string"==typeof(t=(0,on.m9)(t))){if(""===t)throw new je(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lF(e)&&-1!==t.indexOf("/"))throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Cn.fromString(t));if(!lt.isDocumentKey(r))throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vy(n,new lt(r))}if(t instanceof Tr)return vy(n,t._key);throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${D1(t)}.`)}function sH(n,e){if(!Array.isArray(n)||0===n.length)throw new je(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oH(n,e){if(e.isInequality()){const r=YR(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new je(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=cF(n);null!==s&&aH(0,i,s)}const t=function(r,i){for(const s of r)for(const u of s.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new je(_e.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function aH(n,e,t){if(!t.isEqual(e))throw new je(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class uV{convertValue(e,t="none"){switch(Vg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return li(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw It()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return kg(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new S1(li(e.latitude),li(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=qR(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(SC(e));default:return null}}convertTimestamp(e){const t=Og(e);return new Ur(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Cn.fromString(e);kt(E$(r));const i=new Fg(r.get(1),r.get(3)),s=new lt(r.popFirst(5));return i.isEqual(t)||Mi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function L1(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class pW extends uV{constructor(e){super(),this.firestore=e}convertBytes(e){return new yd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,t)}}class ky{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tf extends aD{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(N1("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class lD extends Tf{data(e={}){return super.data(e)}}class Kg{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ky(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lD(this._firestore,this._userDataWriter,r.key,r,new ky(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new lD(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ky(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new lD(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ky(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==u.type&&(p=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),y=s.indexOf(u.doc.key)),{type:mW(u.type),doc:d,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It()}}function cH(n,e){return n instanceof Tf&&e instanceof Tf?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Kg&&e instanceof Kg&&n._firestore===e._firestore&&eV(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Zg extends uV{constructor(e){super(),this.firestore=e}convertBytes(e){return new yd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,t)}}function lH(n,e,t){n=Tn(n,Tr);const r=Tn(n.firestore,br),i=L1(n.converter,e,t);return d0(r,[R1(My(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Br.none())])}function dH(n,e,t,...r){n=Tn(n,Tr);const i=Tn(n.firestore,br),s=My(i);let u;return u="string"==typeof(e=(0,on.m9)(e))||e instanceof wf?iV(s,"updateDoc",n._key,e,t,r):rV(s,"updateDoc",n._key,e),d0(i,[u.toMutation(n._key,Br.exists(!0))])}function hH(n,...e){var t,r,i;n=(0,on.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||tV(e[u])||(s=e[u],u++);const d={includeMetadataChanges:s.includeMetadataChanges};if(tV(e[u])){const D=e[u];e[u]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[u+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[u+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let p,y,E;if(n instanceof Tr)y=Tn(n.firestore,br),E=HE(n._key.path),p={next:D=>{e[u]&&e[u](cV(y,n,D))},error:e[u+1],complete:e[u+2]};else{const D=Tn(n,zs);y=Tn(D.firestore,br),E=D._query;const P=new Zg(y);p={next:k=>{e[u]&&e[u](new Kg(y,P,D,k))},error:e[u+1],complete:e[u+2]},nH(n._query)}return function(D,P,k,B){const Z=new w1(B),z=new yL(P,Z,k);return D.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return fL(yield c0(D),z)})),()=>{Z.Dc(),D.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return gL(yield c0(D),z)}))}}(ki(y),E,d,p)}function d0(n,e){return function(t,r){const i=new cs;return t.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function l8(n,e,t){return TL.apply(this,arguments)}(yield YL(t),r,i)})),i.promise}(ki(n),e)}function cV(n,e,t){const r=t.docs.get(e._key),i=new Zg(n);return new Tf(n,i,e._key,r,new ky(t.hasPendingWrites,t.fromCache),e.converter)}const kW={maxAttempts:5};class fH{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=My(e)}set(e,t,r){this._verifyNotCommitted();const i=Qg(e,this._firestore),s=L1(i.converter,t,r),u=R1(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Br.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Qg(e,this._firestore);let u;return u="string"==typeof(t=(0,on.m9)(t))||t instanceof wf?iV(this._dataReader,"WriteBatch.update",s._key,t,r,i):rV(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,Br.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qg(e,this._firestore);return this._mutations=this._mutations.concat(new WE(t._key,Br.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new je(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qg(n,e){if((n=(0,on.m9)(n)).firestore!==e)throw new je(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class OW extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=My(e)}get(e){const t=Qg(e,this._firestore),r=new pW(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return It();const s=i[0];if(s.isFoundDocument())return new aD(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new aD(this._firestore,r,t._key,null,t.converter);throw It()})}set(e,t,r){const i=Qg(e,this._firestore),s=L1(i.converter,t,r),u=R1(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const s=Qg(e,this._firestore);let u;return u="string"==typeof(t=(0,on.m9)(t))||t instanceof wf?iV(this._dataReader,"Transaction.update",s._key,t,r,i):rV(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,u),this}delete(e){const t=Qg(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qg(e,this._firestore),r=new Zg(this._firestore);return super.get(e).then(i=>new Tf(this._firestore,r,t._key,i._document,new ky(!1,!1),t.converter))}}function lV(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new je("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function gH(){if(typeof Uint8Array>"u")throw new je("unimplemented","Uint8Arrays are not available in this environment.")}function mH(){if(!function m7(){return typeof atob<"u"}())throw new je("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){LE=dR.SDK_VERSION,(0,dR._registerComponent)(new Sh.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),u=new br(new Bz(t.getProvider("auth-internal")),new Hz(t.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new je(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fg(d.options.projectId,p)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,dR.registerVersion)(Zj,"3.13.0",n),(0,dR.registerVersion)(Zj,"3.13.0","esm2017")}();class dD{constructor(e){this._delegate=e}static fromBase64String(e){return mH(),new dD(yd.fromBase64String(e))}static fromUint8Array(e){return gH(),new dD(yd.fromUint8Array(e))}toBase64(){return mH(),this._delegate.toBase64()}toUint8Array(){return gH(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function dV(n){return function GW(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class qW{enableIndexedDbPersistence(e,t){return function H8(n,e){K3(n=Tn(n,br));const t=ki(n);if(t._uninitializedComponentsProvider)throw new je(_e.FAILED_PRECONDITION,"SDK cache is already specified.");Zu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new u0;return W3(t,i,new GL(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function G8(n){K3(n=Tn(n,br));const e=ki(n);if(e._uninitializedComponentsProvider)throw new je(_e.FAILED_PRECONDITION,"SDK cache is already specified.");Zu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new u0;return W3(e,r,new S3(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function q8(n){if(n._initialized&&!n._terminated)throw new je(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new cs;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ie.Z)(function*(){try{yield(t=(0,ie.Z)(function*(r){if(!$c.D())return Promise.resolve();const i=r+"main";yield $c.delete(i)}),function(r){return t.apply(this,arguments)})(FF(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _H{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Fg||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Zu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function H3(n,e,t,r={}){var i;const s=(n=Tn(n,rD))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==u&&Zu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:u,ssl:!1})),r.mockUserToken){let d,p;if("string"==typeof r.mockUserToken)d=r.mockUserToken,p=Ds.MOCK_USER;else{d=(0,on.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new je(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ds(y)}n._authCredentials=new Uz(new Qj(d,p))}}(this._delegate,e,t,r)}enableNetwork(){return function W8(n){return function P8(n){return n.asyncQueue.enqueue((0,ie.Z)(function*(){const e=yield P3(n),t=yield M3(n);return e.setNetworkEnabled(!0),function(r){const i=ft(r);return i.vu.delete(0),eD(i)}(t)}))}(ki(n=Tn(n,br)))}(this._delegate)}disableNetwork(){return function K8(n){return function M8(n){return n.asyncQueue.enqueue((0,ie.Z)(function*(){const e=yield P3(n),t=yield M3(n);return e.setNetworkEnabled(!1),(r=(0,ie.Z)(function*(i){const s=ft(i);s.vu.add(0),yield e0(s),s.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ki(n=Tn(n,br)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,V3("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function z8(n){return function(e){const t=new cs;return e.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function p8(n,e){return SL.apply(this,arguments)}(yield YL(e),t)})),t.promise}(ki(n=Tn(n,br)))}(this._delegate)}onSnapshotsInSync(e){return function CW(n,e){return function O8(n,e){const t=new w1(e);return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return r=yield c0(n),i=t,ft(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return r=yield c0(n),i=t,void ft(r).ku.delete(i);var r,i}))}}(ki(n=Tn(n,br)),tV(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new je("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new h0(this,G3(this._delegate,e))}catch(t){throw Bo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Qu(this,A1(this._delegate,e))}catch(t){throw Bo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new jo(this,function U8(n,e){if(n=Tn(n,rD),JL("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new je(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zs(n,null,(t=e,new _f(Cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Bo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function FW(n,e,t){n=Tn(n,br);const r=Object.assign(Object.assign({},kW),t);return function(i){if(i.maxAttempts<1)throw new je(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,u){const d=new cs;return i.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){const p=yield function N3(n){return b1(n).then(e=>e.datastore)}(i);new x8(i.asyncQueue,p,u,s,d).run()})),d.promise}(ki(n),i=>e(new OW(n,i)),r)}(this._delegate,t=>e(new yH(this,t)))}batch(){return ki(this._delegate),new vH(new fH(this._delegate,e=>d0(this._delegate,e)))}loadBundle(e){return function Z8(n,e){const t=ki(n=Tn(n,br)),r=new j8;return function F8(n,e,t,r){const i=function(s,u){let d;return d="string"==typeof s?r$().encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return x3(p,y);if(p instanceof ArrayBuffer)return x3(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new A8(p,u);var p}(t,JC(e));n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){!function C8(n,e,t){const r=ft(n);var i;(i=(0,ie.Z)(function*(s,u,d){try{const p=yield u.getMetadata();if(yield function(P,k){const B=ft(P),Z=Ni(k.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",z=>B.qs.getBundleMetadata(z,k.id)).then(z=>!!z&&z.createTime.compareTo(Z)>=0)}(s.localStore,p))return yield u.close(),d._completeWith({taskState:"Success",documentsLoaded:(P=p).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);d._updateProgress(v3(p));const y=new i8(p,s.localStore,u.serializer);let E=yield u.bc();for(;E;){const P=yield y.zu(E);P&&d._updateProgress(P),E=yield u.bc()}const D=yield y.complete();return yield Ef(s,D.Ju,void 0),yield function(P,k){const B=ft(P);return B.persistence.runTransaction("Save bundle","readwrite",Z=>B.qs.saveBundleMetadata(Z,k))}(s.localStore,p),d._completeWith(D.progress),Promise.resolve(D.Hu)}catch(p){return Zu("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var P}),function(s,u,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield YL(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Q8(n,e){return function L8(n,e){return n.asyncQueue.enqueue((0,ie.Z)(function*(){return function(t,r){const i=ft(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.qs.getNamedQuery(s,r))}(yield C1(n),e)}))}(ki(n=Tn(n,br)),e).then(t=>t?new zs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new jo(this,t):null)}}class V1 extends uV{constructor(e){super(),this.firestore=e}convertBytes(e){return new dD(new yd(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Qu.forKey(t,this.firestore,null)}}class yH{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new V1(e)}get(e){const t=Fy(e);return this._delegate.get(t).then(r=>new hD(this._firestore,new Tf(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Fy(e);return r?(lV("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Fy(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Fy(e);return this._delegate.delete(t),this}}class vH{constructor(e){this._delegate=e}set(e,t,r){const i=Fy(e);return r?(lV("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Fy(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Fy(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Oy{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new lD(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new fD(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Oy.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Oy(e,new V1(e),t),i.set(t,s)),s}}Oy.INSTANCES=new WeakMap;class Qu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new V1(e)}static forPath(e,t,r){if(e.length%2!=0)throw new je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Qu(t,new Tr(t._delegate,r,new lt(e)))}static forKey(e,t,r){return new Qu(t,new Tr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new h0(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new h0(this.firestore,G3(this._delegate,e))}catch(t){throw Bo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,on.m9)(e))instanceof Tr&&q3(this._delegate,e)}set(e,t){t=lV("DocumentReference.set",t);try{return t?lH(this._delegate,e,t):lH(this._delegate,e)}catch(r){throw Bo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?dH(this._delegate,e):dH(this._delegate,e,t,...r)}catch(i){throw Bo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function TW(n){return d0(Tn(n.firestore,br),[new WE(n._key,Br.none())])}(this._delegate)}onSnapshot(...e){const t=IH(e),r=EH(e,i=>new hD(this.firestore,new Tf(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return hH(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function yW(n){n=Tn(n,Tr);const e=Tn(n.firestore,br),t=ki(e),r=new Zg(e);return function N8(n,e){const t=new cs;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return(r=(0,ie.Z)(function*(i,s,u){try{const d=yield function(p,y){const E=ft(p);return E.persistence.runTransaction("read document","readonly",D=>E.localDocuments.getDocument(D,y))}(i,s);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new je(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=r0(d,`Failed to get document '${s} from cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield C1(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Tf(e,r,n._key,i,new ky(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function vW(n){n=Tn(n,Tr);const e=Tn(n.firestore,br);return k3(ki(e),n._key,{source:"server"}).then(t=>cV(e,n,t))}(this._delegate):function _W(n){n=Tn(n,Tr);const e=Tn(n.firestore,br);return k3(ki(e),n._key).then(t=>cV(e,n,t))}(this._delegate),t.then(r=>new hD(this.firestore,new Tf(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Qu(this.firestore,this._delegate.withConverter(e?Oy.getInstance(this.firestore,e):null))}}function Bo(n,e,t){return n.message=n.message.replace(e,t),n}function IH(n){for(const e of n)if("object"==typeof e&&!dV(e))return e;return{}}function EH(n,e){var t,r;let i;return i=dV(n[0])?n[0]:dV(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class hD{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Qu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return cH(this._delegate,e._delegate)}}class fD extends hD{data(e){const t=this._delegate.data(e);return function Lz(n,e){n||It()}(void 0!==t),t}}class jo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new V1(e)}where(e,t,r){try{return new jo(this.firestore,Wg(this._delegate,function oW(n,e,t){const r=e,i=N1("where",n);return cD._create(i,r,t)}(e,t,r)))}catch(i){throw Bo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new jo(this.firestore,Wg(this._delegate,function aW(n,e="asc"){const t=e,r=N1("orderBy",n);return aV._create(r,t)}(e,t)))}catch(r){throw Bo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new jo(this.firestore,Wg(this._delegate,function uW(n){return j3("limit",n),k1._create("limit",n,"F")}(e)))}catch(t){throw Bo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new jo(this.firestore,Wg(this._delegate,function cW(n){return j3("limitToLast",n),k1._create("limitToLast",n,"L")}(e)))}catch(t){throw Bo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new jo(this.firestore,Wg(this._delegate,function lW(...n){return O1._create("startAt",n,!0)}(...e)))}catch(t){throw Bo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new jo(this.firestore,Wg(this._delegate,function dW(...n){return O1._create("startAfter",n,!1)}(...e)))}catch(t){throw Bo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new jo(this.firestore,Wg(this._delegate,function hW(...n){return F1._create("endBefore",n,!1)}(...e)))}catch(t){throw Bo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new jo(this.firestore,Wg(this._delegate,function fW(...n){return F1._create("endAt",n,!0)}(...e)))}catch(t){throw Bo(t,"endAt()","Query.endAt()")}}isEqual(e){return eV(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function EW(n){n=Tn(n,zs);const e=Tn(n.firestore,br),t=ki(e),r=new Zg(e);return function k8(n,e){const t=new cs;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return(r=(0,ie.Z)(function*(i,s,u){try{const d=yield g1(i,s,!0),p=new w3(s,d.ir),y=p.sc(d.documents),E=p.applyChanges(y,!1);u.resolve(E.snapshot)}catch(d){const p=r0(d,`Failed to execute query '${s} against cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield C1(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Kg(e,r,n,i))}(this._delegate):"server"===e?.source?function wW(n){n=Tn(n,zs);const e=Tn(n.firestore,br),t=ki(e),r=new Zg(e);return O3(t,n._query,{source:"server"}).then(i=>new Kg(e,r,n,i))}(this._delegate):function IW(n){n=Tn(n,zs);const e=Tn(n.firestore,br),t=ki(e),r=new Zg(e);return nH(n._query),O3(t,n._query).then(i=>new Kg(e,r,n,i))}(this._delegate),t.then(r=>new hV(this.firestore,new Kg(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=IH(e),r=EH(e,i=>new hV(this.firestore,new Kg(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return hH(this._delegate,t,r)}withConverter(e){return new jo(this.firestore,this._delegate.withConverter(e?Oy.getInstance(this.firestore,e):null))}}class WW{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new fD(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class hV{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new jo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new fD(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new WW(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new fD(this._firestore,r))})}isEqual(e){return cH(this._delegate,e._delegate)}}class h0 extends jo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Qu(this.firestore,e):null}doc(e){try{return new Qu(this.firestore,void 0===e?A1(this._delegate):A1(this._delegate,e))}catch(t){throw Bo(t,"doc()","CollectionReference.doc()")}}add(e){return function bW(n,e){const t=Tn(n.firestore,br),r=A1(n),i=L1(n.converter,e);return d0(t,[R1(My(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Br.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Qu(this.firestore,t))}isEqual(e){return q3(this._delegate,e._delegate)}withConverter(e){return new h0(this.firestore,this._delegate.withConverter(e?Oy.getInstance(this.firestore,e):null))}}function Fy(n){return Tn(n,Tr)}class fV{constructor(...e){this._delegate=new wf(...e)}static documentId(){return new fV(ci.keyField().canonicalString())}isEqual(e){return(e=(0,on.m9)(e))instanceof wf&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ly{constructor(e){this._delegate=e}static serverTimestamp(){const e=function VW(){return new nV("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ly(e)}static delete(){const e=function LW(){return new sD("deleteField")}();return e._methodName="FieldValue.delete",new Ly(e)}static arrayUnion(...e){const t=function UW(...n){return new tW("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ly(t)}static arrayRemove(...e){const t=function BW(...n){return new nW("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ly(t)}static increment(e){const t=function jW(n){return new rW("increment",n)}(e);return t._methodName="FieldValue.increment",new Ly(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const KW={Firestore:_H,GeoPoint:S1,Timestamp:Ur,Blob:dD,Transaction:yH,WriteBatch:vH,DocumentReference:Qu,DocumentSnapshot:hD,Query:jo,QueryDocumentSnapshot:fD,QuerySnapshot:hV,CollectionReference:h0,FieldPath:fV,FieldValue:Ly,setLogLevel:function zW(n){!function Fz(n){Pg.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function QW(n){(function ZW(n,e){n.INTERNAL.registerComponent(new Sh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},KW)))})(n,(e,t)=>new _H(e,t,new qW)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Sq.Z);var YW=O(3019),U1=O(3093),XW=O(4552);class JW extends ms.x{constructor(e=1/0,t=1/0,r=XW.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let d=0;for(let p=1;p<r.length&&r[p]<=u;p+=2)d=p;d&&r.splice(0,d+1)}}}var eK=O(3020);function wH(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,eK.B)({connector:()=>new JW(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function TH(n,e){return(0,Iu.m)(e)?(0,Nr.w)(()=>n,e):(0,Nr.w)(()=>n)}var pV=O(5137);O(4097);const mV=new Map,CH={activated:!1,tokenObservers:[]},sK={initialized:!1,enabled:!1};function di(n){return mV.get(n)||Object.assign({},CH)}function j1(){return sK}const _V="https://content-firebaseappcheck.googleapis.com/v1",cK="exchangeDebugToken",DH={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class dK{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ie.Z)(function*(){t.stop();try{t.pending=new on.BH,yield function hK(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new on.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ws=new on.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function yV(n){if(!di(n).activated)throw Ws.create("use-before-activation",{appName:n.name})}function G1(n,e){return IV.apply(this,arguments)}function IV(){return IV=(0,ie.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const s={method:"POST",body:JSON.stringify(e),headers:r};let u,d;try{u=yield fetch(n,s)}catch(D){throw Ws.create("fetch-network-error",{originalErrorMessage:D?.message})}if(200!==u.status)throw Ws.create("fetch-status-error",{httpStatus:u.status});try{d=yield u.json()}catch(D){throw Ws.create("fetch-parse-error",{originalErrorMessage:D?.message})}const p=d.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Ws.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const y=1e3*Number(p[1]),E=Date.now();return{token:d.token,expireTimeMillis:E+y,issuedAtTimeMillis:E}}),IV.apply(this,arguments)}function AH(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${_V}/projects/${t}/apps/${r}:${cK}?key=${i}`,body:{debug_token:e}}}const mK="firebase-app-check-database",_K=1,pD="firebase-app-check-store";let q1=null;function EV(){return EV=(0,ie.Z)(function*(n,e){const r=(yield function xH(){return q1||(q1=new Promise((n,e)=>{try{const t=indexedDB.open(mK,_K);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ws.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(pD,{keyPath:"compositeKey"})}}catch(t){e(Ws.create("storage-open",{originalErrorMessage:t?.message}))}}),q1)}()).transaction(pD,"readwrite"),s=r.objectStore(pD).put({compositeKey:n,value:e});return new Promise((u,d)=>{s.onsuccess=p=>{u()},r.onerror=p=>{var y;d(Ws.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),EV.apply(this,arguments)}const gD=new rs.Yd("@firebase/app-check");function bV(n,e){return(0,on.hl)()?function vK(n,e){return function RH(n,e){return EV.apply(this,arguments)}(function MH(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{gD.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function DV(){return j1().enabled}function AV(){return SV.apply(this,arguments)}function SV(){return SV=(0,ie.Z)(function*(){const n=j1();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),SV.apply(this,arguments)}const CK={error:"UNKNOWN_ERROR"};function DK(n){return on.US.encodeString(JSON.stringify(n),!1)}function z1(n){return xV.apply(this,arguments)}function xV(){return xV=(0,ie.Z)(function*(n,e=!1){const t=n.app;yV(t);const r=di(t);let s,i=r.token;if(i&&!f0(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(f0(p)?i=p:yield bV(t,void 0))}if(!e&&i&&f0(i))return{token:i.token};let d,u=!1;if(DV()){r.exchangeTokenPromise||(r.exchangeTokenPromise=G1(AH(t,yield AV()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const p=yield r.exchangeTokenPromise;return yield bV(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield di(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?gD.warn(p.message):gD.error(p),s=p}return i?s?d=f0(i)?{token:i.token,internalError:s}:FH(s):(d={token:i.token},r.token=i,yield bV(t,i)):d=FH(s),u&&function OH(n,e){const t=di(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,d),d}),xV.apply(this,arguments)}function RV(){return RV=(0,ie.Z)(function*(n){const e=n.app;yV(e);const{provider:t}=di(e);if(DV()){const r=yield AV(),{token:i}=yield G1(AH(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),RV.apply(this,arguments)}function MV(n,e){const t=di(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function kH(n){const{app:e}=n,t=di(e);let r=t.tokenRefresher;r||(r=function AK(n){const{app:e}=n;return new dK((0,ie.Z)(function*(){let r;if(r=di(e).token?yield z1(n,!0):yield z1(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=di(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},DH.RETRIAL_MIN_WAIT,DH.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function f0(n){return n.expireTimeMillis-Date.now()>0}function FH(n){return{token:DK(CK),error:n}}class SK{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=di(this.app);for(const t of e)MV(this.app,t.next);return Promise.resolve()}}const GH="app-check-internal";!function $K(){(0,Hi.Xd)(new Sh.wA("app-check",n=>function xK(n,e){return new SK(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(GH).initialize()})),(0,Hi.Xd)(new Sh.wA(GH,n=>function RK(n){return{getToken:e=>z1(n,e),getLimitedUseToken:()=>function NH(n){return RV.apply(this,arguments)}(n),addTokenListener:e=>function PV(n,e,t,r){const{app:i}=n,s=di(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&f0(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),kH(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>kH(n))}(n,"INTERNAL",e),removeTokenListener:e=>MV(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Hi.KN)("@firebase/app-check","0.8.0")}();class FV{constructor(){return(0,js.vb)("app-check")}}typeof window<"u"&&window;var WK=O(120);const zH=new f.OlP("angularfire2.auth.use-emulator"),WH=new f.OlP("angularfire2.auth.settings"),KH=new f.OlP("angularfire2.auth.tenant-id"),ZH=new f.OlP("angularfire2.auth.langugage-code"),QH=new f.OlP("angularfire2.auth.use-device-language"),YH=new f.OlP("angularfire.auth.persistence"),XH=(n,e,t,r,i,s,u,d)=>(0,Uc.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),u)for(const[y,E]of Object.entries(u))p.settings[y]=E;return d&&p.setPersistence(d),p},[t,r,i,s,u,d]);let K1=(()=>{class n{constructor(t,r,i,s,u,d,p,y,E,D,P,k){const B=new ms.x,Z=(0,xt.of)(void 0).pipe((0,U1.Q)(u.outsideAngular),(0,Nr.w)(()=>s.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,8977)))),(0,St.U)(()=>(0,Uc.on)(t,s,r)),(0,St.U)(z=>XH(z,s,d,y,E,D,p,P)),wH({bufferSize:1,refCount:!1}));if(yo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,xt.of)(null);else{Z.pipe(na()).subscribe();const me=Z.pipe((0,Nr.w)(ke=>ke.getRedirectResult().then(at=>at,()=>null)),js.iC,wH({bufferSize:1,refCount:!1})),Ne=Z.pipe((0,Nr.w)(ke=>new vi.y(at=>({unsubscribe:s.runOutsideAngular(()=>ke.onAuthStateChanged(pt=>at.next(pt),pt=>at.error(pt),()=>at.complete()))})))),Se=Z.pipe((0,Nr.w)(ke=>new vi.y(at=>({unsubscribe:s.runOutsideAngular(()=>ke.onIdTokenChanged(pt=>at.next(pt),pt=>at.error(pt),()=>at.complete()))}))));this.authState=me.pipe(TH(Ne),(0,pV.R)(u.outsideAngular),(0,U1.Q)(u.insideAngular)),this.user=me.pipe(TH(Se),(0,pV.R)(u.outsideAngular),(0,U1.Q)(u.insideAngular)),this.idToken=this.user.pipe((0,Nr.w)(ke=>ke?(0,vn.D)(ke.getIdToken()):(0,xt.of)(null))),this.idTokenResult=this.user.pipe((0,Nr.w)(ke=>ke?(0,vn.D)(ke.getIdTokenResult()):(0,xt.of)(null))),this.credential=(0,YW.T)(me,B,this.authState.pipe(ts(ke=>!ke))).pipe((0,St.U)(ke=>ke?.user?ke:null),(0,pV.R)(u.outsideAngular),(0,U1.Q)(u.insideAngular))}return(0,Uc.pX)(this,Z,s,{spy:{apply:(z,me,Ne)=>{(z.startsWith("signIn")||z.startsWith("createUser"))&&Ne.then(Se=>B.next(Se))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Uc.Dh),f.LFG(Uc.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(js.HU),f.LFG(zH,8),f.LFG(WH,8),f.LFG(KH,8),f.LFG(ZH,8),f.LFG(QH,8),f.LFG(YH,8),f.LFG(FV,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ZK=(()=>{class n{constructor(){WK.Z.registerVersion("angularfire",js.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[K1]}),n})();function JH(n,e){return function QK(n,e=Dq.z){return new vi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function VV(n,e){return JH(n,e).pipe((0,St.U)(t=>({payload:t,type:"query"})))}function Z1(n,e){return VV(n,e).pipe(gc(void 0),aO(),(0,St.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,d)=>{const p=i.find(E=>E.doc.ref.isEqual(u.ref)),y=t?.payload.docs.find(E=>E.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:u}})}),s}))}function eG(n,e,t){return Z1(n,t).pipe(tr((r,i)=>function XK(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function JK(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return UV(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return UV(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return UV(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),(0,Aq.x)(),(0,St.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function UV(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function tG(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class nG{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Z1(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,St.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(gc(void 0),aO(),ts(([r,i])=>i.length>0||!r),(0,St.U)(([r,i])=>i),js.iC)}auditTrail(e){return this.stateChanges(e).pipe(tr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tG(e);return eG(this.query,t,this.afs.schedulers.outsideAngular).pipe(js.iC)}valueChanges(e={}){return VV(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),js.iC)}get(e){return(0,vn.D)(this.query.get(e)).pipe(js.iC)}add(e){return this.ref.add(e)}doc(e){return new rG(this.ref.doc(e),this.afs)}}class rG{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=iG(r,t);return new nG(i,s,this.afs)}snapshotChanges(){return function YK(n,e){return JH(n,e).pipe(gc(void 0),aO(),(0,St.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(js.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,St.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,vn.D)(this.ref.get(e)).pipe(js.iC)}}class eZ{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Z1(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ts(t=>t.length>0),js.iC):Z1(this.query,this.afs.schedulers.outsideAngular).pipe(js.iC)}auditTrail(e){return this.stateChanges(e).pipe(tr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tG(e);return eG(this.query,t,this.afs.schedulers.outsideAngular).pipe(js.iC)}valueChanges(e={}){return VV(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),js.iC)}get(e){return(0,vn.D)(this.query.get(e)).pipe(js.iC)}}const tZ=new f.OlP("angularfire2.enableFirestorePersistence"),nZ=new f.OlP("angularfire2.firestore.persistenceSettings"),rZ=new f.OlP("angularfire2.firestore.settings"),iZ=new f.OlP("angularfire2.firestore.use-emulator");function iG(n,e=(t=>t)){return{query:e(n),ref:n}}let sZ=(()=>{class n{constructor(t,r,i,s,u,d,p,y,E,D,P,k,B,Z,z,me,Ne){this.schedulers=p;const Se=(0,Uc.on)(t,d,r),ke=E;D&&XH(Se,d,P,B,Z,z,k,me),[this.firestore,this.persistenceEnabled$]=(0,Uc.cc)(`${Se.name}.firestore`,"AngularFirestore",Se.name,()=>{const at=d.runOutsideAngular(()=>Se.firestore());if(s&&at.settings(s),ke&&at.useEmulator(...ke),i&&!yo(u)){const pt=()=>{try{return(0,vn.D)(at.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(nn){return typeof console<"u"&&console.warn(nn),(0,xt.of)(!1)}};return[at,d.runOutsideAngular(pt)]}return[at,(0,xt.of)(!1)]},[s,ke,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=iG(i,r),d=this.schedulers.ngZone.run(()=>s);return new nG(d,u,this)}collectionGroup(t,r){const i=r||(u=>u),s=this.firestore.collectionGroup(t);return new eZ(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new rG(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Uc.Dh),f.LFG(Uc.xv,8),f.LFG(tZ,8),f.LFG(rZ,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(js.HU),f.LFG(nZ,8),f.LFG(iZ,8),f.LFG(K1,8),f.LFG(zH,8),f.LFG(WH,8),f.LFG(KH,8),f.LFG(ZH,8),f.LFG(QH,8),f.LFG(YH,8),f.LFG(FV,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class Q1{}class Y1{}class vd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(u):this.headers.set(s,[u])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof vd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new vd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof vd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let u=this.headers.get(t);if(!u)return;u=u.filter(d=>-1===s.indexOf(d)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class oZ{encodeKey(e){return sG(e)}encodeValue(e){return sG(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const uZ=/%(\d[a-f0-9])/gi,cZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sG(n){return encodeURIComponent(n).replace(uZ,(e,t)=>cZ[t]??e)}function X1(n){return`${n}`}class Yg{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new oZ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function aZ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[u,d]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(u)||[];p.push(d),t.set(u,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(X1):[X1(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Yg({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(X1(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(X1(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class lZ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function oG(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function aG(n){return typeof Blob<"u"&&n instanceof Blob}function uG(n){return typeof FormData<"u"&&n instanceof FormData}class mD{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function dZ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new vd),this.context||(this.context=new lZ),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+u}}else this.params=new Yg,this.urlWithParams=t}serializeBody(){return null===this.body?null:oG(this.body)||aG(this.body)||uG(this.body)||function hZ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Yg?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||uG(this.body)?null:aG(this.body)?this.body.type||null:oG(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Yg?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,d=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,y=e.params||this.params;const E=e.context??this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((D,P)=>D.set(P,e.setHeaders[P]),p)),e.setParams&&(y=Object.keys(e.setParams).reduce((D,P)=>D.set(P,e.setParams[P]),y)),new mD(t,r,s,{params:y,headers:p,context:E,reportProgress:d,responseType:i,withCredentials:u})}}var p0=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(p0||{});class BV{constructor(e,t=200,r="OK"){this.headers=e.headers||new vd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class jV extends BV{constructor(e={}){super(e),this.type=p0.ResponseHeader}clone(e={}){return new jV({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class g0 extends BV{constructor(e={}){super(e),this.type=p0.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new g0({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class cG extends BV{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function $V(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let lG=(()=>{var n;class e{constructor(r){this.handler=r}request(r,i,s={}){let u;if(r instanceof mD)u=r;else{let y,E;y=s.headers instanceof vd?s.headers:new vd(s.headers),s.params&&(E=s.params instanceof Yg?s.params:new Yg({fromObject:s.params})),u=new mD(r,i,void 0!==s.body?s.body:null,{headers:y,context:s.context,params:E,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const d=(0,xt.of)(u).pipe(Ao(y=>this.handler.handle(y)));if(r instanceof mD||"events"===s.observe)return d;const p=d.pipe(ts(y=>y instanceof g0));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return p.pipe((0,St.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return p.pipe((0,St.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return p.pipe((0,St.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return p.pipe((0,St.U)(y=>y.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:(new Yg).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,$V(s,i))}post(r,i,s={}){return this.request("POST",r,$V(s,i))}put(r,i,s={}){return this.request("PUT",r,$V(s,i))}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(Q1))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();function fG(n,e){return e(n)}function pZ(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const mZ=new f.OlP(""),_D=new f.OlP(""),pG=new f.OlP("");function _Z(){let n=null;return(e,t)=>{null===n&&(n=((0,f.f3M)(mZ,{optional:!0})??[]).reduceRight(pZ,fG));const r=(0,f.f3M)(f.HDt),i=r.add();return n(e,t).pipe(ra(()=>r.remove(i)))}}let gG=(()=>{var n;class e extends Q1{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=(0,f.f3M)(f.HDt)}handle(r){if(null===this.chain){const s=Array.from(new Set([...this.injector.get(_D),...this.injector.get(pG,[])]));this.chain=s.reduceRight((u,d)=>function gZ(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(u,d,this.injector),fG)}const i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(ra(()=>this.pendingTasks.remove(i)))}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(Y1),f.LFG(f.lqb))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();const EZ=/^\)\]\}',?\n/;let _G=(()=>{var n;class e{constructor(r){this.xhrFactory=r}handle(r){if("JSONP"===r.method)throw new f.vHH(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?(0,vn.D)(i.\u0275loadImpl()):(0,xt.of)(null)).pipe((0,Nr.w)(()=>new vi.y(u=>{const d=i.build();if(d.open(r.method,r.urlWithParams),r.withCredentials&&(d.withCredentials=!0),r.headers.forEach((z,me)=>d.setRequestHeader(z,me.join(","))),r.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){const z=r.detectContentTypeHeader();null!==z&&d.setRequestHeader("Content-Type",z)}if(r.responseType){const z=r.responseType.toLowerCase();d.responseType="json"!==z?z:"text"}const p=r.serializeBody();let y=null;const E=()=>{if(null!==y)return y;const z=d.statusText||"OK",me=new vd(d.getAllResponseHeaders()),Ne=function wZ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(d)||r.url;return y=new jV({headers:me,status:d.status,statusText:z,url:Ne}),y},D=()=>{let{headers:z,status:me,statusText:Ne,url:Se}=E(),ke=null;204!==me&&(ke=typeof d.response>"u"?d.responseText:d.response),0===me&&(me=ke?200:0);let at=me>=200&&me<300;if("json"===r.responseType&&"string"==typeof ke){const pt=ke;ke=ke.replace(EZ,"");try{ke=""!==ke?JSON.parse(ke):null}catch(nn){ke=pt,at&&(at=!1,ke={error:nn,text:ke})}}at?(u.next(new g0({body:ke,headers:z,status:me,statusText:Ne,url:Se||void 0})),u.complete()):u.error(new cG({error:ke,headers:z,status:me,statusText:Ne,url:Se||void 0}))},P=z=>{const{url:me}=E(),Ne=new cG({error:z,status:d.status||0,statusText:d.statusText||"Unknown Error",url:me||void 0});u.error(Ne)};let k=!1;const B=z=>{k||(u.next(E()),k=!0);let me={type:p0.DownloadProgress,loaded:z.loaded};z.lengthComputable&&(me.total=z.total),"text"===r.responseType&&d.responseText&&(me.partialText=d.responseText),u.next(me)},Z=z=>{let me={type:p0.UploadProgress,loaded:z.loaded};z.lengthComputable&&(me.total=z.total),u.next(me)};return d.addEventListener("load",D),d.addEventListener("error",P),d.addEventListener("timeout",P),d.addEventListener("abort",P),r.reportProgress&&(d.addEventListener("progress",B),null!==p&&d.upload&&d.upload.addEventListener("progress",Z)),d.send(p),u.next({type:p0.Sent}),()=>{d.removeEventListener("error",P),d.removeEventListener("abort",P),d.removeEventListener("load",D),d.removeEventListener("timeout",P),r.reportProgress&&(d.removeEventListener("progress",B),null!==p&&d.upload&&d.upload.removeEventListener("progress",Z)),d.readyState!==d.DONE&&d.abort()}})))}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(Ji))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();const HV=new f.OlP("XSRF_ENABLED"),yG=new f.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),vG=new f.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class IG{}let CZ=(()=>{var n;class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=fa(r,this.cookieName),this.lastCookieString=r),this.lastToken}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(ve),f.LFG(f.Lbi),f.LFG(yG))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();function DZ(n,e){const t=n.url.toLowerCase();if(!(0,f.f3M)(HV)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,f.f3M)(IG).getToken(),i=(0,f.f3M)(vG);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Xg=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Xg||{});function Vy(n,e){return{\u0275kind:n,\u0275providers:e}}function AZ(...n){const e=[lG,_G,gG,{provide:Q1,useExisting:gG},{provide:Y1,useExisting:_G},{provide:_D,useValue:DZ,multi:!0},{provide:HV,useValue:!0},{provide:IG,useClass:CZ}];for(const t of n)e.push(...t.\u0275providers);return(0,f.MR2)(e)}const EG=new f.OlP("LEGACY_INTERCEPTOR_FN");let xZ=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[AZ(Vy(Xg.LegacyInterceptors,[{provide:EG,useFactory:_Z},{provide:_D,useExisting:EG,multi:!0}]))]}),e})(),yD=(()=>{var n;class e{constructor(r,i,s,u,d){this.afs=r,this.afAuth=i,this.router=s,this.ngZone=u,this.http=d,this.baseUrl="https://firestore.googleapis.com/v1beta1/projects/forms-a1d88/databases/(default)/StayDetails/documents",this.app=(0,Hi.ZF)(JU_firebase),this.db=function S9(n,e){const t="object"==typeof n?n:(0,Hi.Mq)(),r="string"==typeof n?n:e||"(default)",i=(0,Hi.qX)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,on.P0)("firestore");s&&function T9(n,e,t,r={}){var i;const s=(n=En(n,qb))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==u&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:u,ssl:!1})),r.mockUserToken){let d,p;if("string"==typeof r.mockUserToken)d=r.mockUserToken,p=xi.MOCK_USER;else{d=(0,on.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new $e(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new xi(y)}n._authCredentials=new SM(new wT(d,p))}}(i,...s)}return i}(this.app),this.storage=MB(),this.afAuth.authState.subscribe(p=>{p?(this.userData=p,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(r,i){return this.afAuth.signInWithEmailAndPassword(r,i).then(s=>{this.SetUserData(s.user),this.afAuth.authState.subscribe(u=>{u&&this.router.navigateByUrl("/view-articles")})}).catch(s=>{window.alert(s.message)})}SignUp(r,i){return this.afAuth.createUserWithEmailAndPassword(r,i).then(s=>{this.SendVerificationMail(),this.SetUserData(s.user)}).catch(s=>{window.alert(s.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(r=>r.sendEmailVerification()).then(()=>{this.router.navigateByUrl("/verify-email")})}ForgotPassword(r){return this.afAuth.sendPasswordResetEmail(r).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}get isLoggedIn(){const r=JSON.parse(localStorage.getItem("user"));return null!==r&&!1!==r.emailVerified}SetUserData(r){return this.afs.doc(`users/${r.uid}`).set({uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,emailVerified:r.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}getStayDetails(){var r=this;return(0,ie.Z)(function*(){let i=[],s=yield function $9(n){n=En(n,Bs);const e=En(n.firestore,pr),t=function Pi(n){return n._firestoreClient||RU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}(e),r=new Sg(e);return function HU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new $e(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query),wU(t,n._query).then(i=>new DE(e,r,n,i))}(function b9(n,e,...t){if(n=(0,on.m9)(n),function Vk(n,e,t){if(!t)throw new $e(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}("collection","path",e),n instanceof qb){const r=bn.fromString(e,...t);return DU(r),new ad(n,null,r)}{if(!(n instanceof Ri||n instanceof ad))throw new $e(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bn.fromString(e,...t));return DU(r),new ad(n.firestore,null,r)}}(r.db,"StayDetails"));return console.log(s),s.forEach(u=>{console.log(u.id," => ",u.data()),i.push(u.data())}),i})()}onSendContact(r){return this.http.post("https://forms-a1d88-default-rtdb.firebaseio.com/posts.json",r)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(sZ),f.LFG(K1),f.LFG(zr),f.LFG(f.R0b),f.LFG(lG))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function OZ(n,e){if(1&n&&(f.TgZ(0,"span",14),f._uU(1),f.qZA()),2&n){const t=f.oxw(2);f.xp6(1),f.Oqu(t.userNameErrorMsg)}}function FZ(n,e){1&n&&(f.TgZ(0,"div",15),f._uU(1," Atleast 3 characters required and no special character allowed. "),f.qZA())}function LZ(n,e){if(1&n&&(f.TgZ(0,"span",14),f._uU(1),f.qZA()),2&n){const t=f.oxw(2);f.xp6(1),f.Oqu(t.pwErrorMsg)}}function VZ(n,e){1&n&&(f.TgZ(0,"div",15),f._uU(1," Password must contain more than 8 characters, 1 upper case letter,1 special character and a number. "),f.qZA())}const UZ=function(n){return{disabled:n}};function BZ(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",4)(1,"h1"),f._uU(2,"Login"),f.qZA(),f.TgZ(3,"form",5)(4,"label",6),f._uU(5,"Username"),f.qZA(),f._UZ(6,"input",7),f.YNc(7,OZ,2,1,"span",8),f.YNc(8,FZ,2,0,"div",9),f.TgZ(9,"label",10),f._uU(10,"Password"),f.qZA(),f._UZ(11,"input",11),f.YNc(12,LZ,2,1,"span",8),f.YNc(13,VZ,2,0,"div",9),f.TgZ(14,"button",12),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();let s;return f.KtG(i.authService.SignIn(null==(s=i.loginForm.get("userName"))?null:s.value,null==(s=i.loginForm.get("passWord"))?null:s.value))}),f._uU(15,"Login"),f.qZA()(),f.TgZ(16,"p"),f._uU(17,"Don't have an account? "),f.TgZ(18,"a",13),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.navigateToForm())}),f._uU(19,"Sign up"),f.qZA()()()}if(2&n){const t=f.oxw();let r,i;f.xp6(3),f.Q6J("formGroup",t.loginForm),f.xp6(4),f.Q6J("ngIf",null==(r=t.loginForm.get("userName"))||null==r.errors?null:r.errors.required),f.xp6(1),f.Q6J("ngIf","INVALID"===(null==t.loginForm.controls.userName?null:t.loginForm.controls.userName.status)&&((null==t.loginForm.controls.userName?null:t.loginForm.controls.userName.touched)||(null==t.loginForm.controls.userName?null:t.loginForm.controls.userName.dirty))),f.xp6(4),f.Q6J("ngIf",null==(i=t.loginForm.get("passWord"))||null==i.errors?null:i.errors.required),f.xp6(1),f.Q6J("ngIf","INVALID"===(null==t.loginForm.controls.passWord?null:t.loginForm.controls.passWord.status)&&((null==t.loginForm.controls.passWord?null:t.loginForm.controls.passWord.touched)||(null==t.loginForm.controls.passWord?null:t.loginForm.controls.passWord.dirty))),f.xp6(1),f.Q6J("ngClass",f.VKq(6,UZ,t.loginForm.invalid))}}function jZ(n,e){if(1&n&&(f.TgZ(0,"span",14),f._uU(1),f.qZA()),2&n){const t=f.oxw(2);f.xp6(1),f.Oqu(t.userNamefieldErrorMsg)}}function $Z(n,e){1&n&&(f.TgZ(0,"div",15),f._uU(1," Atleast 3 characters required and no special character allowed. "),f.qZA())}function HZ(n,e){if(1&n&&(f.TgZ(0,"span",14),f._uU(1),f.qZA()),2&n){const t=f.oxw(2);f.xp6(1),f.Oqu(t.emailErrorMsg)}}function GZ(n,e){1&n&&(f.TgZ(0,"div",15),f._uU(1," Please Enter a valid Email Id. "),f.qZA())}function qZ(n,e){if(1&n&&(f.TgZ(0,"span",14),f._uU(1),f.qZA()),2&n){const t=f.oxw(2);f.xp6(1),f.Oqu(t.pwfieldErrorMsg)}}function zZ(n,e){1&n&&(f.TgZ(0,"div",15),f._uU(1," Password must contain more than 8 characters, 1 upper case letter,1 special character and a number. "),f.qZA())}function WZ(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",16)(1,"h1"),f._uU(2,"Sign Up"),f.qZA(),f.TgZ(3,"form",5)(4,"label",17),f._uU(5,"Username"),f.qZA(),f._UZ(6,"input",18),f.YNc(7,jZ,2,1,"span",8),f.YNc(8,$Z,2,0,"div",9),f.TgZ(9,"label",19),f._uU(10,"Email"),f.qZA(),f._UZ(11,"input",20),f.YNc(12,HZ,2,1,"span",8),f.YNc(13,GZ,2,0,"div",9),f.TgZ(14,"label",21),f._uU(15,"Password"),f.qZA(),f._UZ(16,"input",22),f.YNc(17,qZ,2,1,"span",8),f.YNc(18,zZ,2,0,"div",9),f.TgZ(19,"button",23),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();let s;return f.KtG(i.authService.SignUp(null==(s=i.signupForm.get("emailId"))?null:s.value,null==(s=i.signupForm.get("password"))?null:s.value))}),f._uU(20,"Sign Up"),f.qZA()(),f.TgZ(21,"p"),f._uU(22,"Already have an account? "),f.TgZ(23,"a",24),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.BackToLogin())}),f._uU(24,"Login"),f.qZA()()()}if(2&n){const t=f.oxw();let r,i,s;f.xp6(3),f.Q6J("formGroup",t.signupForm),f.xp6(4),f.Q6J("ngIf",null==(r=t.signupForm.get("username"))||null==r.errors?null:r.errors.required),f.xp6(1),f.Q6J("ngIf","INVALID"===(null==t.signupForm.controls.username?null:t.signupForm.controls.username.status)&&((null==t.signupForm.controls.username?null:t.signupForm.controls.username.touched)||(null==t.signupForm.controls.username?null:t.signupForm.controls.username.dirty))),f.xp6(4),f.Q6J("ngIf",null==(i=t.signupForm.get("emailId"))||null==i.errors?null:i.errors.required),f.xp6(1),f.Q6J("ngIf","INVALID"===(null==t.signupForm.controls.emailId?null:t.signupForm.controls.emailId.status)&&((null==t.signupForm.controls.emailId?null:t.signupForm.controls.emailId.touched)||(null==t.signupForm.controls.emailId?null:t.signupForm.controls.emailId.dirty))),f.xp6(4),f.Q6J("ngIf",null==(s=t.signupForm.get("password"))||null==s.errors?null:s.errors.required),f.xp6(1),f.Q6J("ngIf","INVALID"===(null==t.signupForm.controls.password?null:t.signupForm.controls.password.status)&&((null==t.signupForm.controls.password?null:t.signupForm.controls.password.touched)||(null==t.signupForm.controls.password?null:t.signupForm.controls.password.dirty)))}}function KZ(n,e){if(1&n){const t=f.EpF();f.ynx(0),f.TgZ(1,"div",25)(2,"div",26)(3,"div",27),f._uU(4," Hello, world! This is a toast message. "),f.qZA(),f.TgZ(5,"button",28),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.oncloseToaster())}),f.qZA()()(),f.BQk()}}let ZZ=(()=>{var n;class e{constructor(r,i,s){this.route=r,this.fb=i,this.authService=s,this.isSignUp=!1,this.userNameErrorMsg="",this.pwErrorMsg="",this.showToaster=!1,this.userNamefieldErrorMsg="",this.pwfieldErrorMsg="",this.emailErrorMsg=""}ngOnInit(){this.createLoginForm()}navigateToForm(){this.isSignUp=!0,this.createSignUpForm()}createLoginForm(){this.loginForm=this.fb.group({userName:["",[Os.required,,Os.email]],passWord:[null,[Os.required,Os.pattern(/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/),Os.minLength(8)]]})}createSignUpForm(){this.signupForm=this.fb.group({username:["",[Os.required,Os.pattern(/^[A-z0-9]*$/),Os.minLength(3)]],password:[null,[Os.required,Os.pattern(/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/),Os.minLength(8)]],emailId:[null,[Os.required,Os.email]]})}BackToLogin(){this.isSignUp=!1}onclickSignup(){this.signupForm.valid?(this.showToaster=!0,this.isSignUp=!1,this.signupForm.get("username"),this.signupForm.get("emailId"),this.signupForm.get("password")):(this.signupForm.get("username")?.errors?.required&&(this.userNamefieldErrorMsg="UserName is required"),this.signupForm.get("password")?.errors?.required&&(this.pwfieldErrorMsg="Password is required"),this.signupForm.get("emailId")?.errors?.required&&(this.emailErrorMsg="Email is required"))}oncloseToaster(){this.showToaster=!1}addUserProfile(r){}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(zr),f.Y36(IA),f.Y36(yD))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-login-page"]],decls:5,vars:3,consts:[[1,"container"],["class","form-container","id","login-form",4,"ngIf"],["class","form-container","id","signup-form",4,"ngIf"],[4,"ngIf"],["id","login-form",1,"form-container"],[3,"formGroup"],["for","username"],["type","text","id","username","name","username","placeholder","Enter your email","formControlName","userName"],["class","position-span",4,"ngIf"],["role","alert","class","alert alert-light",4,"ngIf"],["for","password"],["type","password","id","password","name","password","placeholder","Enter password","formControlName","passWord"],["type","submit",1,"margin-top",3,"ngClass","click"],["id","signup-link",1,"cursor-pointer",3,"click"],[1,"position-span"],["role","alert",1,"alert","alert-light"],["id","signup-form",1,"form-container"],["for","new-username"],["type","text","id","new-username","name","new-username","formControlName","username"],["for","new-email"],["type","email","id","new-email","name","new-email","formControlName","emailId"],["for","new-password"],["type","password","id","new-password","name","new-password","formControlName","password"],["type","submit",3,"click"],["id","login-link",1,"cursor-pointer",3,"click"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-bg-primary","border-0"],[1,"d-flex"],[1,"toast-body"],["type","button","data-bs-dismiss","toast","aria-label","Close",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"]],template:function(r,i){1&r&&(f.ynx(0),f.TgZ(1,"div",0),f.YNc(2,BZ,20,8,"div",1),f.YNc(3,WZ,25,7,"div",2),f.qZA(),f.BQk(),f.YNc(4,KZ,6,0,"ng-container",3)),2&r&&(f.xp6(2),f.Q6J("ngIf",!i.isSignUp),f.xp6(1),f.Q6J("ngIf",i.isSignUp),f.xp6(1),f.Q6J("ngIf",i.showToaster))},dependencies:[iu,zo,hw,qm,XD,JD,vs,_w],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;background-color:#222}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.form-container[_ngcontent-%COMP%]{width:600px;margin:0 auto;padding:50px;background-color:#333;border-radius:10px;box-shadow:0 0 10px #0003;color:#fff}h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;font-size:36px;color:#b38bff}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}label[_ngcontent-%COMP%]{margin-bottom:10px;font-size:18px}input[_ngcontent-%COMP%]{padding:12px;border:none;border-radius:5px;margin-bottom:20px;font-size:16px;color:#fff;background-color:#555}button[_ngcontent-%COMP%]{padding:10px;background-color:#b38bff;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:18px;transition:background-color .2s ease-in-out}button[_ngcontent-%COMP%]:hover{background-color:#8c5fb2}a[_ngcontent-%COMP%]{text-decoration:none;color:#b38bff;font-size:18px;transition:color .2s ease-in-out}a[_ngcontent-%COMP%]:hover{color:#8c5fb2}p[_ngcontent-%COMP%]{text-align:center;margin:8px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.error-msg[_ngcontent-%COMP%]{color:#fff}.margin-top[_ngcontent-%COMP%]{margin-top:2rem}.position-span[_ngcontent-%COMP%]{margin-left:21rem;margin-top:-1rem}"]}),e})();const QZ=[];let wG=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[kl.forChild(QZ),kl]}),e})();const YZ=[];let TG=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[kl.forChild(YZ),kl]}),e})(),XZ=(()=>{var n;class e{constructor(r,i){this.service=r,this.route=i,this.isRegisterFormView=!1,this.storage=MB(),this.img1=null}ngOnInit(){}gotoHome(){this.route.navigateByUrl("/sign-in")}gotoStay(){this.route.navigateByUrl("/view-articles")}gotoplaces(){this.route.navigateByUrl("/explore-places")}gotoContact(){this.route.navigateByUrl("/contact")}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(yD),f.Y36(zr))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-register-form"]],decls:150,vars:0,consts:[["role","navigation"],["id","menuToggle"],["type","checkbox"],["id","menu"],[1,"cursor",3,"click"],[2,"padding","4rem","margin-left","34rem"],[1,"container-sm","top"],["id","carouselExampleCaptions","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-indicators"],["type","button","data-bs-target","#carouselExampleCaptions","data-bs-slide-to","0","aria-current","true","aria-label","Slide 1",1,"active"],["type","button","data-bs-target","#carouselExampleCaptions","data-bs-slide-to","1","aria-label","Slide 2"],["type","button","data-bs-target","#carouselExampleCaptions","data-bs-slide-to","2","aria-label","Slide 3"],[1,"carousel-inner"],[1,"carousel-item","active"],["src","assets/Images/20200304141221_IMG_8739.jpg","alt","...",1,"d-block","w-100"],[1,"carousel-caption","d-none","d-md-block"],[1,"carousel-item"],["src","assets/Images/20200305170917_IMG_2773.jpg","alt","...",1,"d-block","w-100"],["src","assets/Images/20200305182704_IMG_2857.jpg","alt","...",1,"d-block","w-100"],["type","button","data-bs-target","#carouselExampleCaptions","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleCaptions","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],["id","accordionExample",1,"accordion","margin-top"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"accordion-button"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],["src","assets/Images/IMG_20200304_111824.jpg","alt","...",1,"img-thumbnail"],["src","assets/Images/IMG_20200304_171951.jpg","alt","...",1,"img-thumbnail"],["src","assets/Images/IMG_20200304_093954.jpg","alt","...",1,"img-thumbnail"],["src","assets/Images/IMG_20200304_172806.jpg","alt","...",1,"img-thumbnail"],["id","headingTwo",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","aria-labelledby","headingTwo","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],["src","assets/Images/IMG_20200305_140622.jpg","alt","...",1,"img-thumbnail"],["src","assets/Images/IMG_20200305_140607.jpg","alt","...",1,"img-thumbnail"],["src","assets/Images/IMG_20200305_151258_1.jpg","alt","...",1,"img-thumbnail"],["src","assets/Images/IMG_20200305_140933.jpg","alt","...",1,"img-thumbnail"],["id","headingThree",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseThree","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],["src","assets/Images/IMG_20200305_205858.jpg","alt","...",1,"img-thumbnail"],["src","assets/Images/IMG_20200306_203105.jpg","alt","...",1,"img-thumbnail"]],template:function(r,i){1&r&&(f.TgZ(0,"nav",0)(1,"div",1),f._UZ(2,"input",2)(3,"span")(4,"span")(5,"span"),f.TgZ(6,"ul",3)(7,"a",4),f.NdJ("click",function(){return i.gotoHome()}),f.TgZ(8,"li"),f._uU(9,"Home"),f.qZA()(),f.TgZ(10,"a",4),f.NdJ("click",function(){return i.gotoStay()}),f.TgZ(11,"li"),f._uU(12,"Explore Stay"),f.qZA()(),f.TgZ(13,"a",4),f.NdJ("click",function(){return i.gotoplaces()}),f.TgZ(14,"li"),f._uU(15,"Travel Records"),f.qZA()(),f.TgZ(16,"a",4),f.NdJ("click",function(){return i.gotoContact()}),f.TgZ(17,"li"),f._uU(18,"Contact"),f.qZA()()()()(),f.ynx(19),f.TgZ(20,"h1",5),f._uU(21,"Explore Places"),f.qZA(),f.TgZ(22,"div",6)(23,"div",7)(24,"div",8),f._UZ(25,"button",9)(26,"button",10)(27,"button",11),f.qZA(),f.TgZ(28,"div",12)(29,"div",13),f._UZ(30,"img",14),f.TgZ(31,"div",15)(32,"h5"),f._uU(33,"Echo Point, Munnar"),f.qZA(),f.TgZ(34,"p"),f._uU(35,"Where the soul finds it's peace"),f.qZA()()(),f.TgZ(36,"div",16),f._UZ(37,"img",17),f.TgZ(38,"div",15)(39,"h5"),f._uU(40,"Alleppey, Kerala"),f.qZA(),f.TgZ(41,"p"),f._uU(42,"The Venice of the East."),f.qZA()()(),f.TgZ(43,"div",16),f._UZ(44,"img",18),f.TgZ(45,"div",15)(46,"h5"),f._uU(47,"Cherai Beach, Kerala"),f.qZA(),f.TgZ(48,"p"),f._uU(49,"Sandy toes, sun-kissed nose!"),f.qZA()()()(),f.TgZ(50,"button",19),f._UZ(51,"span",20),f.TgZ(52,"span",21),f._uU(53,"Previous"),f.qZA()(),f.TgZ(54,"button",22),f._UZ(55,"span",23),f.TgZ(56,"span",21),f._uU(57,"Next"),f.qZA()()(),f.TgZ(58,"div",24)(59,"div",25)(60,"h2",26)(61,"button",27)(62,"strong"),f._uU(63,"Echo Point Munnar"),f.qZA()()(),f.TgZ(64,"div",28)(65,"div",29)(66,"h4"),f._uU(67,"Hello Everyone...."),f.qZA(),f._UZ(68,"br"),f.TgZ(69,"p"),f._uU(70,"How would you feel if someone up there responded to all your voices in the same manner you speak?"),f.qZA(),f.TgZ(71,"strong"),f._uU(72,"It appears to be intriguing.Isn't that right?"),f.qZA(),f.TgZ(73,"p"),f._uU(74,"Let's see what's in this spot that makes us feel really excited..."),f.qZA(),f._UZ(75,"br"),f.TgZ(76,"p"),f._uU(77," This is Munnar's Echo Point. The sounds carried through the reservoir here reverberate back into the surroundings, shattering the peaceful stillness of the hill station. This natural echo phenomenon earns this location the name \"Echo Station,\" and it is one of Munnar's most popular attractions. This tranquil location allows visitors to hear their own voice returning to them again and again.\n"),f.qZA(),f._UZ(78,"br")(79,"img",30)(80,"br")(81,"img",31),f.TgZ(82,"h4"),f._uU(83,"HighLights"),f.qZA(),f.TgZ(84,"p"),f._uU(85,"If you are a audacious person who enjoys new challenges and adventures, Echo Point is the go to destination. This place do offers other activities like trekking, nature walk, boating, etc. It is also a great place for "),f.TgZ(86,"strong"),f._uU(87,"nature lovers, photographers, and wildlife enthusiast"),f.qZA(),f._uU(88,", who takes pleasure in viewing the picturesque valleys of Munnar and capture the images of green hills, clad in tea plantations and spice gardens."),f.TgZ(89,"strong"),f._uU(90,"Neelakurinji flowers"),f.qZA(),f._uU(91,", which bloom only once in 12 years, also add a feather to the beauty of this point."),f.qZA(),f._UZ(92,"img",32)(93,"br")(94,"img",33),f.qZA()()(),f.TgZ(95,"div",25)(96,"h2",34)(97,"button",35)(98,"strong"),f._uU(99,"Alleppey,Kerala"),f.qZA()()(),f.TgZ(100,"div",36)(101,"div",29)(102,"strong"),f._uU(103,'"Backwaters, Beaches and Lagoons - Venice of the East"'),f.qZA(),f._UZ(104,"br"),f.TgZ(105,"p"),f._uU(106,"Yeah...You heared me right !"),f.qZA(),f._UZ(107,"br"),f.TgZ(108,"p"),f._uU(109,"Officially called Alappuzha, Alleppey is known for its network of canals and lagoons with beautiful backwaters and the houseboats offering overnight stays. Located in the southern part of Kerala, the coastline of Alleppey offers some of the best beaches with water sports during the dry season. Coupled with other beautiful places in Kerala like Munnar and Thekkady, Alleppey is often considered for a honeymoon or for a great family vacation."),f.qZA(),f._UZ(110,"br"),f.TgZ(111,"p"),f._uU(112,"Alappuzha (Alleppey) is referred to as "),f.TgZ(113,"strong"),f._uU(114,'"the Venice of the East."'),f.qZA(),f._uU(115," This picturesque site is the centre of Kerala's backwaters and is home to a vast network of backwaters and thousands of houseboats, making it one of the greatest tourist destinations in Alleppey."),f.qZA(),f._UZ(116,"img",37)(117,"br")(118,"img",38)(119,"br"),f.TgZ(120,"p"),f._uU(121,"The houseboats seen in Alappuzha's backwaters are a modernized version of the traditional Kettuvallams. Kettuvallam is a Malayalam word in which "),f.TgZ(122,"strong"),f._uU(123,"'Kettu'"),f.qZA(),f._uU(124," refers to living buildings and "),f.TgZ(125,"strong"),f._uU(126,"'Vallom'"),f.qZA(),f._uU(127," refers to boats. In the past, kettuvallams, or boats with thatched roofs that cover wooden hulls, were used to transport quantities of rice and spices."),f.qZA(),f._UZ(128,"br"),f.TgZ(129,"p"),f._uU(130,"There are plenty of houseboats, homestays, and rejuvenating Ayurvedic resorts that make staying in Alleppey brilliant. The houseboats pass through the serene backwaters, where you can catch glimpses of green paddy fields, choir-making activities, and witness the life of locals in Kerala."),f.qZA(),f._UZ(131,"img",39)(132,"br")(133,"img",40),f.qZA()()(),f.TgZ(134,"div",25)(135,"h2",41)(136,"button",42)(137,"strong"),f._uU(138,"Cherai Beach, Kerala."),f.qZA()()(),f.TgZ(139,"div",43)(140,"div",29)(141,"p"),f._uU(142,"Cherai beach, located near the northern end of Vypeen Island, is one of Kerala's most popular beaches. It is also linked to Kochi via waterways. This 10-kilometer-long beach, dotted with rocks and walled in by coconut trees, is ideal for weekend getaways away from the rush and bustle of city life."),f.qZA(),f.TgZ(143,"p"),f._uU(144,"Cherai Beach is one of the few spots where you can see both the backwaters and the sea in one shot. Swimming and other watersports are now possible due to the low tide and mild surf. "),f.qZA(),f.TgZ(145,"p"),f._uU(146," If you don't want to swim, you may sit back and enjoy the beautiful view of the sunset with wonderful cuisine and drinks. If you're lucky, you might even see dolphins!"),f.qZA(),f._UZ(147,"img",44)(148,"br")(149,"img",45),f.qZA()()()()(),f.BQk())},styles:[".margin-top[_ngcontent-%COMP%]{margin-top:4rem}.top[_ngcontent-%COMP%]{margin-top:8rem}body[_ngcontent-%COMP%]{margin:0;padding:0;background:#efefef;color:#333;font-family:Roboto,sans-serif;overflow-x:hidden}a[_ngcontent-%COMP%]{text-decoration:none!important;color:#232323;transition:color .3s ease}a[_ngcontent-%COMP%]:hover{color:#2ecc71}#menuToggle[_ngcontent-%COMP%]{display:block;position:absolute;top:50px;right:50px;z-index:1;-webkit-user-select:none;user-select:none}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:40px;height:32px;position:absolute;top:-7px;left:-5px;cursor:pointer;opacity:0;z-index:2;-webkit-touch-callout:none}#menuToggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:33px;height:4px;margin-bottom:5px;position:relative;background:#cdcdcd;border-radius:3px;z-index:1;transform-origin:4px 0px;transition:transform .5s cubic-bezier(.77,.2,.05,1),background .5s cubic-bezier(.77,.2,.05,1),opacity .55s ease}#menuToggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{transform-origin:0% 0%}#menuToggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-last-child(2){transform-origin:0% 100%}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]{opacity:1;transform:rotate(45deg) translate(-2px,-1px);background:#232323}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]:nth-last-child(3){opacity:0;transform:rotate(0) scale(.2)}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]:nth-last-child(2){opacity:1;transform:rotate(-45deg) translateY(-1px)}#menu[_ngcontent-%COMP%]{position:absolute;width:300px;margin:-100px 0 0;padding:125px 50px 50px;right:-100px;background:#ededed;list-style-type:none;-webkit-font-smoothing:antialiased;transform-origin:0% 0%;transform:translate(100%);transition:transform .5s cubic-bezier(.77,.2,.05,1)}#menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0;font-size:22px}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ ul[_ngcontent-%COMP%]{transform:scale(1);opacity:1}.cursor[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();function JZ(n,e){if(1&n&&(f.ynx(0),f.TgZ(1,"p"),f._uU(2,"We have sent a confirmation email to"),f.TgZ(3,"span"),f._uU(4),f.qZA()(),f._UZ(5,"hr"),f.TgZ(6,"p",7),f._uU(7,"Please check your email and click on the link to verfiy your email address."),f.qZA(),f.BQk()),2&n){const t=e.ngIf;f.xp6(4),f.Oqu(t.email)}}let eQ=(()=>{var n;class e{constructor(r,i){this.authService=r,this.route=i}openSignIn(){this.route.navigateByUrl("sign-in")}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(yD),f.Y36(zr))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-verify-email"]],decls:10,vars:1,consts:[["role","alert",1,"alert","alert-success"],[1,"alert-heading"],[4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-envelope"],["type","button",1,"btn","btn-secondary","btn-sm","margin-left",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left"],[1,"mb-0"]],template:function(r,i){1&r&&(f.TgZ(0,"div",0)(1,"h4",1),f._uU(2,"Thank You for Signing Up!"),f.qZA(),f.YNc(3,JZ,8,1,"ng-container",2),f.qZA(),f.TgZ(4,"button",3),f.NdJ("click",function(){return i.authService.SendVerificationMail()}),f._UZ(5,"i",4),f._uU(6," Resend Verification Email "),f.qZA(),f.TgZ(7,"button",5),f.NdJ("click",function(){return i.openSignIn()}),f._UZ(8,"i",6),f._uU(9," Go Back to SignIn "),f.qZA()),2&r&&(f.xp6(3),f.Q6J("ngIf",i.authService.userData))},dependencies:[zo],styles:[".margin-left[_ngcontent-%COMP%]{margin-left:4rem}"]}),e})();function tQ(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",14),f._UZ(1,"img",15),f.TgZ(2,"div",7)(3,"h5",8),f._uU(4),f.qZA(),f.TgZ(5,"p",9),f._uU(6),f.qZA(),f.TgZ(7,"button",16),f.NdJ("click",function(){const s=f.CHM(t).$implicit,u=f.oxw();return f.KtG(u.goToDetails(null==s?null:s.link))}),f._uU(8,"Learn More"),f.qZA()()()}if(2&n){const t=e.$implicit;f.xp6(1),f.Q6J("src",t.imgRef,f.LSH),f.xp6(3),f.Oqu(null==t?null:t.cardTitle),f.xp6(2),f.Oqu(null==t?null:t.cardDesc)}}let nQ=(()=>{var n;class e{constructor(r,i){this.route=r,this.service=i,this.isLogged=!1,this.openForm=new f.vpe,this.sampleData=[]}ngOnInit(){this.service.getStayDetails().then(r=>{this.sampleData=r})}goToDetails(r){window.open(r,"_blank")}goToPlaces(){this.route.navigateByUrl("/explore-places")}gotoHome(){this.route.navigateByUrl("/sign-in")}gotoStay(){this.route.navigateByUrl("/view-articles")}gotoplaces(){this.route.navigateByUrl("/explore-places")}gotoContact(){this.route.navigateByUrl("/contact")}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(zr),f.Y36(yD))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-cards"]],inputs:{isLogged:"isLogged"},outputs:{openForm:"openForm"},decls:32,vars:1,consts:[["role","navigation"],["id","menuToggle"],["type","checkbox"],["id","menu"],[1,"cursor",3,"click"],[1,"card","text-center"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["type","button",1,"btn","btn-info",3,"click"],[1,"container"],[1,"row","card-space"],["class","card crd",4,"ngFor","ngForOf"],[1,"card","crd"],["alt","image",1,"card-img-top",3,"src"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(r,i){1&r&&(f.TgZ(0,"nav",0)(1,"div",1),f._UZ(2,"input",2)(3,"span")(4,"span")(5,"span"),f.TgZ(6,"ul",3)(7,"a",4),f.NdJ("click",function(){return i.gotoHome()}),f.TgZ(8,"li"),f._uU(9,"Home"),f.qZA()(),f.TgZ(10,"a",4),f.NdJ("click",function(){return i.gotoStay()}),f.TgZ(11,"li"),f._uU(12,"Explore Stay"),f.qZA()(),f.TgZ(13,"a",4),f.NdJ("click",function(){return i.gotoplaces()}),f.TgZ(14,"li"),f._uU(15,"Travel Records"),f.qZA()(),f.TgZ(16,"a",4),f.NdJ("click",function(){return i.gotoContact()}),f.TgZ(17,"li"),f._uU(18,"Contact"),f.qZA()()()()(),f.TgZ(19,"div",5)(20,"div",6),f._uU(21," Welcome ! "),f.qZA(),f.TgZ(22,"div",7)(23,"h5",8),f._uU(24,"Exploring new horizons, one destination at a time."),f.qZA(),f.TgZ(25,"p",9),f._uU(26,"You will enrich your life immeasurably if you approach it with a sense of wonder and discovery, and always challenge yourself to try new things."),f.qZA(),f.TgZ(27,"button",10),f.NdJ("click",function(){return i.goToPlaces()}),f._uU(28,"Ready to Go"),f.qZA()()(),f.TgZ(29,"div",11)(30,"div",12),f.YNc(31,tQ,9,3,"div",13),f.qZA()()),2&r&&(f.xp6(31),f.Q6J("ngForOf",i.sampleData))},dependencies:[Xu],styles:[".card-space[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.crd[_ngcontent-%COMP%]{width:20rem;margin-top:2rem}body[_ngcontent-%COMP%]{margin:0;padding:0;background:#efefef;color:#333;font-family:Roboto,sans-serif;overflow-x:hidden}a[_ngcontent-%COMP%]{text-decoration:none!important;color:#232323;transition:color .3s ease}a[_ngcontent-%COMP%]:hover{color:#2ecc71}#menuToggle[_ngcontent-%COMP%]{display:block;position:absolute;top:50px;right:50px;z-index:1;-webkit-user-select:none;user-select:none}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:40px;height:32px;position:absolute;top:-7px;left:-5px;cursor:pointer;opacity:0;z-index:2;-webkit-touch-callout:none}#menuToggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:33px;height:4px;margin-bottom:5px;position:relative;background:#cdcdcd;border-radius:3px;z-index:1;transform-origin:4px 0px;transition:transform .5s cubic-bezier(.77,.2,.05,1),background .5s cubic-bezier(.77,.2,.05,1),opacity .55s ease}#menuToggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{transform-origin:0% 0%}#menuToggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-last-child(2){transform-origin:0% 100%}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]{opacity:1;transform:rotate(45deg) translate(-2px,-1px);background:#232323}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]:nth-last-child(3){opacity:0;transform:rotate(0) scale(.2)}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]:nth-last-child(2){opacity:1;transform:rotate(-45deg) translateY(-1px)}#menu[_ngcontent-%COMP%]{position:absolute;width:300px;margin:-100px 0 0;padding:125px 50px 50px;right:-100px;background:#ededed;list-style-type:none;-webkit-font-smoothing:antialiased;transform-origin:0% 0%;transform:translate(100%);transition:transform .5s cubic-bezier(.77,.2,.05,1)}#menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0;font-size:22px}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ ul[_ngcontent-%COMP%]{transform:scale(1);opacity:1}.cursor[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();function rQ(n,e){1&n&&(f.TgZ(0,"div",14),f._uU(1," Thanks for your Response! "),f.qZA())}const iQ=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:ZZ},{path:"view-articles",component:nQ},{path:"explore-places",component:XZ},{path:"verify-email",component:eQ},{path:"contact",component:(()=>{var n;class e{constructor(r,i){this.route=r,this.auth=i,this.userdesc="",this.userMail="",this.responseSent=!1}gotoHome(){this.route.navigateByUrl("/sign-in")}onSend(){this.auth.onSendContact({Mail:this.userMail,Comments:this.userdesc}).subscribe(i=>{console.log(i),i&&(this.userMail="",this.userdesc="",this.responseSent=!0)})}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(zr),f.Y36(yD))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-detail-card"]],decls:27,vars:3,consts:[[1,"card","bg-dark","text-white"],["src","assets/Images/business-office-flatlay-contact-us.jpg","alt","...",1,"card-img"],[1,"card-img-overlay"],[1,"card-title","color-title"],[1,"card-text","color"],["type","button",1,"btn","btn-dark",3,"click"],[1,"parent-class"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label"],["type","email","id","exampleFormControlInput1","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleFormControlTextarea1",1,"form-label"],["id","exampleFormControlTextarea1","rows","3",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],["role","alert",1,"alert","alert-success"]],template:function(r,i){1&r&&(f.TgZ(0,"div",0),f._UZ(1,"img",1),f.TgZ(2,"div",2)(3,"h5",3),f._uU(4,"Building a community !"),f.qZA(),f.TgZ(5,"p",4),f._uU(6,'"Alone, we can do so little; together, we can do so much\u201d'),f.qZA(),f.TgZ(7,"p",4),f._uU(8," \u2013 Helen Keller."),f.qZA(),f.TgZ(9,"button",5),f.NdJ("click",function(){return i.gotoHome()}),f._uU(10,"Home"),f.qZA()()(),f.TgZ(11,"div",6),f.YNc(12,rQ,2,0,"div",7),f.TgZ(13,"h1"),f._uU(14,"Contact"),f.qZA(),f.TgZ(15,"p"),f._uU(16," Stay touch with us. we'll be happy to help you."),f.qZA(),f.TgZ(17,"div",8)(18,"label",9),f._uU(19,"Your Email"),f.qZA(),f.TgZ(20,"input",10),f.NdJ("ngModelChange",function(u){return i.userMail=u}),f.qZA()(),f.TgZ(21,"div",8)(22,"label",11),f._uU(23,"Comments"),f.qZA(),f.TgZ(24,"textarea",12),f.NdJ("ngModelChange",function(u){return i.userdesc=u}),f.qZA()(),f.TgZ(25,"button",13),f.NdJ("click",function(){return i.onSend()}),f._uU(26,"Send"),f.qZA()()),2&r&&(f.xp6(12),f.Q6J("ngIf",i.responseSent),f.xp6(8),f.Q6J("ngModel",i.userMail),f.xp6(4),f.Q6J("ngModel",i.userdesc))},dependencies:[zo,qm,XD,Jm],styles:[".parent-class[_ngcontent-%COMP%]{margin-left:25rem;margin-top:4rem;width:50%;padding:20px}.color-title[_ngcontent-%COMP%]{color:#000;font-size:40px;font-weight:600;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}.color[_ngcontent-%COMP%]{color:#000;font-size:20px;font-weight:200}"]}),e})()}];let sQ=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[kl.forRoot(iQ),wG,TG,kl]}),e})(),oQ=(()=>{var n;class e{constructor(){this.title="Form-validation"}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&f._UZ(0,"router-outlet")},dependencies:[xm]}),e})(),aQ=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Ln,wG,Rw]}),e})(),uQ=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Ln,r_,TG,aQ,Rw]}),e})(),cQ=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[oQ]}),n.\u0275inj=f.cJS({imports:[dl,sQ,uQ,dl,xZ,Uc.hO.initializeApp(JU_firebase),ZK]}),e})();Xn().bootstrapModule(cQ).catch(n=>console.error(n))},5619:(Et,Me,O)=>{O.d(Me,{X:()=>te});var f=O(8645);class te extends f.x{constructor(J){super(),this._value=J}get value(){return this.getValue()}_subscribe(J){const oe=super._subscribe(J);return!oe.closed&&J.next(this._value),oe}getValue(){const{hasError:J,thrownError:oe,_value:ve}=this;if(J)throw oe;return this._throwIfClosed(),ve}next(J){super.next(this._value=J)}}},5592:(Et,Me,O)=>{O.d(Me,{y:()=>Le});var f=O(305),te=O(7394),L=O(4850),J=O(8407),oe=O(2653),ve=O(4674),Ee=O(1441);let Le=(()=>{class re{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const et=new re;return et.source=this,et.operator=Oe,et}subscribe(Oe,et,Ve){const tt=function G(re){return re&&re instanceof f.Lv||function U(re){return re&&(0,ve.m)(re.next)&&(0,ve.m)(re.error)&&(0,ve.m)(re.complete)}(re)&&(0,te.Nn)(re)}(Oe)?Oe:new f.Hp(Oe,et,Ve);return(0,Ee.x)(()=>{const{operator:Ue,source:bt}=this;tt.add(Ue?Ue.call(tt,bt):bt?this._subscribe(tt):this._trySubscribe(tt))}),tt}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(et){Oe.error(et)}}forEach(Oe,et){return new(et=fe(et))((Ve,tt)=>{const Ue=new f.Hp({next:bt=>{try{Oe(bt)}catch(wt){tt(wt),Ue.unsubscribe()}},error:tt,complete:Ve});this.subscribe(Ue)})}_subscribe(Oe){var et;return null===(et=this.source)||void 0===et?void 0:et.subscribe(Oe)}[L.L](){return this}pipe(...Oe){return(0,J.U)(Oe)(this)}toPromise(Oe){return new(Oe=fe(Oe))((et,Ve)=>{let tt;this.subscribe(Ue=>tt=Ue,Ue=>Ve(Ue),()=>et(tt))})}}return re.create=We=>new re(We),re})();function fe(re){var We;return null!==(We=re??oe.config.Promise)&&void 0!==We?We:Promise}},8645:(Et,Me,O)=>{O.d(Me,{x:()=>Ee});var f=O(5592),te=O(7394);const J=(0,O(2306).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=O(9039),ve=O(1441);let Ee=(()=>{class fe extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const re=new Le(this,this);return re.operator=G,re}_throwIfClosed(){if(this.closed)throw new J}next(G){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const re of this.currentObservers)re.next(G)}})}error(G){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:re}=this;for(;re.length;)re.shift().error(G)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:re,isStopped:We,observers:Oe}=this;return re||We?te.Lc:(this.currentObservers=null,Oe.push(G),new te.w0(()=>{this.currentObservers=null,(0,oe.P)(Oe,G)}))}_checkFinalizedStatuses(G){const{hasError:re,thrownError:We,isStopped:Oe}=this;re?G.error(We):Oe&&G.complete()}asObservable(){const G=new f.y;return G.source=this,G}}return fe.create=(U,G)=>new Le(U,G),fe})();class Le extends Ee{constructor(U,G){super(),this.destination=U,this.source=G}next(U){var G,re;null===(re=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===re||re.call(G,U)}error(U){var G,re;null===(re=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===re||re.call(G,U)}complete(){var U,G;null===(G=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===G||G.call(U)}_subscribe(U){var G,re;return null!==(re=null===(G=this.source)||void 0===G?void 0:G.subscribe(U))&&void 0!==re?re:te.Lc}}},305:(Et,Me,O)=>{O.d(Me,{Hp:()=>Ve,Lv:()=>re});var f=O(4674),te=O(7394),L=O(2653),J=O(3894),oe=O(2420);const ve=fe("C",void 0,void 0);function fe(ue,Ae,se){return{kind:ue,value:Ae,error:se}}var U=O(7599),G=O(1441);class re extends te.w0{constructor(Ae){super(),this.isStopped=!1,Ae?(this.destination=Ae,(0,te.Nn)(Ae)&&Ae.add(this)):this.destination=wt}static create(Ae,se,xe){return new Ve(Ae,se,xe)}next(Ae){this.isStopped?bt(function Le(ue){return fe("N",ue,void 0)}(Ae),this):this._next(Ae)}error(Ae){this.isStopped?bt(function Ee(ue){return fe("E",void 0,ue)}(Ae),this):(this.isStopped=!0,this._error(Ae))}complete(){this.isStopped?bt(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ae){this.destination.next(Ae)}_error(Ae){try{this.destination.error(Ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Oe(ue,Ae){return We.call(ue,Ae)}class et{constructor(Ae){this.partialObserver=Ae}next(Ae){const{partialObserver:se}=this;if(se.next)try{se.next(Ae)}catch(xe){tt(xe)}}error(Ae){const{partialObserver:se}=this;if(se.error)try{se.error(Ae)}catch(xe){tt(xe)}else tt(Ae)}complete(){const{partialObserver:Ae}=this;if(Ae.complete)try{Ae.complete()}catch(se){tt(se)}}}class Ve extends re{constructor(Ae,se,xe){let He;if(super(),(0,f.m)(Ae)||!Ae)He={next:Ae??void 0,error:se??void 0,complete:xe??void 0};else{let de;this&&L.config.useDeprecatedNextContext?(de=Object.create(Ae),de.unsubscribe=()=>this.unsubscribe(),He={next:Ae.next&&Oe(Ae.next,de),error:Ae.error&&Oe(Ae.error,de),complete:Ae.complete&&Oe(Ae.complete,de)}):He=Ae}this.destination=new et(He)}}function tt(ue){L.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(ue):(0,J.h)(ue)}function bt(ue,Ae){const{onStoppedNotification:se}=L.config;se&&U.z.setTimeout(()=>se(ue,Ae))}const wt={closed:!0,next:oe.Z,error:function Ue(ue){throw ue},complete:oe.Z}},7394:(Et,Me,O)=>{O.d(Me,{Lc:()=>ve,w0:()=>oe,Nn:()=>Ee});var f=O(4674);const L=(0,O(2306).d)(fe=>function(G){fe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((re,We)=>`${We+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var J=O(9039);class oe{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Oe of G)Oe.remove(this);else G.remove(this);const{initialTeardown:re}=this;if((0,f.m)(re))try{re()}catch(Oe){U=Oe instanceof L?Oe.errors:[Oe]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Oe of We)try{Le(Oe)}catch(et){U=U??[],et instanceof L?U=[...U,...et.errors]:U.push(et)}}if(U)throw new L(U)}}add(U){var G;if(U&&U!==this)if(this.closed)Le(U);else{if(U instanceof oe){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(U)}}_hasParent(U){const{_parentage:G}=this;return G===U||Array.isArray(G)&&G.includes(U)}_addParent(U){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(U),G):G?[G,U]:U}_removeParent(U){const{_parentage:G}=this;G===U?this._parentage=null:Array.isArray(G)&&(0,J.P)(G,U)}remove(U){const{_finalizers:G}=this;G&&(0,J.P)(G,U),U instanceof oe&&U._removeParent(this)}}oe.EMPTY=(()=>{const fe=new oe;return fe.closed=!0,fe})();const ve=oe.EMPTY;function Ee(fe){return fe instanceof oe||fe&&"closed"in fe&&(0,f.m)(fe.remove)&&(0,f.m)(fe.add)&&(0,f.m)(fe.unsubscribe)}function Le(fe){(0,f.m)(fe)?fe():fe.unsubscribe()}},2653:(Et,Me,O)=>{O.d(Me,{config:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(Et,Me,O)=>{O.d(Me,{E:()=>te});const te=new(O(5592).y)(oe=>oe.complete())},2459:(Et,Me,O)=>{O.d(Me,{D:()=>Ae});var f=O(4829),te=O(3093),L=O(5137),ve=O(5592),Le=O(4971),fe=O(4674),U=O(7103);function re(se,xe){if(!se)throw new Error("Iterable cannot be null");return new ve.y(He=>{(0,U.f)(He,xe,()=>{const de=se[Symbol.asyncIterator]();(0,U.f)(He,xe,()=>{de.next().then(Q=>{Q.done?He.complete():He.next(Q.value)})},0,!0)})})}var We=O(8382),Oe=O(4026),et=O(4266),Ve=O(3664),tt=O(5726),Ue=O(9853),bt=O(541);function Ae(se,xe){return xe?function ue(se,xe){if(null!=se){if((0,We.c)(se))return function J(se,xe){return(0,f.Xf)(se).pipe((0,L.R)(xe),(0,te.Q)(xe))}(se,xe);if((0,et.z)(se))return function Ee(se,xe){return new ve.y(He=>{let de=0;return xe.schedule(function(){de===se.length?He.complete():(He.next(se[de++]),He.closed||this.schedule())})})}(se,xe);if((0,Oe.t)(se))return function oe(se,xe){return(0,f.Xf)(se).pipe((0,L.R)(xe),(0,te.Q)(xe))}(se,xe);if((0,tt.D)(se))return re(se,xe);if((0,Ve.T)(se))return function G(se,xe){return new ve.y(He=>{let de;return(0,U.f)(He,xe,()=>{de=se[Le.h](),(0,U.f)(He,xe,()=>{let Q,Qe;try{({value:Q,done:Qe}=de.next())}catch(Dt){return void He.error(Dt)}Qe?He.complete():He.next(Q)},0,!0)}),()=>(0,fe.m)(de?.return)&&de.return()})}(se,xe);if((0,bt.L)(se))return function wt(se,xe){return re((0,bt.Q)(se),xe)}(se,xe)}throw(0,Ue.z)(se)}(se,xe):(0,f.Xf)(se)}},4829:(Et,Me,O)=>{O.d(Me,{Xf:()=>We});var f=O(7582),te=O(4266),L=O(4026),J=O(5592),oe=O(8382),ve=O(5726),Ee=O(9853),Le=O(3664),fe=O(541),U=O(4674),G=O(3894),re=O(4850);function We(ue){if(ue instanceof J.y)return ue;if(null!=ue){if((0,oe.c)(ue))return function Oe(ue){return new J.y(Ae=>{const se=ue[re.L]();if((0,U.m)(se.subscribe))return se.subscribe(Ae);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ue);if((0,te.z)(ue))return function et(ue){return new J.y(Ae=>{for(let se=0;se<ue.length&&!Ae.closed;se++)Ae.next(ue[se]);Ae.complete()})}(ue);if((0,L.t)(ue))return function Ve(ue){return new J.y(Ae=>{ue.then(se=>{Ae.closed||(Ae.next(se),Ae.complete())},se=>Ae.error(se)).then(null,G.h)})}(ue);if((0,ve.D)(ue))return Ue(ue);if((0,Le.T)(ue))return function tt(ue){return new J.y(Ae=>{for(const se of ue)if(Ae.next(se),Ae.closed)return;Ae.complete()})}(ue);if((0,fe.L)(ue))return function bt(ue){return Ue((0,fe.Q)(ue))}(ue)}throw(0,Ee.z)(ue)}function Ue(ue){return new J.y(Ae=>{(function wt(ue,Ae){var se,xe,He,de;return(0,f.mG)(this,void 0,void 0,function*(){try{for(se=(0,f.KL)(ue);!(xe=yield se.next()).done;)if(Ae.next(xe.value),Ae.closed)return}catch(Q){He={error:Q}}finally{try{xe&&!xe.done&&(de=se.return)&&(yield de.call(se))}finally{if(He)throw He.error}}Ae.complete()})})(ue,Ae).catch(se=>Ae.error(se))})}},3019:(Et,Me,O)=>{O.d(Me,{T:()=>ve});var f=O(7537),te=O(4829),L=O(6232),J=O(4564),oe=O(2459);function ve(...Ee){const Le=(0,J.yG)(Ee),fe=(0,J._6)(Ee,1/0),U=Ee;return U.length?1===U.length?(0,te.Xf)(U[0]):(0,f.J)(fe)((0,oe.D)(U,Le)):L.E}},2096:(Et,Me,O)=>{O.d(Me,{of:()=>L});var f=O(4564),te=O(2459);function L(...J){const oe=(0,f.yG)(J);return(0,te.D)(J,oe)}},8251:(Et,Me,O)=>{O.d(Me,{x:()=>te});var f=O(305);function te(J,oe,ve,Ee,Le){return new L(J,oe,ve,Ee,Le)}class L extends f.Lv{constructor(oe,ve,Ee,Le,fe,U){super(oe),this.onFinalize=fe,this.shouldUnsubscribe=U,this._next=ve?function(G){try{ve(G)}catch(re){oe.error(re)}}:super._next,this._error=Le?function(G){try{Le(G)}catch(re){oe.error(re)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(G){oe.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},3997:(Et,Me,O)=>{O.d(Me,{x:()=>J});var f=O(2737),te=O(9360),L=O(8251);function J(ve,Ee=f.y){return ve=ve??oe,(0,te.e)((Le,fe)=>{let U,G=!0;Le.subscribe((0,L.x)(fe,re=>{const We=Ee(re);(G||!ve(U,We))&&(G=!1,U=We,fe.next(re))}))})}function oe(ve,Ee){return ve===Ee}},7398:(Et,Me,O)=>{O.d(Me,{U:()=>L});var f=O(9360),te=O(8251);function L(J,oe){return(0,f.e)((ve,Ee)=>{let Le=0;ve.subscribe((0,te.x)(Ee,fe=>{Ee.next(J.call(oe,fe,Le++))}))})}},7537:(Et,Me,O)=>{O.d(Me,{J:()=>L});var f=O(1631),te=O(2737);function L(J=1/0){return(0,f.z)(te.y,J)}},1631:(Et,Me,O)=>{O.d(Me,{z:()=>Le});var f=O(7398),te=O(4829),L=O(9360),J=O(7103),oe=O(8251),Ee=O(4674);function Le(fe,U,G=1/0){return(0,Ee.m)(U)?Le((re,We)=>(0,f.U)((Oe,et)=>U(re,Oe,We,et))((0,te.Xf)(fe(re,We))),G):("number"==typeof U&&(G=U),(0,L.e)((re,We)=>function ve(fe,U,G,re,We,Oe,et,Ve){const tt=[];let Ue=0,bt=0,wt=!1;const ue=()=>{wt&&!tt.length&&!Ue&&U.complete()},Ae=xe=>Ue<re?se(xe):tt.push(xe),se=xe=>{Oe&&U.next(xe),Ue++;let He=!1;(0,te.Xf)(G(xe,bt++)).subscribe((0,oe.x)(U,de=>{We?.(de),Oe?Ae(de):U.next(de)},()=>{He=!0},void 0,()=>{if(He)try{for(Ue--;tt.length&&Ue<re;){const de=tt.shift();et?(0,J.f)(U,et,()=>se(de)):se(de)}ue()}catch(de){U.error(de)}}))};return fe.subscribe((0,oe.x)(U,Ae,()=>{wt=!0,ue()})),()=>{Ve?.()}}(re,We,fe,G)))}},3093:(Et,Me,O)=>{O.d(Me,{Q:()=>J});var f=O(7103),te=O(9360),L=O(8251);function J(oe,ve=0){return(0,te.e)((Ee,Le)=>{Ee.subscribe((0,L.x)(Le,fe=>(0,f.f)(Le,oe,()=>Le.next(fe),ve),()=>(0,f.f)(Le,oe,()=>Le.complete(),ve),fe=>(0,f.f)(Le,oe,()=>Le.error(fe),ve)))})}},3020:(Et,Me,O)=>{O.d(Me,{B:()=>oe});var f=O(4829),te=O(8645),L=O(305),J=O(9360);function oe(Ee={}){const{connector:Le=(()=>new te.x),resetOnError:fe=!0,resetOnComplete:U=!0,resetOnRefCountZero:G=!0}=Ee;return re=>{let We,Oe,et,Ve=0,tt=!1,Ue=!1;const bt=()=>{Oe?.unsubscribe(),Oe=void 0},wt=()=>{bt(),We=et=void 0,tt=Ue=!1},ue=()=>{const Ae=We;wt(),Ae?.unsubscribe()};return(0,J.e)((Ae,se)=>{Ve++,!Ue&&!tt&&bt();const xe=et=et??Le();se.add(()=>{Ve--,0===Ve&&!Ue&&!tt&&(Oe=ve(ue,G))}),xe.subscribe(se),!We&&Ve>0&&(We=new L.Hp({next:He=>xe.next(He),error:He=>{Ue=!0,bt(),Oe=ve(wt,fe,He),xe.error(He)},complete:()=>{tt=!0,bt(),Oe=ve(wt,U),xe.complete()}}),(0,f.Xf)(Ae).subscribe(We))})(re)}}function ve(Ee,Le,...fe){if(!0===Le)return void Ee();if(!1===Le)return;const U=new L.Hp({next:()=>{U.unsubscribe(),Ee()}});return(0,f.Xf)(Le(...fe)).subscribe(U)}},5137:(Et,Me,O)=>{O.d(Me,{R:()=>te});var f=O(9360);function te(L,J=0){return(0,f.e)((oe,ve)=>{ve.add(L.schedule(()=>oe.subscribe(ve),J))})}},4664:(Et,Me,O)=>{O.d(Me,{w:()=>J});var f=O(4829),te=O(9360),L=O(8251);function J(oe,ve){return(0,te.e)((Ee,Le)=>{let fe=null,U=0,G=!1;const re=()=>G&&!fe&&Le.complete();Ee.subscribe((0,L.x)(Le,We=>{fe?.unsubscribe();let Oe=0;const et=U++;(0,f.Xf)(oe(We,et)).subscribe(fe=(0,L.x)(Le,Ve=>Le.next(ve?ve(We,Ve,et,Oe++):Ve),()=>{fe=null,re()}))},()=>{G=!0,re()}))})}},9397:(Et,Me,O)=>{O.d(Me,{b:()=>oe});var f=O(4674),te=O(9360),L=O(8251),J=O(2737);function oe(ve,Ee,Le){const fe=(0,f.m)(ve)||Ee||Le?{next:ve,error:Ee,complete:Le}:ve;return fe?(0,te.e)((U,G)=>{var re;null===(re=fe.subscribe)||void 0===re||re.call(fe);let We=!0;U.subscribe((0,L.x)(G,Oe=>{var et;null===(et=fe.next)||void 0===et||et.call(fe,Oe),G.next(Oe)},()=>{var Oe;We=!1,null===(Oe=fe.complete)||void 0===Oe||Oe.call(fe),G.complete()},Oe=>{var et;We=!1,null===(et=fe.error)||void 0===et||et.call(fe,Oe),G.error(Oe)},()=>{var Oe,et;We&&(null===(Oe=fe.unsubscribe)||void 0===Oe||Oe.call(fe)),null===(et=fe.finalize)||void 0===et||et.call(fe)}))}):J.y}},1954:(Et,Me,O)=>{O.d(Me,{o:()=>oe});var f=O(7394);class te extends f.w0{constructor(Ee,Le){super()}schedule(Ee,Le=0){return this}}const L={setInterval(ve,Ee,...Le){const{delegate:fe}=L;return fe?.setInterval?fe.setInterval(ve,Ee,...Le):setInterval(ve,Ee,...Le)},clearInterval(ve){const{delegate:Ee}=L;return(Ee?.clearInterval||clearInterval)(ve)},delegate:void 0};var J=O(9039);class oe extends te{constructor(Ee,Le){super(Ee,Le),this.scheduler=Ee,this.work=Le,this.pending=!1}schedule(Ee,Le=0){var fe;if(this.closed)return this;this.state=Ee;const U=this.id,G=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(G,U,Le)),this.pending=!0,this.delay=Le,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(G,this.id,Le),this}requestAsyncId(Ee,Le,fe=0){return L.setInterval(Ee.flush.bind(Ee,this),fe)}recycleAsyncId(Ee,Le,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return Le;null!=Le&&L.clearInterval(Le)}execute(Ee,Le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(Ee,Le);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ee,Le){let U,fe=!1;try{this.work(Ee)}catch(G){fe=!0,U=G||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:Ee,scheduler:Le}=this,{actions:fe}=Le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,J.P)(fe,this),null!=Ee&&(this.id=this.recycleAsyncId(Le,Ee,null)),this.delay=null,super.unsubscribe()}}}},2631:(Et,Me,O)=>{O.d(Me,{v:()=>L});var f=O(4552);class te{constructor(oe,ve=te.now){this.schedulerActionCtor=oe,this.now=ve}schedule(oe,ve=0,Ee){return new this.schedulerActionCtor(this,oe).schedule(Ee,ve)}}te.now=f.l.now;class L extends te{constructor(oe,ve=te.now){super(oe,ve),this.actions=[],this._active=!1}flush(oe){const{actions:ve}=this;if(this._active)return void ve.push(oe);let Ee;this._active=!0;do{if(Ee=oe.execute(oe.state,oe.delay))break}while(oe=ve.shift());if(this._active=!1,Ee){for(;oe=ve.shift();)oe.unsubscribe();throw Ee}}}},6321:(Et,Me,O)=>{O.d(Me,{z:()=>L});var f=O(1954);const L=new(O(2631).v)(f.o)},4552:(Et,Me,O)=>{O.d(Me,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},7599:(Et,Me,O)=>{O.d(Me,{z:()=>f});const f={setTimeout(te,L,...J){const{delegate:oe}=f;return oe?.setTimeout?oe.setTimeout(te,L,...J):setTimeout(te,L,...J)},clearTimeout(te){const{delegate:L}=f;return(L?.clearTimeout||clearTimeout)(te)},delegate:void 0}},4971:(Et,Me,O)=>{O.d(Me,{h:()=>te});const te=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Et,Me,O)=>{O.d(Me,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(Et,Me,O)=>{O.d(Me,{_6:()=>ve,jO:()=>J,yG:()=>oe});var f=O(4674);function L(Ee){return Ee[Ee.length-1]}function J(Ee){return(0,f.m)(L(Ee))?Ee.pop():void 0}function oe(Ee){return function te(Ee){return Ee&&(0,f.m)(Ee.schedule)}(L(Ee))?Ee.pop():void 0}function ve(Ee,Le){return"number"==typeof L(Ee)?Ee.pop():Le}},9039:(Et,Me,O)=>{function f(te,L){if(te){const J=te.indexOf(L);0<=J&&te.splice(J,1)}}O.d(Me,{P:()=>f})},2306:(Et,Me,O)=>{function f(te){const J=te(oe=>{Error.call(oe),oe.stack=(new Error).stack});return J.prototype=Object.create(Error.prototype),J.prototype.constructor=J,J}O.d(Me,{d:()=>f})},1441:(Et,Me,O)=>{O.d(Me,{O:()=>J,x:()=>L});var f=O(2653);let te=null;function L(oe){if(f.config.useDeprecatedSynchronousErrorHandling){const ve=!te;if(ve&&(te={errorThrown:!1,error:null}),oe(),ve){const{errorThrown:Ee,error:Le}=te;if(te=null,Ee)throw Le}}else oe()}function J(oe){f.config.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=oe)}},7103:(Et,Me,O)=>{function f(te,L,J,oe=0,ve=!1){const Ee=L.schedule(function(){J(),ve?te.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(te.add(Ee),!ve)return Ee}O.d(Me,{f:()=>f})},2737:(Et,Me,O)=>{function f(te){return te}O.d(Me,{y:()=>f})},4266:(Et,Me,O)=>{O.d(Me,{z:()=>f});const f=te=>te&&"number"==typeof te.length&&"function"!=typeof te},5726:(Et,Me,O)=>{O.d(Me,{D:()=>te});var f=O(4674);function te(L){return Symbol.asyncIterator&&(0,f.m)(L?.[Symbol.asyncIterator])}},4674:(Et,Me,O)=>{function f(te){return"function"==typeof te}O.d(Me,{m:()=>f})},8382:(Et,Me,O)=>{O.d(Me,{c:()=>L});var f=O(4850),te=O(4674);function L(J){return(0,te.m)(J[f.L])}},3664:(Et,Me,O)=>{O.d(Me,{T:()=>L});var f=O(4971),te=O(4674);function L(J){return(0,te.m)(J?.[f.h])}},4026:(Et,Me,O)=>{O.d(Me,{t:()=>te});var f=O(4674);function te(L){return(0,f.m)(L?.then)}},541:(Et,Me,O)=>{O.d(Me,{L:()=>J,Q:()=>L});var f=O(7582),te=O(4674);function L(oe){return(0,f.FC)(this,arguments,function*(){const Ee=oe.getReader();try{for(;;){const{value:Le,done:fe}=yield(0,f.qq)(Ee.read());if(fe)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(Le)}}finally{Ee.releaseLock()}})}function J(oe){return(0,te.m)(oe?.getReader)}},9360:(Et,Me,O)=>{O.d(Me,{A:()=>te,e:()=>L});var f=O(4674);function te(J){return(0,f.m)(J?.lift)}function L(J){return oe=>{if(te(oe))return oe.lift(function(ve){try{return J(ve,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(Et,Me,O)=>{function f(){}O.d(Me,{Z:()=>f})},8407:(Et,Me,O)=>{O.d(Me,{U:()=>L,z:()=>te});var f=O(2737);function te(...J){return L(J)}function L(J){return 0===J.length?f.y:1===J.length?J[0]:function(ve){return J.reduce((Ee,Le)=>Le(Ee),ve)}}},3894:(Et,Me,O)=>{O.d(Me,{h:()=>L});var f=O(2653),te=O(7599);function L(J){te.z.setTimeout(()=>{const{onUnhandledError:oe}=f.config;if(!oe)throw J;oe(J)})}},9853:(Et,Me,O)=>{function f(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Me,{z:()=>f})},5879:(Et,Me,O)=>{O.d(Me,{$8M:()=>Xd,$WT:()=>Wo,$Z:()=>uw,AFp:()=>Ol,AaK:()=>re,BQk:()=>v_,CHM:()=>ll,CRH:()=>WT,EJc:()=>vN,EpF:()=>oI,F4k:()=>Hp,FYo:()=>MP,FiY:()=>nh,GfV:()=>NP,Gpc:()=>et,HDt:()=>vg,JOm:()=>Sm,KtG:()=>qf,LFG:()=>Bt,LSH:()=>jD,Lbi:()=>Cv,Lck:()=>Ki,MMx:()=>Zi,MR2:()=>q0,NdJ:()=>aI,Ojb:()=>DP,OlP:()=>kn,Oqu:()=>mI,P3R:()=>$0,PXZ:()=>Ex,Q6J:()=>iI,QGY:()=>$p,Qsj:()=>l2,R0b:()=>us,RDi:()=>k0,Rgc:()=>sg,SBq:()=>Ch,Sil:()=>ub,Suo:()=>Vs,TTD:()=>pu,TgZ:()=>Gl,VKq:()=>tg,VuI:()=>BN,X6Q:()=>xN,XFs:()=>Mt,Xpm:()=>Hc,Xq5:()=>Kv,Xts:()=>Iv,Y36:()=>xp,YKP:()=>NI,YNc:()=>m_,Yjl:()=>Dd,Yz7:()=>Tt,Z0I:()=>yn,ZZ4:()=>oy,_Bn:()=>NT,_UZ:()=>ss,_c5:()=>VN,_uU:()=>eS,aQg:()=>cE,c2e:()=>ZI,cJS:()=>Fn,cg1:()=>Qp,dDg:()=>AN,dqk:()=>gn,eFA:()=>wx,eJc:()=>dg,ekj:()=>aT,eoX:()=>vx,f3M:()=>Wt,g9A:()=>GD,h0i:()=>Hh,hGG:()=>Nx,iGM:()=>qu,ifc:()=>xs,ip1:()=>ix,jDz:()=>kT,kL8:()=>Fh,lG2:()=>ou,lqb:()=>xu,lri:()=>yx,n5z:()=>_c,oAB:()=>ec,oxw:()=>Jw,q4F:()=>kP,qFp:()=>HN,qLn:()=>Dp,qOj:()=>Nw,qZA:()=>__,rWj:()=>mb,rg0:()=>il,sBO:()=>PN,s_b:()=>Kh,soG:()=>z_,tb:()=>tE,tp0:()=>tp,uIk:()=>u_,vHH:()=>ue,vpe:()=>Jt,wAp:()=>zl,xp6:()=>Sp,ynx:()=>Bp,z2F:()=>Kr,zSh:()=>kl,zs3:()=>ro});var f=O(8645),te=O(7394),L=O(5619),J=O(5592),oe=O(3019),ve=O(2096),Ee=O(3020),Le=O(4664),fe=O(3997);function U(o){for(let a in o)if(o[a]===U)return a;throw Error("Could not find renamed property on target object.")}function G(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function re(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(re).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function We(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const Oe=U({__forward_ref__:U});function et(o){return o.__forward_ref__=et,o.toString=function(){return re(this())},o}function Ve(o){return tt(o)?o():o}function tt(o){return"function"==typeof o&&o.hasOwnProperty(Oe)&&o.__forward_ref__===et}function Ue(o){return o&&!!o.\u0275providers}const wt="https://g.co/ng/security#xss";class ue extends Error{constructor(a,c){super(function Ae(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,c)),this.code=a}}function se(o){return"string"==typeof o?o:null==o?"":String(o)}function Qe(o,a){throw new ue(-201,!1)}function it(o,a){null==o&&function Je(o,a,c,l){throw new Error(`ASSERTION ERROR: ${o}`+(null==l?"":` [Expected=> ${c} ${l} ${a} <=Actual]`))}(a,o,null,"!=")}function Tt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Fn(o){return{providers:o.providers||[],imports:o.imports||[]}}function ir(o){return Yr(o,sr)||Yr(o,po)}function yn(o){return null!==ir(o)}function Yr(o,a){return o.hasOwnProperty(a)?o[a]:null}function Yi(o){return o&&(o.hasOwnProperty(Fi)||o.hasOwnProperty(ha))?o[Fi]:null}const sr=U({\u0275prov:U}),Fi=U({\u0275inj:U}),po=U({ngInjectableDef:U}),ha=U({ngInjectorDef:U});var Mt=function(o){return o[o.Default=0]="Default",o[o.Host=1]="Host",o[o.Self=2]="Self",o[o.SkipSelf=4]="SkipSelf",o[o.Optional=8]="Optional",o}(Mt||{});let Ut;function An(o){const a=Ut;return Ut=o,a}function Un(o,a,c){const l=ir(o);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:c&Mt.Optional?null:void 0!==a?a:void Qe(re(o))}const gn=globalThis,Xe={},st="__NG_DI_FLAG__",At="ngTempTokenPath",$=/\n/gm,Y="__source";let Pe;function dt(o){const a=Pe;return Pe=o,a}function zt(o,a=Mt.Default){if(void 0===Pe)throw new ue(-203,!1);return null===Pe?Un(o,void 0,a):Pe.get(o,a&Mt.Optional?null:void 0,a)}function Bt(o,a=Mt.Default){return(function qt(){return Ut}()||zt)(Ve(o),a)}function Wt(o,a=Mt.Default){return Bt(o,dr(a))}function dr(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function hn(o){const a=[];for(let c=0;c<o.length;c++){const l=Ve(o[c]);if(Array.isArray(l)){if(0===l.length)throw new ue(900,!1);let h,m=Mt.Default;for(let v=0;v<l.length;v++){const T=l[v],C=Ho(T);"number"==typeof C?-1===C?h=T.token:m|=C:h=T}a.push(Bt(h,m))}else a.push(Bt(l))}return a}function jr(o,a){return o[st]=a,o.prototype[st]=a,o}function Ho(o){return o[st]}function Zs(o){return{toString:o}.toString()}var Go=function(o){return o[o.OnPush=0]="OnPush",o[o.Default=1]="Default",o}(Go||{}),xs=function(o){return o[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",o}(xs||{});const Rs={},rn=[],qo=U({\u0275cmp:U}),nu=U({\u0275dir:U}),Yu=U({\u0275pipe:U}),Cf=U({\u0275mod:U}),Qs=U({\u0275fac:U}),fa=U({__NG_ELEMENT_ID__:U}),ru=U({__NG_ENV_ID__:U});function Ed(o,a,c){let l=o.length;for(;;){const h=o.indexOf(a,c);if(-1===h)return h;if(0===h||o.charCodeAt(h-1)<=32){const m=a.length;if(h+m===l||o.charCodeAt(h+m)<=32)return h}c=h+1}}function iu(o,a,c){let l=0;for(;l<c.length;){const h=c[l];if("number"==typeof h){if(0!==h)break;l++;const m=c[l++],v=c[l++],T=c[l++];o.setAttribute(a,v,T,m)}else{const m=h,v=c[++l];ds(m)?o.setProperty(a,m,v):o.setAttribute(a,m,v),l++}}return l}function wd(o){return 3===o||4===o||6===o}function ds(o){return 64===o.charCodeAt(0)}function pa(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let l=0;l<a.length;l++){const h=a[l];"number"==typeof h?c=h:0===c||Xu(o,c,h,null,-1===c||2===c?a[++l]:null)}}return o}function Xu(o,a,c,l,h){let m=0,v=o.length;if(-1===a)v=-1;else for(;m<o.length;){const T=o[m++];if("number"==typeof T){if(T===a){v=-1;break}if(T>a){v=m-1;break}}}for(;m<o.length;){const T=o[m];if("number"==typeof T)break;if(T===c){if(null===l)return void(null!==h&&(o[m+1]=h));if(l===o[m+1])return void(o[m+2]=h)}m++,null!==l&&m++,null!==h&&m++}-1!==v&&(o.splice(v,0,a),m=v+1),o.splice(m++,0,c),null!==l&&o.splice(m++,0,l),null!==h&&o.splice(m++,0,h)}const Td="ng-template";function hr(o,a,c){let l=0,h=!0;for(;l<o.length;){let m=o[l++];if("string"==typeof m&&h){const v=o[l++];if(c&&"class"===m&&-1!==Ed(v.toLowerCase(),a,0))return!0}else{if(1===m){for(;l<o.length&&"string"==typeof(m=o[l++]);)if(m.toLowerCase()===a)return!0;return!1}"number"==typeof m&&(h=!1)}}return!1}function zo(o){return 4===o.type&&o.value!==Td}function Uy(o,a,c){return a===(4!==o.type||c?o.value:Td)}function Jg(o,a,c){let l=4;const h=o.attrs||[],m=function By(o){for(let a=0;a<o.length;a++)if(wd(o[a]))return a;return o.length}(h);let v=!1;for(let T=0;T<a.length;T++){const C=a[T];if("number"!=typeof C){if(!v)if(4&l){if(l=2|1&l,""!==C&&!Uy(o,C,c)||""===C&&1===a.length){if(Li(l))return!1;v=!0}}else{const x=8&l?C:a[++T];if(8&l&&null!==o.attrs){if(!hr(o.attrs,x,c)){if(Li(l))return!1;v=!0}continue}const V=su(8&l?"class":C,h,zo(o),c);if(-1===V){if(Li(l))return!1;v=!0;continue}if(""!==x){let K;K=V>m?"":h[V+1].toLowerCase();const ne=8&l?K:null;if(ne&&-1!==Ed(ne,x,0)||2&l&&x!==K){if(Li(l))return!1;v=!0}}}}else{if(!v&&!Li(l)&&!Li(C))return!1;if(v&&Li(C))continue;v=!1,l=C|1&l}}return Li(l)||v}function Li(o){return 0==(1&o)}function su(o,a,c,l){if(null===a)return-1;let h=0;if(l||!c){let m=!1;for(;h<a.length;){const v=a[h];if(v===o)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let T=a[++h];for(;"string"==typeof T;)T=a[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function ga(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const l=o[c];if("number"==typeof l)return-1;if(l===a)return c;c++}return-1}(a,o)}function bd(o,a,c=!1){for(let l=0;l<a.length;l++)if(Jg(o,a[l],c))return!0;return!1}function Ju(o,a){return o?":not("+a.trim()+")":a}function Af(o){let a=o[0],c=1,l=2,h="",m=!1;for(;c<o.length;){let v=o[c];if("string"==typeof v)if(2&l){const T=o[++c];h+="["+v+(T.length>0?'="'+T+'"':"")+"]"}else 8&l?h+="."+v:4&l&&(h+=" "+v);else""!==h&&!Li(v)&&(a+=Ju(m,h),h=""),l=v,m=m||!Li(l);c++}return""!==h&&(a+=Ju(m,h)),a}function Hc(o){return Zs(()=>{const a=Ad(o),c={...a,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===Go.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&o.dependencies||null,getStandaloneInjector:null,signals:o.signals??!1,data:o.data||{},encapsulation:o.encapsulation||xs.Emulated,styles:o.styles||rn,_:null,schemas:o.schemas||null,tView:null,id:""};tm(c);const l=o.dependencies;return c.directiveDefs=tc(l,!1),c.pipeDefs=tc(l,!0),c.id=function fs(o){let a=0;const c=[o.selectors,o.ngContentSelectors,o.hostVars,o.hostAttrs,o.consts,o.vars,o.decls,o.encapsulation,o.standalone,o.signals,o.exportAs,JSON.stringify(o.inputs),JSON.stringify(o.outputs),Object.getOwnPropertyNames(o.type.prototype),!!o.contentQueries,!!o.viewQuery].join("|");for(const h of c)a=Math.imul(31,a)+h.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(c),c})}function Cd(o){return sn(o)||or(o)}function Gc(o){return null!==o}function ec(o){return Zs(()=>({type:o.type,bootstrap:o.bootstrap||rn,declarations:o.declarations||rn,imports:o.imports||rn,exports:o.exports||rn,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function qc(o,a){if(null==o)return Rs;const c={};for(const l in o)if(o.hasOwnProperty(l)){let h=o[l],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),c[h]=l,a&&(a[h]=m)}return c}function ou(o){return Zs(()=>{const a=Ad(o);return tm(a),a})}function Dd(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function sn(o){return o[qo]||null}function or(o){return o[nu]||null}function hi(o){return o[Yu]||null}function Wo(o){const a=sn(o)||or(o)||hi(o);return null!==a&&a.standalone}function fi(o,a){const c=o[Cf]||null;if(!c&&!0===a)throw new Error(`Type ${re(o)} does not have '\u0275mod' property.`);return c}function Ad(o){const a={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:o.inputs||Rs,exportAs:o.exportAs||null,standalone:!0===o.standalone,signals:!0===o.signals,selectors:o.selectors||rn,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qc(o.inputs,a),outputs:qc(o.outputs)}}function tm(o){o.features?.forEach(a=>a(o))}function tc(o,a){if(!o)return null;const c=a?hi:Cd;return()=>("function"==typeof o?o():o).map(l=>c(l)).filter(Gc)}const qn=0,ct=1,Ot=2,Bn=3,pi=4,ma=5,$r=6,nc=7,Ln=8,_o=9,au=10,Vt=11,Hr=12,nm=13,yo=14,jn=15,Sd=16,_a=17,Ar=18,vo=19,Io=20,Ko=21,Ji=22,Wc=23,ya=24,Zt=25,uu=1,Kc=2,Sr=7,xr=9,Gr=11;function Rr(o){return Array.isArray(o)&&"object"==typeof o[uu]}function gi(o){return Array.isArray(o)&&!0===o[uu]}function Zc(o){return 0!=(4&o.flags)}function Ia(o){return o.componentOffset>-1}function es(o){return 1==(1&o.flags)}function Vi(o){return!!o.template}function cu(o){return 0!=(512&o[Ot])}function Ea(o,a){return o.hasOwnProperty(Qs)?o[Qs]:null}let kd=gn.WeakRef??class Jc{constructor(a){this.ref=a}deref(){return this.ref}},el=0,Ys=null,wa=!1;function ar(o){const a=Ys;return Ys=o,a}class am{constructor(){this.id=el++,this.ref=function hu(o){return new kd(o)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[a,c]of this.producers){const l=c.producerNode.deref();if(null!=l&&c.atTrackingVersion===this.trackingVersion){if(l.producerPollStatus(c.seenValueVersion))return!0}else this.producers.delete(a),l?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const a=wa;wa=!0;try{for(const[c,l]of this.consumers){const h=l.consumerNode.deref();null!=h&&h.trackingVersion===l.atTrackingVersion?h.onConsumerDependencyMayHaveChanged():(this.consumers.delete(c),h?.producers.delete(this.id))}}finally{wa=a}}producerAccessed(){if(wa)throw new Error("");if(null===Ys)return;let a=Ys.producers.get(this.id);void 0===a?(a={consumerNode:Ys.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Ys.trackingVersion},Ys.producers.set(this.id,a),this.consumers.set(Ys.id,a)):(a.seenValueVersion=this.valueVersion,a.atTrackingVersion=Ys.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Ys?.consumerAllowSignalWrites}producerPollStatus(a){return this.valueVersion!==a||(this.onProducerUpdateValueVersion(),this.valueVersion!==a)}}let rl=null;function il(o){const a=ar(null);try{return o()}finally{ar(a)}}const Ff=()=>{};class Lf extends am{constructor(a,c,l){super(),this.watch=a,this.schedule=c,this.dirty=!1,this.cleanupFn=Ff,this.registerOnCleanup=h=>{this.cleanupFn=h},this.consumerAllowSignalWrites=l}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const a=ar(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Ff,this.watch(this.registerOnCleanup)}finally{ar(a)}}cleanup(){this.cleanupFn()}}class lm{constructor(a,c,l){this.previousValue=a,this.currentValue=c,this.firstChange=l}isFirstChange(){return this.firstChange}}function pu(){return Vf}function Vf(o){return o.type.prototype.ngOnChanges&&(o.setInput=oc),Ta}function Ta(){const o=Uf(this),a=o?.current;if(a){const c=o.previous;if(c===Rs)o.previous=a;else for(let l in a)c[l]=a[l];o.current=null,this.ngOnChanges(a)}}function oc(o,a,c,l){const h=this.declaredInputs[c],m=Uf(o)||function sl(o,a){return o[Fd]=a}(o,{previous:Rs,current:null}),v=m.current||(m.current={}),T=m.previous,C=T[h];v[h]=new lm(C&&C.currentValue,a,T===Rs),o[l]=a}pu.ngInherit=!0;const Fd="__ngSimpleChanges__";function Uf(o){return o[Fd]||null}const ps=function(o,a,c){};function Nn(o){for(;Array.isArray(o);)o=o[qn];return o}function al(o,a){return Nn(a[o])}function yi(o,a){return Nn(a[o.index])}function Bf(o,a){return o.data[a]}function ur(o,a){const c=a[o];return Rr(c)?c:c[qn]}function Yo(o,a){return null==a?null:o[a]}function Ud(o){o[_a]=0}function fm(o){1024&o[Ot]||(o[Ot]|=1024,Ca(o,1))}function $f(o){1024&o[Ot]&&(o[Ot]&=-1025,Ca(o,-1))}function Ca(o,a){let c=o[Bn];if(null===c)return;c[ma]+=a;let l=c;for(c=c[Bn];null!==c&&(1===a&&1===l[ma]||-1===a&&0===l[ma]);)c[ma]+=a,l=c,c=c[Bn]}const Lt={lFrame:Zf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Da(){return Lt.bindingsEnabled}function Te(){return Lt.lFrame.lView}function fn(){return Lt.lFrame.tView}function ll(o){return Lt.lFrame.contextLView=o,o[Ln]}function qf(o){return Lt.lFrame.contextLView=null,o}function mr(){let o=uc();for(;null!==o&&64===o.type;)o=o.parent;return o}function uc(){return Lt.lFrame.currentTNode}function Ps(o,a){const c=Lt.lFrame;c.currentTNode=o,c.isParent=a}function Pr(){return Lt.lFrame.isParent}function Sa(){Lt.lFrame.isParent=!1}function wo(){return Lt.lFrame.bindingIndex++}function qd(o,a){const c=Lt.lFrame;c.bindingIndex=c.bindingRootIndex=o,mm(a)}function mm(o){Lt.lFrame.currentDirectiveIndex=o}function Wf(){return Lt.lFrame.currentQueryIndex}function zd(o){Lt.lFrame.currentQueryIndex=o}function zy(o){const a=o[ct];return 2===a.type?a.declTNode:1===a.type?o[$r]:null}function Wd(o,a,c){if(c&Mt.SkipSelf){let h=a,m=o;for(;!(h=h.parent,null!==h||c&Mt.Host||(h=zy(m),null===h||(m=m[yo],10&h.type))););if(null===h)return!1;a=h,o=m}const l=Lt.lFrame=vu();return l.currentTNode=a,l.lView=o,!0}function Kf(o){const a=vu(),c=o[ct];Lt.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function vu(){const o=Lt.lFrame,a=null===o?null:o.child;return null===a?Zf(o):a}function Zf(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Kd(){const o=Lt.lFrame;return Lt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const _m=Kd;function hl(){const o=Kd();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Bi(){return Lt.lFrame.selectedIndex}function Xo(o){Lt.lFrame.selectedIndex=o}function Jn(){const o=Lt.lFrame;return Bf(o.tView,o.selectedIndex)}let Iu=!0;function Jo(){return Iu}function vn(o){Iu=o}function ni(o,a){for(let c=a.directiveStart,l=a.directiveEnd;c<l;c++){const m=o.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:T,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:M}=m;v&&(o.contentHooks??=[]).push(-c,v),T&&((o.contentHooks??=[]).push(c,T),(o.contentCheckHooks??=[]).push(c,T)),C&&(o.viewHooks??=[]).push(-c,C),x&&((o.viewHooks??=[]).push(c,x),(o.viewCheckHooks??=[]).push(c,x)),null!=M&&(o.destroyHooks??=[]).push(c,M)}}function Ra(o,a,c){pl(o,a,3,c)}function ea(o,a,c,l){(3&o[Ot])===c&&pl(o,a,c,l)}function lc(o,a){let c=o[Ot];(3&c)===a&&(c&=8191,c+=1,o[Ot]=c)}function pl(o,a,c,l){const m=l??-1,v=a.length-1;let T=0;for(let C=void 0!==l?65535&o[_a]:0;C<v;C++)if("number"==typeof a[C+1]){if(T=a[C],null!=l&&T>=l)break}else a[C]<0&&(o[_a]+=65536),(T<m||-1==m)&&(Pa(o,c,a,C),o[_a]=(4294901760&o[_a])+C+2),C++}function dc(o,a){ps(4,o,a);const c=ar(null);try{a.call(o)}finally{ar(c),ps(5,o,a)}}function Pa(o,a,c,l){const h=c[l]<0,m=c[l+1],T=o[h?-c[l]:c[l]];h?o[Ot]>>13<o[_a]>>16&&(3&o[Ot])===a&&(o[Ot]+=8192,dc(T,m)):dc(T,m)}const Ii=-1;class St{constructor(a,c,l){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=l}}function Yd(o){return o!==Ii}function ta(o){return 32767&o}function Xs(o,a){let c=function Zy(o){return o>>16}(o),l=a;for(;c>0;)l=l[yo],c--;return l}let To=!0;function Eu(o){const a=To;return To=o,a}const ml=255,fc=5;let Jf=0;const Ei={};function pc(o,a){const c=_l(o,a);if(-1!==c)return c;const l=a[ct];l.firstCreatePass&&(o.injectorIndex=a.length,qr(l.data,o),qr(a,null),qr(l.blueprint,null));const h=ka(o,a),m=o.injectorIndex;if(Yd(h)){const v=ta(h),T=Xs(h,a),C=T[ct].data;for(let x=0;x<8;x++)a[m+x]=T[v+x]|C[v+x]}return a[m+8]=h,m}function qr(o,a){o.push(0,0,0,0,0,0,0,0,a)}function _l(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function ka(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,l=null,h=a;for(;null!==h;){if(l=El(h),null===l)return Ii;if(c++,h=h[yo],-1!==l.injectorIndex)return l.injectorIndex|c<<16}return Ii}function ms(o,a,c){!function bo(o,a,c){let l;"string"==typeof c?l=c.charCodeAt(0)||0:c.hasOwnProperty(fa)&&(l=c[fa]),null==l&&(l=c[fa]=Jf++);const h=l&ml;a.data[o+(h>>fc)]|=1<<h}(o,a,c)}function Co(o,a,c){if(c&Mt.Optional||void 0!==o)return o;Qe()}function gc(o,a,c,l){if(c&Mt.Optional&&void 0===l&&(l=null),!(c&(Mt.Self|Mt.Host))){const h=o[_o],m=An(void 0);try{return h?h.get(a,l,c&Mt.Optional):Un(a,l,c&Mt.Optional)}finally{An(m)}}return Co(l,0,c)}function ts(o,a,c,l=Mt.Default,h){if(null!==o){if(2048&a[Ot]&&!(l&Mt.Self)){const v=function ra(o,a,c,l,h){let m=o,v=a;for(;null!==m&&null!==v&&2048&v[Ot]&&!(512&v[Ot]);){const T=kr(m,v,c,l|Mt.Self,Ei);if(T!==Ei)return T;let C=m.parent;if(!C){const x=v[Io];if(x){const M=x.get(c,Ei,l);if(M!==Ei)return M}C=El(v),v=v[yo]}m=C}return h}(o,a,c,l,Ei);if(v!==Ei)return v}const m=kr(o,a,c,l,Ei);if(m!==Ei)return m}return gc(a,c,l,h)}function kr(o,a,c,l,h){const m=function na(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(fa)?o[fa]:void 0;return"number"==typeof a?a>=0?a&ml:mc:a}(c);if("function"==typeof m){if(!Wd(a,o,l))return l&Mt.Host?Co(h,0,l):gc(a,c,l,h);try{let v;if(v=m(l),null!=v||l&Mt.Optional)return v;Qe()}finally{_m()}}else if("number"==typeof m){let v=null,T=_l(o,a),C=Ii,x=l&Mt.Host?a[jn][$r]:null;for((-1===T||l&Mt.SkipSelf)&&(C=-1===T?ka(o,a):a[T+8],C!==Ii&&fr(l,!1)?(v=a[ct],T=ta(C),a=Xs(C,a)):T=-1);-1!==T;){const M=a[ct];if(Ao(m,T,M.data)){const V=yl(T,a,c,v,l,x);if(V!==Ei)return V}C=a[T+8],C!==Ii&&fr(l,a[ct].data[T+8]===x)&&Ao(m,T,a)?(v=M,T=ta(C),a=Xs(C,a)):T=-1}}return h}function yl(o,a,c,l,h,m){const v=a[ct],T=v.data[o+8],M=vl(T,v,c,null==l?Ia(T)&&To:l!=v&&0!=(3&T.type),h&Mt.Host&&m===T);return null!==M?Do(a,v,M,T):Ei}function vl(o,a,c,l,h){const m=o.providerIndexes,v=a.data,T=1048575&m,C=o.directiveStart,M=m>>20,K=h?T+M:o.directiveEnd;for(let ne=l?T:T+M;ne<K;ne++){const De=v[ne];if(ne<C&&c===De||ne>=C&&De.type===c)return ne}if(h){const ne=v[C];if(ne&&Vi(ne)&&ne.type===c)return C}return null}function Do(o,a,c,l){let h=o[c];const m=a.data;if(function Yf(o){return o instanceof St}(h)){const v=h;v.resolving&&function He(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new ue(-200,`Circular dependency in DI detected for ${o}${c}`)}(function xe(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():se(o)}(m[c]));const T=Eu(v.canSeeViewProviders);v.resolving=!0;const x=v.injectImpl?An(v.injectImpl):null;Wd(o,l,Mt.Default);try{h=o[c]=v.factory(void 0,m,o,l),a.firstCreatePass&&c>=l.directiveStart&&function xt(o,a,c){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:m}=a.type.prototype;if(l){const v=Vf(a);(c.preOrderHooks??=[]).push(o,v),(c.preOrderCheckHooks??=[]).push(o,v)}h&&(c.preOrderHooks??=[]).push(0-o,h),m&&((c.preOrderHooks??=[]).push(o,m),(c.preOrderCheckHooks??=[]).push(o,m))}(c,m[c],a)}finally{null!==x&&An(x),Eu(T),v.resolving=!1,_m()}}return h}function Ao(o,a,c){return!!(c[a+(o>>fc)]&1<<o)}function fr(o,a){return!(o&Mt.Self||o&Mt.Host&&a)}class tr{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,l){return ts(this._tNode,this._lView,a,dr(l),c)}}function mc(){return new tr(mr(),Te())}function _c(o){return Zs(()=>{const a=o.prototype.constructor,c=a[Qs]||wu(a),l=Object.prototype;let h=Object.getPrototypeOf(o.prototype).constructor;for(;h&&h!==l;){const m=h[Qs]||wu(h);if(m&&m!==c)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function wu(o){return tt(o)?()=>{const a=wu(Ve(o));return a&&a()}:Ea(o)}function El(o){const a=o[ct],c=a.type;return 2===c?a.declTNode:1===c?o[$r]:null}function Xd(o){return function Nr(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const l=c.length;let h=0;for(;h<l;){const m=c[h];if(wd(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<l&&"string"==typeof c[h];)h++;else{if(m===a)return c[h+1];h+=2}}}return null}(mr(),o)}const So="__parameters__";function Fa(o,a,c){return Zs(()=>{const l=function Js(o){return function(...c){if(o){const l=o(...c);for(const h in l)this[h]=l[h]}}}(a);function h(...m){if(this instanceof h)return l.apply(this,m),this;const v=new h(...m);return T.annotation=v,T;function T(C,x,M){const V=C.hasOwnProperty(So)?C[So]:Object.defineProperty(C,So,{value:[]})[So];for(;V.length<=M;)V.push(null);return(V[M]=V[M]||[]).push(v),C}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=o,h.annotationCls=h,h})}function X(o,a){o.forEach(c=>Array.isArray(c)?X(c,a):a(c))}function pe(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function nt(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function _n(o,a,c){let l=ia(o,a);return l>=0?o[1|l]=c:(l=~l,function $t(o,a,c,l){let h=o.length;if(h==a)o.push(c,l);else if(1===h)o.push(l,o[0]),o[0]=c;else{for(h--,o.push(o[h-1],o[h]);h>a;)o[h]=o[h-2],h--;o[a]=c,o[a+1]=l}}(o,l,a,c)),l}function Ns(o,a){const c=ia(o,a);if(c>=0)return o[1|c]}function ia(o,a){return function Ti(o,a,c){let l=0,h=o.length>>c;for(;h!==l;){const m=l+(h-l>>1),v=o[m<<c];if(a===v)return m<<c;v>a?h=m:l=m+1}return~(h<<c)}(o,a,1)}const nh=jr(Fa("Optional"),8),tp=jr(Fa("SkipSelf"),4);function Al(o){return 128==(128&o.flags)}var Sm=function(o){return o[o.Important=1]="Important",o[o.DashCase=2]="DashCase",o}(Sm||{});const uv=/^>|^->|<!--|-->|--!>|<!-$/g,wc=/(<|>)/,op="\u200b$1\u200b";const lh=new Map;let Ro=0;const fh="__ngContext__";function ri(o,a){Rr(a)?(o[fh]=a[vo],function _s(o){lh.set(o[vo],o)}(a)):o[fh]=a}let ja;function mh(o,a){return ja(o,a)}function _h(o){const a=o[Bn];return gi(a)?a[Bn]:a}function hv(o){return S0(o[Hr])}function A0(o){return S0(o[pi])}function S0(o){for(;null!==o&&!gi(o);)o=o[pi];return o}function I(o,a,c,l,h){if(null!=l){let m,v=!1;gi(l)?m=l:Rr(l)&&(v=!0,l=l[qn]);const T=Nn(l);0===o&&null!==c?null==h?Nm(a,c,T):Ga(a,c,T,h||null,!0):1===o&&null!==c?Ga(a,c,T,h||null,!0):2===o?function gv(o,a,c){const l=cp(o,a);l&&function Dc(o,a,c,l){o.removeChild(a,c,l)}(o,l,a,c)}(a,T,v):3===o&&a.destroyNode(T),null!=m&&function tP(o,a,c,l,h){const m=c[Sr];m!==Nn(c)&&I(a,o,l,m,h);for(let T=Gr;T<c.length;T++){const C=c[T];Fm(C[ct],C,o,a,l,m)}}(a,o,m,c,h)}}function w(o,a){return o.createComment(function ch(o){return o.replace(uv,a=>a.replace(wc,op))}(a))}function S(o,a,c){return o.createElement(a,c)}function _t(o,a){const c=o[xr],l=c.indexOf(a);$f(a),c.splice(l,1)}function Hn(o,a){if(o.length<=Gr)return;const c=Gr+a,l=o[c];if(l){const h=l[Sd];null!==h&&h!==o&&_t(h,l),a>0&&(o[c-1][pi]=l[pi]);const m=nt(o,Gr+a);!function N(o,a){Fm(o,a,a[Vt],2,null,null),a[qn]=null,a[$r]=null}(l[ct],l);const v=m[Ar];null!==v&&v.detachView(m[ct]),l[Bn]=null,l[pi]=null,l[Ot]&=-129}return l}function ys(o,a){if(!(256&a[Ot])){const c=a[Vt];a[Wc]?.destroy(),a[ya]?.destroy(),c.destroyNode&&Fm(o,a,c,3,null,null),function Ge(o){let a=o[Hr];if(!a)return $a(o[ct],o);for(;a;){let c=null;if(Rr(a))c=a[Hr];else{const l=a[Gr];l&&(c=l)}if(!c){for(;a&&!a[pi]&&a!==o;)Rr(a)&&$a(a[ct],a),a=a[Bn];null===a&&(a=o),Rr(a)&&$a(a[ct],a),c=a&&a[pi]}a=c}}(a)}}function $a(o,a){if(!(256&a[Ot])){a[Ot]&=-129,a[Ot]|=256,function Mm(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let l=0;l<c.length;l+=2){const h=a[c[l]];if(!(h instanceof St)){const m=c[l+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const T=h[m[v]],C=m[v+1];ps(4,T,C);try{C.call(T)}finally{ps(5,T,C)}}else{ps(4,h,m);try{m.call(h)}finally{ps(5,h,m)}}}}}(o,a),function fv(o,a){const c=o.cleanup,l=a[nc];if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const v=c[m+3];v>=0?l[v]():l[-v].unsubscribe(),m+=2}else c[m].call(l[c[m+1]]);null!==l&&(a[nc]=null);const h=a[Ko];if(null!==h){a[Ko]=null;for(let m=0;m<h.length;m++)(0,h[m])()}}(o,a),1===a[ct].type&&a[Vt].destroy();const c=a[Sd];if(null!==c&&gi(a[Bn])){c!==a[Bn]&&_t(c,a);const l=a[Ar];null!==l&&l.detachView(o)}!function cv(o){lh.delete(o[vo])}(a)}}function Ha(o,a,c){return function bc(o,a,c){let l=a;for(;null!==l&&40&l.type;)l=(a=l).parent;if(null===l)return c[qn];{const{componentOffset:h}=l;if(h>-1){const{encapsulation:m}=o.data[l.directiveStart+h];if(m===xs.None||m===xs.Emulated)return null}return yi(l,c)}}(o,a.parent,c)}function Ga(o,a,c,l,h){o.insertBefore(a,c,l,h)}function Nm(o,a,c){o.appendChild(a,c)}function Cc(o,a,c,l,h){null!==l?Ga(o,a,c,l,h):Nm(o,a,c)}function cp(o,a){return o.parentNode(a)}let DD,N0,mv,CD=function bD(o,a,c){return 40&o.type?yi(o,c):null};function Om(o,a,c,l){const h=Ha(o,l,a),m=a[Vt],T=function pv(o,a,c){return CD(o,a,c)}(l.parent||a[$r],l,a);if(null!=h)if(Array.isArray(c))for(let C=0;C<c.length;C++)Cc(m,h,c[C],T,!1);else Cc(m,h,c,T,!1);void 0!==DD&&DD(m,l,a,c,h)}function Pl(o,a){if(null!==a){const c=a.type;if(3&c)return yi(a,o);if(4&c)return R0(-1,o[a.index]);if(8&c){const l=a.child;if(null!==l)return Pl(o,l);{const h=o[a.index];return gi(h)?R0(-1,h):Nn(h)}}if(32&c)return mh(a,o)()||Nn(o[a.index]);{const l=yh(o,a);return null!==l?Array.isArray(l)?l[0]:Pl(_h(o[jn]),l):Pl(o,a.next)}}return null}function yh(o,a){return null!==a?o[jn][$r].projection[a.projection]:null}function R0(o,a){const c=Gr+o+1;if(c<a.length){const l=a[c],h=l[ct].firstChild;if(null!==h)return Pl(l,h)}return a[Sr]}function P0(o,a,c,l,h,m,v){for(;null!=c;){const T=l[c.index],C=c.type;if(v&&0===a&&(T&&ri(Nn(T),l),c.flags|=2),32!=(32&c.flags))if(8&C)P0(o,a,c.child,l,h,m,!1),I(a,o,h,T,m);else if(32&C){const x=mh(c,l);let M;for(;M=x();)I(a,o,h,M,m);I(a,o,h,T,m)}else 16&C?xD(o,a,l,c,h,m):I(a,o,h,T,m);c=v?c.projectionNext:c.next}}function Fm(o,a,c,l,h,m){P0(c,l,o.firstChild,a,h,m,!1)}function xD(o,a,c,l,h,m){const v=c[jn],C=v[$r].projection[l.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)I(a,o,h,C[x],m);else{let x=C;const M=v[Bn];Al(l)&&(x.flags|=128),P0(o,a,x,M,h,m,!0)}}function PD(o,a,c){""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c)}function Lm(o,a,c){const{mergedAttrs:l,classes:h,styles:m}=c;null!==l&&iu(o,a,l),null!==h&&PD(o,a,h),null!==m&&function RD(o,a,c){o.setAttribute(a,"style",c)}(o,a,m)}function k0(o){N0=o}function Um(o){return function O0(){if(void 0===mv&&(mv=null,gn.trustedTypes))try{mv=gn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return mv}()?.createScriptURL(o)||o}class kD{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wt})`}}function Ac(o){return o instanceof kD?o.changingThisBreaksApplicationSecurity:o}function _v(o,a){const c=function OD(o){return o instanceof kD&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${wt})`)}return c===a}const lp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var pp=function(o){return o[o.NONE=0]="NONE",o[o.HTML=1]="HTML",o[o.STYLE=2]="STYLE",o[o.SCRIPT=3]="SCRIPT",o[o.URL=4]="URL",o[o.RESOURCE_URL=5]="RESOURCE_URL",o}(pp||{});function jD(o){const a=vv();return a?a.sanitize(pp.URL,o)||"":_v(o,"URL")?Ac(o):function Bm(o){return(o=String(o)).match(lp)?o:"unsafe:"+o}(se(o))}function _P(o){const a=vv();if(a)return Um(a.sanitize(pp.RESOURCE_URL,o)||"");if(_v(o,"ResourceURL"))return Um(Ac(o));throw new ue(904,!1)}function $0(o,a,c){return function e2(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?_P:jD}(a,c)(o)}function vv(){const o=Te();return o&&o[au].sanitizer}class kn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Tt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Iv=new kn("ENVIRONMENT_INITIALIZER"),H0=new kn("INJECTOR",-1),G0=new kn("INJECTOR_DEF_TYPES");class $m{get(a,c=Xe){if(c===Xe){const l=new Error(`NullInjectorError: No provider for ${re(a)}!`);throw l.name="NullInjectorError",l}return c}}function q0(o){return{\u0275providers:o}}function vP(...o){return{\u0275providers:IP(0,o),\u0275fromNgModule:!0}}function IP(o,...a){const c=[],l=new Set;let h;const m=v=>{c.push(v)};return X(a,v=>{const T=v;Ev(T,m,[],l)&&(h||=[],h.push(T))}),void 0!==h&&z0(h,m),c}function z0(o,a){for(let c=0;c<o.length;c++){const{ngModule:l,providers:h}=o[c];HD(h,m=>{a(m,l)})}}function Ev(o,a,c,l){if(!(o=Ve(o)))return!1;let h=null,m=Yi(o);const v=!m&&sn(o);if(m||v){if(v&&!v.standalone)return!1;h=o}else{const C=o.ngModule;if(m=Yi(C),!m)return!1;h=C}const T=l.has(h);if(v){if(T)return!1;if(l.add(h),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const x of C)Ev(x,a,c,l)}}else{if(!m)return!1;{if(null!=m.imports&&!T){let x;l.add(h);try{X(m.imports,M=>{Ev(M,a,c,l)&&(x||=[],x.push(M))})}finally{}void 0!==x&&z0(x,a)}if(!T){const x=Ea(h)||(()=>new h);a({provide:h,useFactory:x,deps:rn},h),a({provide:G0,useValue:h,multi:!0},h),a({provide:Iv,useValue:()=>Bt(h),multi:!0},h)}const C=m.providers;if(null!=C&&!T){const x=o;HD(C,M=>{a(M,x)})}}}return h!==o&&void 0!==o.providers}function HD(o,a){for(let c of o)Ue(c)&&(c=c.\u0275providers),Array.isArray(c)?HD(c,a):a(c)}const n2=U({provide:String,useValue:U});function W0(o){return null!==o&&"object"==typeof o&&n2 in o}function Eh(o){return"function"==typeof o}const kl=new kn("Set Injector scope."),wv={},TP={};let Z0;function Tv(){return void 0===Z0&&(Z0=new $m),Z0}class xu{}class Hm extends xu{get destroyed(){return this._destroyed}constructor(a,c,l,h){super(),this.parent=c,this.source=l,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bv(a,v=>this.processProvider(v)),this.records.set(H0,Gm(void 0,this)),h.has("environment")&&this.records.set(xu,Gm(void 0,this));const m=this.records.get(kl);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(G0.multi,rn,Mt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of a)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const c=dt(this),l=An(void 0);try{return a()}finally{dt(c),An(l)}}get(a,c=Xe,l=Mt.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(ru))return a[ru](this);l=dr(l);const m=dt(this),v=An(void 0);try{if(!(l&Mt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const x=function CP(o){return"function"==typeof o||"object"==typeof o&&o instanceof kn}(a)&&ir(a);C=x&&this.injectableDefInScope(x)?Gm(Q0(a),wv):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(l&Mt.Self?Tv():this.parent).get(a,c=l&Mt.Optional&&c===Xe?null:c)}catch(T){if("NullInjectorError"===T.name){if((T[At]=T[At]||[]).unshift(re(a)),m)throw T;return function tu(o,a,c,l){const h=o[At];throw a[Y]&&h.unshift(a[Y]),o.message=function Id(o,a,c,l=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let h=re(a);if(Array.isArray(a))h=a.map(re).join(" -> ");else if("object"==typeof a){let m=[];for(let v in a)if(a.hasOwnProperty(v)){let T=a[v];m.push(v+":"+("string"==typeof T?JSON.stringify(T):re(T)))}h=`{${m.join(", ")}}`}return`${c}${l?"("+l+")":""}[${h}]: ${o.replace($,"\n  ")}`}("\n"+o.message,h,c,l),o.ngTokenPath=h,o[At]=null,o}(T,a,"R3InjectorError",this.source)}throw T}finally{An(v),dt(m)}}resolveInjectorInitializers(){const a=dt(this),c=An(void 0);try{const h=this.get(Iv.multi,rn,Mt.Self);for(const m of h)m()}finally{dt(a),An(c)}}toString(){const a=[],c=this.records;for(const l of c.keys())a.push(re(l));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ue(205,!1)}processProvider(a){let c=Eh(a=Ve(a))?a:Ve(a&&a.provide);const l=function i2(o){return W0(o)?Gm(void 0,o.useValue):Gm(bP(o),wv)}(a);if(Eh(a)||!0!==a.multi)this.records.get(c);else{let h=this.records.get(c);h||(h=Gm(void 0,wv,!0),h.factory=()=>hn(h.multi),this.records.set(c,h)),c=a,h.multi.push(a)}this.records.set(c,l)}hydrate(a,c){return c.value===wv&&(c.value=TP,c.value=c.factory()),"object"==typeof c.value&&c.value&&function o2(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=Ve(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(a){const c=this._onDestroyHooks.indexOf(a);-1!==c&&this._onDestroyHooks.splice(c,1)}}function Q0(o){const a=ir(o),c=null!==a?a.factory:Ea(o);if(null!==c)return c;if(o instanceof kn)throw new ue(204,!1);if(o instanceof Function)return function r2(o){const a=o.length;if(a>0)throw function Ze(o,a){const c=[];for(let l=0;l<o;l++)c.push(a);return c}(a,"?"),new ue(204,!1);const c=function Oi(o){return o&&(o[sr]||o[po])||null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new ue(204,!1)}function bP(o,a,c){let l;if(Eh(o)){const h=Ve(o);return Ea(h)||Q0(h)}if(W0(o))l=()=>Ve(o.useValue);else if(function K0(o){return!(!o||!o.useFactory)}(o))l=()=>o.useFactory(...hn(o.deps||[]));else if(function EP(o){return!(!o||!o.useExisting)}(o))l=()=>Bt(Ve(o.useExisting));else{const h=Ve(o&&(o.useClass||o.provide));if(!function s2(o){return!!o.deps}(o))return Ea(h)||Q0(h);l=()=>new h(...hn(o.deps))}return l}function Gm(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function bv(o,a){for(const c of o)Array.isArray(c)?bv(c,a):c&&Ue(c)?bv(c.\u0275providers,a):a(c)}const Ol=new kn("AppId",{providedIn:"root",factory:()=>Ru}),Ru="ng",GD=new kn("Platform Initializer"),Cv=new kn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),DP=new kn("CSP nonce",{providedIn:"root",factory:()=>function Ih(){if(void 0!==N0)return N0;if(typeof document<"u")return document;throw new ue(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let zD=(o,a,c)=>null;function Wm(o,a,c=!1){return zD(o,a,c)}class Ll{}class nw{}class JD{resolveComponentFactory(a){throw function c2(o){const a=Error(`No component factory found for ${re(o)}.`);return a.ngComponent=o,a}(a)}}let Ip=(()=>{class a{}return a.NULL=new JD,a})();function Pv(){return Ep(mr(),Te())}function Ep(o,a){return new Ch(yi(o,a))}let Ch=(()=>{class a{constructor(l){this.nativeElement=l}}return a.__NG_ELEMENT_ID__=Pv,a})();function PP(o){return o instanceof Ch?o.nativeElement:o}class MP{}let l2=(()=>{class a{constructor(){this.destroyNode=null}}return a.__NG_ELEMENT_ID__=()=>function d2(){const o=Te(),c=ur(mr().index,o);return(Rr(c)?c:o)[Vt]}(),a})(),h2=(()=>{var o;class a{}return(o=a).\u0275prov=Tt({token:o,providedIn:"root",factory:()=>null}),a})();class NP{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const kP=new NP("16.2.2"),eA={};function kv(o,a=null,c=null,l){const h=tA(o,a,c,l);return h.resolveInjectorInitializers(),h}function tA(o,a=null,c=null,l,h=new Set){const m=[c||rn,vP(o)];return l=l||("object"==typeof o?void 0:re(o)),new Hm(m,a||Tv(),l||null,h)}let ro=(()=>{var o;class a{static create(l,h){if(Array.isArray(l))return kv({name:""},h,l,"");{const m=l.name??"";return kv({name:m},l.parent,l.providers,m)}}}return(o=a).THROW_IF_NOT_FOUND=Xe,o.NULL=new $m,o.\u0275prov=Tt({token:o,providedIn:"any",factory:()=>Bt(H0)}),o.__NG_ELEMENT_ID__=-1,a})();function Vl(o){return o instanceof Function?o():o}let bp=(()=>{var o;class a{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new ue(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const l of this.callbacks)l.invoke()}finally{this.runningCallbacks=!1;for(const l of this.deferredCallbacks)this.callbacks.add(l);this.deferredCallbacks.clear()}}register(l){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(l)}unregister(l){this.callbacks.delete(l),this.deferredCallbacks.delete(l)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(o=a).\u0275prov=Tt({token:o,providedIn:"root",factory:()=>new o}),a})();function Ul(o){for(;o;){o[Ot]|=64;const a=_h(o);if(cu(o)&&!a)return o;o=a}return null}function Cp(o){return o.ngOriginalError}class Dp{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&Cp(a);for(;c&&Cp(c);)c=Cp(c);return c||null}}const sA=new kn("",{providedIn:"root",factory:()=>!1});class UP extends am{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(a){this._lView=a}onConsumerDependencyMayHaveChanged(){Ul(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(a,c,l){const h=ar(this);this.trackingVersion++;try{a(c,l)}finally{ar(h)}}destroy(){this.trackingVersion++}}let Bv=null;function Ap(){return Bv??=new UP,Bv}function jv(o,a){return o[a]??Ap()}function aw(o,a){const c=Ap();c.hasReadASignal&&(o[a]=Bv,c.lView=o,Bv=new UP)}const Yt={};function Sp(o){BP(fn(),Te(),Bi()+o,!1)}function BP(o,a,c,l){if(!l)if(3==(3&a[Ot])){const m=o.preOrderCheckHooks;null!==m&&Ra(a,m,c)}else{const m=o.preOrderHooks;null!==m&&ea(a,m,0,c)}Xo(c)}function xp(o,a=Mt.Default){const c=Te();return null===c?Bt(o,a):ts(mr(),c,Ve(o),a)}function uw(){throw new Error("invalid")}function cw(o,a,c,l,h,m,v,T,C,x,M){const V=a.blueprint.slice();return V[qn]=h,V[Ot]=140|l,(null!==x||o&&2048&o[Ot])&&(V[Ot]|=2048),Ud(V),V[Bn]=V[yo]=o,V[Ln]=c,V[au]=v||o&&o[au],V[Vt]=T||o&&o[Vt],V[_o]=C||o&&o[_o]||null,V[$r]=m,V[vo]=function xl(){return Ro++}(),V[Ji]=M,V[Io]=x,V[jn]=2==a.type?o[jn]:V,V}function Ym(o,a,c,l,h){let m=o.data[a];if(null===m)m=function uA(o,a,c,l,h){const m=uc(),v=Pr(),C=o.data[a]=function dA(o,a,c,l,h,m){let v=a?a.injectorIndex:-1,T=0;return function _u(){return null!==Lt.skipHydrationRootTNode}()&&(T|=128),{type:c,index:l,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:T,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,c,a,l,h);return null===o.firstChild&&(o.firstChild=C),null!==m&&(v?null==m.child&&null!==C.parent&&(m.child=C):null===m.next&&(m.next=C,C.prev=m)),C}(o,a,c,l,h),function Hd(){return Lt.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=c,m.value=l,m.attrs=h;const v=function Xn(){const o=Lt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Ps(m,!0),m}function Xm(o,a,c,l){if(0===c)return-1;const h=a.length;for(let m=0;m<c;m++)a.push(l),o.blueprint.push(l),o.data.push(null);return h}function lw(o,a,c,l,h){const m=jv(a,Wc),v=Bi(),T=2&l;try{if(Xo(-1),T&&a.length>Zt&&BP(o,a,Zt,!1),ps(T?2:0,h),T)m.runInContext(c,l,h);else{const x=ar(null);try{c(l,h)}finally{ar(x)}}}finally{T&&null===a[Wc]&&aw(a,Wc),Xo(v),ps(T?3:1,h)}}function dw(o,a,c){if(Zc(a)){const l=ar(null);try{const m=a.directiveEnd;for(let v=a.directiveStart;v<m;v++){const T=o.data[v];T.contentQueries&&T.contentQueries(1,c[v],v)}}finally{ar(l)}}}function $v(o,a,c){Da()&&(function WP(o,a,c,l){const h=c.directiveStart,m=c.directiveEnd;Ia(c)&&function Ew(o,a,c){const l=yi(a,o),h=hw(c);let v=16;c.signals?v=4096:c.onPush&&(v=64);const T=t_(o,cw(o,h,null,v,l,a,null,o[au].rendererFactory.createRenderer(l,c),null,null,null));o[a.index]=T}(a,c,o.data[h+c.componentOffset]),o.firstCreatePass||pc(c,a),ri(l,a);const v=c.initialInputs;for(let T=h;T<m;T++){const C=o.data[T],x=Do(a,o,T,c);ri(x,a),null!==v&&gA(0,T-h,x,C,0,v),Vi(C)&&(ur(c.index,a)[Ln]=Do(a,o,T,c))}}(o,a,c,yi(c,a)),64==(64&c.flags)&&yw(o,a,c))}function Jm(o,a,c=yi){const l=a.localNames;if(null!==l){let h=a.index+1;for(let m=0;m<l.length;m+=2){const v=l[m+1],T=-1===v?c(a,o):o[v];o[h++]=T}}}function hw(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=fw(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts,o.id):a}function fw(o,a,c,l,h,m,v,T,C,x,M){const V=Zt+l,K=V+h,ne=function cA(o,a){const c=[];for(let l=0;l<a;l++)c.push(l<o?null:Yt);return c}(V,K),De="function"==typeof x?x():x;return ne[ct]={type:o,blueprint:ne,template:c,queries:null,viewQuery:T,declTNode:a,data:ne.slice().fill(null,V),bindingStartIndex:V,expandoStartIndex:K,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:De,incompleteFirstPass:!1,ssrId:M}}let pw=o=>null;function Hv(o,a,c,l){for(let h in o)if(o.hasOwnProperty(h)){c=null===c?{}:c;const m=o[h];null===l?hA(c,a,h,m):l.hasOwnProperty(h)&&hA(c,a,l[h],m)}return c}function hA(o,a,c,l){o.hasOwnProperty(c)?o[c].push(a,l):o[c]=[a,l]}function e_(o,a,c,l){if(Da()){const h=null===l?null:{"":-1},m=function vw(o,a){const c=o.directiveRegistry;let l=null,h=null;if(c)for(let m=0;m<c.length;m++){const v=c[m];if(bd(a,v.selectors,!1))if(l||(l=[]),Vi(v))if(null!==v.findHostDirectiveDefs){const T=[];h=h||new Map,v.findHostDirectiveDefs(v,T,h),l.unshift(...T,v),Iw(o,a,T.length)}else l.unshift(v),Iw(o,a,0);else h=h||new Map,v.findHostDirectiveDefs?.(v,l,h),l.push(v)}return null===l?null:[l,h]}(o,c);let v,T;null===m?v=T=null:[v,T]=m,null!==v&&mw(o,a,c,v,h,T),h&&function ZP(o,a,c){if(a){const l=o.localNames=[];for(let h=0;h<a.length;h+=2){const m=c[a[h+1]];if(null==m)throw new ue(-301,!1);l.push(a[h],m)}}}(c,l,h)}c.mergedAttrs=pa(c.mergedAttrs,c.attrs)}function mw(o,a,c,l,h,m){for(let x=0;x<l.length;x++)ms(pc(c,a),o,l[x].type);!function QP(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}(c,o.data.length,l.length);for(let x=0;x<l.length;x++){const M=l[x];M.providersResolver&&M.providersResolver(M)}let v=!1,T=!1,C=Xm(o,a,l.length,null);for(let x=0;x<l.length;x++){const M=l[x];c.mergedAttrs=pa(c.mergedAttrs,M.hostAttrs),C2(o,c,a,C,M),pA(C,M,h),null!==M.contentQueries&&(c.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(c.flags|=64);const V=M.type.prototype;!v&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((o.preOrderHooks??=[]).push(c.index),v=!0),!T&&(V.ngOnChanges||V.ngDoCheck)&&((o.preOrderCheckHooks??=[]).push(c.index),T=!0),C++}!function fA(o,a,c){const h=a.directiveEnd,m=o.data,v=a.attrs,T=[];let C=null,x=null;for(let M=a.directiveStart;M<h;M++){const V=m[M],K=c?c.get(V):null,De=K?K.outputs:null;C=Hv(V.inputs,M,C,K?K.inputs:null),x=Hv(V.outputs,M,x,De);const ze=null===C||null===v||zo(a)?null:YP(C,M,v);T.push(ze)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=8),C.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=T,a.inputs=C,a.outputs=x}(o,c,m)}function yw(o,a,c){const l=c.directiveStart,h=c.directiveEnd,m=c.index,v=function zf(){return Lt.lFrame.currentDirectiveIndex}();try{Xo(m);for(let T=l;T<h;T++){const C=o.data[T],x=a[T];mm(T),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&KP(C,x)}}finally{Xo(-1),mm(v)}}function KP(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Iw(o,a,c){a.componentOffset=c,(o.components??=[]).push(a.index)}function pA(o,a,c){if(c){if(a.exportAs)for(let l=0;l<a.exportAs.length;l++)c[a.exportAs[l]]=o;Vi(a)&&(c[""]=o)}}function C2(o,a,c,l,h){o.data[l]=h;const m=h.factory||(h.factory=Ea(h.type)),v=new St(m,Vi(h),xp);o.blueprint[l]=v,c[l]=v,function zP(o,a,c,l,h){const m=h.hostBindings;if(m){let v=o.hostBindingOpCodes;null===v&&(v=o.hostBindingOpCodes=[]);const T=~a.index;(function _w(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(v)!=T&&v.push(T),v.push(c,l,m)}}(o,a,l,Xm(o,c,h.hostVars,Yt),h)}function Pu(o,a,c,l,h,m){const v=yi(o,a);!function Gv(o,a,c,l,h,m,v){if(null==m)o.removeAttribute(a,h,c);else{const T=null==v?se(m):v(m,l||"",h);o.setAttribute(a,h,T,c)}}(a[Vt],v,m,o.value,c,l,h)}function gA(o,a,c,l,h,m){const v=m[a];if(null!==v)for(let T=0;T<v.length;)Bl(l,c,v[T++],v[T++],v[T++])}function Bl(o,a,c,l,h){const m=ar(null);try{const v=o.inputTransforms;null!==v&&v.hasOwnProperty(l)&&(h=v[l].call(a,h)),null!==o.setInput?o.setInput(a,h,c,l):a[l]=h}finally{ar(m)}}function YP(o,a,c){let l=null,h=0;for(;h<c.length;){const m=c[h];if(0!==m)if(5!==m){if("number"==typeof m)break;if(o.hasOwnProperty(m)){null===l&&(l=[]);const v=o[m];for(let T=0;T<v.length;T+=2)if(v[T]===a){l.push(m,v[T+1],c[h+1]);break}}h+=2}else h+=2;else h+=4}return l}function ww(o,a,c,l){return[o,!0,!1,a,null,0,l,c,null,null,null]}function mA(o,a){const c=o.contentQueries;if(null!==c)for(let l=0;l<c.length;l+=2){const m=c[l+1];if(-1!==m){const v=o.data[m];zd(c[l]),v.contentQueries(2,a[m],m)}}}function t_(o,a){return o[Hr]?o[nm][pi]=a:o[Hr]=a,o[nm]=a,a}function Tw(o,a,c){zd(0);const l=ar(null);try{a(o,c)}finally{ar(l)}}function qv(o){return o[nc]||(o[nc]=[])}function bw(o){return o.cleanup||(o.cleanup=[])}function Cw(o,a){const c=o[_o],l=c?c.get(Dp,null):null;l&&l.handleError(a)}function Dw(o,a,c,l,h){for(let m=0;m<c.length;){const v=c[m++],T=c[m++];Bl(o.data[v],a[v],l,T,h)}}function XP(o,a){const c=ur(a,o),l=c[ct];!function yA(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])}(l,c);const h=c[qn];null!==h&&null===c[Ji]&&(c[Ji]=Wm(h,c[_o])),Aw(l,c,c[Ln])}function Aw(o,a,c){Kf(a);try{const l=o.viewQuery;null!==l&&Tw(1,l,c);const h=o.template;null!==h&&lw(o,a,h,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&mA(o,a),o.staticViewQueries&&Tw(2,o.viewQuery,c);const m=o.components;null!==m&&function vA(o,a){for(let c=0;c<a.length;c++)XP(o,a[c])}(a,m)}catch(l){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),l}finally{a[Ot]&=-5,hl()}}let JP=(()=>{var o;class a{constructor(){this.all=new Set,this.queue=new Map}create(l,h,m){const v=typeof Zone>"u"?null:Zone.current,T=new Lf(l,M=>{this.all.has(M)&&this.queue.set(M,v)},m);let C;this.all.add(T),T.notify();const x=()=>{T.cleanup(),C?.(),this.all.delete(T),this.queue.delete(T)};return C=h?.onDestroy(x),{destroy:x}}flush(){if(0!==this.queue.size)for(const[l,h]of this.queue)this.queue.delete(l),h?h.run(()=>l.run()):l.run()}get isQueueEmpty(){return 0===this.queue.size}}return(o=a).\u0275prov=Tt({token:o,providedIn:"root",factory:()=>new o}),a})();function Sw(o,a,c){let l=c?o.styles:null,h=c?o.classes:null,m=0;if(null!==a)for(let v=0;v<a.length;v++){const T=a[v];"number"==typeof T?m=T:1==m?h=We(h,T):2==m&&(l=We(l,T+": "+a[++v]+";"))}c?o.styles=l:o.stylesWithoutHost=l,c?o.classes=h:o.classesWithoutHost=h}function Rp(o,a,c,l,h=!1){for(;null!==c;){const m=a[c.index];if(null!==m&&l.push(Nn(m)),gi(m)){for(let T=Gr;T<m.length;T++){const C=m[T],x=C[ct].firstChild;null!==x&&Rp(C[ct],C,x,l)}m[Sr]!==m[qn]&&l.push(m[Sr])}const v=c.type;if(8&v)Rp(o,a,c.child,l);else if(32&v){const T=mh(c,a);let C;for(;C=T();)l.push(C)}else if(16&v){const T=yh(a,c);if(Array.isArray(T))l.push(...T);else{const C=_h(a[jn]);Rp(C[ct],C,T,l,!0)}}c=h?c.projectionNext:c.next}return l}function n_(o,a,c,l=!0){const h=a[au],m=h.rendererFactory,v=h.afterRenderEventManager;m.begin?.(),v?.begin();try{xw(o,a,o.template,c)}catch(C){throw l&&Cw(a,C),C}finally{m.end?.(),h.effectManager?.flush(),v?.end()}}function xw(o,a,c,l){const h=a[Ot];if(256!=(256&h)){a[au].effectManager?.flush(),Kf(a);try{Ud(a),function yu(o){return Lt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&lw(o,a,c,2,l);const v=3==(3&h);if(v){const x=o.preOrderCheckHooks;null!==x&&Ra(a,x,null)}else{const x=o.preOrderHooks;null!==x&&ea(a,x,0,null),lc(a,0)}if(function x2(o){for(let a=hv(o);null!==a;a=A0(a)){if(!a[Kc])continue;const c=a[xr];for(let l=0;l<c.length;l++){fm(c[l])}}}(a),IA(a,2),null!==o.contentQueries&&mA(o,a),v){const x=o.contentCheckHooks;null!==x&&Ra(a,x)}else{const x=o.contentHooks;null!==x&&ea(a,x,1),lc(a,1)}!function w2(o,a){const c=o.hostBindingOpCodes;if(null===c)return;const l=jv(a,ya);try{for(let h=0;h<c.length;h++){const m=c[h];if(m<0)Xo(~m);else{const v=m,T=c[++h],C=c[++h];qd(T,v),l.runInContext(C,2,a[v])}}}finally{null===a[ya]&&aw(a,ya),Xo(-1)}}(o,a);const T=o.components;null!==T&&Rw(a,T,0);const C=o.viewQuery;if(null!==C&&Tw(2,C,l),v){const x=o.viewCheckHooks;null!==x&&Ra(a,x)}else{const x=o.viewHooks;null!==x&&ea(a,x,2),lc(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[Ot]&=-73,$f(a)}finally{hl()}}}function IA(o,a){for(let c=hv(o);null!==c;c=A0(c))for(let l=Gr;l<c.length;l++)eM(c[l],a)}function R2(o,a,c){eM(ur(a,o),c)}function eM(o,a){if(!function jf(o){return 128==(128&o[Ot])}(o))return;const c=o[ct];if(80&o[Ot]&&0===a||1024&o[Ot]||2===a)xw(c,o,c.template,o[Ln]);else if(o[ma]>0){IA(o,1);const h=o[ct].components;null!==h&&Rw(o,h,1)}}function Rw(o,a,c){for(let l=0;l<a.length;l++)R2(o,a[l],c)}class r_{get rootNodes(){const a=this._lView,c=a[ct];return Rp(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ln]}set context(a){this._lView[Ln]=a}get destroyed(){return 256==(256&this._lView[Ot])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Bn];if(gi(a)){const c=a[8],l=c?c.indexOf(this):-1;l>-1&&(Hn(a,l),nt(c,l))}this._attachedToViewContainer=!1}ys(this._lView[ct],this._lView)}onDestroy(a){!function mu(o,a){if(256==(256&o[Ot]))throw new ue(911,!1);null===o[Ko]&&(o[Ko]=[]),o[Ko].push(a)}(this._lView,a)}markForCheck(){Ul(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ot]&=-129}reattach(){this._lView[Ot]|=128}detectChanges(){n_(this._lView[ct],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ee(o,a){Fm(o,a,a[Vt],2,null,null)}(this._lView[ct],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ue(902,!1);this._appRef=a}}class ie extends r_{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;n_(a[ct],a,a[Ln],!1)}checkNoChanges(){}get context(){return null}}class Hi extends Ip{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=sn(a);return new i_(c,this.ngModule)}}function Sh(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class on{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,l){l=dr(l);const h=this.injector.get(a,eA,l);return h!==eA||c===eA?h:this.parentInjector.get(a,c,l)}}class i_ extends nw{get inputs(){const a=this.componentDef,c=a.inputTransforms,l=Sh(a.inputs);if(null!==c)for(const h of l)c.hasOwnProperty(h.propName)&&(h.transform=c[h.propName]);return l}get outputs(){return Sh(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function Sf(o){return o.map(Af).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,l,h){let m=(h=h||this.ngModule)instanceof xu?h:h?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new on(a,m):a,T=v.get(MP,null);if(null===T)throw new ue(407,!1);const V={rendererFactory:T,sanitizer:v.get(h2,null),effectManager:v.get(JP,null),afterRenderEventManager:v.get(bp,null)},K=T.createRenderer(null,this.componentDef),ne=this.componentDef.selectors[0][0]||"div",De=l?function jP(o,a,c,l){const m=l.get(sA,!1)||c===xs.ShadowDom,v=o.selectRootElement(a,m);return function T2(o){pw(o)}(v),v}(K,l,this.componentDef.encapsulation,v):S(K,ne,function rs(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(ne)),Pt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Be=null;null!==De&&(Be=Wm(De,v,!0));const Gt=fw(0,null,null,1,0,null,null,null,null,null,null),an=cw(null,Gt,null,Pt,null,null,V,K,v,null,Be);let xn,ao;Kf(an);try{const Ya=this.componentDef;let Fc,uy=null;Ya.findHostDirectiveDefs?(Fc=[],uy=new Map,Ya.findHostDirectiveDefs(Ya,Fc,uy),Fc.push(Ya)):Fc=[Ya];const Gx=function ht(o,a){const c=o[ct],l=Zt;return o[l]=a,Ym(c,l,2,"#host",null)}(an,De),Dg=function Pw(o,a,c,l,h,m,v){const T=h[ct];!function Xt(o,a,c,l){for(const h of o)a.mergedAttrs=pa(a.mergedAttrs,h.hostAttrs);null!==a.mergedAttrs&&(Sw(a,a.mergedAttrs,!0),null!==c&&Lm(l,c,a))}(l,o,a,v);let C=null;null!==a&&(C=Wm(a,h[_o]));const x=m.rendererFactory.createRenderer(a,c);let M=16;c.signals?M=4096:c.onPush&&(M=64);const V=cw(h,hw(c),null,M,h[o.index],o,m,x,null,null,C);return T.firstCreatePass&&Iw(T,o,l.length-1),t_(h,V),h[o.index]=V}(Gx,De,Ya,Fc,an,V,K);ao=Bf(Gt,Zt),De&&function s_(o,a,c,l){if(l)iu(o,c,["ng-version",kP.full]);else{const{attrs:h,classes:m}=function hs(o){const a=[],c=[];let l=1,h=2;for(;l<o.length;){let m=o[l];if("string"==typeof m)2===h?""!==m&&a.push(m,o[++l]):8===h&&c.push(m);else{if(!Li(h))break;h=m}l++}return{attrs:a,classes:c}}(a.selectors[0]);h&&iu(o,c,h),m&&m.length>0&&PD(o,c,m.join(" "))}}(K,Ya,De,l),void 0!==c&&function tM(o,a,c){const l=o.projection=[];for(let h=0;h<a.length;h++){const m=c[h];l.push(null!=m?Array.from(m):null)}}(ao,this.ngContentSelectors,c),xn=function zv(o,a,c,l,h,m){const v=mr(),T=h[ct],C=yi(v,h);mw(T,h,v,c,null,l);for(let M=0;M<c.length;M++)ri(Do(h,T,v.directiveStart+M,v),h);yw(T,h,v),C&&ri(C,h);const x=Do(h,T,v.directiveStart+v.componentOffset,v);if(o[Ln]=h[Ln]=x,null!==m)for(const M of m)M(x,a);return dw(T,v,o),x}(Dg,Ya,Fc,uy,an,[Mw]),Aw(Gt,an,null)}finally{hl()}return new qa(this.componentType,xn,Ep(ao,an),an,ao)}}class qa extends Ll{constructor(a,c,l,h,m){super(),this.location=l,this._rootLView=h,this._tNode=m,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new ie(h),this.componentType=a}setInput(a,c){const l=this._tNode.inputs;let h;if(null!==l&&(h=l[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),c))return;const m=this._rootLView;Dw(m[ct],m,h,a,c),this.previousInputValues.set(a,c),Ul(ur(this._tNode.index,m))}}get injector(){return new tr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function Mw(){const o=mr();ni(Te()[ct],o)}function Nw(o){let a=function EA(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const l=[o];for(;a;){let h;if(Vi(o))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ue(903,!1);h=a.\u0275dir}if(h){if(c){l.push(h);const v=o;v.inputs=Di(o.inputs),v.inputTransforms=Di(o.inputTransforms),v.declaredInputs=Di(o.declaredInputs),v.outputs=Di(o.outputs);const T=h.hostBindings;T&&jl(o,T);const C=h.viewQuery,x=h.contentQueries;if(C&&Wv(o,C),x&&Gi(o,x),G(o.inputs,h.inputs),G(o.declaredInputs,h.declaredInputs),G(o.outputs,h.outputs),null!==h.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),G(v.inputTransforms,h.inputTransforms)),Vi(h)&&h.data.animation){const M=o.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const T=m[v];T&&T.ngInherit&&T(o),T===Nw&&(c=!1)}}a=Object.getPrototypeOf(a)}!function nM(o){let a=0,c=null;for(let l=o.length-1;l>=0;l--){const h=o[l];h.hostVars=a+=h.hostVars,h.hostAttrs=pa(h.hostAttrs,c=pa(c,h.hostAttrs))}}(l)}function Di(o){return o===Rs?{}:o===rn?[]:o}function Wv(o,a){const c=o.viewQuery;o.viewQuery=c?(l,h)=>{a(l,h),c(l,h)}:a}function Gi(o,a){const c=o.contentQueries;o.contentQueries=c?(l,h,m)=>{a(l,h,m),c(l,h,m)}:a}function jl(o,a){const c=o.hostBindings;o.hostBindings=c?(l,h)=>{a(l,h),c(l,h)}:a}function Kv(o){const a=o.inputConfig,c={};for(const l in a)if(a.hasOwnProperty(l)){const h=a[l];Array.isArray(h)&&h[2]&&(c[l]=h[2])}o.inputTransforms=c}function Zv(o){return!!a_(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function a_(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function qi(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function u_(o,a,c,l){const h=Te();return qi(h,wo(),a)&&(fn(),Pu(Jn(),h,o,a,c,l)),u_}function m_(o,a,c,l,h,m,v,T){const C=Te(),x=fn(),M=o+Zt,V=x.firstCreatePass?function OA(o,a,c,l,h,m,v,T,C){const x=a.consts,M=Ym(a,o,4,v||null,Yo(x,T));e_(a,c,M,Yo(x,C)),ni(a,M);const V=M.tView=fw(2,M,l,h,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,x,null);return null!==a.queries&&(a.queries.template(a,M),V.queries=a.queries.embeddedTView(M)),M}(M,x,C,a,c,l,h,m,v):x.data[M];Ps(V,!1);const K=FA(x,C,V,o);Jo()&&Om(x,C,K,V),ri(K,C),t_(C,C[M]=ww(K,C,K,V)),es(V)&&$v(x,C,V),null!=v&&Jm(C,V,T)}let FA=function LA(o,a,c,l){return vn(!0),a[Vt].createComment("")};function iI(o,a,c){const l=Te();return qi(l,wo(),a)&&function vs(o,a,c,l,h,m,v,T){const C=yi(a,c);let M,x=a.inputs;!T&&null!=x&&(M=x[l])?(Dw(o,c,M,l,h),Ia(a)&&function qP(o,a){const c=ur(a,o);16&c[Ot]||(c[Ot]|=64)}(c,a.index)):3&a.type&&(l=function GP(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(l),h=null!=v?v(h,a.value||"",l):h,m.setProperty(C,l,h))}(fn(),Jn(),l,o,a,l[Vt],c,!1),iI}function Up(o,a,c,l,h){const v=h?"class":"style";Dw(o,c,a.inputs[v],v,l)}function Gl(o,a,c,l){const h=Te(),m=fn(),v=Zt+o,T=h[Vt],C=m.firstCreatePass?function VA(o,a,c,l,h,m){const v=a.consts,C=Ym(a,o,2,l,Yo(v,h));return e_(a,c,C,Yo(v,m)),null!==C.attrs&&Sw(C,C.attrs,!1),null!==C.mergedAttrs&&Sw(C,C.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,C),C}(v,m,h,a,c,l):m.data[v],x=Ww(m,h,C,T,a,o);h[v]=x;const M=es(C);return Ps(C,!0),Lm(T,x,C),32!=(32&C.flags)&&Jo()&&Om(m,h,x,C),0===function Gf(){return Lt.lFrame.elementDepthCount}()&&ri(x,h),function ac(){Lt.lFrame.elementDepthCount++}(),M&&($v(m,h,C),dw(m,C,h)),null!==l&&Jm(h,C),Gl}function __(){let o=mr();Pr()?Sa():(o=o.parent,Ps(o,!1));const a=o;(function Aa(o){return Lt.skipHydrationRootTNode===o})(a)&&function v0(){Lt.skipHydrationRootTNode=null}(),function gm(){Lt.lFrame.elementDepthCount--}();const c=fn();return c.firstCreatePass&&(ni(c,o),Zc(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function gl(o){return 0!=(8&o.flags)}(a)&&Up(c,a,Te(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function er(o){return 0!=(16&o.flags)}(a)&&Up(c,a,Te(),a.stylesWithoutHost,!1),__}function ss(o,a,c,l){return Gl(o,a,c,l),__(),ss}let Ww=(o,a,c,l,h,m)=>(vn(!0),S(l,h,function vi(){return Lt.lFrame.currentNamespace}()));function Bp(o,a,c){const l=Te(),h=fn(),m=o+Zt,v=h.firstCreatePass?function UA(o,a,c,l,h){const m=a.consts,v=Yo(m,l),T=Ym(a,o,8,"ng-container",v);return null!==v&&Sw(T,v,!0),e_(a,c,T,Yo(m,h)),null!==a.queries&&a.queries.elementStart(a,T),T}(m,h,l,a,c):h.data[m];Ps(v,!0);const T=jp(h,l,v,o);return l[m]=T,Jo()&&Om(h,l,T,v),ri(T,l),es(v)&&($v(h,l,v),dw(h,v,l)),null!=c&&Jm(l,v),Bp}function v_(){let o=mr();const a=fn();return Pr()?Sa():(o=o.parent,Ps(o,!1)),a.firstCreatePass&&(ni(a,o),Zc(o)&&a.queries.elementEnd(o)),v_}let jp=(o,a,c,l)=>(vn(!0),w(a[Vt],""));function oI(){return Te()}function $p(o){return!!o&&"function"==typeof o.then}function Hp(o){return!!o&&"function"==typeof o.subscribe}function aI(o,a,c,l){const h=Te(),m=fn(),v=mr();return function I_(o,a,c,l,h,m,v){const T=es(l),x=o.firstCreatePass&&bw(o),M=a[Ln],V=qv(a);let K=!0;if(3&l.type||v){const ze=yi(l,a),rt=v?v(ze):ze,Pt=V.length,Be=v?an=>v(Nn(an[l.index])):l.index;let Gt=null;if(!v&&T&&(Gt=function Yw(o,a,c,l){const h=o.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===c&&h[m+1]===l){const T=a[nc],C=h[m+2];return T.length>C?T[C]:null}"string"==typeof v&&(m+=2)}return null}(o,a,h,l.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=m,Gt.__ngLastListenerFn__=m,K=!1;else{m=Xw(l,a,M,m,!1);const an=c.listen(rt,h,m);V.push(m,an),x&&x.push(h,Be,Pt,Pt+1)}}else m=Xw(l,a,M,m,!1);const ne=l.outputs;let De;if(K&&null!==ne&&(De=ne[h])){const ze=De.length;if(ze)for(let rt=0;rt<ze;rt+=2){const xn=a[De[rt]][De[rt+1]].subscribe(m),ao=V.length;V.push(m,xn),x&&x.push(h,l.index,ao,-(ao+1))}}}(m,h,h[Vt],v,o,a,l),aI}function uI(o,a,c,l){try{return ps(6,a,c),!1!==c(l)}catch(h){return Cw(o,h),!1}finally{ps(7,a,c)}}function Xw(o,a,c,l,h){return function m(v){if(v===Function)return l;Ul(o.componentOffset>-1?ur(o.index,a):a);let C=uI(a,c,l,v),x=m.__ngNextListenerFn__;for(;x;)C=uI(a,c,x,v)&&C,x=x.__ngNextListenerFn__;return h&&!1===C&&v.preventDefault(),C}}function Jw(o=1){return function ym(o){return(Lt.lFrame.contextLView=function fl(o,a){for(;o>0;)a=a[yo],o--;return a}(o,Lt.lFrame.contextLView))[Ln]}(o)}function Fu(o,a){return o<<17|a<<2}function Is(o){return o>>17&32767}function hI(o){return 2|o}function Sn(o){return(131068&o)>>2}function zp(o,a){return-131069&o|a<<2}function Mh(o){return 1|o}function qA(o,a,c,l,h){const m=o[c+1],v=null===a;let T=l?Is(m):Sn(m),C=!1;for(;0!==T&&(!1===C||v);){const M=o[T+1];gM(o[T],a)&&(C=!0,o[T+1]=l?Mh(M):hI(M)),T=l?Is(M):Sn(M)}C&&(o[c+1]=l?hI(m):Mh(m))}function gM(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&ia(o,a)>=0}function aT(o,a){return function Fs(o,a,c,l){const h=Te(),m=fn(),v=function Mr(o){const a=Lt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}(2);m.firstUpdatePass&&function uT(o,a,c,l){const h=o.data;if(null===h[c+1]){const m=h[Bi()],v=function pI(o,a){return a>=o.expandoStartIndex}(o,c);(function lT(o,a){return 0!=(o.flags&(a?8:16))})(m,l)&&null===a&&!v&&(a=!1),a=function T_(o,a,c,l){const h=function xa(o){const a=Lt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let m=l?a.residualClasses:a.residualStyles;if(null===h)0===(l?a.classBindings:a.styleBindings)&&(c=C_(c=gI(null,o,a,c,l),a.attrs,l),m=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==h)if(c=gI(h,o,a,c,l),null===m){let C=function b_(o,a,c){const l=c?a.classBindings:a.styleBindings;if(0!==Sn(l))return o[Is(l)]}(o,a,l);void 0!==C&&Array.isArray(C)&&(C=gI(null,o,a,C[1],l),C=C_(C,a.attrs,l),function IM(o,a,c,l){o[Is(c?a.classBindings:a.styleBindings)]=l}(o,a,l,C))}else m=function Or(o,a,c){let l;const h=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<h;m++)l=C_(l,o[m].hostAttrs,c);return C_(l,a.attrs,c)}(o,a,l)}return void 0!==m&&(l?a.residualClasses=m:a.residualStyles=m),c}(h,m,a,l),function fM(o,a,c,l,h,m){let v=m?a.classBindings:a.styleBindings,T=Is(v),C=Sn(v);o[l]=c;let M,x=!1;if(Array.isArray(c)?(M=c[1],(null===M||ia(c,M)>0)&&(x=!0)):M=c,h)if(0!==C){const K=Is(o[T+1]);o[l+1]=Fu(K,T),0!==K&&(o[K+1]=zp(o[K+1],l)),o[T+1]=function dI(o,a){return 131071&o|a<<17}(o[T+1],l)}else o[l+1]=Fu(T,0),0!==T&&(o[T+1]=zp(o[T+1],l)),T=l;else o[l+1]=Fu(C,0),0===T?T=l:o[C+1]=zp(o[C+1],l),C=l;x&&(o[l+1]=hI(o[l+1])),qA(o,M,l,!0),qA(o,M,l,!1),function pM(o,a,c,l,h){const m=h?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&ia(m,a)>=0&&(c[l+1]=Mh(c[l+1]))}(a,M,o,l,m),v=Fu(T,C),m?a.classBindings=v:a.styleBindings=v}(h,m,a,c,v,l)}}(m,o,v,l),a!==Yt&&qi(h,v,a)&&function cT(o,a,c,l,h,m,v,T){if(!(3&a.type))return;const C=o.data,x=C[T+1],M=function w_(o){return 1==(1&o)}(x)?D_(C,a,c,h,Sn(x),v):void 0;A_(M)||(A_(m)||function lI(o){return 2==(2&o)}(x)&&(m=D_(C,null,c,h,T,v)),function nP(o,a,c,l,h){if(a)h?o.addClass(c,l):o.removeClass(c,l);else{let m=-1===l.indexOf("-")?void 0:Sm.DashCase;null==h?o.removeStyle(c,l,m):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),m|=Sm.Important),o.setStyle(c,l,h,m))}}(l,v,al(Bi(),c),h,m))}(m,m.data[Bi()],h,h[Vt],o,h[v+1]=function Vu(o,a){return null==o||""===o||("string"==typeof a?o+=a:"object"==typeof o&&(o=re(Ac(o)))),o}(a,c),l,v)}(o,a,null,!0),aT}function gI(o,a,c,l,h){let m=null;const v=c.directiveEnd;let T=c.directiveStylingLast;for(-1===T?T=c.directiveStart:T++;T<v&&(m=a[T],l=C_(l,m.hostAttrs,h),m!==o);)T++;return null!==o&&(c.directiveStylingLast=T),l}function C_(o,a,c){const l=c?1:2;let h=-1;if(null!==a)for(let m=0;m<a.length;m++){const v=a[m];"number"==typeof v?h=v:h===l&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),_n(o,v,!!c||a[++m]))}return void 0===o?null:o}function D_(o,a,c,l,h,m){const v=null===a;let T;for(;h>0;){const C=o[h],x=Array.isArray(C),M=x?C[1]:C,V=null===M;let K=c[h+1];K===Yt&&(K=V?rn:void 0);let ne=V?Ns(K,l):M===l?K:void 0;if(x&&!A_(ne)&&(ne=Ns(C,l)),A_(ne)&&(T=ne,v))return T;const De=o[h+1];h=v?Is(De):Sn(De)}if(null!==a){let C=m?a.residualClasses:a.residualStyles;null!=C&&(T=Ns(C,l))}return T}function A_(o){return void 0!==o}function eS(o,a=""){const c=Te(),l=fn(),h=o+Zt,m=l.firstCreatePass?Ym(l,h,1,a,null):l.data[h],v=dT(l,c,m,a,o);c[h]=v,Jo()&&Om(l,c,v,m),Ps(m,!1)}let dT=(o,a,c,l,h)=>(vn(!0),function g(o,a){return o.createText(a)}(a[Vt],l));function mI(o){return x_("",o,""),mI}function x_(o,a,c){const l=Te(),h=function kp(o,a,c,l){return qi(o,wo(),c)?a+se(c)+l:Yt}(l,o,a,c);return h!==Yt&&function Mu(o,a,c){const l=al(a,o);!function _(o,a,c){o.setValue(a,c)}(o[Vt],l,c)}(l,Bi(),h),x_}const Wi=void 0;var TI=["en",[["a","p"],["AM","PM"],Wi],[["AM","PM"],Wi,Wi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wi,"{1} 'at' {0}",Wi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function os(o){const c=Math.floor(Math.abs(o)),l=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===l?1:5}];let Mc={};function Qp(o){const a=function bM(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=hS(a);if(c)return c;const l=a.split("-")[0];if(c=hS(l),c)return c;if("en"===l)return TI;throw new ue(701,!1)}function Fh(o){return Qp(o)[zl.PluralCase]}function hS(o){return o in Mc||(Mc[o]=gn.ng&&gn.ng.common&&gn.ng.common.locales&&gn.ng.common.locales[o]),Mc[o]}var zl=function(o){return o[o.LocaleId=0]="LocaleId",o[o.DayPeriodsFormat=1]="DayPeriodsFormat",o[o.DayPeriodsStandalone=2]="DayPeriodsStandalone",o[o.DaysFormat=3]="DaysFormat",o[o.DaysStandalone=4]="DaysStandalone",o[o.MonthsFormat=5]="MonthsFormat",o[o.MonthsStandalone=6]="MonthsStandalone",o[o.Eras=7]="Eras",o[o.FirstDayOfWeek=8]="FirstDayOfWeek",o[o.WeekendRange=9]="WeekendRange",o[o.DateFormat=10]="DateFormat",o[o.TimeFormat=11]="TimeFormat",o[o.DateTimeFormat=12]="DateTimeFormat",o[o.NumberSymbols=13]="NumberSymbols",o[o.NumberFormats=14]="NumberFormats",o[o.CurrencyCode=15]="CurrencyCode",o[o.CurrencySymbol=16]="CurrencySymbol",o[o.CurrencyName=17]="CurrencyName",o[o.Currencies=18]="Currencies",o[o.Directionality=19]="Directionality",o[o.PluralCase=20]="PluralCase",o[o.ExtraData=21]="ExtraData",o}(zl||{});const M_="en-US";let xi=M_;function xT(o,a,c,l,h){if(o=Ve(o),Array.isArray(o))for(let m=0;m<o.length;m++)xT(o[m],a,c,l,h);else{const m=fn(),v=Te(),T=mr();let C=Eh(o)?o:Ve(o.provide);const x=bP(o),M=1048575&T.providerIndexes,V=T.directiveStart,K=T.providerIndexes>>20;if(Eh(o)||!o.multi){const ne=new St(x,h,xp),De=PT(C,a,h?M:M+K,V);-1===De?(ms(pc(T,v),m,C),RT(m,o,a.length),a.push(C),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),c.push(ne),v.push(ne)):(c[De]=ne,v[De]=ne)}else{const ne=PT(C,a,M+K,V),De=PT(C,a,M,M+K),rt=De>=0&&c[De];if(h&&!rt||!h&&!(ne>=0&&c[ne])){ms(pc(T,v),m,C);const Pt=function SS(o,a,c,l,h){const m=new St(o,c,xp);return m.multi=[],m.index=a,m.componentProviders=0,DS(m,h,l&&!c),m}(h?AS:zM,c.length,h,l,x);!h&&rt&&(c[De].providerFactory=Pt),RT(m,o,a.length,0),a.push(C),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),c.push(Pt),v.push(Pt)}else RT(m,o,ne>-1?ne:De,DS(c[h?De:ne],x,!h&&l));!h&&l&&rt&&c[De].componentProviders++}}}function RT(o,a,c,l){const h=Eh(a),m=function wP(o){return!!o.useClass}(a);if(h||m){const C=(m?Ve(a.useClass):a).prototype.ngOnDestroy;if(C){const x=o.destroyHooks||(o.destroyHooks=[]);if(!h&&a.multi){const M=x.indexOf(c);-1===M?x.push(c,[l,C]):x[M+1].push(l,C)}else x.push(c,C)}}}function DS(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function PT(o,a,c,l){for(let h=c;h<l;h++)if(a[h]===o)return h;return-1}function zM(o,a,c,l){return MT(this.multi,[])}function AS(o,a,c,l){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,T=Do(c,c[ct],this.providerFactory.index,l);m=T.slice(0,v),MT(h,m);for(let C=v;C<T.length;C++)m.push(T[C])}else m=[],MT(h,m);return m}function MT(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function NT(o,a=[]){return c=>{c.providersResolver=(l,h)=>function qM(o,a,c){const l=fn();if(l.firstCreatePass){const h=Vi(o);xT(c,l.data,l.blueprint,h,!0),xT(a,l.data,l.blueprint,h,!1)}}(l,h?h(o):o,a)}}class Hh{}class NI{}function Ki(o,a){return new ju(o,a??null,[])}class ju extends Hh{constructor(a,c,l){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hi(this);const h=fi(a);this._bootstrapComponents=Vl(h.bootstrap),this._r3Injector=tA(a,c,[{provide:Hh,useValue:this},{provide:Ip,useValue:this.componentFactoryResolver},...l],re(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class kI extends NI{constructor(a){super(),this.moduleType=a}create(a){return new ju(this.moduleType,a,[])}}class L_ extends Hh{constructor(a){super(),this.componentFactoryResolver=new Hi(this),this.instance=null;const c=new Hm([...a.providers,{provide:Hh,useValue:this},{provide:Ip,useValue:this.componentFactoryResolver}],a.parent||Tv(),a.debugName,new Set(["environment"]));this.injector=c,a.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Zi(o,a,c=null){return new L_({providers:o,parent:a,debugName:c,runEnvironmentInitializers:!0}).injector}let rr=(()=>{var o;class a{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l)){const h=IP(0,l.type),m=h.length>0?Zi([h],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l,m)}return this.cachedInjectors.get(l)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return(o=a).\u0275prov=Tt({token:o,providedIn:"environment",factory:()=>new o(Bt(xu))}),a})();function kT(o){o.getStandaloneInjector=a=>a.get(rr).getOrCreateStandaloneInjector(o)}function tg(o,a,c,l){return function UT(o,a,c,l,h,m){const v=a+c;return qi(o,v,h)?function Nu(o,a,c){return o[a]=c}(o,v+1,m?l.call(m,h):l(h)):function rg(o,a){const c=o[a];return c===Yt?void 0:c}(o,v+1)}(Te(),function Ui(){const o=Lt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}(),o,a,c,l)}function LI(o){return a=>{setTimeout(o,void 0,a)}}const Jt=class JM extends f.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,l){let h=a,m=c||(()=>null),v=l;if(a&&"object"==typeof a){const C=a;h=C.next?.bind(C),m=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(m=LI(m),h&&(h=LI(h)),v&&(v=LI(v)));const T=super.subscribe({next:h,error:m,complete:v});return a instanceof te.w0&&a.add(T),T}};function Vn(){return this._results[Symbol.iterator]()}class td{get changes(){return this._changes||(this._changes=new Jt)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=td.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=Vn)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const l=this;l.dirty=!1;const h=function H(o){return o.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function F(o,a,c){if(o.length!==a.length)return!1;for(let l=0;l<o.length;l++){let h=o[l],m=a[l];if(c&&(h=c(h),m=c(m)),m!==h)return!1}return!0}(l._results,h,c))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function FS(o,a,c,l=!0){const h=a[ct];if(function Ye(o,a,c,l){const h=Gr+l,m=c.length;l>0&&(c[h-1][pi]=a),l<m-Gr?(a[pi]=c[h],pe(c,Gr+l,a)):(c.push(a),a[pi]=null),a[Bn]=c;const v=a[Sd];null!==v&&c!==v&&function mt(o,a){const c=o[xr];a[jn]!==a[Bn][Bn][jn]&&(o[Kc]=!0),null===c?o[xr]=[a]:c.push(a)}(v,a);const T=a[Ar];null!==T&&T.insertView(o),a[Ot]|=128}(h,a,o,c),l){const m=R0(c,o),v=a[Vt],T=cp(v,o[Sr]);null!==T&&function q(o,a,c,l,h,m){l[qn]=h,l[$r]=a,Fm(o,l,c,1,h,m)}(h,o[$r],v,a,T,m)}}let sg=(()=>{class a{}return a.__NG_ELEMENT_ID__=eN,a})();const VS=sg,US=class extends VS{constructor(a,c,l){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,c){return this.createEmbeddedViewImpl(a,c)}createEmbeddedViewImpl(a,c,l){const h=function jT(o,a,c,l){const h=a.tView,T=cw(o,h,c,4096&o[Ot]?4096:16,null,a,null,null,null,l?.injector??null,l?.hydrationInfo??null);T[Sd]=o[a.index];const x=o[Ar];return null!==x&&(T[Ar]=x.createEmbeddedView(h)),Aw(h,T,c),T}(this._declarationLView,this._declarationTContainer,a,{injector:c,hydrationInfo:l});return new r_(h)}};function eN(){return VI(mr(),Te())}function VI(o,a){return 4&o.type?new US(a,o,Ep(o,a)):null}let Kh=(()=>{class a{}return a.__NG_ELEMENT_ID__=UI,a})();function UI(){return Zh(mr(),Te())}const GS=Kh,HT=class extends GS{constructor(a,c,l){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=l}get element(){return Ep(this._hostTNode,this._hostLView)}get injector(){return new tr(this._hostTNode,this._hostLView)}get parentInjector(){const a=ka(this._hostTNode,this._hostLView);if(Yd(a)){const c=Xs(a,this._hostLView),l=ta(a);return new tr(c[ct].data[l+8],c)}return new tr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=Gu(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-Gr}createEmbeddedView(a,c,l){let h,m;"number"==typeof l?h=l:null!=l&&(h=l.index,m=l.injector);const T=a.createEmbeddedViewImpl(c||{},m,null);return this.insertImpl(T,h,false),T}createComponent(a,c,l,h,m){const v=a&&!function R(o){return"function"==typeof o}(a);let T;if(v)T=c;else{const ze=c||{};T=ze.index,l=ze.injector,h=ze.projectableNodes,m=ze.environmentInjector||ze.ngModuleRef}const C=v?a:new i_(sn(a)),x=l||this.parentInjector;if(!m&&null==C.ngModule){const rt=(v?x:this.parentInjector).get(xu,null);rt&&(m=rt)}sn(C.componentType??{});const ne=C.create(x,h,null,m);return this.insertImpl(ne.hostView,T,false),ne}insert(a,c){return this.insertImpl(a,c,!1)}insertImpl(a,c,l){const h=a._lView;if(function Vd(o){return gi(o[Bn])}(h)){const C=this.indexOf(a);if(-1!==C)this.detach(C);else{const x=h[Bn],M=new HT(x,x[$r],x[Bn]);M.detach(M.indexOf(a))}}const v=this._adjustIndex(c),T=this._lContainer;return FS(T,h,v,!l),a.attachToViewContainerRef(),pe(BI(T),v,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=Gu(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),l=Hn(this._lContainer,c);l&&(nt(BI(this._lContainer),c),ys(l[ct],l))}detach(a){const c=this._adjustIndex(a,-1),l=Hn(this._lContainer,c);return l&&null!=nt(BI(this._lContainer),c)?new r_(l):null}_adjustIndex(a,c=0){return a??this.length+c}};function Gu(o){return o[8]}function BI(o){return o[8]||(o[8]=[])}function Zh(o,a){let c;const l=a[o.index];return gi(l)?c=l:(c=ww(l,a,null,o),a[o.index]=c,t_(a,c)),jI(c,a,o,l),new HT(c,o,a)}let jI=function $_(o,a,c,l){if(o[Sr])return;let h;h=8&c.type?Nn(l):function qS(o,a){const c=o[Vt],l=c.createComment(""),h=yi(a,o);return Ga(c,cp(c,h),l,function km(o,a){return o.nextSibling(a)}(c,h),!1),l}(a,c),o[Sr]=h};class as{constructor(a){this.queryList=a,this.matches=null}clone(){return new as(this.queryList)}setDirty(){this.queryList.setDirty()}}class $I{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const l=null!==a.contentQueries?a.contentQueries[0]:c.length,h=[];for(let m=0;m<l;m++){const v=c.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new $I(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==lg(a,c).matches&&this.queries[c].setDirty()}}class HI{constructor(a,c,l=null){this.predicate=a,this.flags=c,this.read=l}}class ug{constructor(a=[]){this.queries=a}elementStart(a,c){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let l=0;l<this.length;l++){const h=null!==c?c.length:0,m=this.getByIndex(l).embeddedTView(a,h);m&&(m.indexInDeclarationView=l,null!==c?c.push(m):c=[m])}return null!==c?new ug(c):null}template(a,c){for(let l=0;l<this.queries.length;l++)this.queries[l].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Qh{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new Qh(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let l=a.parent;for(;null!==l&&8&l.type&&l.index!==c;)l=l.parent;return c===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const m=l[h];this.matchTNodeWithReadOption(a,c,zS(c,m)),this.matchTNodeWithReadOption(a,c,vl(c,a,m,!1,!1))}else l===sg?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,vl(c,a,l,!1,!1))}matchTNodeWithReadOption(a,c,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===Ch||h===Kh||h===sg&&4&c.type)this.addMatch(c.index,-2);else{const m=vl(c,a,h,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,l)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function zS(o,a){const c=o.localNames;if(null!==c)for(let l=0;l<c.length;l+=2)if(c[l]===a)return c[l+1];return null}function H_(o,a,c,l){return-1===c?function cg(o,a){return 11&o.type?Ep(o,a):4&o.type?VI(o,a):null}(a,o):-2===c?function WS(o,a,c){return c===Ch?Ep(a,o):c===sg?VI(a,o):c===Kh?Zh(a,o):void 0}(o,a,l):Do(o,o[ct],c,a)}function qT(o,a,c,l){const h=a[Ar].queries[l];if(null===h.matches){const m=o.data,v=c.matches,T=[];for(let C=0;C<v.length;C+=2){const x=v[C];T.push(x<0?null:H_(a,m[x],v[C+1],c.metadata.read))}h.matches=T}return h.matches}function zT(o,a,c,l){const h=o.queries.getByIndex(c),m=h.matches;if(null!==m){const v=qT(o,a,h,c);for(let T=0;T<m.length;T+=2){const C=m[T];if(C>0)l.push(v[T/2]);else{const x=m[T+1],M=a[-C];for(let V=Gr;V<M.length;V++){const K=M[V];K[Sd]===K[Bn]&&zT(K[ct],K,x,l)}if(null!==M[xr]){const V=M[xr];for(let K=0;K<V.length;K++){const ne=V[K];zT(ne[ct],ne,x,l)}}}}}return l}function qu(o){const a=Te(),c=fn(),l=Wf();zd(l+1);const h=lg(c,l);if(o.dirty&&function gu(o){return 4==(4&o[Ot])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)o.reset([]);else{const m=h.crossesNgTemplate?zT(c,a,l,[]):qT(c,a,h,l);o.reset(m,PP),o.notifyOnChanges()}return!0}return!1}function Vs(o,a,c,l){const h=fn();if(h.firstCreatePass){const m=mr();(function Za(o,a,c){null===o.queries&&(o.queries=new ug),o.queries.track(new Qh(a,c))})(h,new HI(a,c,l),m.index),function KS(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(h,o),2==(2&c)&&(h.staticContentQueries=!0)}!function KT(o,a,c){const l=new td(4==(4&c));(function HP(o,a,c,l){const h=qv(a);h.push(c),o.firstCreatePass&&bw(o).push(l,h.length-1)})(o,a,l,l.destroy),null===a[Ar]&&(a[Ar]=new $I),a[Ar].queries.push(new as(l))}(h,Te(),c)}function WT(){return function G_(o,a){return o[Ar].queries[a].queryList}(Te(),Wf())}function lg(o,a){return o.queries.getByIndex(a)}function dg(o){return!!fi(o)}const ix=new kn("Application Initializer");let ab=(()=>{var o;class a{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h}),this.appInits=Wt(ix,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const l=[];for(const m of this.appInits){const v=m();if($p(v))l.push(v);else if(Hp(v)){const T=new Promise((C,x)=>{v.subscribe({complete:C,error:x})});l.push(T)}}const h=()=>{this.done=!0,this.resolve()};Promise.all(l).then(()=>{h()}).catch(m=>{this.reject(m)}),0===l.length&&h(),this.initialized=!0}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=Tt({token:o,factory:o.\u0275fac,providedIn:"root"}),a})(),ZI=(()=>{var o;class a{log(l){console.log(l)}warn(l){console.warn(l)}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=Tt({token:o,factory:o.\u0275fac,providedIn:"platform"}),a})();const z_=new kn("LocaleId",{providedIn:"root",factory:()=>Wt(z_,Mt.Optional|Mt.SkipSelf)||function yg(){return typeof $localize<"u"&&$localize.locale||M_}()}),vN=new kn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let vg=(()=>{var o;class a{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new L.X(!1)}add(){this.hasPendingTasks.next(!0);const l=this.taskId++;return this.pendingTasks.add(l),l}remove(l){this.pendingTasks.delete(l),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=Tt({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();class Wu{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let ub=(()=>{var o;class a{compileModuleSync(l){return new kI(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const h=this.compileModuleSync(l),v=Vl(fi(l).declarations).reduce((T,C)=>{const x=sn(C);return x&&T.push(new i_(x)),T},[]);return new Wu(h,v)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=Tt({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();function rd(...o){}class us{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Jt(!1),this.onMicrotaskEmpty=new Jt(!1),this.onStable=new Jt(!1),this.onError=new Jt(!1),typeof Zone>"u")throw new ue(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&c,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function tf(){const o="function"==typeof gn.requestAnimationFrame;let a=gn[o?"requestAnimationFrame":"setTimeout"],c=gn[o?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&c){const l=a[Zone.__symbol__("OriginalDelegate")];l&&(a=l);const h=c[Zone.__symbol__("OriginalDelegate")];h&&(c=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function _x(o){const a=()=>{!function mx(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(gn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,fb(o),o.isCheckStableRunning=!0,Q_(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),fb(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,l,h,m,v,T)=>{try{return pb(o),c.invokeTask(h,m,v,T)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),gb(o)}},onInvoke:(c,l,h,m,v,T,C)=>{try{return pb(o),c.invoke(h,m,v,T,C)}finally{o.shouldCoalesceRunChangeDetection&&a(),gb(o)}},onHasTask:(c,l,h,m)=>{c.hasTask(h,m),l===h&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,fb(o),Q_(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,l,h,m)=>(c.handleError(h,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!us.isInAngularZone())throw new ue(909,!1)}static assertNotInAngularZone(){if(us.isInAngularZone())throw new ue(909,!1)}run(a,c,l){return this._inner.run(a,c,l)}runTask(a,c,l,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,a,hb,rd,rd);try{return m.runTask(v,c,l)}finally{m.cancelTask(v)}}runGuarded(a,c,l){return this._inner.runGuarded(a,c,l)}runOutsideAngular(a){return this._outer.run(a)}}const hb={};function Q_(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function fb(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function pb(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function gb(o){o._nesting--,Q_(o)}class JI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Jt,this.onMicrotaskEmpty=new Jt,this.onStable=new Jt,this.onError=new Jt}run(a,c,l){return a.apply(c,l)}runGuarded(a,c,l){return a.apply(c,l)}runOutsideAngular(a){return a()}runTask(a,c,l,h){return a.apply(c,l)}}const wg=new kn("",{providedIn:"root",factory:id});function id(){const o=Wt(us);let a=!0;const c=new J.y(h=>{a=o.isStable&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks,o.runOutsideAngular(()=>{h.next(a),h.complete()})}),l=new J.y(h=>{let m;o.runOutsideAngular(()=>{m=o.onStable.subscribe(()=>{us.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks&&(a=!0,h.next(!0))})})});const v=o.onUnstable.subscribe(()=>{us.assertInAngularZone(),a&&(a=!1,o.runOutsideAngular(()=>{h.next(!1)}))});return()=>{m.unsubscribe(),v.unsubscribe()}});return(0,oe.T)(c,l.pipe((0,Ee.B)()))}const yx=new kn(""),mb=new kn("");let nf,AN=(()=>{var o;class a{constructor(l,h,m){this._ngZone=l,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,nf||(function SN(o){nf=o}(m),m.addToWindow(h)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{us.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(l)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,h,m){let v=-1;h&&h>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==v),l(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:l,timeoutId:v,updateCb:m})}whenStable(l,h,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,h,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,h,m){return[]}}return(o=a).\u0275fac=function(l){return new(l||o)(Bt(us),Bt(vx),Bt(mb))},o.\u0275prov=Tt({token:o,factory:o.\u0275fac}),a})(),vx=(()=>{var o;class a{constructor(){this._applications=new Map}registerApplication(l,h){this._applications.set(l,h)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,h=!0){return nf?.findTestabilityInTree(this,l,h)??null}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=Tt({token:o,factory:o.\u0275fac,providedIn:"platform"}),a})(),oo=null;const Oc=new kn("AllowMultipleToken"),eE=new kn("PlatformDestroyListeners"),tE=new kn("appBootstrapListener");class Ex{constructor(a,c){this.name=a,this.token=c}}function wx(o,a,c=[]){const l=`Platform: ${a}`,h=new kn(l);return(m=[])=>{let v=rE();if(!v||v.injector.get(Oc,!1)){const T=[...c,...m,{provide:h,useValue:!0}];o?o(T):function yb(o){if(oo&&!oo.get(Oc,!1))throw new ue(400,!1);(function nE(){!function Od(o){rl=o}(()=>{throw new ue(600,!1)})})(),oo=o;const a=o.get(rf);(function Ib(o){o.get(GD,null)?.forEach(c=>c())})(o)}(function Y_(o=[],a){return ro.create({name:a,providers:[{provide:kl,useValue:"platform"},{provide:eE,useValue:new Set([()=>oo=null])},...o]})}(T,l))}return function wb(o){const a=rE();if(!a)throw new ue(401,!1);return a}()}}function rE(){return oo?.get(rf)??null}let rf=(()=>{var o;class a{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,h){const m=function bg(o="zone.js",a){return"noop"===o?new JI:"zone.js"===o?new us(a):o}(h?.ngZone,function Tg(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:o?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:o?.runCoalescing??!1}}({eventCoalescing:h?.ngZoneEventCoalescing,runCoalescing:h?.ngZoneRunCoalescing}));return m.run(()=>{const v=function nr(o,a,c){return new ju(o,a,c)}(l.moduleType,this.injector,function Cb(o){return[{provide:us,useFactory:o},{provide:Iv,multi:!0,useFactory:()=>{const a=Wt(sd,{optional:!0});return()=>a.initialize()}},{provide:ey,useFactory:Tx},{provide:wg,useFactory:id}]}(()=>m)),T=v.injector.get(Dp,null);return m.runOutsideAngular(()=>{const C=m.onError.subscribe({next:x=>{T.handleError(x)}});v.onDestroy(()=>{X_(this._modules,v),C.unsubscribe()})}),function Tb(o,a,c){try{const l=c();return $p(l)?l.catch(h=>{throw a.runOutsideAngular(()=>o.handleError(h)),h}):l}catch(l){throw a.runOutsideAngular(()=>o.handleError(l)),l}}(T,m,()=>{const C=v.injector.get(ab);return C.runInitializers(),C.donePromise.then(()=>(function Lh(o){it(o,"Expected localeId to be defined"),"string"==typeof o&&(xi=o.toLowerCase().replace(/_/g,"-"))}(v.injector.get(z_,M_)||M_),this._moduleDoBootstrap(v),v))})})}bootstrapModule(l,h=[]){const m=bb({},h);return function Ix(o,a,c){const l=new kI(c);return Promise.resolve(l)}(0,0,l).then(v=>this.bootstrapModuleFactory(v,m))}_moduleDoBootstrap(l){const h=l.injector.get(Kr);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(m=>h.bootstrap(m));else{if(!l.instance.ngDoBootstrap)throw new ue(-403,!1);l.instance.ngDoBootstrap(h)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ue(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const l=this._injector.get(eE,null);l&&(l.forEach(h=>h()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(o=a).\u0275fac=function(l){return new(l||o)(Bt(ro))},o.\u0275prov=Tt({token:o,factory:o.\u0275fac,providedIn:"platform"}),a})();function bb(o,a){return Array.isArray(a)?a.reduce(bb,o):{...o,...a}}let Kr=(()=>{var o;class a{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Wt(ey),this.zoneIsStable=Wt(wg),this.componentTypes=[],this.components=[],this.isStable=Wt(vg).hasPendingTasks.pipe((0,Le.w)(l=>l?(0,ve.of)(!1):this.zoneIsStable),(0,fe.x)(),(0,Ee.B)()),this._injector=Wt(xu)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,h){const m=l instanceof nw;if(!this._injector.get(ab).done)throw!m&&Wo(l),new ue(405,!1);let T;T=m?l:this._injector.get(Ip).resolveComponentFactory(l),this.componentTypes.push(T.componentType);const C=function _b(o){return o.isBoundToModule}(T)?void 0:this._injector.get(Hh),M=T.create(ro.NULL,[],h||T.selector,C),V=M.location.nativeElement,K=M.injector.get(yx,null);return K?.registerApplication(V),M.onDestroy(()=>{this.detachView(M.hostView),X_(this.components,M),K?.unregisterApplication(V)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new ue(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this.internalErrorHandler(l)}finally{this._runningTick=!1}}attachView(l){const h=l;this._views.push(h),h.attachToAppRef(this)}detachView(l){const h=l;X_(this._views,h),h.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const h=this._injector.get(tE,[]);h.push(...this._bootstrapListeners),h.forEach(m=>m(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>X_(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new ue(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=Tt({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();function X_(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}const ey=new kn("",{providedIn:"root",factory:()=>Wt(Dp).handleError.bind(void 0)});function Tx(){const o=Wt(us),a=Wt(Dp);return c=>o.runOutsideAngular(()=>a.handleError(c))}let sd=(()=>{var o;class a{constructor(){this.zone=Wt(us),this.applicationRef=Wt(Kr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=Tt({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();function xN(){return!1}let PN=(()=>{class a{}return a.__NG_ELEMENT_ID__=bx,a})();function bx(o){return function MN(o,a,c){if(Ia(o)&&!c){const l=ur(o.index,a);return new r_(l,l)}return 47&o.type?new r_(a[jn],a):null}(mr(),Te(),16==(16&o))}class Ax{constructor(){}supports(a){return Zv(a)}create(a){return new ON(a)}}const Pb=(o,a)=>a;class ON{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Pb}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,l=this._removalsHead,h=0,m=null;for(;c||l;){const v=!l||c&&c.currentIndex<Mb(l,h,m)?c:l,T=Mb(v,h,m),C=v.currentIndex;if(v===l)h--,l=l._nextRemoved;else if(c=c._next,null==v.previousIndex)h++;else{m||(m=[]);const x=T-h,M=C-h;if(x!=M){for(let K=0;K<x;K++){const ne=K<m.length?m[K]:m[K]=0,De=ne+K;M<=De&&De<x&&(m[K]=ne+1)}m[v.previousIndex]=M-x}}T!==C&&a(v,T,C)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!Zv(a))throw new ue(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,m,v,c=this._itHead,l=!1;if(Array.isArray(a)){this.length=a.length;for(let T=0;T<this.length;T++)m=a[T],v=this._trackByFn(T,m),null!==c&&Object.is(c.trackById,v)?(l&&(c=this._verifyReinsertion(c,m,v,T)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,v,T),l=!0),c=c._next}else h=0,function CA(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[Symbol.iterator]();let l;for(;!(l=c.next()).done;)a(l.value)}}(a,T=>{v=this._trackByFn(h,T),null!==c&&Object.is(c.trackById,v)?(l&&(c=this._verifyReinsertion(c,T,v,h)),Object.is(c.item,T)||this._addIdentityChange(c,T)):(c=this._mismatch(c,T,v,h),l=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,l,h){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,m,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,m,h)):a=this._addAfter(new oE(c,l),m,h),a}_verifyReinsertion(a,c,l,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==m?a=this._reinsertAfter(m,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,m=a._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(a,c,l),this._addToMoves(a,l),a}_moveAfter(a,c,l){return this._unlink(a),this._insertAfter(a,c,l),this._addToMoves(a,l),a}_addAfter(a,c,l){return this._insertAfter(a,c,l),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,l){const h=null===c?this._itHead:c._next;return a._next=h,a._prev=c,null===h?this._itTail=a:h._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new Sx),this._linkedRecords.put(a),a.currentIndex=l,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,l=a._next;return null===c?this._itHead=l:c._next=l,null===l?this._itTail=c:l._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Sx),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class oE{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class aE{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===c||c<=l.currentIndex)&&Object.is(l.trackById,a))return l;return null}remove(a){const c=a._prevDup,l=a._nextDup;return null===c?this._head=l:c._nextDup=l,null===l?this._tail=c:l._prevDup=c,null===this._head}}class Sx{constructor(){this.map=new Map}put(a){const c=a.trackById;let l=this.map.get(c);l||(l=new aE,this.map.set(c,l)),l.add(a)}get(a,c){const h=this.map.get(a);return h?h.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Mb(o,a,c){const l=o.previousIndex;if(null===l)return l;let h=0;return c&&l<c.length&&(h=c[l]),l+a+h}class uE{constructor(){}supports(a){return a instanceof Map||a_(a)}create(){return new Nb}}class Nb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||a_(a)))throw new ue(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(l,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,l),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(h,l);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let l=c;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const l=a._prev;return c._next=a,c._prev=l,a._prev=c,l&&(l._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,c);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const l=new iy(a);return this._records.set(a,l),l.currentValue=c,this._addToAdditions(l),l}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(l=>c(a[l],l))}}class iy{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sy(){return new oy([new Ax])}let oy=(()=>{var o;class a{constructor(l){this.factories=l}static create(l,h){if(null!=h){const m=h.factories.slice();l=l.concat(m)}return new a(l)}static extend(l){return{provide:a,useFactory:h=>a.create(l,h||sy()),deps:[[a,new tp,new nh]]}}find(l){const h=this.factories.find(m=>m.supports(l));if(null!=h)return h;throw new ue(901,!1)}}return(o=a).\u0275prov=Tt({token:o,providedIn:"root",factory:sy}),a})();function Rx(){return new cE([new uE])}let cE=(()=>{var o;class a{constructor(l){this.factories=l}static create(l,h){if(h){const m=h.factories.slice();l=l.concat(m)}return new a(l)}static extend(l){return{provide:a,useFactory:h=>a.create(l,h||Rx()),deps:[[a,new tp,new nh]]}}find(l){const h=this.factories.find(m=>m.supports(l));if(h)return h;throw new ue(901,!1)}}return(o=a).\u0275prov=Tt({token:o,providedIn:"root",factory:Rx}),a})();const VN=wx(null,"core",[]);let Nx=(()=>{var o;class a{constructor(l){}}return(o=a).\u0275fac=function(l){return new(l||o)(Bt(Kr))},o.\u0275mod=ec({type:o}),o.\u0275inj=Fn({}),a})();function BN(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}function HN(o){const a=sn(o);if(!a)return null;const c=new i_(a);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},3399:(Et,Me,O)=>{O.d(Me,{Z:()=>et});var f=O(9058),te=O(4537),L=O(7592),J=O(7879);class oe{constructor(tt,Ue){this._delegate=tt,this.firebase=Ue,(0,L._addComponent)(tt,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=tt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this._delegate.automaticDataCollectionEnabled=tt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(tt=>{this._delegate.checkDestroyed(),tt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(tt,Ue=L._DEFAULT_ENTRY_NAME){var bt;this._delegate.checkDestroyed();const wt=this._delegate.container.getProvider(tt);return!wt.isInitialized()&&"EXPLICIT"===(null===(bt=wt.getComponent())||void 0===bt?void 0:bt.instantiationMode)&&wt.initialize(),wt.getImmediate({identifier:Ue})}_removeServiceInstance(tt,Ue=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(tt).clearInstance(Ue)}_addComponent(tt){(0,L._addComponent)(this._delegate,tt)}_addOrOverwriteComponent(tt){(0,L._addOrOverwriteComponent)(this._delegate,tt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function fe(){const Ve=function Le(Ve){const tt={},Ue={__esModule:!0,initializeApp:function ue(He,de={}){const Q=L.initializeApp(He,de);if((0,f.r3)(tt,Q.name))return tt[Q.name];const Qe=new Ve(Q,Ue);return tt[Q.name]=Qe,Qe},app:wt,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function se(He){const de=He.name,Q=de.replace("-compat","");if(L._registerComponent(He)&&"PUBLIC"===He.type){const Qe=(Dt=wt())=>{if("function"!=typeof Dt[Q])throw Ee.create("invalid-app-argument",{appName:de});return Dt[Q]()};void 0!==He.serviceProps&&(0,f.ZB)(Qe,He.serviceProps),Ue[Q]=Qe,Ve.prototype[Q]=function(...Dt){return this._getService.bind(this,de).apply(this,He.multipleInstances?Dt:[])}}return"PUBLIC"===He.type?Ue[Q]:null},removeApp:function bt(He){delete tt[He]},useAsService:function xe(He,de){return"serverAuth"===de?null:de},modularAPIs:L}};function wt(He){if(!(0,f.r3)(tt,He=He||L._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:He});return tt[He]}return Ue.default=Ue,Object.defineProperty(Ue,"apps",{get:function Ae(){return Object.keys(tt).map(He=>tt[He])}}),wt.App=Ve,Ue}(oe);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function tt(Ue){(0,f.ZB)(Ve,Ue)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Ve}(),G=new J.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const et=U;!function Oe(Ve){(0,L.registerVersion)("@firebase/app-compat","0.2.13",Ve)}()},7592:(Et,Me,O)=>{O.r(Me),O.d(Me,{FirebaseError:()=>J.ZR,SDK_VERSION:()=>Fn,_DEFAULT_ENTRY_NAME:()=>ce,_addComponent:()=>Re,_addOrOverwriteComponent:()=>Fe,_apps:()=>Ie,_clearComponents:()=>Rt,_components:()=>be,_getProvider:()=>Je,_registerComponent:()=>it,_removeServiceInstance:()=>Qn,deleteApp:()=>Oi,getApp:()=>yn,getApps:()=>Yr,initializeApp:()=>ir,onLog:()=>Fi,registerVersion:()=>sr,setLogLevel:()=>po});var f=O(5861),te=O(4537),L=O(7879),J=O(9058),oe=O(1878);class ve{constructor(W){this.container=W}getPlatformInfoString(){return this.container.getProviders().map(we=>{if(function Ee(Ce){const W=Ce.getComponent();return"VERSION"===W?.type}(we)){const Xe=we.getImmediate();return`${Xe.library}/${Xe.version}`}return null}).filter(we=>we).join(" ")}}const Le="@firebase/app",U=new L.Yd("@firebase/app"),ce="[DEFAULT]",ye={[Le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ie=new Map,be=new Map;function Re(Ce,W){try{Ce.container.addComponent(W)}catch(we){U.debug(`Component ${W.name} failed to register with FirebaseApp ${Ce.name}`,we)}}function Fe(Ce,W){Ce.container.addOrOverwriteComponent(W)}function it(Ce){const W=Ce.name;if(be.has(W))return U.debug(`There were multiple attempts to register component ${W}.`),!1;be.set(W,Ce);for(const we of Ie.values())Re(we,Ce);return!0}function Je(Ce,W){const we=Ce.container.getProvider("heartbeat").getImmediate({optional:!0});return we&&we.triggerHeartbeat(),Ce.container.getProvider(W)}function Qn(Ce,W,we=ce){Je(Ce,W).clearInstance(we)}function Rt(){be.clear()}const Tt=new J.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Mn{constructor(W,we,Xe){this._isDeleted=!1,this._options=Object.assign({},W),this._config=Object.assign({},we),this._name=we.name,this._automaticDataCollectionEnabled=we.automaticDataCollectionEnabled,this._container=Xe,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(W){this.checkDestroyed(),this._automaticDataCollectionEnabled=W}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(W){this._isDeleted=W}checkDestroyed(){if(this.isDeleted)throw Tt.create("app-deleted",{appName:this._name})}}const Fn="9.23.0";function ir(Ce,W={}){let we=Ce;"object"!=typeof W&&(W={name:W});const Xe=Object.assign({name:ce,automaticDataCollectionEnabled:!1},W),st=Xe.name;if("string"!=typeof st||!st)throw Tt.create("bad-app-name",{appName:String(st)});if(we||(we=(0,J.aH)()),!we)throw Tt.create("no-options");const At=Ie.get(st);if(At){if((0,J.vZ)(we,At.options)&&(0,J.vZ)(Xe,At.config))return At;throw Tt.create("duplicate-app",{appName:st})}const mn=new te.H0(st);for(const j of be.values())mn.addComponent(j);const $=new Mn(we,Xe,mn);return Ie.set(st,$),$}function yn(Ce=ce){const W=Ie.get(Ce);if(!W&&Ce===ce&&(0,J.aH)())return ir();if(!W)throw Tt.create("no-app",{appName:Ce});return W}function Yr(){return Array.from(Ie.values())}function Oi(Ce){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,f.Z)(function*(Ce){const W=Ce.name;Ie.has(W)&&(Ie.delete(W),yield Promise.all(Ce.container.getProviders().map(we=>we.delete())),Ce.isDeleted=!0)})).apply(this,arguments)}function sr(Ce,W,we){var Xe;let st=null!==(Xe=ye[Ce])&&void 0!==Xe?Xe:Ce;we&&(st+=`-${we}`);const At=st.match(/\s|\//),mn=W.match(/\s|\//);if(At||mn){const $=[`Unable to register library "${st}" with version "${W}":`];return At&&$.push(`library name "${st}" contains illegal characters (whitespace or "/")`),At&&mn&&$.push("and"),mn&&$.push(`version name "${W}" contains illegal characters (whitespace or "/")`),void U.warn($.join(" "))}it(new te.wA(`${st}-version`,()=>({library:st,version:W}),"VERSION"))}function Fi(Ce,W){if(null!==Ce&&"function"!=typeof Ce)throw Tt.create("invalid-log-argument");(0,L.Am)(Ce,W)}function po(Ce){(0,L.Ub)(Ce)}const ha="firebase-heartbeat-database",Mt=1,Ut="firebase-heartbeat-store";let qt=null;function An(){return qt||(qt=(0,oe.X3)(ha,Mt,{upgrade:(Ce,W)=>{0===W&&Ce.createObjectStore(Ut)}}).catch(Ce=>{throw Tt.create("idb-open",{originalErrorMessage:Ce.message})})),qt}function lr(){return(lr=(0,f.Z)(function*(Ce){try{return yield(yield An()).transaction(Ut).objectStore(Ut).get(go(Ce))}catch(W){if(W instanceof J.ZR)U.warn(W.message);else{const we=Tt.create("idb-get",{originalErrorMessage:W?.message});U.warn(we.message)}}})).apply(this,arguments)}function gn(Ce,W){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,f.Z)(function*(Ce,W){try{const Xe=(yield An()).transaction(Ut,"readwrite");yield Xe.objectStore(Ut).put(W,go(Ce)),yield Xe.done}catch(we){if(we instanceof J.ZR)U.warn(we.message);else{const Xe=Tt.create("idb-set",{originalErrorMessage:we?.message});U.warn(Xe.message)}}})).apply(this,arguments)}function go(Ce){return`${Ce.name}!${Ce.options.appId}`}class dn{constructor(W){this.container=W,this._heartbeatsCache=null;const we=this.container.getProvider("app").getImmediate();this._storage=new $o(we),this._heartbeatsCachePromise=this._storage.read().then(Xe=>(this._heartbeatsCache=Xe,Xe))}triggerHeartbeat(){var W=this;return(0,f.Z)(function*(){const Xe=W.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),st=Xi();if(null===W._heartbeatsCache&&(W._heartbeatsCache=yield W._heartbeatsCachePromise),W._heartbeatsCache.lastSentHeartbeatDate!==st&&!W._heartbeatsCache.heartbeats.some(At=>At.date===st))return W._heartbeatsCache.heartbeats.push({date:st,agent:Xe}),W._heartbeatsCache.heartbeats=W._heartbeatsCache.heartbeats.filter(At=>{const mn=new Date(At.date).valueOf();return Date.now()-mn<=2592e6}),W._storage.overwrite(W._heartbeatsCache)})()}getHeartbeatsHeader(){var W=this;return(0,f.Z)(function*(){if(null===W._heartbeatsCache&&(yield W._heartbeatsCachePromise),null===W._heartbeatsCache||0===W._heartbeatsCache.heartbeats.length)return"";const we=Xi(),{heartbeatsToSend:Xe,unsentEntries:st}=function mo(Ce,W=1024){const we=[];let Xe=Ce.slice();for(const st of Ce){const At=we.find(mn=>mn.agent===st.agent);if(At){if(At.dates.push(st.date),Jr(we)>W){At.dates.pop();break}}else if(we.push({agent:st.agent,dates:[st.date]}),Jr(we)>W){we.pop();break}Xe=Xe.slice(1)}return{heartbeatsToSend:we,unsentEntries:Xe}}(W._heartbeatsCache.heartbeats),At=(0,J.L)(JSON.stringify({version:2,heartbeats:Xe}));return W._heartbeatsCache.lastSentHeartbeatDate=we,st.length>0?(W._heartbeatsCache.heartbeats=st,yield W._storage.overwrite(W._heartbeatsCache)):(W._heartbeatsCache.heartbeats=[],W._storage.overwrite(W._heartbeatsCache)),At})()}}function Xi(){return(new Date).toISOString().substring(0,10)}class $o{constructor(W){this.app=W,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,J.hl)()&&(0,J.eu)().then(()=>!0).catch(()=>!1)})()}read(){var W=this;return(0,f.Z)(function*(){return(yield W._canUseIndexedDBPromise)&&(yield function Un(Ce){return lr.apply(this,arguments)}(W.app))||{heartbeats:[]}})()}overwrite(W){var we=this;return(0,f.Z)(function*(){var Xe;if(yield we._canUseIndexedDBPromise){const At=yield we.read();return gn(we.app,{lastSentHeartbeatDate:null!==(Xe=W.lastSentHeartbeatDate)&&void 0!==Xe?Xe:At.lastSentHeartbeatDate,heartbeats:W.heartbeats})}})()}add(W){var we=this;return(0,f.Z)(function*(){var Xe;if(yield we._canUseIndexedDBPromise){const At=yield we.read();return gn(we.app,{lastSentHeartbeatDate:null!==(Xe=W.lastSentHeartbeatDate)&&void 0!==Xe?Xe:At.lastSentHeartbeatDate,heartbeats:[...At.heartbeats,...W.heartbeats]})}})()}}function Jr(Ce){return(0,J.L)(JSON.stringify({version:2,heartbeats:Ce})).length}!function Ks(Ce){it(new te.wA("platform-logger",W=>new ve(W),"PRIVATE")),it(new te.wA("heartbeat",W=>new dn(W),"PRIVATE")),sr(Le,"0.9.13",Ce),sr(Le,"0.9.13","esm2017"),sr("fire-js","")}("")},4097:(Et,Me,O)=>{O.d(Me,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=O(7592);(0,f.registerVersion)("firebase","9.23.0","app")},120:(Et,Me,O)=>{O.d(Me,{Z:()=>f.Z});var f=O(3399);f.Z.registerVersion("firebase","9.23.0","app-compat")},8977:(Et,Me,O)=>{O.r(Me);var f=O(5861),te=O(3399),L=O(9058),J=O(7592),oe=O(7582),ve=O(7879),Ee=O(4537);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const et=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ve=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},tt=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),bt=new ve.Yd("@firebase/auth");function ue(I,...g){bt.logLevel<=ve.in.ERROR&&bt.error(`Auth (${J.SDK_VERSION}): ${I}`,...g)}function Ae(I,...g){throw de(I,...g)}function se(I,...g){return de(I,...g)}function xe(I,g,_){const w=Object.assign(Object.assign({},Ve()),{[g]:_});return new L.LL("auth","Firebase",w).create(g,{appName:I.name})}function He(I,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Ae(I,"argument-error"),xe(I,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function de(I,...g){if("string"!=typeof I){const _=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=I.name),I._errorFactory.create(_,...w)}return tt.create(I,...g)}function Q(I,g,..._){if(!I)throw de(g,..._)}function Qe(I){const g="INTERNAL ASSERTION FAILED: "+I;throw ue(g),new Error(g)}function Dt(I,g){I||Qe(g)}function pn(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function Rn(){return"http:"===Pn()||"https:"===Pn()}function Pn(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class Dr{constructor(g,_){this.shortDelay=g,this.longDelay=_,Dt(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Zn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Rn()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ce(I,g){Dt(I.emulator,"Emulator should always be set here");const{url:_}=I.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class ye{static initialize(g,_,w){this.fetchImpl=g,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},be=new Dr(3e4,6e4);function Re(I,g){return I.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:I.tenantId}):g}function Fe(I,g,_,w){return it.apply(this,arguments)}function it(){return(it=(0,f.Z)(function*(I,g,_,w,S={}){return Je(I,S,(0,f.Z)(function*(){let N={},q={};w&&("GET"===g?q=w:N={body:JSON.stringify(w)});const ee=(0,L.xO)(Object.assign({key:I.config.apiKey},q)).slice(1),Ge=yield I._getAdditionalHeaders();return Ge["Content-Type"]="application/json",I.languageCode&&(Ge["X-Firebase-Locale"]=I.languageCode),ye.fetch()(Tt(I,I.config.apiHost,_,ee),Object.assign({method:g,headers:Ge,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Je(I,g,_){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,f.Z)(function*(I,g,_){I._canInitEmulator=!1;const w=Object.assign(Object.assign({},Ie),g);try{const S=new Mn(I),N=yield Promise.race([_(),S.promise]);S.clearNetworkTimeout();const q=yield N.json();if("needConfirmation"in q)throw Fn(I,"account-exists-with-different-credential",q);if(N.ok&&!("errorMessage"in q))return q;{const ee=N.ok?q.errorMessage:q.error.message,[Ge,Ye]=ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ge)throw Fn(I,"credential-already-in-use",q);if("EMAIL_EXISTS"===Ge)throw Fn(I,"email-already-in-use",q);if("USER_DISABLED"===Ge)throw Fn(I,"user-disabled",q);const mt=w[Ge]||Ge.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw xe(I,mt,Ye);Ae(I,mt)}}catch(S){if(S instanceof L.ZR)throw S;Ae(I,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function Rt(I,g,_,w){return cn.apply(this,arguments)}function cn(){return(cn=(0,f.Z)(function*(I,g,_,w,S={}){const N=yield Fe(I,g,_,w,S);return"mfaPendingCredential"in N&&Ae(I,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Tt(I,g,_,w){const S=`${g}${_}?${w}`;return I.config.emulator?ce(I.config,S):`${I.config.apiScheme}://${S}`}class Mn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(se(this.auth,"network-request-failed")),be.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fn(I,g,_){const w={appName:I.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const S=se(I,g,w);return S.customData._tokenResponse=_,S}function yn(){return(yn=(0,f.Z)(function*(I,g){return Fe(I,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Oi(){return(Oi=(0,f.Z)(function*(I,g){return Fe(I,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function sr(){return(sr=(0,f.Z)(function*(I,g){return Fe(I,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Fi(I){if(I)try{const g=new Date(Number(I));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Mt(){return(Mt=(0,f.Z)(function*(I,g=!1){const _=(0,L.m9)(I),w=yield _.getIdToken(g),S=qt(w);Q(S&&S.exp&&S.auth_time&&S.iat,_.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,q=N?.sign_in_provider;return{claims:S,token:w,authTime:Fi(Ut(S.auth_time)),issuedAtTime:Fi(Ut(S.iat)),expirationTime:Fi(Ut(S.exp)),signInProvider:q||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function Ut(I){return 1e3*Number(I)}function qt(I){const[g,_,w]=I.split(".");if(void 0===g||void 0===_||void 0===w)return ue("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,L.tV)(_);return S?JSON.parse(S):(ue("Failed to decode base64 JWT payload"),null)}catch(S){return ue("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Un(I,g){return lr.apply(this,arguments)}function lr(){return(lr=(0,f.Z)(function*(I,g,_=!1){if(_)return g;try{return yield g}catch(w){throw w instanceof L.ZR&&function gn({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}(w)&&I.auth.currentUser===I&&(yield I.auth.signOut()),w}})).apply(this,arguments)}class Yn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),w)}iteration(){var g=this;return(0,f.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class go{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fi(this.lastLoginAt),this.creationTime=Fi(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ln(I){return Xr.apply(this,arguments)}function Xr(){return Xr=(0,f.Z)(function*(I){var g;const _=I.auth,w=yield I.getIdToken(),S=yield Un(I,function Yi(I,g){return sr.apply(this,arguments)}(_,{idToken:w}));Q(S?.users.length,_,"internal-error");const N=S.users[0];I._notifyReloadListener(N);const q=null!==(g=N.providerUserInfo)&&void 0!==g&&g.length?function $o(I){return I.map(g=>{var{providerId:_}=g,w=(0,oe._T)(g,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}(N.providerUserInfo):[],ee=function mo(I,g){return[...I.filter(w=>!g.some(S=>S.providerId===w.providerId)),...g]}(I.providerData,q),mt=!!I.isAnonymous&&!(I.email&&N.passwordHash||ee?.length),_t={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ee,metadata:new go(N.createdAt,N.lastLoginAt),isAnonymous:mt};Object.assign(I,_t)}),Xr.apply(this,arguments)}function Xi(){return(Xi=(0,f.Z)(function*(I){const g=(0,L.m9)(I);yield ln(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Ks(){return(Ks=(0,f.Z)(function*(I,g){const _=yield Je(I,{},(0,f.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:S,apiKey:N}=I.config,q=Tt(I,S,"/v1/token",`key=${N}`),ee=yield I._getAdditionalHeaders();return ee["Content-Type"]="application/x-www-form-urlencoded",ye.fetch()(q,{method:"POST",headers:ee,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Ce{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Q(g.idToken,"internal-error"),Q(typeof g.idToken<"u","internal-error"),Q(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function An(I){const g=qt(I);return Q(g,"internal-error"),Q(typeof g.exp<"u","internal-error"),Q(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var w=this;return(0,f.Z)(function*(){return Q(!w.accessToken||w.refreshToken,g,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var w=this;return(0,f.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:q}=yield function Jr(I,g){return Ks.apply(this,arguments)}(g,_);w.updateTokensAndExpiration(S,N,Number(q))})()}updateTokensAndExpiration(g,_,w){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,_){const{refreshToken:w,accessToken:S,expirationTime:N}=_,q=new Ce;return w&&(Q("string"==typeof w,"internal-error",{appName:g}),q.refreshToken=w),S&&(Q("string"==typeof S,"internal-error",{appName:g}),q.accessToken=S),N&&(Q("number"==typeof N,"internal-error",{appName:g}),q.expirationTime=N),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ce,this.toJSON())}_performRefresh(){return Qe("not implemented")}}function W(I,g){Q("string"==typeof I||typeof I>"u","internal-error",{appName:g})}class we{constructor(g){var{uid:_,auth:w,stsTokenManager:S}=g,N=(0,oe._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new go(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,f.Z)(function*(){const w=yield Un(_,_.stsTokenManager.getToken(_.auth,g));return Q(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(g){return function ha(I){return Mt.apply(this,arguments)}(this,g)}reload(){return function dn(I){return Xi.apply(this,arguments)}(this)}_assign(g){this!==g&&(Q(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const _=new we(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(g){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var w=this;return(0,f.Z)(function*(){let S=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),S=!0),_&&(yield ln(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,f.Z)(function*(){const _=yield g.getIdToken();return yield Un(g,function ir(I,g){return yn.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var w,S,N,q,ee,Ge,Ye,mt;const _t=null!==(w=_.displayName)&&void 0!==w?w:void 0,Hn=null!==(S=_.email)&&void 0!==S?S:void 0,ys=null!==(N=_.phoneNumber)&&void 0!==N?N:void 0,$a=null!==(q=_.photoURL)&&void 0!==q?q:void 0,fv=null!==(ee=_.tenantId)&&void 0!==ee?ee:void 0,Mm=null!==(Ge=_._redirectEventId)&&void 0!==Ge?Ge:void 0,Ha=null!==(Ye=_.createdAt)&&void 0!==Ye?Ye:void 0,bc=null!==(mt=_.lastLoginAt)&&void 0!==mt?mt:void 0,{uid:Ga,emailVerified:Nm,isAnonymous:Cc,providerData:Dc,stsTokenManager:x0}=_;Q(Ga&&x0,g,"internal-error");const cp=Ce.fromJSON(this.name,x0);Q("string"==typeof Ga,g,"internal-error"),W(_t,g.name),W(Hn,g.name),Q("boolean"==typeof Nm,g,"internal-error"),Q("boolean"==typeof Cc,g,"internal-error"),W(ys,g.name),W($a,g.name),W(fv,g.name),W(Mm,g.name),W(Ha,g.name),W(bc,g.name);const km=new we({uid:Ga,auth:g,email:Hn,emailVerified:Nm,displayName:_t,isAnonymous:Cc,photoURL:$a,phoneNumber:ys,tenantId:fv,stsTokenManager:cp,createdAt:Ha,lastLoginAt:bc});return Dc&&Array.isArray(Dc)&&(km.providerData=Dc.map(pv=>Object.assign({},pv))),Mm&&(km._redirectEventId=Mm),km}static _fromIdTokenResponse(g,_,w=!1){return(0,f.Z)(function*(){const S=new Ce;S.updateFromServerResponse(_);const N=new we({uid:_.localId,auth:g,stsTokenManager:S,isAnonymous:w});return yield ln(N),N})()}}const Xe=new Map;function st(I){Dt(I instanceof Function,"Expected a class definition");let g=Xe.get(I);return g?(Dt(g instanceof I,"Instance stored in cache mismatched with class"),g):(g=new I,Xe.set(I,g),g)}const mn=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,w){var S=this;return(0,f.Z)(function*(){S.storage[_]=w})()}_get(_){var w=this;return(0,f.Z)(function*(){const S=w.storage[_];return void 0===S?null:S})()}_remove(_){var w=this;return(0,f.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return I.type="NONE",I})();function $(I,g,_){return`firebase:${I}:${g}:${_}`}class j{constructor(g,_,w){this.persistence=g,this.auth=_,this.userKey=w;const{config:S,name:N}=this.auth;this.fullUserKey=$(this.userKey,S.apiKey,N),this.fullPersistenceKey=$("persistence",S.apiKey,N),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,f.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?we._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,f.Z)(function*(){if(_.persistence===g)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,w="authUser"){return(0,f.Z)(function*(){if(!_.length)return new j(st(mn),g,w);const S=(yield Promise.all(_.map(function(){var Ye=(0,f.Z)(function*(mt){if(yield mt._isAvailable())return mt});return function(mt){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let N=S[0]||st(mn);const q=$(w,g.config.apiKey,g.name);let ee=null;for(const Ye of _)try{const mt=yield Ye._get(q);if(mt){const _t=we._fromJSON(g,mt);Ye!==N&&(ee=_t),N=Ye;break}}catch{}const Ge=S.filter(Ye=>Ye._shouldAllowMigration);return N._shouldAllowMigration&&Ge.length?(N=Ge[0],ee&&(yield N._set(q,ee.toJSON())),yield Promise.all(_.map(function(){var Ye=(0,f.Z)(function*(mt){if(mt!==N)try{yield mt._remove(q)}catch{}});return function(mt){return Ye.apply(this,arguments)}}())),new j(N,g,w)):new j(N,g,w)})()}}function Y(I){const g=I.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(zt(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Pe(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(ei(g))return"Blackberry";if(Wt(g))return"Webos";if(he(g))return"Safari";if((g.includes("chrome/")||dt(g))&&!g.includes("edge/"))return"Chrome";if(Bt(g))return"Android";{const w=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Pe(I=(0,L.z$)()){return/firefox\//i.test(I)}function he(I=(0,L.z$)()){const g=I.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function dt(I=(0,L.z$)()){return/crios\//i.test(I)}function zt(I=(0,L.z$)()){return/iemobile/i.test(I)}function Bt(I=(0,L.z$)()){return/android/i.test(I)}function ei(I=(0,L.z$)()){return/blackberry/i.test(I)}function Wt(I=(0,L.z$)()){return/webos/i.test(I)}function dr(I=(0,L.z$)()){return/iphone|ipad|ipod/i.test(I)||/macintosh/i.test(I)&&/mobile/i.test(I)}function tu(I=(0,L.z$)()){return dr(I)||Bt(I)||Wt(I)||ei(I)||/windows phone/i.test(I)||zt(I)}function Zs(I,g=[]){let _;switch(I){case"Browser":_=Y((0,L.z$)());break;case"Worker":_=`${Y((0,L.z$)())}-${I}`;break;default:_=I}const w=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${J.SDK_VERSION}/${w}`}function xs(){return(xs=(0,f.Z)(function*(I){return(yield Fe(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Rs(I,g){return rn.apply(this,arguments)}function rn(){return(rn=(0,f.Z)(function*(I,g){return Fe(I,"GET","/v2/recaptchaConfig",Re(I,g))})).apply(this,arguments)}function qo(I){return void 0!==I&&void 0!==I.getResponse}function nu(I){return void 0!==I&&void 0!==I.enterprise}class Yu{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function Qs(I){return new Promise((g,_)=>{const w=document.createElement("script");w.setAttribute("src",I),w.onload=g,w.onerror=S=>{const N=se("internal-error");N.customData=S,_(N)},w.type="text/javascript",w.charset="UTF-8",function Cf(){var I,g;return null!==(g=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==g?g:document}().appendChild(w)})}function fa(I){return`__${I}${Math.floor(1e6*Math.random())}`}class wd{constructor(g){this.type="recaptcha-enterprise",this.auth=hr(g)}verify(g="verify",_=!1){var w=this;return(0,f.Z)(function*(){function N(){return N=(0,f.Z)(function*(ee){if(!_){if(null==ee.tenantId&&null!=ee._agentRecaptchaConfig)return ee._agentRecaptchaConfig.siteKey;if(null!=ee.tenantId&&void 0!==ee._tenantRecaptchaConfigs[ee.tenantId])return ee._tenantRecaptchaConfigs[ee.tenantId].siteKey}return new Promise(function(){var Ge=(0,f.Z)(function*(Ye,mt){Rs(ee,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(_t=>{if(void 0!==_t.recaptchaKey){const Hn=new Yu(_t);return null==ee.tenantId?ee._agentRecaptchaConfig=Hn:ee._tenantRecaptchaConfigs[ee.tenantId]=Hn,Ye(Hn.siteKey)}mt(new Error("recaptcha Enterprise site key undefined"))}).catch(_t=>{mt(_t)})});return function(Ye,mt){return Ge.apply(this,arguments)}}())}),N.apply(this,arguments)}function q(ee,Ge,Ye){const mt=window.grecaptcha;nu(mt)?mt.enterprise.ready(()=>{mt.enterprise.execute(ee,{action:g}).then(_t=>{Ge(_t)}).catch(()=>{Ge("NO_RECAPTCHA")})}):Ye(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ee,Ge)=>{(function S(ee){return N.apply(this,arguments)})(w.auth).then(Ye=>{if(!_&&nu(window.grecaptcha))q(Ye,ee,Ge);else{if(typeof window>"u")return void Ge(new Error("RecaptchaVerifier is only supported in browser"));Qs("https://www.google.com/recaptcha/enterprise.js?render="+Ye).then(()=>{q(Ye,ee,Ge)}).catch(mt=>{Ge(mt)})}}).catch(Ye=>{Ge(Ye)})})})()}}function ds(I,g,_){return pa.apply(this,arguments)}function pa(){return(pa=(0,f.Z)(function*(I,g,_,w=!1){const S=new wd(I);let N;try{N=yield S.verify(_)}catch{N=yield S.verify(_,!0)}const q=Object.assign({},g);return Object.assign(q,w?{captchaResp:N}:{captchaResponse:N}),Object.assign(q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),q})).apply(this,arguments)}class Xu{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const w=N=>new Promise((q,ee)=>{try{q(g(N))}catch(Ge){ee(Ge)}});w.onAbort=_,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,f.Z)(function*(){if(_.auth.currentUser===g)return;const w=[];try{for(const S of _.queue)yield S(g),S.onAbort&&w.push(S.onAbort)}catch(S){w.reverse();for(const N of w)try{N()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Td{constructor(g,_,w,S){this.app=g,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=w,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zo(this),this.idTokenSubscription=new zo(this),this.beforeStateQueue=new Xu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(g,_){var w=this;return _&&(this._popupRedirectResolver=st(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var S,N;if(!w._deleted&&(w.persistenceManager=yield j.create(w,g),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,f.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,f.Z)(function*(){var w;const S=yield _.assertedPersistence.getCurrentUser();let N=S,q=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ee=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,Ge=N?._redirectEventId,Ye=yield _.tryRedirectSignIn(g);(!ee||ee===Ge)&&Ye?.user&&(N=Ye.user,q=!0)}if(!N)return _.directlySetCurrentUser(null);if(!N._redirectEventId){if(q)try{yield _.beforeStateQueue.runMiddleware(N)}catch(ee){N=S,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ee))}return N?_.reloadAndSetCurrentUserOrClear(N):_.directlySetCurrentUser(null)}return Q(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===N._redirectEventId?_.directlySetCurrentUser(N):_.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(g){var _=this;return(0,f.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,f.Z)(function*(){try{yield ln(g)}catch(w){if("auth/network-request-failed"!==w?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Gn(){if(typeof navigator>"u")return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var g=this;return(0,f.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,f.Z)(function*(){const w=g?(0,L.m9)(g):null;return w&&Q(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(g,_=!1){var w=this;return(0,f.Z)(function*(){if(!w._deleted)return g&&Q(w.tenantId===g.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(g)),w.queue((0,f.Z)(function*(){yield w.directlySetCurrentUser(g),w.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,f.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(st(g))}))}initializeRecaptchaConfig(){var g=this;return(0,f.Z)(function*(){const _=yield Rs(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new Yu(_);null==g.tenantId?g._agentRecaptchaConfig=w:g._tenantRecaptchaConfigs[g.tenantId]=w,w.emailPasswordEnabled&&new wd(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new L.LL("auth","Firebase",g())}onAuthStateChanged(g,_,w){return this.registerStateListener(this.authStateSubscription,g,_,w)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,w){return this.registerStateListener(this.idTokenSubscription,g,_,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var w=this;return(0,f.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(_);return null===g?S.removeCurrentUser():S.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const w=g&&st(g)||_._popupRedirectResolver;Q(w,_,"argument-error"),_.redirectPersistenceManager=yield j.create(_,[st(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,f.Z)(function*(){var w,S;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===g?_._currentUser:(null===(S=_.redirectUser)||void 0===S?void 0:S._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,f.Z)(function*(){if(g===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,w,S){if(this._deleted)return()=>{};const N="function"==typeof _?_:_.next.bind(_),q=this._isInitialized?Promise.resolve():this._initializationPromise;return Q(q,this,"internal-error"),q.then(()=>N(this.currentUser)),"function"==typeof _?g.addObserver(_,w,S):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Zs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,f.Z)(function*(){var _;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const S=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();S&&(w["X-Firebase-Client"]=S);const N=yield g._getAppCheckToken();return N&&(w["X-Firebase-AppCheck"]=N),w})()}_getAppCheckToken(){var g=this;return(0,f.Z)(function*(){var _;const w=yield null===(_=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return w?.error&&function wt(I,...g){bt.logLevel<=ve.in.WARN&&bt.warn(`Auth (${J.SDK_VERSION}): ${I}`,...g)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function hr(I){return(0,L.m9)(I)}class zo{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function su(I){const g=I.indexOf(":");return g<0?"":I.substr(0,g+1)}function Df(I){if(!I)return null;const g=Number(I);return isNaN(g)?null:g}class ga{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Qe("not implemented")}_getIdTokenResponse(g){return Qe("not implemented")}_linkToIdToken(g,_){return Qe("not implemented")}_getReauthenticationResolver(g){return Qe("not implemented")}}function em(I,g){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,f.Z)(function*(I,g){return Fe(I,"POST","/v1/accounts:resetPassword",Re(I,g))})).apply(this,arguments)}function Af(I,g){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,f.Z)(function*(I,g){return Fe(I,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Hc(){return(Hc=(0,f.Z)(function*(I,g){return Fe(I,"POST","/v1/accounts:update",Re(I,g))})).apply(this,arguments)}function ti(I,g){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,f.Z)(function*(I,g){return Rt(I,"POST","/v1/accounts:signInWithPassword",Re(I,g))})).apply(this,arguments)}function Gc(I,g){return ec.apply(this,arguments)}function ec(){return(ec=(0,f.Z)(function*(I,g){return Fe(I,"POST","/v1/accounts:sendOobCode",Re(I,g))})).apply(this,arguments)}function qc(){return(qc=(0,f.Z)(function*(I,g){return Gc(I,g)})).apply(this,arguments)}function ou(I,g){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,f.Z)(function*(I,g){return Gc(I,g)})).apply(this,arguments)}function sn(I,g){return or.apply(this,arguments)}function or(){return(or=(0,f.Z)(function*(I,g){return Gc(I,g)})).apply(this,arguments)}function Wo(){return(Wo=(0,f.Z)(function*(I,g){return Gc(I,g)})).apply(this,arguments)}function Ad(){return(Ad=(0,f.Z)(function*(I,g){return Rt(I,"POST","/v1/accounts:signInWithEmailLink",Re(I,g))})).apply(this,arguments)}function tc(){return(tc=(0,f.Z)(function*(I,g){return Rt(I,"POST","/v1/accounts:signInWithEmailLink",Re(I,g))})).apply(this,arguments)}class zc extends ga{constructor(g,_,w,S=null){super("password",w),this._email=g,this._password=_,this._tenantId=S}static _fromEmailAndPassword(g,_){return new zc(g,_,"password")}static _fromEmailAndCode(g,_,w=null){return new zc(g,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,f.Z)(function*(){var w;switch(_.signInMethod){case"password":const S={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=g._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const N=yield ds(g,S,"signInWithPassword");return ti(g,N)}return ti(g,S).catch(function(){var N=(0,f.Z)(function*(q){if("auth/missing-recaptcha-token"===q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ee=yield ds(g,S,"signInWithPassword");return ti(g,ee)}return Promise.reject(q)});return function(q){return N.apply(this,arguments)}}());case"emailLink":return function fi(I,g){return Ad.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Ae(g,"internal-error")}})()}_linkToIdToken(g,_){var w=this;return(0,f.Z)(function*(){switch(w.signInMethod){case"password":return Af(g,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function tm(I,g){return tc.apply(this,arguments)}(g,{idToken:_,email:w._email,oobCode:w._password});default:Ae(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function fs(I,g){return qn.apply(this,arguments)}function qn(){return(qn=(0,f.Z)(function*(I,g){return Rt(I,"POST","/v1/accounts:signInWithIdp",Re(I,g))})).apply(this,arguments)}class Ot extends ga{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Ot(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Ae("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:S}=_,N=(0,oe._T)(_,["providerId","signInMethod"]);if(!w||!S)return null;const q=new Ot(w,S);return q.idToken=N.idToken||void 0,q.accessToken=N.accessToken||void 0,q.secret=N.secret,q.nonce=N.nonce,q.pendingToken=N.pendingToken||null,q}_getIdTokenResponse(g){return fs(g,this.buildRequest())}_linkToIdToken(g,_){const w=this.buildRequest();return w.idToken=_,fs(g,w)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,fs(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,L.xO)(_)}return g}}function pi(){return(pi=(0,f.Z)(function*(I,g){return Fe(I,"POST","/v1/accounts:sendVerificationCode",Re(I,g))})).apply(this,arguments)}function $r(){return($r=(0,f.Z)(function*(I,g){return Rt(I,"POST","/v1/accounts:signInWithPhoneNumber",Re(I,g))})).apply(this,arguments)}function Ln(){return(Ln=(0,f.Z)(function*(I,g){const _=yield Rt(I,"POST","/v1/accounts:signInWithPhoneNumber",Re(I,g));if(_.temporaryProof)throw Fn(I,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const _o={USER_NOT_FOUND:"user-not-found"};function Vt(){return(Vt=(0,f.Z)(function*(I,g){return Rt(I,"POST","/v1/accounts:signInWithPhoneNumber",Re(I,Object.assign(Object.assign({},g),{operation:"REAUTH"})),_o)})).apply(this,arguments)}class Hr extends ga{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Hr({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Hr({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function ma(I,g){return $r.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function nc(I,g){return Ln.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function au(I,g){return Vt.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:w,verificationCode:S}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:w,code:S}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:w,phoneNumber:S,temporaryProof:N}=g;return w||_||S||N?new Hr({verificationId:_,verificationCode:w,phoneNumber:S,temporaryProof:N}):null}}class jn{constructor(g){var _,w,S,N,q,ee;const Ge=(0,L.zd)((0,L.pd)(g)),Ye=null!==(_=Ge.apiKey)&&void 0!==_?_:null,mt=null!==(w=Ge.oobCode)&&void 0!==w?w:null,_t=function nm(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Ge.mode)&&void 0!==S?S:null);Q(Ye&&mt&&_t,"argument-error"),this.apiKey=Ye,this.operation=_t,this.code=mt,this.continueUrl=null!==(N=Ge.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(q=Ge.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ee=Ge.tenantId)&&void 0!==ee?ee:null}static parseLink(g){const _=function yo(I){const g=(0,L.zd)((0,L.pd)(I)).link,_=g?(0,L.zd)((0,L.pd)(g)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(I)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||_||g||I}(g);try{return new jn(_)}catch{return null}}}let _a=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(_,w){return zc._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const S=jn.parseLink(w);return Q(S,"argument-error"),zc._fromEmailAndCode(_,S.code,S.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class Ar{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class vo extends Ar{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Io extends vo{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return Q("providerId"in _&&"signInMethod"in _,"argument-error"),Ot._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Q(g.idToken||g.accessToken,"argument-error"),Ot._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Io.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Io.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:N,nonce:q,providerId:ee}=g;if(!w&&!S&&!_&&!N||!ee)return null;try{return new Io(ee)._credential({idToken:_,accessToken:w,nonce:q,pendingToken:N})}catch{return null}}}let Ko=(()=>{class I extends vo{constructor(){super("facebook.com")}static credential(_){return Ot._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return I.credential(_.oauthAccessToken)}catch{return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),Ji=(()=>{class I extends vo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return Ot._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:S}=_;if(!w&&!S)return null;try{return I.credential(w,S)}catch{return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),Wc=(()=>{class I extends vo{constructor(){super("github.com")}static credential(_){return Ot._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return I.credential(_.oauthAccessToken)}catch{return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class Zt extends ga{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return fs(g,this.buildRequest())}_linkToIdToken(g,_){const w=this.buildRequest();return w.idToken=_,fs(g,w)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,fs(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:S,pendingToken:N}=_;return w&&S&&N&&w===S?new Zt(w,N):null}static _create(g,_){return new Zt(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class uu extends Ar{constructor(g){Q(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return uu.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return uu.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Zt.fromJSON(g);return Q(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:w}=g;if(!_||!w)return null;try{return Zt._create(w,_)}catch{return null}}}let Kc=(()=>{class I extends vo{constructor(){super("twitter.com")}static credential(_,w){return Ot._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=_;if(!w||!S)return null;try{return I.credential(w,S)}catch{return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function Sr(I,g){return va.apply(this,arguments)}function va(){return(va=(0,f.Z)(function*(I,g){return Rt(I,"POST","/v1/accounts:signUp",Re(I,g))})).apply(this,arguments)}class xr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,w,S=!1){return(0,f.Z)(function*(){const N=yield we._fromIdTokenResponse(g,w,S),q=Zo(w);return new xr({user:N,providerId:q,_tokenResponse:w,operationType:_})})()}static _forOperation(g,_,w){return(0,f.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const S=Zo(w);return new xr({user:g,providerId:S,_tokenResponse:w,operationType:_})})()}}function Zo(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function rm(){return(rm=(0,f.Z)(function*(I){var g;const _=hr(I);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new xr({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield Sr(_,{returnSecureToken:!0}),S=yield xr._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(S.user),S})).apply(this,arguments)}class Rr extends L.ZR{constructor(g,_,w,S){var N;super(_.code,_.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,Rr.prototype),this.customData={appName:g.name,tenantId:null!==(N=g.tenantId)&&void 0!==N?N:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,_,w,S){return new Rr(g,_,w,S)}}function gi(I,g,_,w){return("reauthenticate"===g?_._getReauthenticationResolver(I):_._getIdTokenResponse(I)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Rr._fromErrorAndOperation(I,N,g,w):N})}function Zc(I){return new Set(I.map(({providerId:g})=>g).filter(g=>!!g))}function es(){return es=(0,f.Z)(function*(I,g){const _=(0,L.m9)(I);yield lu(!0,_,g);const{providerUserInfo:w}=yield function Yr(I,g){return Oi.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),S=Zc(w||[]);return _.providerData=_.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),es.apply(this,arguments)}function Vi(I,g){return cu.apply(this,arguments)}function cu(){return(cu=(0,f.Z)(function*(I,g,_=!1){const w=yield Un(I,g._linkToIdToken(I.auth,yield I.getIdToken()),_);return xr._forOperation(I,"link",w)})).apply(this,arguments)}function lu(I,g,_){return xd.apply(this,arguments)}function xd(){return(xd=(0,f.Z)(function*(I,g,_){yield ln(g);const S=!1===I?"provider-already-linked":"no-such-provider";Q(Zc(g.providerData).has(_)===I,g.auth,S)})).apply(this,arguments)}function $y(I,g){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,f.Z)(function*(I,g,_=!1){const{auth:w}=I,S="reauthenticate";try{const N=yield Un(I,gi(w,S,g,I),_);Q(N.idToken,w,"internal-error");const q=qt(N.idToken);Q(q,w,"internal-error");const{sub:ee}=q;return Q(I.uid===ee,w,"user-mismatch"),xr._forOperation(I,S,N)}catch(N){throw"auth/user-not-found"===N?.code&&Ae(w,"user-mismatch"),N}})).apply(this,arguments)}function Rd(I,g){return Rf.apply(this,arguments)}function Rf(){return(Rf=(0,f.Z)(function*(I,g,_=!1){const w="signIn",S=yield gi(I,w,g),N=yield xr._fromIdTokenResponse(I,w,S);return _||(yield I._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Pd(I,g){return Pf.apply(this,arguments)}function Pf(){return(Pf=(0,f.Z)(function*(I,g){return Rd(hr(I),g)})).apply(this,arguments)}function Hy(I,g){return $n.apply(this,arguments)}function $n(){return($n=(0,f.Z)(function*(I,g){const _=(0,L.m9)(I);return yield lu(!1,_,g.providerId),Vi(_,g)})).apply(this,arguments)}function Gy(I,g){return im.apply(this,arguments)}function im(){return(im=(0,f.Z)(function*(I,g){return $y((0,L.m9)(I),g)})).apply(this,arguments)}function sm(){return(sm=(0,f.Z)(function*(I,g){return Rt(I,"POST","/v1/accounts:signInWithCustomToken",Re(I,g))})).apply(this,arguments)}function Eo(){return Eo=(0,f.Z)(function*(I,g){const _=hr(I),w=yield function m0(I,g){return sm.apply(this,arguments)}(_,{token:g,returnSecureToken:!0}),S=yield xr._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(S.user),S}),Eo.apply(this,arguments)}class Md{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?du._fromServerResponse(g,_):"totpInfo"in _?Nd._fromServerResponse(g,_):Ae(g,"internal-error")}}class du extends Md{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new du(_)}}class Nd extends Md{constructor(g){super("totp",g)}static _fromServerResponse(g,_){return new Nd(_)}}function rc(I,g,_){var w;Q((null===(w=_.url)||void 0===w?void 0:w.length)>0,I,"invalid-continue-uri"),Q(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Q(_.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(Q(_.android.packageName.length>0,I,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function ic(){return ic=(0,f.Z)(function*(I,g,_){var w;const S=hr(I),N={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const q=yield ds(S,N,"getOobCode",!0);_&&rc(S,q,_),yield ou(S,q)}else _&&rc(S,N,_),yield ou(S,N).catch(function(){var q=(0,f.Z)(function*(ee){if("auth/missing-recaptcha-token"!==ee.code)return Promise.reject(ee);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ge=yield ds(S,N,"getOobCode",!0);_&&rc(S,Ge,_),yield ou(S,Ge)}});return function(ee){return q.apply(this,arguments)}}())}),ic.apply(this,arguments)}function Yc(){return(Yc=(0,f.Z)(function*(I,g,_){yield em((0,L.m9)(I),{oobCode:g,newPassword:_})})).apply(this,arguments)}function mi(){return mi=(0,f.Z)(function*(I,g){yield function hs(I,g){return Hc.apply(this,arguments)}((0,L.m9)(I),{oobCode:g})}),mi.apply(this,arguments)}function Xc(I,g){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,f.Z)(function*(I,g){const _=(0,L.m9)(I),w=yield em(_,{oobCode:g}),S=w.requestType;switch(Q(S,_,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Q(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Q(w.mfaInfo,_,"internal-error");default:Q(w.email,_,"internal-error")}let N=null;return w.mfaInfo&&(N=Md._fromServerResponse(hr(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function hu(){return(hu=(0,f.Z)(function*(I,g){const{data:_}=yield Xc((0,L.m9)(I),g);return _.email})).apply(this,arguments)}function el(){return el=(0,f.Z)(function*(I,g,_){var w;const S=hr(I),N={returnSecureToken:!0,email:g,password:_,clientType:"CLIENT_TYPE_WEB"};let q;if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Ye=yield ds(S,N,"signUpPassword");q=Sr(S,Ye)}else q=Sr(S,N).catch(function(){var Ye=(0,f.Z)(function*(mt){if("auth/missing-recaptcha-token"===mt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const _t=yield ds(S,N,"signUpPassword");return Sr(S,_t)}return Promise.reject(mt)});return function(mt){return Ye.apply(this,arguments)}}());const ee=yield q.catch(Ye=>Promise.reject(Ye)),Ge=yield xr._fromIdTokenResponse(S,"signIn",ee);return yield S._updateCurrentUser(Ge.user),Ge}),el.apply(this,arguments)}function ar(){return ar=(0,f.Z)(function*(I,g,_){var w;const S=hr(I),N={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function q(ee,Ge){Q(Ge.handleCodeInApp,S,"argument-error"),Ge&&rc(S,ee,Ge)}if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const ee=yield ds(S,N,"getOobCode",!0);q(ee,_),yield sn(S,ee)}else q(N,_),yield sn(S,N).catch(function(){var ee=(0,f.Z)(function*(Ge){if("auth/missing-recaptcha-token"!==Ge.code)return Promise.reject(Ge);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ye=yield ds(S,N,"getOobCode",!0);q(Ye,_),yield sn(S,Ye)}});return function(Ge){return ee.apply(this,arguments)}}())}),ar.apply(this,arguments)}function tl(){return(tl=(0,f.Z)(function*(I,g,_){const w=(0,L.m9)(I),S=_a.credentialWithLink(g,_||pn());return Q(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Pd(w,S)})).apply(this,arguments)}function sc(){return(sc=(0,f.Z)(function*(I,g){return Fe(I,"POST","/v1/accounts:createAuthUri",Re(I,g))})).apply(this,arguments)}function Of(){return Of=(0,f.Z)(function*(I,g){const w={identifier:g,continueUri:Rn()?pn():"http://localhost"},{signinMethods:S}=yield function nl(I,g){return sc.apply(this,arguments)}((0,L.m9)(I),w);return S||[]}),Of.apply(this,arguments)}function fu(){return fu=(0,f.Z)(function*(I,g){const _=(0,L.m9)(I),S={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};g&&rc(_.auth,S,g);const{email:N}=yield function xf(I,g){return qc.apply(this,arguments)}(_.auth,S);N!==I.email&&(yield I.reload())}),fu.apply(this,arguments)}function Qo(){return Qo=(0,f.Z)(function*(I,g,_){const w=(0,L.m9)(I),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:g};_&&rc(w.auth,N,_);const{email:q}=yield function hi(I,g){return Wo.apply(this,arguments)}(w.auth,N);q!==I.email&&(yield I.reload())}),Qo.apply(this,arguments)}function cm(){return(cm=(0,f.Z)(function*(I,g){return Fe(I,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function il(){return il=(0,f.Z)(function*(I,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const w=(0,L.m9)(I),N={idToken:yield w.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},q=yield Un(w,function um(I,g){return cm.apply(this,arguments)}(w.auth,N));w.displayName=q.displayName||null,w.photoURL=q.photoUrl||null;const ee=w.providerData.find(({providerId:Ge})=>"password"===Ge);ee&&(ee.displayName=w.displayName,ee.photoURL=w.photoURL),yield w._updateTokensIfNecessary(q)}),il.apply(this,arguments)}function lm(I,g,_){return pu.apply(this,arguments)}function pu(){return(pu=(0,f.Z)(function*(I,g,_){const{auth:w}=I,N={idToken:yield I.getIdToken(),returnSecureToken:!0};g&&(N.email=g),_&&(N.password=_);const q=yield Un(I,Af(w,N));yield I._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class Ta{constructor(g,_,w={}){this.isNewUser=g,this.providerId=_,this.profile=w}}class oc extends Ta{constructor(g,_,w,S){super(g,_,w),this.username=S}}class Fd extends Ta{constructor(g,_){super(g,"facebook.com",_)}}class Uf extends oc{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class sl extends Ta{constructor(g,_){super(g,"google.com",_)}}class ba extends oc{constructor(g,_,w){super(g,"twitter.com",_,w)}}function dm(I){const{user:g,_tokenResponse:_}=I;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Vf(I){var g,_;if(!I)return null;const{providerId:w}=I,S=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},N=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!w&&I?.idToken){const q=null===(_=null===(g=qt(I.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(q)return new Ta(N,"anonymous"!==q&&"custom"!==q?q:null)}if(!w)return null;switch(w){case"facebook.com":return new Fd(N,S);case"github.com":return new Uf(N,S);case"google.com":return new sl(N,S);case"twitter.com":return new ba(N,S,I.screenName||null);case"custom":case"anonymous":return new Ta(N,null);default:return new Ta(N,w,S)}}(_)}class ur{constructor(g,_,w){this.type=g,this.credential=_,this.auth=w}static _fromIdtoken(g,_){return new ur("enroll",g,_)}static _fromMfaPendingCredential(g){return new ur("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,w;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return ur._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(w=g.multiFactorSession)&&void 0!==w&&w.idToken)return ur._fromIdtoken(g.multiFactorSession.idToken)}return null}}class gu{constructor(g,_,w){this.session=g,this.hints=_,this.signInResolver=w}static _fromError(g,_){const w=hr(g),S=_.customData._serverResponse,N=(S.mfaInfo||[]).map(ee=>Md._fromServerResponse(w,ee));Q(S.mfaPendingCredential,w,"internal-error");const q=ur._fromMfaPendingCredential(S.mfaPendingCredential);return new gu(q,N,function(){var ee=(0,f.Z)(function*(Ge){const Ye=yield Ge._process(w,q);delete S.mfaInfo,delete S.mfaPendingCredential;const mt=Object.assign(Object.assign({},S),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(_.operationType){case"signIn":const _t=yield xr._fromIdTokenResponse(w,_.operationType,mt);return yield w._updateCurrentUser(_t.user),_t;case"reauthenticate":return Q(_.user,w,"internal-error"),xr._forOperation(_.user,_.operationType,mt);default:Ae(w,"internal-error")}});return function(Ge){return ee.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,f.Z)(function*(){return _.signInResolver(g)})()}}class Ca{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>Md._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new Ca(g)}getSession(){var g=this;return(0,f.Z)(function*(){return ur._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var w=this;return(0,f.Z)(function*(){const S=g,N=yield w.getSession(),q=yield Un(w.user,S._process(w.user.auth,N,_));return yield w.user._updateTokensIfNecessary(q),w.user.reload()})()}unenroll(g){var _=this;return(0,f.Z)(function*(){const w="string"==typeof g?g:g.uid,S=yield _.user.getIdToken();try{const N=yield Un(_.user,function $f(I,g){return Fe(I,"POST","/v2/accounts/mfaEnrollment:withdraw",Re(I,g))}(_.user.auth,{idToken:S,mfaEnrollmentId:w}));_.enrolledFactors=_.enrolledFactors.filter(({uid:q})=>q!==w),yield _.user._updateTokensIfNecessary(N),yield _.user.reload()}catch(N){throw N}})()}}const mu=new WeakMap,Lt="__sak";class Hf{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Lt,"1"),this.storage.removeItem(Lt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Da=(()=>{class I extends Hf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pm(){const I=(0,L.z$)();return he(I)||dr(I)}()&&function Id(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=tu(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),N=this.localCache[w];S!==N&&_(w,N,S)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((ee,Ge,Ye)=>{this.notifyListeners(ee,Ye)});const S=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ee=this.storage.getItem(S);if(_.newValue!==ee)null!==_.newValue?this.storage.setItem(S,_.newValue):this.storage.removeItem(S);else if(this.localCache[S]===_.newValue&&!w)return}const N=()=>{const ee=this.storage.getItem(S);!w&&this.localCache[S]===ee||this.notifyListeners(S,ee)},q=this.storage.getItem(S);!function Ho(){return(0,L.w1)()&&10===document.documentMode}()||q===_.newValue||_.newValue===_.oldValue?N():setTimeout(N,10)}notifyListeners(_,w){this.localCache[_]=w;const S=this.listeners[_];if(S)for(const N of Array.from(S))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var S=()=>super._set,N=this;return(0,f.Z)(function*(){yield S().call(N,_,w),N.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,S=this;return(0,f.Z)(function*(){const N=yield w().call(S,_);return S.localCache[_]=JSON.stringify(N),N})()}_remove(_){var w=()=>super._remove,S=this;return(0,f.Z)(function*(){yield w().call(S,_),delete S.localCache[_]})()}}return I.type="LOCAL",I})(),Aa=(()=>{class I extends Hf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return I.type="SESSION",I})();let Bd=(()=>{class I{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(N=>N.isListeningto(_));if(w)return w;const S=new I(_);return this.receivers.push(S),S}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,f.Z)(function*(){const S=_,{eventId:N,eventType:q,data:ee}=S.data,Ge=w.handlersMap[q];if(!Ge?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:q});const Ye=Array.from(Ge).map(function(){var _t=(0,f.Z)(function*(Hn){return Hn(S.origin,ee)});return function(Hn){return _t.apply(this,arguments)}}()),mt=yield function qy(I){return Promise.all(I.map(function(){var g=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return g.apply(this,arguments)}}()))}(Ye);S.ports[0].postMessage({status:"done",eventId:N,eventType:q,response:mt})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function jd(I="",g=10){let _="";for(let w=0;w<g;w++)_+=Math.floor(10*Math.random());return I+_}class v0{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,w=50){var S=this;return(0,f.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let q,ee;return new Promise((Ge,Ye)=>{const mt=jd("",20);N.port1.start();const _t=setTimeout(()=>{Ye(new Error("unsupported_event"))},w);ee={messageChannel:N,onMessage(Hn){const ys=Hn;if(ys.data.eventId===mt)switch(ys.data.status){case"ack":clearTimeout(_t),q=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Ge(ys.data.response);break;default:clearTimeout(_t),clearTimeout(q),Ye(new Error("invalid_response"))}}},S.handlers.add(ee),N.port1.addEventListener("message",ee.onMessage),S.target.postMessage({eventType:g,eventId:mt,data:_},[N.port2])}).finally(()=>{ee&&S.removeMessageHandler(ee)})})()}}function Te(){return window}function ll(){return typeof Te().WorkerGlobalScope<"u"&&"function"==typeof Te().importScripts}function mr(){return(mr=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ps="firebaseLocalStorageDb",Sa="firebaseLocalStorage",dl="fbase_key";class $d{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function cc(I,g){return I.transaction([Sa],g?"readwrite":"readonly").objectStore(Sa)}function Ms(){const I=indexedDB.open(Ps,1);return new Promise((g,_)=>{I.addEventListener("error",()=>{_(I.error)}),I.addEventListener("upgradeneeded",()=>{const w=I.result;try{w.createObjectStore(Sa,{keyPath:dl})}catch(S){_(S)}}),I.addEventListener("success",(0,f.Z)(function*(){const w=I.result;w.objectStoreNames.contains(Sa)?g(w):(w.close(),yield function Ui(){const I=indexedDB.deleteDatabase(Ps);return new $d(I).toPromise()}(),g(yield Ms()))}))})}function yu(I,g,_){return wo.apply(this,arguments)}function wo(){return(wo=(0,f.Z)(function*(I,g,_){const w=cc(I,!0).put({[dl]:g,value:_});return new $d(w).toPromise()})).apply(this,arguments)}function Hd(){return(Hd=(0,f.Z)(function*(I,g){const _=cc(I,!1).get(g),w=yield new $d(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Gd(I,g){const _=cc(I,!0).delete(g);return new $d(_).toPromise()}const xa=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield Ms()),_.db})()}_withRetries(_){var w=this;return(0,f.Z)(function*(){let S=0;for(;;)try{const N=yield w._openDb();return yield _(N)}catch(N){if(S++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return ll()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=Bd._getInstance(function Xn(){return ll()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,f.Z)(function*(S,N){return{keyProcessed:(yield _._poll()).includes(N.key)}});return function(S,N){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,f.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var w,S;if(_.activeServiceWorker=yield function qf(){return mr.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new v0(_.activeServiceWorker);const N=yield _.sender._send("ping",{},800);N&&null!==(w=N[0])&&void 0!==w&&w.fulfilled&&null!==(S=N[0])&&void 0!==S&&S.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,f.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function uc(){var I;return(null===(I=navigator?.serviceWorker)||void 0===I?void 0:I.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ms();return yield yu(_,Lt,"1"),yield Gd(_,Lt),!0}catch{}return!1})()}_withPendingWrite(_){var w=this;return(0,f.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var S=this;return(0,f.Z)(function*(){return S._withPendingWrite((0,f.Z)(function*(){return yield S._withRetries(N=>yu(N,_,w)),S.localCache[_]=w,S.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,f.Z)(function*(){const S=yield w._withRetries(N=>function Mr(I,g){return Hd.apply(this,arguments)}(N,_));return w.localCache[_]=S,S})()}_remove(_){var w=this;return(0,f.Z)(function*(){return w._withPendingWrite((0,f.Z)(function*(){return yield w._withRetries(S=>Gd(S,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const w=yield _._withRetries(q=>{const ee=cc(q,!1).getAll();return new $d(ee).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:q,value:ee}of w)N.add(q),JSON.stringify(_.localCache[q])!==JSON.stringify(ee)&&(_.notifyListeners(q,ee),S.push(q));for(const q of Object.keys(_.localCache))_.localCache[q]&&!N.has(q)&&(_.notifyListeners(q,null),S.push(q));return S})()}notifyListeners(_,w){this.localCache[_]=w;const S=this.listeners[_];if(S)for(const N of Array.from(S))N(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})(),vu=1e12;class Zf{constructor(g){this.auth=g,this.counter=vu,this._widgets=new Map}render(g,_){const w=this.counter;return this._widgets.set(w,new Kd(g,this.auth.name,_||{})),this.counter++,w}reset(g){var _;const w=g||vu;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(g){var _;return(null===(_=this._widgets.get(g||vu))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,f.Z)(function*(){var w;return null===(w=_._widgets.get(g||vu))||void 0===w||w.execute(),""})()}}class Kd{constructor(g,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof g?document.getElementById(g):g;Q(S,"argument-error",{appName:_}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function _m(I){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<I;w++)g.push(_.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const hl=fa("rcb"),ym=new Dr(3e4,6e4);class Bi{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Te().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return Q(function Xo(I){return I.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I)}(_),g,"argument-error"),this.shouldResolveImmediately(_)&&qo(Te().grecaptcha)?Promise.resolve(Te().grecaptcha):new Promise((w,S)=>{const N=Te().setTimeout(()=>{S(se(g,"network-request-failed"))},ym.get());Te()[hl]=()=>{Te().clearTimeout(N),delete Te()[hl];const ee=Te().grecaptcha;if(!ee||!qo(ee))return void S(se(g,"internal-error"));const Ge=ee.render;ee.render=(Ye,mt)=>{const _t=Ge(Ye,mt);return this.counter++,_t},this.hostLanguage=_,w(ee)},Qs(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:hl,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(N),S(se(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=Te().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Jn{load(g){return(0,f.Z)(function*(){return new Zf(g)})()}clearedOneInstance(){}}const Zd="recaptcha",Wy={theme:"light",type:"image"};class Qf{constructor(g,_=Object.assign({},Wy),w){this.parameters=_,this.type=Zd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hr(w),this.isInvisible="invisible"===this.parameters.size,Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof g?document.getElementById(g):g;Q(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Jn:new Bi,this.validateStartingState()}verify(){var g=this;return(0,f.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(_)||new Promise(N=>{const q=ee=>{ee&&(g.tokenChangeListeners.delete(q),N(ee))};g.tokenChangeListeners.add(q),g.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof g)g(_);else if("string"==typeof g){const w=Te()[g];"function"==typeof w&&w(_)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,f.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,f.Z)(function*(){Q(Rn()&&!ll(),g.auth,"internal-error"),yield function Ky(){let I=null;return new Promise(g=>{"complete"!==document.readyState?(I=()=>g(),window.addEventListener("load",I)):g()}).catch(g=>{throw I&&window.removeEventListener("load",I),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Go(I){return xs.apply(this,arguments)}(g.auth);Q(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vi{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Hr._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Jo(){return(Jo=(0,f.Z)(function*(I,g,_){const w=hr(I),S=yield ea(w,g,(0,L.m9)(_));return new vi(S,N=>Pd(w,N))})).apply(this,arguments)}function xt(){return(xt=(0,f.Z)(function*(I,g,_){const w=(0,L.m9)(I);yield lu(!1,w,"phone");const S=yield ea(w.auth,g,(0,L.m9)(_));return new vi(S,N=>Hy(w,N))})).apply(this,arguments)}function Ra(){return(Ra=(0,f.Z)(function*(I,g,_){const w=(0,L.m9)(I),S=yield ea(w.auth,g,(0,L.m9)(_));return new vi(S,N=>Gy(w,N))})).apply(this,arguments)}function ea(I,g,_){return lc.apply(this,arguments)}function lc(){return lc=(0,f.Z)(function*(I,g,_){var w;const S=yield _.verify();try{let N;if(Q("string"==typeof S,I,"argument-error"),Q(_.type===Zd,I,"argument-error"),N="string"==typeof g?{phoneNumber:g}:g,"session"in N){const q=N.session;if("phoneNumber"in N)return Q("enroll"===q.type,I,"internal-error"),(yield function Vd(I,g){return Fe(I,"POST","/v2/accounts/mfaEnrollment:start",Re(I,g))}(I,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{Q("signin"===q.type,I,"internal-error");const ee=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return Q(ee,I,"missing-multi-factor-info"),(yield function Wf(I,g){return Fe(I,"POST","/v2/accounts/mfaSignIn:start",Re(I,g))}(I,{mfaPendingCredential:q.credential,mfaEnrollmentId:ee,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield function Bn(I,g){return pi.apply(this,arguments)}(I,{phoneNumber:N.phoneNumber,recaptchaToken:S});return q}}finally{_._reset()}}),lc.apply(this,arguments)}function dc(){return(dc=(0,f.Z)(function*(I,g){yield Vi((0,L.m9)(I),g)})).apply(this,arguments)}let Pa=(()=>{class I{constructor(_){this.providerId=I.PROVIDER_ID,this.auth=hr(_)}verifyPhoneNumber(_,w){return ea(this.auth,_,(0,L.m9)(w))}static credential(_,w){return Hr._fromVerification(_,w)}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:S}=_;return w&&S?Hr._fromTokenResponse(w,S):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function Ii(I,g){return g?st(g):(Q(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class St extends ga{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return fs(g,this._buildIdpRequest())}_linkToIdToken(g,_){return fs(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return fs(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Yf(I){return Rd(I.auth,new St(I),I.bypassAuthState)}function vm(I){const{auth:g,user:_}=I;return Q(_,g,"internal-error"),$y(_,new St(I),I.bypassAuthState)}function Ma(I){return Na.apply(this,arguments)}function Na(){return(Na=(0,f.Z)(function*(I){const{auth:g,user:_}=I;return Q(_,g,"internal-error"),Vi(_,new St(I),I.bypassAuthState)})).apply(this,arguments)}class gl{constructor(g,_,w,S,N=!1){this.auth=g,this.resolver=w,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,f.Z)(function*(w,S){g.pendingPromise={resolve:w,reject:S};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(N){g.reject(N)}});return function(w,S){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,f.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:N,tenantId:q,error:ee,type:Ge}=g;if(ee)return void _.reject(ee);const Ye={auth:_.auth,requestUri:w,sessionId:S,tenantId:q||void 0,postBody:N||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ge)(Ye))}catch(mt){_.reject(mt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Yf;case"linkViaPopup":case"linkViaRedirect":return Ma;case"reauthViaPopup":case"reauthViaRedirect":return vm;default:Ae(this.auth,"internal-error")}}resolve(g){Dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const er=new Dr(2e3,1e4);function Qd(){return(Qd=(0,f.Z)(function*(I,g,_){const w=hr(I);He(I,g,Ar);const S=Ii(w,_);return new To(w,"signInViaPopup",g,S).executeNotNull()})).apply(this,arguments)}function ta(){return(ta=(0,f.Z)(function*(I,g,_){const w=(0,L.m9)(I);He(w.auth,g,Ar);const S=Ii(w.auth,_);return new To(w.auth,"reauthViaPopup",g,S,w).executeNotNull()})).apply(this,arguments)}function Xs(){return(Xs=(0,f.Z)(function*(I,g,_){const w=(0,L.m9)(I);He(w.auth,g,Ar);const S=Ii(w.auth,_);return new To(w.auth,"linkViaPopup",g,S,w).executeNotNull()})).apply(this,arguments)}let To=(()=>{class I extends gl{constructor(_,w,S,N,q){super(_,w,N,q),this.provider=S,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const w=yield _.execute();return Q(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,f.Z)(function*(){Dt(1===_.filter.length,"Popup operations only handle one event");const w=jd();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(S=>{_.reject(S)}),_.resolver._isIframeWebStorageSupported(_.auth,S=>{S||_.reject(se(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(se(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,er.get())};_()}}return I.currentPopupAction=null,I})();const Eu="pendingRedirect",hc=new Map;class ml extends gl{constructor(g,_,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,f.Z)(function*(){let w=hc.get(_.auth._key());if(!w){try{const N=(yield function fc(I,g){return Jf.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;w=()=>Promise.resolve(N)}catch(S){w=()=>Promise.reject(S)}hc.set(_.auth._key(),w)}return _.bypassAuthState||hc.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,w=this;return(0,f.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(w,g);if("unknown"!==g.type){if(g.eventId){const S=yield w.auth._redirectUserForId(g.eventId);if(S)return w.user=S,_().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Jf(){return(Jf=(0,f.Z)(function*(I,g){const _=ka(g),w=_l(I);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(_));return yield w._remove(_),S})).apply(this,arguments)}function Ei(I,g){return bo.apply(this,arguments)}function bo(){return(bo=(0,f.Z)(function*(I,g){return _l(I)._set(ka(g),"true")})).apply(this,arguments)}function qr(I,g){hc.set(I._key(),g)}function _l(I){return st(I._redirectPersistence)}function ka(I){return $(Eu,I.config.apiKey,I.name)}function ms(I,g,_){return function Nr(I,g,_){return Co.apply(this,arguments)}(I,g,_)}function Co(){return(Co=(0,f.Z)(function*(I,g,_){const w=hr(I);He(I,g,Ar),yield w._initializationPromise;const S=Ii(w,_);return yield Ei(S,w),S._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function gc(I,g,_){return function ts(I,g,_){return kr.apply(this,arguments)}(I,g,_)}function kr(){return(kr=(0,f.Z)(function*(I,g,_){const w=(0,L.m9)(I);He(w.auth,g,Ar),yield w.auth._initializationPromise;const S=Ii(w.auth,_);yield Ei(S,w.auth);const N=yield Il(w);return S._openRedirect(w.auth,g,"reauthViaRedirect",N)})).apply(this,arguments)}function yl(I,g,_){return function vl(I,g,_){return Do.apply(this,arguments)}(I,g,_)}function Do(){return(Do=(0,f.Z)(function*(I,g,_){const w=(0,L.m9)(I);He(w.auth,g,Ar),yield w.auth._initializationPromise;const S=Ii(w.auth,_);yield lu(!1,w,g.providerId),yield Ei(S,w.auth);const N=yield Il(w);return S._openRedirect(w.auth,g,"linkViaRedirect",N)})).apply(this,arguments)}function Ao(){return(Ao=(0,f.Z)(function*(I,g){return yield hr(I)._initializationPromise,fr(I,g,!1)})).apply(this,arguments)}function fr(I,g){return ns.apply(this,arguments)}function ns(){return(ns=(0,f.Z)(function*(I,g,_=!1){const w=hr(I),S=Ii(w,g),q=yield new ml(w,S,_).execute();return q&&!_&&(delete q.user._redirectEventId,yield w._persistUserIfCurrent(q.user),yield w._setRedirectUser(null,g)),q})).apply(this,arguments)}function Il(I){return tr.apply(this,arguments)}function tr(){return(tr=(0,f.Z)(function*(I){const g=jd(`${I.uid}:::`);return I._redirectEventId=g,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),g})).apply(this,arguments)}class _c{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(_=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function El(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ra(I);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var w;if(g.error&&!ra(g)){const S=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(se(this.auth,S))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const w=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wu(g))}saveEventToCache(g){this.cachedEventUids.add(wu(g)),this.lastProcessedEventTime=Date.now()}}function wu(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(g=>g).join("-")}function ra({type:I,error:g}){return"unknown"===I&&"auth/no-auth-event"===g?.code}function Xd(I){return jt.apply(this,arguments)}function jt(){return(jt=(0,f.Z)(function*(I,g={}){return Fe(I,"GET","/v1/projects",g)})).apply(this,arguments)}const So=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tu=/^https?/;function Js(){return(Js=(0,f.Z)(function*(I){if(I.config.emulator)return;const{authorizedDomains:g}=yield Xd(I);for(const _ of g)try{if(Fa(_))return}catch{}Ae(I,"unauthorized-domain")})).apply(this,arguments)}function Fa(I){const g=pn(),{protocol:_,hostname:w}=new URL(g);if(I.startsWith("chrome-extension://")){const q=new URL(I);return""===q.hostname&&""===w?"chrome-extension:"===_&&I.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&q.hostname===w}if(!Tu.test(_))return!1;if(So.test(I))return w===I;const S=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const xo=new Dr(3e4,6e4);function Jd(){const I=Te().___jsl;if(I?.H)for(const g of Object.keys(I.H))if(I.H[g].r=I.H[g].r||[],I.H[g].L=I.H[g].L||[],I.H[g].r=[...I.H[g].L],I.CP)for(let _=0;_<I.CP.length;_++)I.CP[_]=null}let eo=null;const Qy=new Dr(5e3,15e3),Yy="__/auth/iframe",Im="emulator/auth/iframe",Va={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Em=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wm(I){const g=I.config;Q(g.authDomain,I,"auth-domain-config-required");const _=g.emulator?ce(g,Im):`https://${I.config.authDomain}/${Yy}`,w={apiKey:g.apiKey,appName:I.name,v:J.SDK_VERSION},S=Em.get(I.config.apiHost);S&&(w.eid=S);const N=I._getFrameworks();return N.length&&(w.fw=N.join(",")),`${_}?${(0,L.xO)(w).slice(1)}`}function A(){return A=(0,f.Z)(function*(I){const g=yield function bu(I){return eo=eo||function La(I){return new Promise((g,_)=>{var w,S,N;function q(){Jd(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Jd(),_(se(I,"network-request-failed"))},timeout:xo.get()})}if(null!==(S=null===(w=Te().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)g(gapi.iframes.getContext());else{if(null===(N=Te().gapi)||void 0===N||!N.load){const ee=fa("iframefcb");return Te()[ee]=()=>{gapi.load?q():_(se(I,"network-request-failed"))},Qs(`https://apis.google.com/js/api.js?onload=${ee}`).catch(Ge=>_(Ge))}q()}}).catch(g=>{throw eo=null,g})}(I),eo}(I),_=Te().gapi;return Q(_,I,"internal-error"),g.open({where:document.body,url:wm(I),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Va,dontclear:!0},w=>new Promise(function(){var S=(0,f.Z)(function*(N,q){yield w.restyle({setHideOnLeave:!1});const ee=se(I,"network-request-failed"),Ge=Te().setTimeout(()=>{q(ee)},Qy.get());function Ye(){Te().clearTimeout(Ge),N(w)}w.ping(Ye).then(Ye,()=>{q(ee)})});return function(N,q){return S.apply(this,arguments)}}()))}),A.apply(this,arguments)}const R={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class nt{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ht="__/auth/handler",$t="emulator/auth/handler",wi=encodeURIComponent("fac");function _n(I,g,_,w,S,N){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,f.Z)(function*(I,g,_,w,S,N){Q(I.config.authDomain,I,"auth-domain-config-required"),Q(I.config.apiKey,I,"invalid-api-key");const q={apiKey:I.config.apiKey,appName:I.name,authType:_,redirectUrl:w,v:J.SDK_VERSION,eventId:S};if(g instanceof Ar){g.setDefaultLanguage(I.languageCode),q.providerId=g.providerId||"",(0,L.xb)(g.getCustomParameters())||(q.customParameters=JSON.stringify(g.getCustomParameters()));for(const[mt,_t]of Object.entries(N||{}))q[mt]=_t}if(g instanceof vo){const mt=g.getScopes().filter(_t=>""!==_t);mt.length>0&&(q.scopes=mt.join(","))}I.tenantId&&(q.tid=I.tenantId);const ee=q;for(const mt of Object.keys(ee))void 0===ee[mt]&&delete ee[mt];const Ge=yield I._getAppCheckToken(),Ye=Ge?`#${wi}=${encodeURIComponent(Ge)}`:"";return`${function ia({config:I}){return I.emulator?ce(I,$t):`https://${I.authDomain}/${Ht}`}(I)}?${(0,L.xO)(ee).slice(1)}${Ye}`})).apply(this,arguments)}const sa="webStorageSupport",to=class Ti{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Aa,this._completeRedirectFn=fr,this._overrideRedirectResult=qr}_openPopup(g,_,w,S){var N=this;return(0,f.Z)(function*(){var q;Dt(null===(q=N.eventManagers[g._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ee=yield _n(g,_,w,pn(),S);return function Ze(I,g,_,w=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),q=Math.max((window.screen.availWidth-w)/2,0).toString();let ee="";const Ge=Object.assign(Object.assign({},R),{width:w.toString(),height:S.toString(),top:N,left:q}),Ye=(0,L.z$)().toLowerCase();_&&(ee=dt(Ye)?"_blank":_),Pe(Ye)&&(g=g||"http://localhost",Ge.scrollbars="yes");const mt=Object.entries(Ge).reduce((Hn,[ys,$a])=>`${Hn}${ys}=${$a},`,"");if(function jr(I=(0,L.z$)()){var g;return dr(I)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Ye)&&"_self"!==ee)return function yt(I,g){const _=document.createElement("a");_.href=I,_.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(g||"",ee),new nt(null);const _t=window.open(g||"",ee,mt);Q(_t,I,"popup-blocked");try{_t.focus()}catch{}return new nt(_t)}(g,ee,jd())})()}_openRedirect(g,_,w,S){var N=this;return(0,f.Z)(function*(){return yield N._originValidation(g),function fn(I){Te().location.href=I}(yield _n(g,_,w,pn(),S)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:S,promise:N}=this.eventManagers[_];return S?Promise.resolve(S):(Dt(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(g);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(g){var _=this;return(0,f.Z)(function*(){const w=yield function b(I){return A.apply(this,arguments)}(g),S=new _c(g);return w.register("authEvent",N=>(Q(N?.authEvent,g,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:S},_.iframes[g._key()]=w,S})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(sa,{type:sa},S=>{var N;const q=null===(N=S?.[0])||void 0===N?void 0:N[sa];void 0!==q&&_(!!q),Ae(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Oa(I){return Js.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return tu()||he()||dr()}};class eh{constructor(g){this.factorId=g}_process(g,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,w);case"signin":return this._finalizeSignIn(g,_.credential);default:return Qe("unexpected MultiFactorSessionType")}}}class Tm extends eh{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Tm(g)}_finalizeEnroll(g,_,w){return function Yo(I,g){return Fe(I,"POST","/v2/accounts/mfaEnrollment:finalize",Re(I,g))}(g,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function zd(I,g){return Fe(I,"POST","/v2/accounts/mfaSignIn:finalize",Re(I,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let I0=(()=>{class I{constructor(){}static assertion(_){return Tm._fromCredential(_)}}return I.FACTOR_ID="phone",I})();var Xy="@firebase/auth";class E0{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(w=>{g(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);_&&(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Du(){return window}(0,L.Pz)("authIdTokenMaxAge"),function w0(I){(0,J._registerComponent)(new Ee.wA("auth",(g,{options:_})=>{const w=g.getProvider("app").getImmediate(),S=g.getProvider("heartbeat"),N=g.getProvider("app-check-internal"),{apiKey:q,authDomain:ee}=w.options;Q(q&&!q.includes(":"),"invalid-api-key",{appName:w.name});const Ge={apiKey:q,authDomain:ee,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zs(I)},Ye=new Td(w,S,N,Ge);return function Jg(I,g){const _=g?.persistence||[],w=(Array.isArray(_)?_:[_]).map(st);g?.errorMap&&I._updateErrorMap(g.errorMap),I._initializeWithPersistence(w,g?.popupRedirectResolver)}(Ye,_),Ye},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,w)=>{g.getProvider("auth-internal").initialize()})),(0,J._registerComponent)(new Ee.wA("auth-internal",g=>{const _=hr(g.getProvider("auth").getImmediate());return new E0(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,J.registerVersion)(Xy,"0.23.2",function tp(I){switch(I){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(I)),(0,J.registerVersion)(Xy,"0.23.2","esm2017")}("Browser");function Ic(){return Ic=(0,f.Z)(function*(I,g,_){var w;const{BuildInfo:S}=Du();Dt(g.sessionId,"AuthEvent did not contain a session ID");const N=yield function b0(I){return Tl.apply(this,arguments)}(g.sessionId),q={};return dr()?q.ibi=S.packageName:Bt()?q.apn=S.packageName:Ae(I,"operation-not-supported-in-this-environment"),S.displayName&&(q.appDisplayName=S.displayName),q.sessionId=N,_n(I,_,g.type,void 0,null!==(w=g.eventId)&&void 0!==w?w:void 0,q)}),Ic.apply(this,arguments)}function ih(){return(ih=(0,f.Z)(function*(I){const{BuildInfo:g}=Du(),_={};dr()?_.iosBundleId=g.packageName:Bt()?_.androidPackageName=g.packageName:Ae(I,"operation-not-supported-in-this-environment"),yield Xd(I,_)})).apply(this,arguments)}function wl(){return(wl=(0,f.Z)(function*(I,g,_){const{cordova:w}=Du();let S=()=>{};try{yield new Promise((N,q)=>{let ee=null;function Ge(){var _t;N();const Hn=null===(_t=w.plugins.browsertab)||void 0===_t?void 0:_t.close;"function"==typeof Hn&&Hn(),"function"==typeof _?.close&&_.close()}function Ye(){ee||(ee=window.setTimeout(()=>{q(se(I,"redirect-cancelled-by-user"))},2e3))}function mt(){"visible"===document?.visibilityState&&Ye()}g.addPassiveListener(Ge),document.addEventListener("resume",Ye,!1),Bt()&&document.addEventListener("visibilitychange",mt,!1),S=()=>{g.removePassiveListener(Ge),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",mt,!1),ee&&window.clearTimeout(ee)}})}finally{S()}})).apply(this,arguments)}function Tl(){return(Tl=(0,f.Z)(function*(I){const g=function Cm(I){if(Dt(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(I);const g=new ArrayBuffer(I.length),_=new Uint8Array(g);for(let w=0;w<I.length;w++)_[w]=I.charCodeAt(w);return _}(I),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class tv extends _c{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,f.Z)(function*(){yield g.initPromise})()}}function iv(I){return rp.apply(this,arguments)}function rp(){return(rp=(0,f.Z)(function*(I){const g=yield ah()._get(Ua(I));return g&&(yield ah()._remove(Ua(I))),g})).apply(this,arguments)}function no(){const I=[];for(let _=0;_<20;_++){const w=Math.floor(62*Math.random());I.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(w))}return I.join("")}function ah(){return st(Da)}function Ua(I){return $("authEvent",I.config.apiKey,I.name)}function bl(I){if(!I?.includes("?"))return{};const[g,..._]=I.split("?");return(0,L.zd)(_.join("?"))}const TD=class wD{constructor(){this._redirectPersistence=Aa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fr,this._overrideRedirectResult=qr}_initialize(g){var _=this;return(0,f.Z)(function*(){const w=g._key();let S=_.eventManagers.get(w);return S||(S=new tv(g),_.eventManagers.set(w,S),_.attachCallbackListeners(g,S)),S})()}_openPopup(g){Ae(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,w,S){var N=this;return(0,f.Z)(function*(){!function T0(I){var g,_,w,S,N,q,ee,Ge,Ye,mt;const _t=Du();Q("function"==typeof(null===(g=_t?.universalLinks)||void 0===g?void 0:g.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Q(typeof(null===(_=_t?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Q("function"==typeof(null===(N=null===(S=null===(w=_t?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q("function"==typeof(null===(Ge=null===(ee=null===(q=_t?.cordova)||void 0===q?void 0:q.plugins)||void 0===ee?void 0:ee.browsertab)||void 0===Ge?void 0:Ge.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q("function"==typeof(null===(mt=null===(Ye=_t?.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===mt?void 0:mt.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const q=yield N._initialize(g);yield q.initialized(),q.resetRedirect(),function pc(){hc.clear()}(),yield N._originValidation(g);const ee=function nv(I,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:no(),postBody:null,tenantId:I.tenantId,error:se(I,"no-auth-event")}}(g,w,S);yield function rv(I,g){return ah()._set(Ua(I),g)}(g,ee);const Ge=yield function Au(I,g,_){return Ic.apply(this,arguments)}(g,ee,_),Ye=yield function ev(I){const{cordova:g}=Du();return new Promise(_=>{g.plugins.browsertab.isAvailable(w=>{let S=null;w?g.plugins.browsertab.openUrl(I):S=g.InAppBrowser.open(I,function hn(I=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}()?"_blank":"_system","location=yes"),_(S)})})}(Ge);return function ED(I,g,_){return wl.apply(this,arguments)}(g,q,Ye)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Jy(I){return ih.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:w,handleOpenURL:S,BuildInfo:N}=Du(),q=setTimeout((0,f.Z)(function*(){yield iv(g),_.onEvent(sv())}),500),ee=function(){var mt=(0,f.Z)(function*(_t){clearTimeout(q);const Hn=yield iv(g);let ys=null;Hn&&_t?.url&&(ys=function oh(I,g){var _,w;const S=function uh(I){const g=bl(I),_=g.link?decodeURIComponent(g.link):void 0,w=bl(_).link,S=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return bl(S).link||S||w||_||I}(g);if(S.includes("/__/auth/callback")){const N=bl(S),q=N.firebaseError?function Ec(I){try{return JSON.parse(I)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ee=null===(w=null===(_=q?.code)||void 0===_?void 0:_.split("auth/"))||void 0===w?void 0:w[1],Ge=ee?se(ee):null;return Ge?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:Ge,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:S,postBody:null}}return null}(Hn,_t.url)),_.onEvent(ys||sv())});return function(Hn){return mt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ee);const Ge=S,Ye=`${N.packageName.toLowerCase()}://`;Du().handleOpenURL=function(){var mt=(0,f.Z)(function*(_t){if(_t.toLowerCase().startsWith(Ye)&&ee({url:_t}),"function"==typeof Ge)try{Ge(_t)}catch(Hn){console.error(Hn)}});return function(_t){return mt.apply(this,arguments)}}()}};function sv(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:se("no-auth-event")}}function Cl(){var I;return(null===(I=self?.location)||void 0===I?void 0:I.protocol)||null}function Dm(I=(0,L.z$)()){return!("file:"!==Cl()&&"ionic:"!==Cl()&&"capacitor:"!==Cl()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function uv(){try{const I=self.localStorage,g=jd();if(I)return I.setItem(g,"1"),I.removeItem(g),!function Sm(I=(0,L.z$)()){return function Al(){return(0,L.w1)()&&11===document?.documentMode}()||function Sl(I=(0,L.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,L.hl)()}catch{return wc()&&(0,L.hl)()}return!1}function wc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function op(){return(function Dl(){return"http:"===Cl()||"https:"===Cl()}()||(0,L.ru)()||Dm())&&!function Am(){return(0,L.b$)()||(0,L.UG)()}()&&uv()&&!wc()}function ch(){return Dm()&&typeof document<"u"}function Ro(){return(Ro=(0,f.Z)(function*(){return!!ch()&&new Promise(I=>{const g=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),I(!0)})})})).apply(this,arguments)}const _s={LOCAL:"local",NONE:"none",SESSION:"session"},Tc=Q,cv="persistence";function bi(I){return dh.apply(this,arguments)}function dh(){return(dh=(0,f.Z)(function*(I){yield I._initializationPromise;const g=fh(),_=$(cv,I.config.apiKey,I.name);g&&g.setItem(_,I._getPersistence())})).apply(this,arguments)}function fh(){var I;try{return(null===(I=function xl(){return typeof window<"u"?window:null}())||void 0===I?void 0:I.sessionStorage)||null}catch{return null}}const ri=Q;class ks{constructor(){this.browserResolver=st(to),this.cordovaResolver=st(TD),this.underlyingResolver=null,this._redirectPersistence=Aa,this._completeRedirectFn=fr,this._overrideRedirectResult=qr}_initialize(g){var _=this;return(0,f.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,w,S){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(g,_,w,S)})()}_openRedirect(g,_,w,S){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(g,_,w,S)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return ch()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ri(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,f.Z)(function*(){if(g.underlyingResolver)return;const _=yield function lh(){return Ro.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function ph(I){return I.unwrap()}function xm(I){return gh(I)}function gh(I){const{_tokenResponse:g}=I instanceof L.ZR?I.customData:I;if(!g)return null;if(!(I instanceof L.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Pa.credentialFromResult(I);const _=g.providerId;if(!_||_===fe.PASSWORD)return null;let w;switch(_){case fe.GOOGLE:w=Ji;break;case fe.FACEBOOK:w=Ko;break;case fe.GITHUB:w=Wc;break;case fe.TWITTER:w=Kc;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:q,pendingToken:ee,nonce:Ge}=g;return N||q||S||ee?ee?_.startsWith("saml.")?Zt._create(_,ee):Ot._fromParams({providerId:_,signInMethod:_,pendingToken:ee,idToken:S,accessToken:N}):new Io(_).credential({idToken:S,accessToken:N,rawNonce:Ge}):null}return I instanceof L.ZR?w.credentialFromError(I):w.credentialFromResult(I)}function ji(I,g){return g.catch(_=>{throw _ instanceof L.ZR&&function lv(I,g){var _;const w=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new D0(I,function jf(I,g){var _;const w=(0,L.m9)(I),S=g;return Q(g.customData.operationType,w,"argument-error"),Q(null===(_=S.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),gu._fromError(w,S)}(I,g));else if(w){const S=gh(g),N=g;S&&(N.credential=S,N.tenantId=w.tenantId||void 0,N.email=w.email||void 0,N.phoneNumber=w.phoneNumber||void 0)}}(I,_),_}).then(_=>{const S=_.user;return{operationType:_.operationType,credential:xm(_),additionalUserInfo:dm(_),user:Ba.getOrCreate(S)}})}function Rm(I,g){return Su.apply(this,arguments)}function Su(){return(Su=(0,f.Z)(function*(I,g){const _=yield g;return{verificationId:_.verificationId,confirm:w=>ji(I,_.confirm(w))}})).apply(this,arguments)}class D0{constructor(g,_){this.resolver=_,this.auth=function ap(I){return I.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return ji(ph(this.auth),this.resolver.resolveSignIn(g))}}class Ba{constructor(g){this._delegate=g,this.multiFactor=function cl(I){const g=(0,L.m9)(I);return mu.has(g)||mu.set(g,Ca._fromUser(g)),mu.get(g)}(g)}static getOrCreate(g){return Ba.USER_MAP.has(g)||Ba.USER_MAP.set(g,new Ba(g)),Ba.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,f.Z)(function*(){return ji(_.auth,Hy(_._delegate,g))})()}linkWithPhoneNumber(g,_){var w=this;return(0,f.Z)(function*(){return Rm(w.auth,function vn(I,g,_){return xt.apply(this,arguments)}(w._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,f.Z)(function*(){return ji(_.auth,function Zy(I,g,_){return Xs.apply(this,arguments)}(_._delegate,g,ks))})()}linkWithRedirect(g){var _=this;return(0,f.Z)(function*(){return yield bi(hr(_.auth)),yl(_._delegate,g,ks)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,f.Z)(function*(){return ji(_.auth,Gy(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return Rm(this.auth,function ni(I,g,_){return Ra.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return ji(this.auth,function Yd(I,g,_){return ta.apply(this,arguments)}(this._delegate,g,ks))}reauthenticateWithRedirect(g){var _=this;return(0,f.Z)(function*(){return yield bi(hr(_.auth)),gc(_._delegate,g,ks)})()}sendEmailVerification(g){return function rl(I,g){return fu.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,f.Z)(function*(){return yield function Ia(I,g){return es.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function Ff(I,g){return lm((0,L.m9)(I),g,null)}(this._delegate,g)}updatePassword(g){return function Lf(I,g){return lm((0,L.m9)(I),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function pl(I,g){return dc.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function y0(I,g){return il.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function Od(I,g,_){return Qo.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ba.USER_MAP=new WeakMap;const ja=Q;let mh=(()=>{class I{constructor(_,w){if(this.app=_,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=_.options;ja(S,"invalid-api-key",{appName:_.name}),ja(S,"invalid-api-key",{appName:_.name});const N=typeof window<"u"?ks:void 0;this._delegate=w.initialize({options:{persistence:_h(S,_.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(et),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ba.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,w){!function Li(I,g,_){const w=hr(I);Q(w._canInitEmulator,w,"emulator-config-failed"),Q(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const S=!!_?.disableWarnings,N=su(g),{host:q,port:ee}=function bd(I){const g=su(I),_=/(\/\/)?([^?#/]+)/.exec(I.substr(g.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const N=S[1];return{host:N,port:Df(w.substr(N.length+1))}}{const[N,q]=w.split(":");return{host:N,port:Df(q)}}}(g);w.config.emulator={url:`${N}//${q}${null===ee?"":`:${ee}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:q,port:ee,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function By(){function I(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",I):I())}()}(this._delegate,_,w)}applyActionCode(_){return function Nf(I,g){return mi.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Xc(this._delegate,_)}confirmPasswordReset(_,w){return function Ea(I,g,_){return Yc.apply(this,arguments)}(this._delegate,_,w)}createUserWithEmailAndPassword(_,w){var S=this;return(0,f.Z)(function*(){return ji(S._delegate,function om(I,g,_){return el.apply(this,arguments)}(S._delegate,_,w))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function kf(I,g){return Of.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function am(I,g){const _=jn.parseLink(g);return"EMAIL_SIGNIN"===_?.operation}(0,_)}getRedirectResult(){var _=this;return(0,f.Z)(function*(){ja(op(),_._delegate,"operation-not-supported-in-this-environment");const w=yield function na(I,g){return Ao.apply(this,arguments)}(_._delegate,ks);return w?ji(_._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function ip(I,g){hr(I)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,w,S){const{next:N,error:q,complete:ee}=Pm(_,w,S);return this._delegate.onAuthStateChanged(N,q,ee)}onIdTokenChanged(_,w,S){const{next:N,error:q,complete:ee}=Pm(_,w,S);return this._delegate.onIdTokenChanged(N,q,ee)}sendSignInLinkToEmail(_,w){return function wa(I,g,_){return ar.apply(this,arguments)}(this._delegate,_,w)}sendPasswordResetEmail(_,w){return function _0(I,g,_){return ic.apply(this,arguments)}(this._delegate,_,w||void 0)}setPersistence(_){var w=this;return(0,f.Z)(function*(){let S;switch(function Rl(I,g){Tc(Object.values(_s).includes(g),I,"invalid-persistence-type"),(0,L.b$)()?Tc(g!==_s.SESSION,I,"unsupported-persistence-type"):(0,L.UG)()?Tc(g===_s.NONE,I,"unsupported-persistence-type"):wc()?Tc(g===_s.NONE||g===_s.LOCAL&&(0,L.hl)(),I,"unsupported-persistence-type"):Tc(g===_s.NONE||uv(),I,"unsupported-persistence-type")}(w._delegate,_),_){case _s.SESSION:S=Aa;break;case _s.LOCAL:S=(yield st(xa)._isAvailable())?xa:Da;break;case _s.NONE:S=mn;break;default:return Ae("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return ji(this._delegate,function Gr(I){return rm.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return ji(this._delegate,Pd(this._delegate,_))}signInWithCustomToken(_){return ji(this._delegate,function Mf(I,g){return Eo.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,w){return ji(this._delegate,function Ys(I,g,_){return Pd((0,L.m9)(I),_a.credential(g,_))}(this._delegate,_,w))}signInWithEmailLink(_,w){return ji(this._delegate,function _i(I,g,_){return tl.apply(this,arguments)}(this._delegate,_,w))}signInWithPhoneNumber(_,w){return Rm(this._delegate,function Iu(I,g,_){return Jo.apply(this,arguments)}(this._delegate,_,w))}signInWithPopup(_){var w=this;return(0,f.Z)(function*(){return ja(op(),w._delegate,"operation-not-supported-in-this-environment"),ji(w._delegate,function Xf(I,g,_){return Qd.apply(this,arguments)}(w._delegate,_,ks))})()}signInWithRedirect(_){var w=this;return(0,f.Z)(function*(){return ja(op(),w._delegate,"operation-not-supported-in-this-environment"),yield bi(w._delegate),ms(w._delegate,_,ks)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function kd(I,g){return hu.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=_s,I})();function Pm(I,g,_){let w=I;"function"!=typeof I&&({next:w,error:g,complete:_}=I);const S=w;return{next:q=>S(q&&Ba.getOrCreate(q)),error:g,complete:_}}function _h(I,g){const _=function hh(I,g){const _=fh();if(!_)return[];const w=$(cv,I,g);switch(_.getItem(w)){case _s.NONE:return[mn];case _s.LOCAL:return[xa,Aa];case _s.SESSION:return[Aa];default:return[]}}(I,g);if(typeof self<"u"&&!_.includes(xa)&&_.push(xa),typeof window<"u")for(const w of[Da,Aa])_.includes(w)||_.push(w);return _.includes(mn)||_.push(mn),_}class up{constructor(){this.providerId="phone",this._delegate=new Pa(ph(te.Z.auth()))}static credential(g,_){return Pa.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}up.PHONE_SIGN_IN_METHOD=Pa.PHONE_SIGN_IN_METHOD,up.PROVIDER_ID=Pa.PROVIDER_ID;const dv=Q;class hv{constructor(g,_,w=te.Z.app()){var S;dv(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Qf(g,_,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function S0(I){I.INTERNAL.registerComponent(new Ee.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),w=g.getProvider("auth");return new mh(_,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:_a,FacebookAuthProvider:Ko,GithubAuthProvider:Wc,GoogleAuthProvider:Ji,OAuthProvider:Io,SAMLAuthProvider:uu,PhoneAuthProvider:up,PhoneMultiFactorGenerator:I0,RecaptchaVerifier:hv,TwitterAuthProvider:Kc,Auth:mh,AuthCredential:ga,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.4.2")}(te.Z)},4303:(Et,Me,O)=>{O.d(Me,{Jn:()=>Fn,KN:()=>sr,Mq:()=>yn,Xd:()=>it,ZF:()=>ir,qX:()=>Je});var f=O(5861),te=O(4537),L=O(7879),J=O(9058),oe=O(1878);class ve{constructor(W){this.container=W}getPlatformInfoString(){return this.container.getProviders().map(we=>{if(function Ee(Ce){const W=Ce.getComponent();return"VERSION"===W?.type}(we)){const Xe=we.getImmediate();return`${Xe.library}/${Xe.version}`}return null}).filter(we=>we).join(" ")}}const Le="@firebase/app",U=new L.Yd("@firebase/app"),ce="[DEFAULT]",ye={[Le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ie=new Map,be=new Map;function Re(Ce,W){try{Ce.container.addComponent(W)}catch(we){U.debug(`Component ${W.name} failed to register with FirebaseApp ${Ce.name}`,we)}}function it(Ce){const W=Ce.name;if(be.has(W))return U.debug(`There were multiple attempts to register component ${W}.`),!1;be.set(W,Ce);for(const we of Ie.values())Re(we,Ce);return!0}function Je(Ce,W){const we=Ce.container.getProvider("heartbeat").getImmediate({optional:!0});return we&&we.triggerHeartbeat(),Ce.container.getProvider(W)}const Tt=new J.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Mn{constructor(W,we,Xe){this._isDeleted=!1,this._options=Object.assign({},W),this._config=Object.assign({},we),this._name=we.name,this._automaticDataCollectionEnabled=we.automaticDataCollectionEnabled,this._container=Xe,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(W){this.checkDestroyed(),this._automaticDataCollectionEnabled=W}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(W){this._isDeleted=W}checkDestroyed(){if(this.isDeleted)throw Tt.create("app-deleted",{appName:this._name})}}const Fn="10.4.0";function ir(Ce,W={}){let we=Ce;"object"!=typeof W&&(W={name:W});const Xe=Object.assign({name:ce,automaticDataCollectionEnabled:!1},W),st=Xe.name;if("string"!=typeof st||!st)throw Tt.create("bad-app-name",{appName:String(st)});if(we||(we=(0,J.aH)()),!we)throw Tt.create("no-options");const At=Ie.get(st);if(At){if((0,J.vZ)(we,At.options)&&(0,J.vZ)(Xe,At.config))return At;throw Tt.create("duplicate-app",{appName:st})}const mn=new te.H0(st);for(const j of be.values())mn.addComponent(j);const $=new Mn(we,Xe,mn);return Ie.set(st,$),$}function yn(Ce=ce){const W=Ie.get(Ce);if(!W&&Ce===ce&&(0,J.aH)())return ir();if(!W)throw Tt.create("no-app",{appName:Ce});return W}function sr(Ce,W,we){var Xe;let st=null!==(Xe=ye[Ce])&&void 0!==Xe?Xe:Ce;we&&(st+=`-${we}`);const At=st.match(/\s|\//),mn=W.match(/\s|\//);if(At||mn){const $=[`Unable to register library "${st}" with version "${W}":`];return At&&$.push(`library name "${st}" contains illegal characters (whitespace or "/")`),At&&mn&&$.push("and"),mn&&$.push(`version name "${W}" contains illegal characters (whitespace or "/")`),void U.warn($.join(" "))}it(new te.wA(`${st}-version`,()=>({library:st,version:W}),"VERSION"))}const ha="firebase-heartbeat-database",Mt=1,Ut="firebase-heartbeat-store";let qt=null;function An(){return qt||(qt=(0,oe.X3)(ha,Mt,{upgrade:(Ce,W)=>{0===W&&Ce.createObjectStore(Ut)}}).catch(Ce=>{throw Tt.create("idb-open",{originalErrorMessage:Ce.message})})),qt}function lr(){return(lr=(0,f.Z)(function*(Ce){try{return yield(yield An()).transaction(Ut).objectStore(Ut).get(go(Ce))}catch(W){if(W instanceof J.ZR)U.warn(W.message);else{const we=Tt.create("idb-get",{originalErrorMessage:W?.message});U.warn(we.message)}}})).apply(this,arguments)}function gn(Ce,W){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,f.Z)(function*(Ce,W){try{const Xe=(yield An()).transaction(Ut,"readwrite");yield Xe.objectStore(Ut).put(W,go(Ce)),yield Xe.done}catch(we){if(we instanceof J.ZR)U.warn(we.message);else{const Xe=Tt.create("idb-set",{originalErrorMessage:we?.message});U.warn(Xe.message)}}})).apply(this,arguments)}function go(Ce){return`${Ce.name}!${Ce.options.appId}`}class dn{constructor(W){this.container=W,this._heartbeatsCache=null;const we=this.container.getProvider("app").getImmediate();this._storage=new $o(we),this._heartbeatsCachePromise=this._storage.read().then(Xe=>(this._heartbeatsCache=Xe,Xe))}triggerHeartbeat(){var W=this;return(0,f.Z)(function*(){const Xe=W.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),st=Xi();if(null===W._heartbeatsCache&&(W._heartbeatsCache=yield W._heartbeatsCachePromise),W._heartbeatsCache.lastSentHeartbeatDate!==st&&!W._heartbeatsCache.heartbeats.some(At=>At.date===st))return W._heartbeatsCache.heartbeats.push({date:st,agent:Xe}),W._heartbeatsCache.heartbeats=W._heartbeatsCache.heartbeats.filter(At=>{const mn=new Date(At.date).valueOf();return Date.now()-mn<=2592e6}),W._storage.overwrite(W._heartbeatsCache)})()}getHeartbeatsHeader(){var W=this;return(0,f.Z)(function*(){if(null===W._heartbeatsCache&&(yield W._heartbeatsCachePromise),null===W._heartbeatsCache||0===W._heartbeatsCache.heartbeats.length)return"";const we=Xi(),{heartbeatsToSend:Xe,unsentEntries:st}=function mo(Ce,W=1024){const we=[];let Xe=Ce.slice();for(const st of Ce){const At=we.find(mn=>mn.agent===st.agent);if(At){if(At.dates.push(st.date),Jr(we)>W){At.dates.pop();break}}else if(we.push({agent:st.agent,dates:[st.date]}),Jr(we)>W){we.pop();break}Xe=Xe.slice(1)}return{heartbeatsToSend:we,unsentEntries:Xe}}(W._heartbeatsCache.heartbeats),At=(0,J.L)(JSON.stringify({version:2,heartbeats:Xe}));return W._heartbeatsCache.lastSentHeartbeatDate=we,st.length>0?(W._heartbeatsCache.heartbeats=st,yield W._storage.overwrite(W._heartbeatsCache)):(W._heartbeatsCache.heartbeats=[],W._storage.overwrite(W._heartbeatsCache)),At})()}}function Xi(){return(new Date).toISOString().substring(0,10)}class $o{constructor(W){this.app=W,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,J.hl)()&&(0,J.eu)().then(()=>!0).catch(()=>!1)})()}read(){var W=this;return(0,f.Z)(function*(){return(yield W._canUseIndexedDBPromise)&&(yield function Un(Ce){return lr.apply(this,arguments)}(W.app))||{heartbeats:[]}})()}overwrite(W){var we=this;return(0,f.Z)(function*(){var Xe;if(yield we._canUseIndexedDBPromise){const At=yield we.read();return gn(we.app,{lastSentHeartbeatDate:null!==(Xe=W.lastSentHeartbeatDate)&&void 0!==Xe?Xe:At.lastSentHeartbeatDate,heartbeats:W.heartbeats})}})()}add(W){var we=this;return(0,f.Z)(function*(){var Xe;if(yield we._canUseIndexedDBPromise){const At=yield we.read();return gn(we.app,{lastSentHeartbeatDate:null!==(Xe=W.lastSentHeartbeatDate)&&void 0!==Xe?Xe:At.lastSentHeartbeatDate,heartbeats:[...At.heartbeats,...W.heartbeats]})}})()}}function Jr(Ce){return(0,J.L)(JSON.stringify({version:2,heartbeats:Ce})).length}!function Ks(Ce){it(new te.wA("platform-logger",W=>new ve(W),"PRIVATE")),it(new te.wA("heartbeat",W=>new dn(W),"PRIVATE")),sr(Le,"0.9.19",Ce),sr(Le,"0.9.19","esm2017"),sr("fire-js","")}("")},4537:(Et,Me,O)=>{O.d(Me,{H0:()=>Le,wA:()=>L});var f=O(5861),te=O(9058);class L{constructor(U,G,re){this.name=U,this.instanceFactory=G,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const J="[DEFAULT]";class oe{constructor(U,G){this.name=U,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const G=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(G)){const re=new te.BH;if(this.instancesDeferred.set(G,re),this.isInitialized(G)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:G});We&&re.resolve(We)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(U){var G;const re=this.normalizeInstanceIdentifier(U?.identifier),We=null!==(G=U?.optional)&&void 0!==G&&G;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(Oe){if(We)return null;throw Oe}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function Ee(fe){return"EAGER"===fe.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:J})}catch{}for(const[G,re]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(G);try{const Oe=this.getOrInitializeService({instanceIdentifier:We});re.resolve(Oe)}catch{}}}}clearInstance(U=J){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,f.Z)(function*(){const G=Array.from(U.instances.values());yield Promise.all([...G.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...G.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=J){return this.instances.has(U)}getOptions(U=J){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:G={}}=U,re=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:re,options:G});for(const[Oe,et]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(Oe)&&et.resolve(We);return We}onInit(U,G){var re;const We=this.normalizeInstanceIdentifier(G),Oe=null!==(re=this.onInitCallbacks.get(We))&&void 0!==re?re:new Set;Oe.add(U),this.onInitCallbacks.set(We,Oe);const et=this.instances.get(We);return et&&U(et,We),()=>{Oe.delete(U)}}invokeOnInitCallbacks(U,G){const re=this.onInitCallbacks.get(G);if(re)for(const We of re)try{We(U,G)}catch{}}getOrInitializeService({instanceIdentifier:U,options:G={}}){let re=this.instances.get(U);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=U,fe===J?void 0:fe),options:G}),this.instances.set(U,re),this.instancesOptions.set(U,G),this.invokeOnInitCallbacks(re,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,re)}catch{}var fe;return re||null}normalizeInstanceIdentifier(U=J){return this.component?this.component.multipleInstances?U:J:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Le{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const G=this.getProvider(U.name);if(G.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);G.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const G=new oe(U,this);return this.providers.set(U,G),G}getProviders(){return Array.from(this.providers.values())}}},7879:(Et,Me,O)=>{O.d(Me,{Am:()=>fe,Ub:()=>Le,Yd:()=>Ee,in:()=>te});const f=[];var te=function(U){return U[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",U}(te||{});const L={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},J=te.INFO,oe={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},ve=(U,G,...re)=>{if(G<U.logLevel)return;const We=(new Date).toISOString(),Oe=oe[G];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Oe](`[${We}]  ${U.name}:`,...re)};class Ee{constructor(G){this.name=G,this._logLevel=J,this._logHandler=ve,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in te))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...G),this._logHandler(this,te.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...G),this._logHandler(this,te.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,te.INFO,...G),this._logHandler(this,te.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,te.WARN,...G),this._logHandler(this,te.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...G),this._logHandler(this,te.ERROR,...G)}}function Le(U){f.forEach(G=>{G.setLogLevel(U)})}function fe(U,G){for(const re of f){let We=null;G&&G.level&&(We=L[G.level]),re.userLogHandler=null===U?null:(Oe,et,...Ve)=>{const tt=Ve.map(Ue=>{if(null==Ue)return null;if("string"==typeof Ue)return Ue;if("number"==typeof Ue||"boolean"==typeof Ue)return Ue.toString();if(Ue instanceof Error)return Ue.message;try{return JSON.stringify(Ue)}catch{return null}}).filter(Ue=>Ue).join(" ");et>=(We??Oe.logLevel)&&U({level:te[et].toLowerCase(),message:tt,args:Ve,type:Oe.name})}}}},1878:(Et,Me,O)=>{O.d(Me,{X3:()=>wt});var f=O(5861);const te=(de,Q)=>Q.some(Qe=>de instanceof Qe);let L,J;const Ee=new WeakMap,Le=new WeakMap,fe=new WeakMap,U=new WeakMap,G=new WeakMap;let Oe={get(de,Q,Qe){if(de instanceof IDBTransaction){if("done"===Q)return Le.get(de);if("objectStoreNames"===Q)return de.objectStoreNames||fe.get(de);if("store"===Q)return Qe.objectStoreNames[1]?void 0:Qe.objectStore(Qe.objectStoreNames[0])}return Ue(de[Q])},set:(de,Q,Qe)=>(de[Q]=Qe,!0),has:(de,Q)=>de instanceof IDBTransaction&&("done"===Q||"store"===Q)||Q in de};function tt(de){return"function"==typeof de?function Ve(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return J||(J=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...Q){return de.apply(bt(this),Q),Ue(Ee.get(this))}:function(...Q){return Ue(de.apply(bt(this),Q))}:function(Q,...Qe){const Dt=de.call(bt(this),Q,...Qe);return fe.set(Dt,Q.sort?Q.sort():[Q]),Ue(Dt)}}(de):(de instanceof IDBTransaction&&function We(de){if(Le.has(de))return;const Q=new Promise((Qe,Dt)=>{const pn=()=>{de.removeEventListener("complete",Rn),de.removeEventListener("error",Pn),de.removeEventListener("abort",Pn)},Rn=()=>{Qe(),pn()},Pn=()=>{Dt(de.error||new DOMException("AbortError","AbortError")),pn()};de.addEventListener("complete",Rn),de.addEventListener("error",Pn),de.addEventListener("abort",Pn)});Le.set(de,Q)}(de),te(de,function oe(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,Oe):de)}function Ue(de){if(de instanceof IDBRequest)return function re(de){const Q=new Promise((Qe,Dt)=>{const pn=()=>{de.removeEventListener("success",Rn),de.removeEventListener("error",Pn)},Rn=()=>{Qe(Ue(de.result)),pn()},Pn=()=>{Dt(de.error),pn()};de.addEventListener("success",Rn),de.addEventListener("error",Pn)});return Q.then(Qe=>{Qe instanceof IDBCursor&&Ee.set(Qe,de)}).catch(()=>{}),G.set(Q,de),Q}(de);if(U.has(de))return U.get(de);const Q=tt(de);return Q!==de&&(U.set(de,Q),G.set(Q,de)),Q}const bt=de=>G.get(de);function wt(de,Q,{blocked:Qe,upgrade:Dt,blocking:pn,terminated:Rn}={}){const Pn=indexedDB.open(de,Q),Zn=Ue(Pn);return Dt&&Pn.addEventListener("upgradeneeded",Gn=>{Dt(Ue(Pn.result),Gn.oldVersion,Gn.newVersion,Ue(Pn.transaction),Gn)}),Qe&&Pn.addEventListener("blocked",Gn=>Qe(Gn.oldVersion,Gn.newVersion,Gn)),Zn.then(Gn=>{Rn&&Gn.addEventListener("close",()=>Rn()),pn&&Gn.addEventListener("versionchange",Dr=>pn(Dr.oldVersion,Dr.newVersion,Dr))}).catch(()=>{}),Zn}const Ae=["get","getKey","getAll","getAllKeys","count"],se=["put","add","delete","clear"],xe=new Map;function He(de,Q){if(!(de instanceof IDBDatabase)||Q in de||"string"!=typeof Q)return;if(xe.get(Q))return xe.get(Q);const Qe=Q.replace(/FromIndex$/,""),Dt=Q!==Qe,pn=se.includes(Qe);if(!(Qe in(Dt?IDBIndex:IDBObjectStore).prototype)||!pn&&!Ae.includes(Qe))return;const Rn=function(){var Pn=(0,f.Z)(function*(Zn,...Gn){const Dr=this.transaction(Zn,pn?"readwrite":"readonly");let ce=Dr.store;return Dt&&(ce=ce.index(Gn.shift())),(yield Promise.all([ce[Qe](...Gn),pn&&Dr.done]))[0]});return function(Gn){return Pn.apply(this,arguments)}}();return xe.set(Q,Rn),Rn}!function et(de){Oe=de(Oe)}(de=>({...de,get:(Q,Qe,Dt)=>He(Q,Qe)||de.get(Q,Qe,Dt),has:(Q,Qe)=>!!He(Q,Qe)||de.has(Q,Qe)}))},5861:(Et,Me,O)=>{function f(L,J,oe,ve,Ee,Le,fe){try{var U=L[Le](fe),G=U.value}catch(re){return void oe(re)}U.done?J(G):Promise.resolve(G).then(ve,Ee)}function te(L){return function(){var J=this,oe=arguments;return new Promise(function(ve,Ee){var Le=L.apply(J,oe);function fe(G){f(Le,ve,Ee,fe,U,"next",G)}function U(G){f(Le,ve,Ee,fe,U,"throw",G)}fe(void 0)})}}O.d(Me,{Z:()=>te})},7582:(Et,Me,O)=>{function J(ce,ye){var Ie={};for(var be in ce)Object.prototype.hasOwnProperty.call(ce,be)&&ye.indexOf(be)<0&&(Ie[be]=ce[be]);if(null!=ce&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(be=Object.getOwnPropertySymbols(ce);Re<be.length;Re++)ye.indexOf(be[Re])<0&&Object.prototype.propertyIsEnumerable.call(ce,be[Re])&&(Ie[be[Re]]=ce[be[Re]])}return Ie}function re(ce,ye,Ie,be){return new(Ie||(Ie=Promise))(function(Fe,it){function Je(cn){try{Rt(be.next(cn))}catch(Tt){it(Tt)}}function Qn(cn){try{Rt(be.throw(cn))}catch(Tt){it(Tt)}}function Rt(cn){cn.done?Fe(cn.value):function Re(Fe){return Fe instanceof Ie?Fe:new Ie(function(it){it(Fe)})}(cn.value).then(Je,Qn)}Rt((be=be.apply(ce,ye||[])).next())})}function ue(ce){return this instanceof ue?(this.v=ce,this):new ue(ce)}function Ae(ce,ye,Ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,be=Ie.apply(ce,ye||[]),Fe=[];return Re={},it("next"),it("throw"),it("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function it(Mn){be[Mn]&&(Re[Mn]=function(Fn){return new Promise(function(ir,yn){Fe.push([Mn,Fn,ir,yn])>1||Je(Mn,Fn)})})}function Je(Mn,Fn){try{!function Qn(Mn){Mn.value instanceof ue?Promise.resolve(Mn.value.v).then(Rt,cn):Tt(Fe[0][2],Mn)}(be[Mn](Fn))}catch(ir){Tt(Fe[0][3],ir)}}function Rt(Mn){Je("next",Mn)}function cn(Mn){Je("throw",Mn)}function Tt(Mn,Fn){Mn(Fn),Fe.shift(),Fe.length&&Je(Fe[0][0],Fe[0][1])}}function xe(ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,ye=ce[Symbol.asyncIterator];return ye?ye.call(ce):(ce=function Ve(ce){var ye="function"==typeof Symbol&&Symbol.iterator,Ie=ye&&ce[ye],be=0;if(Ie)return Ie.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&be>=ce.length&&(ce=void 0),{value:ce&&ce[be++],done:!ce}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(ce),Ie={},be("next"),be("throw"),be("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie);function be(Fe){Ie[Fe]=ce[Fe]&&function(it){return new Promise(function(Je,Qn){!function Re(Fe,it,Je,Qn){Promise.resolve(Qn).then(function(Rt){Fe({value:Rt,done:Je})},it)}(Je,Qn,(it=ce[Fe](it)).done,it.value)})}}}O.d(Me,{FC:()=>Ae,KL:()=>xe,_T:()=>J,mG:()=>re,qq:()=>ue}),"function"==typeof SuppressedError&&SuppressedError}},Et=>{Et(Et.s=6622)}]);